{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"funny docs","text":"<p>Github Web | Gitee Web</p> <p>\u751f\u547d\u4e2d\u6700\u7f8e\u597d\u7684\u4e8b\u60c5\u4e4b\u4e00\u5c31\u662f\u4e0d\u65ad\u5b66\u4e60\u65b0\u77e5\u8bc6\uff0c\u5e76\u4e0e\u5176\u4ed6\u4eba\u5206\u4eab\u3002</p> <p>\u901a\u8fc7\u8bb0\u5f55\u8fd9\u4e9b\u6709\u8da3\u7684\u77e5\u8bc6\u548c\u7ecf\u5386\uff0c\u6211\u4eec\u53ef\u4ee5\u5e2e\u52a9\u81ea\u5df1\u66f4\u6df1\u5165\u5730\u7406\u89e3\u5b83\u4eec\uff0c\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9\u5176\u4ed6\u4eba\u3002</p> <p>\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u867d\u7136\u4e5f\u8bb8\u4f1a\u9047\u5230\u6311\u6218\u548c\u56f0\u96be\uff0c\u4f46\u5f53\u4f60\u770b\u7740\u4f60\u7684\u7b14\u8bb0\u548c\u6587\u7ae0\uff0c\u770b\u7740\u4f60\u6d89\u8db3\u548c\u63a2\u7d22\u7684\u65b0\u9886\u57df\uff0c\u4f60\u4f1a\u611f\u5230\u65e0\u6bd4\u5feb\u4e50\u548c\u6ee1\u8db3\u3002</p> <p>\u56e0\u6b64\uff0c\u4e0d\u8981\u5bb3\u6015\u72af\u9519\uff0c\u4e0d\u8981\u5bb3\u6015\u5931\u8d25\uff0c\u5f00\u59cb\u4f60\u7684\u63a2\u7d22\u4e4b\u65c5\uff0c\u8ba9\u6211\u4eec\u4e00\u8d77\u8bb0\u5f55\u3001\u5206\u4eab\u3001\u6210\u957f\uff01</p>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/","title":"Docker\u5165\u95e8","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_1","title":"\u5b89\u88c5","text":""},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_2","title":"\u5b98\u65b9\u4ed3\u5e93\u5b89\u88c5","text":"<pre><code># \u66f4\u65b0\u8f6f\u4ef6\u5305\u7d22\u5f15\u5e76\u5b89\u88c5\u8f6f\u4ef6\u5305\u4ee5\u5141\u8bb8\u4f7f\u7528 \u57fa\u4e8e HTTPS \u7684\u5b58\u50a8\u5e93\nsudo apt update\nsudo apt-get install ca-certificates curl gnupg\n# \u6dfb\u52a0 Docker \u7684\u5b98\u65b9 GPG \u5bc6\u94a5\nsudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n# \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8bbe\u7f6e\u5b58\u50a8\u5e93\necho \\\n\"deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  \"$(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\")\" stable\" | \\\nsudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n\n# \u5b89\u88c5 Docker \u5f15\u64ce\nsudo apt update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n</code></pre>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_3","title":"\u963f\u91cc\u4e91\u955c\u50cf\u5b89\u88c5","text":"<pre><code># step 1: \u5b89\u88c5\u5fc5\u8981\u7684\u4e00\u4e9b\u7cfb\u7edf\u5de5\u5177\nsudo apt-get update\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\n# step 2: \u5b89\u88c5GPG\u8bc1\u4e66\ncurl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n# Step 3: \u5199\u5165\u8f6f\u4ef6\u6e90\u4fe1\u606f\nsudo add-apt-repository \"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n# Step 4: \u66f4\u65b0\u5e76\u5b89\u88c5Docker-CE\nsudo apt-get -y update\nsudo apt-get -y install docker-ce\n\n# \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684Docker-CE:\n# Step 1: \u67e5\u627eDocker-CE\u7684\u7248\u672c:\n# apt-cache madison docker-ce\n#   docker-ce | 17.03.1~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages\n#   docker-ce | 17.03.0~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages\n# Step 2: \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684Docker-CE: (VERSION\u4f8b\u5982\u4e0a\u9762\u768417.03.1~ce-0~ubuntu-xenial)\n# sudo apt-get -y install docker-ce=[VERSION]\n</code></pre> <p>\u5b89\u88c5\u5b8c\u4e4b\u540e\u6821\u9a8c\uff1a</p> <pre><code>sudo docker run hello-world\n</code></pre> <p>\u770b\u5230\u8fd9\u6837\u7684\u8f93\u51fa\u5c31\u8bf4\u660e\u6ca1\u95ee\u9898\uff1a</p> <pre><code>Hello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n    (amd64)\n3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker ID:\n https://hub.docker.com/\n\nFor more examples and ideas, visit:\n https://docs.docker.com/get-started/\n</code></pre>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_4","title":"\u57fa\u672c\u4f7f\u7528","text":""},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#python","title":"\u62c9\u53d6Python\u955c\u50cf","text":"<pre><code>sudo docker pull python:3.11\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>3.11: Pulling from library/python\nd52e4f012db1: Pull complete 7dd206bea61f: Pull complete 2320f9be4a9c: Pull complete 6e5565e0ba8d: Pull complete d3797e13cc41: Pull complete 70f90dfe001b: Pull complete bd75605de417: Pull complete 3d0e1a4b14bc: Pull complete Digest: sha256:d73088ce13d5a1eec1dd05b47736041ae6921d08d2f240035d99642db98bc8d4\nStatus: Downloaded newer image for python:3.11\ndocker.io/library/python:3.11\n</code></pre>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_5","title":"\u67e5\u770b\u5f53\u524d\u6240\u6709\u955c\u50cf","text":"<pre><code>sudo docker images\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>$ sudo docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npython              3.11                c0e63845ae98        4 weeks ago         1.01GB\nhello-world         latest              9c7a54a9a43c        2 months ago        13.3kB\n</code></pre>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_6","title":"\u521b\u5efa\u5e76\u8fdb\u5165\u5bb9\u5668","text":"<pre><code>sudo docker run -it --name python311 python:3.11 /bin/bash\n</code></pre> <p>\u7ed9\u5bb9\u5668\u53d6\u4e2a\u540d\u5b57\uff1a<code>--name python311</code> \uff0c\u540d\u5b57\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff1b</p> <p>\u8f93\u51fa\uff1a</p> <pre><code>sudo docker run -it --name python311 python:3.11 /bin/bash\nroot@627d0744c2d5:/#\n</code></pre> <p>\u67e5\u770b\u4e0b\u5bb9\u5668\u7684\u7cfb\u7edf\u73af\u5883\uff1a</p> <pre><code># \u67e5\u8be2\u5bb9\u5668\u7cfb\u7edf\u7684\u73af\u5883\nroot@627d0744c2d5:/# cat /etc/os-release PRETTY_NAME=\"Debian GNU/Linux 12 (bookworm)\"\nNAME=\"Debian GNU/Linux\"\nVERSION_ID=\"12\"\nVERSION=\"12 (bookworm)\"\nVERSION_CODENAME=bookworm\nID=debian\nHOME_URL=\"https://www.debian.org/\"\nSUPPORT_URL=\"https://www.debian.org/support\"\nBUG_REPORT_URL=\"https://bugs.debian.org/\"\n# \u67e5\u8be2Python\u7684\u73af\u5883\nroot@627d0744c2d5:/# python --version\nPython 3.11.4\nroot@627d0744c2d5:/# pip3 list\nPackage    Version\n---------- -------\npip        23.1.2\nsetuptools 65.5.1\nwheel      0.40.0\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u6211\u4eec\u4ece <code>Docker</code> \u5b98\u65b9\u62c9\u53d6\u7684Python\u955c\u50cf\u662f\u57fa\u4e8e <code>Debian 12</code> \u6784\u5efa\u7684\uff0c<code>Python</code> \u7248\u672c\u4e3a\uff1a<code>3.11.4</code></p> <p>\u8fd9\u91cc\u662f\u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\uff0c\u4f7f\u7528 <code>exit</code> \u9000\u51fa\u4e4b\u540e\uff0c\u5bb9\u5668\u5c31\u505c\u4e86\u3002</p>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_7","title":"\u67e5\u770b\u5f53\u524d\u6240\u6709\u5bb9\u5668","text":"<pre><code>sudo docker ps -a\n</code></pre> <p>\u8fd9\u91cc\u4e3b\u8981\u8f93\u51fa\uff1a\u5bb9\u5668ID\u3001\u955c\u50cf\u540d\u79f0\u3001\u521b\u5efa\u65f6\u95f4\u3001\u72b6\u6001\u3001\u5bb9\u5668\u540d\u79f0</p>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_8","title":"\u542f\u52a8\u5bb9\u5668","text":"<pre><code>sudo docker start \u5bb9\u5668\u540d/\u5bb9\u5668id\n</code></pre> <pre><code>$ sudo docker start python311\npython311\n</code></pre> <p>\u8868\u793a\u6b64\u5bb9\u5668\u5df2\u7ecf\u542f\u52a8\u4e86\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>sudo docker ps -a</code> \u67e5\u770b\u4e00\u4e0b\u201c\u72b6\u6001\u201d\uff1b</p>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_9","title":"\u8fdb\u5165\u5bb9\u5668","text":"<p>\u542f\u52a8\u4e4b\u540e\u624d\u80fd\u8fdb\u5165\u5bb9\u5668\uff1b</p> <p>1\u3001docker attach</p> <pre><code>sudo docker attach \u5bb9\u5668\u540d/\u5bb9\u5668id\n</code></pre> <pre><code>$ sudo docker attach python311\nroot@9b4b3dc24c32:/#\n</code></pre> <p>\u4f7f\u7528 exit \u9000\u51fa\u5bb9\u5668\uff0c\u5bb9\u5668\u4f1a\u505c\u6b62\uff1b</p> <p>2\u3001docker exec</p> <pre><code>sudo docker exec -it \u5bb9\u5668\u540d/\u5bb9\u5668id /bin/bash\n</code></pre> <pre><code>$ sudo docker exec -it python311 /bin/bash\nroot@9b4b3dc24c32:/#\n</code></pre> <p>\u6ce8\u610f\uff0c\u4f7f\u7528 exit \u9000\u51fa\u5bb9\u5668\uff0c\u5bb9\u5668\u4e0d\u4f1a\u505c\u6b62\uff1b</p>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#_10","title":"\u5220\u9664\u5bb9\u5668","text":"<pre><code>sudo docker rm \u5bb9\u5668\u540d/\u955c\u50cf\u540d\n</code></pre>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#pycharm-docker-python","title":"Pycharm \u914d\u7f6e Docker \u5bb9\u5668\u5185 Python \u73af\u5883","text":""},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#1ssh","title":"1\u3001ssh \u65b9\u5f0f\u6307\u5b9a\u8fdc\u7a0b","text":"<p>\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u5728\u5bb9\u5668\u91cc\u9762\u5b89\u88c5 ssh \u670d\u52a1</p> <pre><code># \u5b89\u88c5sudo\napt-get install sudo\n# \u542f\u52a8SSH\u670d\u52a1\nsudo apt-get install openssh-server\nsudo /etc/init.d/ssh start\n# \u67e5\u770bSSH\u670d\u52a1\u7684\u72b6\u6001\nsudo service ssh status\n# \u8bbe\u7f6eroot\u5bc6\u7801\npasswd root\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6</p> <pre><code>vim /etc/ssh/sshd_config\n</code></pre> <p>\u589e\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#\u542f\u7528 RSA \u8ba4\u8bc1\nRSAAuthentication yes #\u542f\u7528\u516c\u94a5\u79c1\u94a5\u914d\u5bf9\u8ba4\u8bc1\u65b9\u5f0f\nPubkeyAuthentication yes #\u516c\u94a5\u6587\u4ef6\u8def\u5f84\uff08\u548c\u4e0a\u9762\u751f\u6210\u7684\u6587\u4ef6\u540c\uff09\nAuthorizedKeysFile .ssh/authorized_keys #root\u80fd\u4f7f\u7528ssh\u767b\u5f55\nPermitRootLogin yes </code></pre> <p>\u91cd\u542fSSH</p> <pre><code>service ssh restart\n</code></pre> <p>\u7136\u540e\u5c31\u662f\u914d\u7f6e <code>Pycharm</code>\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u8003\u8fd9\u91cc\uff1ahttp://youqu-dev.uniontech.com/AT\u5f00\u53d1\u89c4\u8303.html#id22</p>"},{"location":"Linux/Docker%E5%85%A5%E9%97%A8/#2tcp","title":"2\u3001TCP \u8fde\u63a5","text":"<p>\u9996\u5148\uff0c\u914d\u7f6e\u6587\u4ef6\uff1a</p> <pre><code>sudo vim /etc/docker/daemon.json\n</code></pre> <p>\u5199\u5165\uff1a</p> <pre><code>{\n\"hosts\": [\"tcp://0.0.0.0:2375\",\"unix:///var/run/docker.sock\"]\n}\n</code></pre> <p>\u7136\u540e\uff0c\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1a</p> <pre><code>sudo vim /etc/systemd/system/docker.service\n</code></pre> <p>\u8fd9\u5230 <code>ExecStart</code>\uff0c\u6539\u6210\uff1a</p> <pre><code>[Service]\nExecStart=/usr/bin/dockerd\n</code></pre> <p>\u6700\u540e\u91cd\u542f\u670d\u52a1\uff1a</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart docker.service\n</code></pre> <p>\u5728 <code>Pycharm</code> \u6dfb\u52a0\u89e3\u91ca\u5668\u754c\u9762\uff1a</p> <p></p> <p></p> <p>\u8f93\u5165\uff1a<code>tcp://0.0.0.0:2375</code></p> <p>\u70b9\u3010OK\u3011\u5c31\u884c\u4e86\u3002</p>"},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/","title":"FTP\u670d\u52a1\u642d\u5efa","text":""},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install vsftpd\n</code></pre>"},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/#_2","title":"\u914d\u7f6e\u7528\u6237","text":"<p>\u6dfb\u52a0\u7528\u6237\u7ec4</p> <pre><code>sudo groupadd ftpgroup\n</code></pre> <p>\u914d\u7f6e <code>FTP</code> \u8bbf\u95ee\u7528\u6237 <code>uos</code></p> <pre><code>sudo useradd -g ftpgroup -M -s /bin/bash uos\n</code></pre> <p>\u914d\u7f6e <code>FTP</code> \u8bbf\u95ee\u5bc6\u7801</p> <pre><code>sudo passwd uos\n</code></pre> <p>\u4e4b\u540e\u8f93\u5165 2 \u6b21\u5bc6\u7801\u5373\u53ef\uff1b</p>"},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/#_3","title":"\u4fee\u6539\u914d\u7f6e\u9879","text":"<pre><code>sudo vim /etc/vsftpd.conf\n</code></pre> <p>\u914d\u7f6e\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code># \u6587\u4ef6\u7f16\u7801\nutf8_filesystem=YES\n\n# \u5f00\u542f\u533f\u540d\u8bbf\u95ee\nanonymous_enable=YES\n\n# \u533f\u540d\u7528\u6237\u65e0\u5bc6\u7801\nno_anon_password=YES\n\n# \u9650\u5b9a\u533f\u540d\u7528\u6237\u76ee\u5f55\uff0c\u8def\u5f84\u53ef\u4ee5\u81ea\u5b9a\u4e49\nanon_root=/home/$USER/ftp\n\n# \u53ef\u5199\nwrite_enable=YES\n\n# \u533f\u540d\u4e0a\u4f20\nanon_upload_enable=YES\n\n# \u533f\u540d\u53ef\u5199\u6587\u4ef6\u5939\nanon_mkdir_write_enable=YES\n\n# \u5176\u4ed6\u7528\u6237\u533f\u540d\u53ef\u5199\nanon_other_write_enable=YES\n\n# \u533f\u540d\u7528\u6237\u521b\u5efa\u6587\u4ef6\u65f6\u6240\u5f97\u5230\u7684\u521d\u59cb\u6743\u9650\n# 022 \u65b0\u5efa\u7684\u76ee\u5f55\u6743\u9650\u4e3a755\uff0c\u65b0\u5efa\u7684\u6587\u4ef6\u6743\u9650\u4e3a644\nanon_umask=022\n# \u672c\u5730\u7528\u6237\nchroot_local_user=YES\n\n# \u7528\u6237\u5217\u8868\nchroot_list_enable=YES\n\n# \u7528\u6237\u5217\u8868\u6587\u4ef6\nchroot_list_file=/etc/vsftpd.chroot_list\n\n# \u6743\u9650\u7528\u6237\u76ee\u5f55\uff0c\u8def\u5f84\u53ef\u4ee5\u81ea\u5b9a\u4e49\nlocal_root=/ftp/ftp\n</code></pre> <p>\u914d\u7f6e\u7528\u6237\u5217\u8868\u6587\u4ef6\uff1a</p> <pre><code>sudo vim /etc/vsftpd.chroot_list\n</code></pre> <p>\u5199\u5165</p> <p>uos</p>"},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/#ftp_1","title":"\u521b\u5efaFTP\u76ee\u5f55","text":"<pre><code>sudo mkdir -p /ftp/ftp # \u6743\u9650\u8bbf\u95ee\u76ee\u5f55\nsudo mkdir -p /home/$USER/ftp # \u533f\u540d\u8bbf\u95ee\u76ee\u5f55\n</code></pre> <p>\u4fee\u6539\u76ee\u5f55\u6743\u9650</p> <pre><code>sudo chmod -R 777 /ftp/ftp\nsudo chmod -R 777 /home/$USER/ftp\n</code></pre>"},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/#_4","title":"\u91cd\u542f\u670d\u52a1","text":"<pre><code>sudo systemctl restart vsftpd.service\nsudo systemctl status vsftpd.service\n</code></pre>"},{"location":"Linux/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/#sftp","title":"SFTP","text":"<pre><code># Match Group mysftp \n# \u544a\u8bc9sshd\u8fdb\u7a0b\uff0cmysftp\u7528\u6237\u7ec4\u4e2d\u7684\u7528\u6237\u9002\u7528\u4e0b\u9762\u7684\u9650\u5236\uff1b\n# \u9650\u5236sftp\u7684\u6d3b\u52a8\u76ee\u5f55\u5728\u5176sftp\u76ee\u5f55\uff1b\nChrootDirectory /data/sftp  # \u9632\u6b62\u7528\u6237\u6267\u884c\u4ed6\u4eec\u81ea\u5df1\u81ea\u5b9a\u4e49\u7684\u547d\u4ee4\uff0c\u9650\u5236\u7528\u6237\u547d\u4ee4\u6267\u884c\u4e0a\u4e0b\u6587\u4e3asftp\uff1b\nForceCommand internal-sftp # \u7981\u6b62X11\u8f6c\u53d1\uff1b\nX11Forwarding no # \u7981\u6b62tcp\u8f6c\u53d1\uff1b\nAllowTcpForwarding no </code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/","title":"KVM\u5b89\u88c5\u914d\u7f6e\u53ca\u4f7f\u7528\u8bf4\u660e","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#kvm_1","title":"\u4e00\u3001\u5b89\u88c5 <code>KVM</code>","text":"<pre><code>sudo apt install -y libvirt0 libvirt-daemon qemu virt-manager bridge-utils libvirt-clients python-libvirt qemu-efi uml-utilities virtinst qemu-system\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_1","title":"\u4e8c\u3001\u547d\u4ee4\u5b89\u88c5\u955c\u50cf","text":""},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#1","title":"1\u3001\u521b\u5efa\u5b58\u50a8\u5377","text":"<pre><code>mkdir -p work/kvm;qemu-img create -f qcow2 /home/uos/work/kvm/autotest1.qcow2 80G\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#2","title":"2\u3001\u521b\u5efa\u865a\u62df\u673a","text":"<pre><code>virt-install \\\n--name autotest1 \\\n--memory 2048 \\\n--vcpus 1 \\\n--disk /home/uos/work/kvm/autotest1.qcow2,device=disk,bus=virtio \\\n--os-type=linux \\\n--os-variant debian10 \\\n--graphics spice \\\n--noreboot \\\n--boot hd \\\n--cdrom  \"/home/uos/Desktop/test.iso\" \\\n--connect qemu:///system \\\n--network type=direct,source=enp5s0f0,source_mode=bridge\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2","title":"\u4e09\u3001\u914d\u7f6e\u8fdc\u7a0b\u7ba1\u7406","text":""},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#1-libvirtd","title":"1\u3001\u589e\u52a0 <code>libvirtd</code> \u7528\u6237\u7ec4","text":"<pre><code>groupadd libvirtd\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#2_1","title":"2\u3001\u8bbe\u7f6e\u7528\u6237\u5230\u7ec4","text":"<pre><code>sudo usermod -a -G libvirtd $USER\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#3libvirtd","title":"3\u3001\u8bbe\u7f6e\u542f\u52a8libvirtd\u670d\u52a1\u7684\u7528\u6237\u7ec4","text":"<p><pre><code>sudo vi /etc/libvirt/libvirtd.conf\n</code></pre> \u5728\u5c3e\u884c\u5199\u5165 <pre><code>unix_sock_group = \"libvirtd\"\n</code></pre></p>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#4","title":"4\u3001\u589e\u52a0\u6743\u9650\u542f\u52a8\u914d\u7f6e","text":"<p><pre><code>sudo vi /etc/polkit-1/localauthority/50-local.d/50-org.libvirtd-group-access.pkla\n</code></pre> \u5199\u5165 <pre><code>[libvirtd group Management Access]\nIdentity=unix-group:libvirtd\nAction=org.libvirt.unix.manage\nResultAny=yes\nResultInactive=yes\nResultActive=yes\n</code></pre></p>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#5","title":"5\u3001\u91cd\u542f\u670d\u52a1","text":"<pre><code>sudo service libvirtd restart\n</code></pre>"},{"location":"Linux/KVM%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3","title":"\u56db\u3001\u5e38\u89c1\u95ee\u9898","text":"<p>1\u3001Requested operation is not valid: network 'default' is not active</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <pre><code>sudo virsh net-start default\nsudo virsh net-autostart default\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/","title":"Linux&amp;Shell\u57fa\u7840","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#linux","title":"linux\u57fa\u7840\u547d\u4ee4","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_1","title":"\u7528\u6237\u4e0e\u8eab\u4efd","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#1","title":"1\u3001\u7528\u6237","text":"<p>(1) Root \u662f\u7ba1\u7406\u5458\uff0c\u5149\u6807\u524d\u4e3a#</p> <p>(2) \u5176\u4ed6\u540d\u79f0\u4e3a\u666e\u901a\u7528\u6237\uff0c\u5149\u6807\u524d\u4e3a $</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#2","title":"2\u3001\u5207\u6362\u7528\u6237","text":"<p>(1) su - root \u8868\u793a\u5207\u6362\u5230\u7ba1\u7406\u5458\u6743\u9650\uff0c\u9700\u8981\u8f93\u5165\u5bc6\u7801\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528su -</p> <p>(2) u - \u5176\u4ed6\u7528\u6237\u540d\uff0c\u8868\u793a\u5207\u6362\u5230\u5176\u4ed6\u7528\u6237</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_2","title":"\u76ee\u5f55\u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#ls-list","title":"ls \u5217\u51fa\u5f53\u524d\u76ee\u5f55\u7684\u5185\u5bb9(list)","text":"<pre><code># \u8be6\u7ec6\u5217\u51fa\u5f53\u524d\u76ee\u5f55\u7684\u5217\u8868 \u5982\u5728root\u76ee\u5f55\u4e0bls -l \u4f1a\u663e\u793a\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u3002\nls -l # \u8be6\u7ec6\u5217\u51fa\u5f53\u524d\u76ee\u5f55\u7684\u5217\u8868\uff0c\u5e76\u4e14\u80fd\u591f\u4f18\u96c5\u7684\u663e\u793a\uff08\u53ef\u4ee5\u770b\u51fa\u6587\u4ef6\u5927\u5c0f\uff09\nls -l -h # \u540cls -l -h\nls -lh # (all)\u663e\u793a\u6240\u6709\u6587\u4ef6\uff08\u5305\u542b\u9690\u85cf\u6587\u4ef6\uff09\nls -a # (almost all) \u663e\u793a\u6240\u6709\u6587\u4ef6\uff0c\u4e0d\u663e\u793a.\u548c..(\u4e0d\u663e\u793a\u5f53\u524d\u76ee\u5f55\u548c\u5f53\u524d\u76ee\u5f55\u7684\u7236\u76ee\u5f55)\nls -A # \u53bb\u6389\u989c\u8272\nls --color=never # \u8868\u793a\u5c06root\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u663e\u793a\u51fa\u6765\uff08\u5305\u542b\u5b50\u76ee\u5f55\uff09\nls -R /root </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#cd","title":"cd \u6539\u53d8\u5de5\u4f5c\u76ee\u5f55","text":"<pre><code># \u4e0d\u52a0\u4efb\u4f55\u8def\u5f84\uff0c\u8868\u793a\u5feb\u6377\u76f4\u63a5\u56de\u5bb6\ncd # \u8868\u793a\u8fd4\u56de\u4e0a\u4e2a\u5207\u6362\u7684\u76ee\u5f55\ncd - # \u8868\u793a\u5207\u6362\u5230test\u76ee\u5f55\u4e0b\ncd  /root/tmp/test </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#pwd","title":"pwd \u663e\u793a\u5f53\u524d\u5171\u5de5\u4f5c\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#mkdir","title":"mkdir\u521b\u5efa\u4e00\u4e2a\u7a7a\u76ee\u5f55","text":"<pre><code># \u540c\u65f6\u521b\u5efa\u591a\u4e2a\u5e76\u5217\u6587\u4ef6\u5939\nmkdir a b c # \u540c\u65f6\u521b\u5efa\u591a\u4e2a\u5b58\u5728\u5c42\u7ea7\u5173\u7cfb\u7684\u6587\u4ef6\u76ee\u5f55\u3002\nmkdir -p zhang/li/wang # \u53ef\u663e\u793a\u547d\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\nmkdir -p -v zhang/li/wang </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#rmdir","title":"rmdir \u53ea\u80fd\u5220\u9664\u7a7a\u76ee\u5f55","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_3","title":"\u901a\u914d\u7b26","text":"<p>1\u3001* \u4ee3\u8868\u4efb\u610f\u4e00\u4e2a\uff081\u4e2a\u6216\u591a\u4e2a\uff09</p> <p>2\u3001\uff1f\u4ee3\u88681\u4f4d\uff0c\u4e14\u5fc5\u987b\u4e3a1\u4f4d</p> <p>3\u3001[  ]\u8868\u793a\u62ec\u53f7\u4e2d\u7684\u6bcf\u4e00\u4e2a</p> <ul> <li><code>ls test[ab]</code> \u7ed3\u679c\u662f <code>testa testb</code></li> <li><code>ls test[0-6]</code> \u7ed3\u679c\u662f \u4ece\u6700\u540e\u4e00\u4f4d\u662f <code>0-6</code> \u53d6\u5339\u914d</li> <li><code>ls test[a-Z]</code> \u7ed3\u679c\u662f \u4ece\u6700\u540e\u4e00\u4f4d\u662f\u6240\u6709\u5b57\u6bcd\u53bb\u5339\u914d</li> <li><code>[^a-c]</code> \u8868\u793a\u53d6\u53cd\uff0c\u5373\u975e <code>a-c</code> \u7684\u5b57\u7b26</li> </ul> <p>4\u3001<code>{  }</code> \u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u4e32\u4e4b\u95f4\u7528,\u95f4\u9694 \uff08<code>{sta,atb,stc}</code>\uff09</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_4","title":"\u6587\u4ef6\u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#touch","title":"touch \u65b0\u5efa\u6587\u672c\u6587\u4ef6","text":"<pre><code># \u65b0\u5efa\u4e00\u4e2atest.txt \u6587\u6863\ntouch test.txt\n# \u7f16\u8f91test\u8fd9\u4e2a\u6587\u6863\nvim test.txt\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#rm","title":"rm \u5220\u9664\u6587\u4ef6","text":"<pre><code># \u8868\u793a\u5220\u9664\u67d0\u4e2a\u6587\u4ef6\nrm -rf filename  </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#cp","title":"cp \u6587\u4ef6\u590d\u5236","text":"<pre><code># \u5c06test\u6587\u4ef6\u590d\u5236\u5230tmp\u76ee\u5f55\u4e2d,\u5e76\u547d\u540d\u4e3ahello\ncp  /root/test.txt  /tmp/hello.txt\n# \u590d\u5236\u76ee\u5f55\uff0c\u9700\u8981\u52a0 -r\ncp -r text2 /tmp # \u8fdc\u7a0b\u590d\u5236\u76ee\u5f55\u5230tmp\u4e0b\uff08\u5bf9\u65b9\u7684\u5730\u5740\u3001\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\nscp -r [root@192.168.1.47:/root/test2](mailto:root@192.168.1.47:/root/test2) /tmp\n# \u5c5e\u6027\u4e0d\u53d8\ncp  -p </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#mv","title":"mv \u6587\u4ef6\u79fb\u52a8","text":"<pre><code># \u79fb\u52a8test\u6587\u4ef6\u5230tmp\u76ee\u5f55\u4e0b\nmv  /root/test.txt  /tmp\n# \u5c06\u67d0\u4e2a\u6587\u4ef6\u91cd\u547d\u540d\nmv xxx.zip hhh.zip\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_5","title":"\u67e5\u770b\u6587\u4ef6","text":"<pre><code># \u76d1\u63a7\u6587\u4ef6\uff08tail -2f filename \u8868\u793a\u76d1\u63a7\u6587\u4ef6\u540e2\u884c\uff09\ntail -f filename\n# \u67e5\u770b\u5c3e\u90e8n\u884c\uff0c\u5982\u679c\u65e0\u9009\u9879\uff0c\u9ed8\u8ba410\u884c\u3002\ntail -n filename # \u4ece\u4e0a\u5230\u4e0b\u67e5\u770bn\u884c\uff0c\u5982\u679c\u65e0\u9009\u9879\uff0c\u9ed8\u8ba410\u884c\u3002\nhead -n filename # \u67e5\u770b\u6587\u672c\ncat filename # \u67e5\u770b\u6587\u6863\u5e76\u7f16\u53f7\ncat -n filename # \u67e5\u770b\u6587\u6863\u5185\u5bb9\uff0c\u5e76\u53bb\u9664\u7a7a\u884c\u7f16\u53f7\ncat -b filename # \u663e\u793a\u66f4\u591a\u5185\u5bb9\uff0c\u7a7a\u683c\u7ffb\u4e0b\u4e00\u9875\uff0c\u56de\u8f66\u7ffb\u4e0b\u4e00\u6761\nmore filename # \u663e\u793a\u6587\u6863\u5185\u5bb9\uff0c\u652f\u6301\u4e0a\u4e0b\u7ffb\u9875\uff0c\u9000\u51fa\u201cq\u201d\nless filename </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#vim","title":"vim \u6587\u4ef6\u7f16\u8f91","text":"<p>1\u3001\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f</p> <ul> <li> <p><code>i</code> \u8868\u793a\u5728\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u7f16\u8f91\u3002</p> </li> <li> <p><code>a</code> \u8868\u793a\u5728\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u5f00\u59cb\u7f16\u8f91\u3002</p> </li> <li> <p><code>o</code> \u8868\u793a\u5728\u5149\u6807\u4e0b\u4e00\u884c\u5f00\u59cb\u7f16\u8f91\u3002<code>O</code> \u5149\u6807\u4e0a\u4e00\u884c\u5f00\u59cb\u7f16\u8f91\u3002</p> </li> </ul> <p>2\u3001\u547d\u4ee4\u884c\u6a21\u5f0f</p> <ul> <li><code>0</code>\uff08\u96f6\uff09\u8df3\u5230\u884c\u9996\uff08\u4e0d\u80fd\u8df3\u5230\u884c\u9996\u524d\u7684\u7a7a\u683c\u5904\uff09</li> <li><code>^</code> \u8df3\u5230\u884c\u9996\uff08\u5305\u62ec\u7a7a\u683c\uff09</li> <li> <p><code>$</code> \u8df3\u5230\u884c\u5c3e</p> </li> <li> <p><code>gg</code> \u8df3\u5230\u7b2c\u4e00\u884c\u7684\u884c\u9996</p> </li> <li><code>GG</code> \u8df3\u5230\u6700\u540e\u4e00\u884c\u7684\u884c\u9996</li> <li><code>yy</code> \u590d\u5236\u5355\u884c\uff0c5yy\u6216y5y\u590d\u52365\u884c</li> <li><code>p</code> \u7c98\u8d34\uff0c\u5982\u679c\u590d\u5236\u662f1\u884c\uff0c\u5219p\u5230\u4e0b\u4e00\u884c\uff0c\u5982\u679c\u590d\u5236\u7684\u662f10\u884c\uff0c\u5219p\u7c98\u8d3410\u884c</li> <li><code>dd</code> \u5220\u9664\u4e00\u884c\uff0c5dd\u5220\u96645\u884c</li> <li><code>cc</code> \u5220\u9664\u4e00\u884c\uff0c\u5e76\u8fdb\u5165\u5220\u9664\u6a21\u5f0f</li> <li><code>x</code> \u5220\u9664\u5b57\u7b26</li> <li><code>dw</code> \u5220\u9664\u5355\u8bcd</li> <li> <p>\u67e5\u627e <code>/</code>\uff0c<code>n</code> \u5411\u4e0b\u7ffb\uff0c<code>N</code> \u5411\u4e0a\u7ffb</p> </li> <li> <p><code>w</code> \u6309\u5355\u8bcd\u8d70</p> </li> <li><code>u</code> \u64a4\u9500</li> </ul> <p>3\u3001\u5e95\u884c\u6a21\u5f0f</p> <ul> <li><code>:wq</code> \u4fdd\u5b58\u5e76\u9000\u51fa</li> <li><code>:q!</code> \u5f3a\u5236\u9000\u51fa</li> <li><code>/</code> \u67e5\u627e</li> <li><code>set ic</code> \u5ffd\u7565\u5927\u5c0f\u5199</li> <li><code>set noic</code> \u53d6\u6d88\u5ffd\u7565\u5927\u5c0f\u5199</li> <li><code>set nu</code> \u5185\u5bb9\u7f16\u53f7</li> <li><code>set nonu</code> \u53d6\u6d88\u5185\u5bb9\u7f16\u53f7</li> <li><code>%s/spool/linux/g</code> \u8868\u793a\u5c06\u6240\u6709\u7684 <code>spool</code> \u66ff\u6362\u4e3a <code>linux</code> \uff0c<code>g</code> \u662f\u56fa\u5b9a\u7528\u6cd5\u3002</li> </ul>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_6","title":"\u6587\u4ef6\u538b\u7f29\u548c\u89e3\u538b\u7f29","text":"<p>1\u3001gzip</p> <ul> <li>\u538b\u7f29\u5355\u4e2a\u6587\u4ef6\uff0c\u4ee5 <code>.gz</code> \u7ed3\u5c3e\uff0c\u538b\u7f29\u540e\u6e90\u6587\u4ef6\u4e0d\u5728\u4e86</li> </ul> <pre><code>gzip  file.gz  file1\n</code></pre> <ul> <li>\u89e3\u538b</li> </ul> <pre><code>gzip -d file.gz\n</code></pre> <ul> <li><code>gunzip</code> \u540c <code>gzip -d</code></li> </ul> <p>2\u3001bzip2</p> <ul> <li>\u538b\u7f29\u5355\u4e2a\u6587\u4ef6\uff0c\u4ee5.bz2\u7ed3\u5c3e</li> </ul> <pre><code>bzip2  file.bz2  file1\n</code></pre> <ul> <li>\u89e3\u538b</li> </ul> <pre><code>bzip2 -d file.bz2\n</code></pre> <ul> <li><code>bunzip2</code> \u540c <code>bzip2 -d</code></li> </ul> <p>3\u3001xz</p> <ul> <li>\u538b\u7f29\u5355\u4e2a\u6587\u4ef6\uff0c\u4ee5.xz\u7ed3\u5c3e</li> </ul> <pre><code>xz  file.xz  file1\n</code></pre> <ul> <li>\u89e3\u538b</li> </ul> <pre><code>xz -d file.xz\n# \u4e5f\u53ef\u4ee5\nunxz file.xz\n</code></pre> <p>4\u3001zip</p> <ul> <li>\u538b\u7f29</li> </ul> <pre><code>zip  file.zip  file1 file2\n</code></pre> <ul> <li>\u89e3\u538b</li> </ul> <pre><code>unzip  file.zip\n</code></pre> <ul> <li>\u6e90\u6587\u4ef6\u8fd8\u5728</li> </ul> <p>5\u3001tar (\u6253\u5305)</p> <ul> <li>\u538b\u7f29</li> </ul> <pre><code>tar  -czvf  file.tar.gz file1 file2\n</code></pre> <ul> <li>gz\u89e3\u538b</li> </ul> <pre><code># \u89e3\u538b\u5230\u684c\u9762\u76ee\u5f55\u4e0b\ntar  -xzvf  file.tar.gz  -C  Desktop\n</code></pre> <ul> <li> <p><code>z</code> \u8868\u793a <code>gzip</code>\uff0c<code>j</code> \u8868\u793a <code>bzip2</code>\uff0c<code>J</code> \u8868\u793a <code>xz</code></p> </li> <li> <p><code>bz2</code> \u89e3\u538b</p> </li> </ul> <pre><code>tar  -xjvf  file.tar.bz2\n</code></pre> <ul> <li>xz \u89e3\u538b</li> </ul> <pre><code>tar  -xJvf  file.tar.xz\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_7","title":"\u8def\u5f84","text":"<p>1\u3001\u7edd\u5bf9\u8def\u5f84\uff1a\u662f\u4ee5/\u5f00\u5934\uff0c\u4ece\u6839\u76ee\u5f55\u5f00\u59cb\u4e00\u7ea7\u4e00\u7ea7\u5f80\u4e0b\u5199\uff08/root/tmp/test\uff09</p> <p>2\u3001\u76f8\u5bf9\u8def\u5f84\uff1a\u4e0d\u4ee5/\u5f00\u5934\uff0c\u4ece\u5f53\u524d\u8def\u52b2\u5f00\u59cb(tmp/test)</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_8","title":"\u6587\u4ef6\u8bbf\u95ee\u6743\u9650","text":"<p>1\u3001\u6743\u9650\u52064\u90e8\u5206\uff1a</p> <ul> <li>\u7b2c 1 \u4f4d\u662f\u6587\u4ef6\u7c7b\u578b\uff1b</li> <li>\u7b2c 2-4 \u4f4d\u662f <code>u\uff08user\uff09</code>\u7528\u6237\u6743\u9650\uff1b</li> <li>\u7b2c 5-7 \u4f4d\u662f <code>g\uff08group\uff09</code>\u7ec4\u6743\u9650\uff1b</li> <li>\u7b2c 8-10 \u4f4d\u662f <code>o\uff08other\uff09</code>\u5176\u4ed6\u7528\u6237\u6743\u9650\uff1b</li> <li>\u7b2c 2-10 \u4f4d\u4e3a <code>a\uff08all\uff09</code>\uff1b</li> </ul> <pre><code>$ ls -lh\ndrwxr-xr-x  3 root root     60 7\u6708  13 09:27 user\n</code></pre> <p>2\u3001\u6587\u4ef6\u7c7b\u578b\uff1a</p> <ul> <li><code>-</code> \u666e\u901a\u6587\u4ef6\uff1b</li> <li><code>d</code> \u76ee\u5f55\uff1b</li> <li><code>l</code> \u8f6f\u94fe\u63a5\uff1b</li> </ul> <p>3\u3001<code>u g o</code>  \u5206\u522b\u6709 <code>r w x</code>\uff08\u8bfb\u3001\u5199\u3001\u6267\u884c\uff09\u6743\u9650\u3002</p> <p>4\u3001\u6587\u4ef6\u589e\u52a0\u6743\u9650</p> <pre><code>chmod u+w file (+  -  =)\n</code></pre> <p>5\u3001\u6587\u4ef6\u8d4b\u6743</p> <pre><code>chmod 754 file  (r 4,w 2 x 1)\n</code></pre> <p>6\u3001\u7ed9\u76ee\u5f55\u52a0\u6743\u9650\uff0c\u8981\u7ed9\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u52a0\u6743\u9650\uff0c\u624d\u6709\u610f\u4e49</p> <pre><code>chmod -R o+w test1\n</code></pre> <p>7\u3001\u6539\u53d8\u62e5\u6709\u8005</p> <pre><code>chown admin hello.sh\n</code></pre> <p>8\u3001\u6539\u53d8\u7ec4</p> <pre><code>chown :admin hello.sh\n</code></pre> <p>9\u3001\u6539\u53d8\u62e5\u6709\u8005\u548c\u7ec4</p> <pre><code># \u5c06hello\u6539\u7528\u6237\u4e3aftp,\u7ec4\u6539\u4e3ausers\nchown ftp:users hello.sh\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_9","title":"\u7528\u6237\u7ba1\u7406\u548c\u7ec4\u7ba1\u7406","text":"<p>1\u3001\u65b0\u589e\u7528\u6237\uff1a</p> <pre><code>useradd -m name\n# \u6307\u5b9a\u7684\u7528\u6237\u540d\u8bbe\u7f6e\u5bc6\u7801\npasswd name\n</code></pre> <p>2\u3001\u5220\u9664\u7528\u6237</p> <pre><code>userdel name\n</code></pre> <p>3\u3001\u6dfb\u52a0\u7ec4</p> <pre><code>groupadd group_name\n</code></pre> <p>4\u3001\u67e5\u770b\u7ec4</p> <pre><code>cat  /etc/group\n</code></pre> <p>5\u3001\u6dfb\u52a0\u7ec4\u6210\u5458\uff1a</p> <pre><code># \u6dfb\u52a0 mikigo \u5230 mikigo-group \u8fd9\u4e2a\u7ec4\u91cc\u9762\u3002\ngpasswd -a mikigo mikigo-group\n</code></pre> <p>6\u3001\u5220\u9664\u7ec4\u6210\u5458</p> <pre><code># \u5c06 mikigo \u4ece mikigo-group \u7ec4\u4e2d\u5220\u9664\u3002\ngpasswd -d mikigo mikigo-group\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#find","title":"find \u6587\u4ef6\u67e5\u627e","text":"<pre><code>find \u7edd\u5bf9\u8def\u5f84 \u9009\u9879 \u53c2\u6570\n</code></pre> <pre><code># \u6839\u636e\u6587\u4ef6\u540dmiki\u5728home\u4e0b\u67e5\u627e\nfind  /home  -name  miki\n# \u6839\u636e\u6587\u4ef6\u540dmiki\u5728home\u4e0b\u67e5\u627e\uff0c\u4e14\u4e0d\u533a\u5206\u5927\u5c0f\u5199\nfind  /home  -iname  miki\n# \u6309\u6587\u4ef6\u7c7b\u578b\u67e5\u627e\nfind  /home  -type  f\n# \u6309\u76ee\u5f55\u7c7b\u578b\u67e5\u627e\nfind  /home  -type  d\n# \u6839\u636e\u7528\u6237miki\u53bb\u67e5\u627e\nfind  /home  -user  miki\n# \u6839\u636e\u6587\u4ef6\u5927\u5c0f\u53bb\u67e5\u627e\uff08\u5927\u4e8e\u6216\u5c0f\u4e8e10k\uff09\nfind  /home  -size  +-10k\n# \u6839\u636e\u6700\u5927\u6df1\u5ea61\u5c42\u67e5\u627e\nfind  /home  -maxdepth 1\n# \u6839\u636e\u8d85\u8fc73\u5929\u672a\u4fee\u6539\uff0c\u6216\u5c0f\u4e8e3\u5929\u672a\u4fee\u6539\u67e5\u627e\nfind  /home  -mtime +-3\n# \u5c06\u53d6\u51fa\u7684\u884c\u5220\u9664\u3002\nfind  /home  -name  test  -exec  rm  -rf  { } \\; </code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_10","title":"\u5e2e\u52a9\u547d\u4ee4","text":"<p>1\u3001man \u547d\u4ee4 </p> <p>\u67e5\u5916\u90e8\u547d\u4ee4\uff0c\u67e5\u5185\u90e8\u547d\u4ee4\u65f6\u4f1a\u628a\u6240\u6709\u7684\u547d\u4ee4\u5217\u51fa</p> <p>2\u3001help \u547d\u4ee4 </p> <p>\u67e5\u627e\u5185\u90e8\u547d\u4ee4</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_11","title":"\u8fdb\u7a0b\u7ba1\u7406","text":"<p>1\u3001ps -ef </p> <p>\u8fdb\u7a0b\u5feb\u7167 </p> <p><code>top</code> \u547d\u4ee4\uff1a\u5b9e\u65f6\u8fdb\u7a0b</p> <p><code>free</code> \u547d\u4ee4\uff1a\u67e5\u770b\u7cfb\u7edf\u5185\u5b58\u60c5\u51b5</p> <p>2\u3001grep \u6309\u884c\u8fc7\u6ee4\uff0c\u8bed\u6cd5\uff1agrep \u9009\u9879 \u53c2\u6570</p> <pre><code># \u5ffd\u7565\u5927\u5c0f\u5199\ngrep  -i  miki\n# \u53d6\u53cd\ngrep  -v  miki \u8868\n# \u4ecemiki\u5b57\u7b26\u5f00\u59cb\u7684\u884c\ngrep  \u201c^miki\u201d\n# \u4ee5miki\u5b57\u7b26\u7ed3\u5c3e\u7684\u884c\ngrep  \u201cmiki$\u201d\n# \u53d6\u7a7a\u884c\ngrep  \u201c^$\u201d\n# \u663e\u793a\u884c\u53f7\ngrep  -n  miki # \u53d6\u524d\u4e24\u884c\uff0c\u7528A\u8868\u793a\u5f80\u540e\u53d6\ngrep  -B2  miki\n# \u53d6\u524d\u540e\u4e24\u884c\ngrep  -A2  -B2  miki\n</code></pre> <p>3\u3001\u526a\u5207</p> <pre><code># \u6309\u5217\u622a\u53d6\uff0c\u4ee5\uff1a\u5212\u5206\u4f4d\u5217\uff0c\u53d61-3\u5217\ncut -d \u201c\uff1a\u201d-f 1-3 </code></pre> <p>4\u3001\u67e5\u770b\u7aef\u53e3\u53f7</p> <pre><code>netstat  -tupnl  | grep \u670d\u52a1\n</code></pre> <p>5\u3001kill \u7ed3\u675f\u8fdb\u7a0b</p> <p>\uff081\uff09kill filename\u6216kill -15 filename \u662f\u5efa\u8bae\u7ed3\u675f\u8fdb\u7a0b\u3002</p> <p>\uff082\uff09kill  -9  filename \u8868\u793a\u5f3a\u5236\u7ed3\u675f\u8fdb\u7a0b\u3002</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_12","title":"\u78c1\u76d8\u7ba1\u7406","text":"<p>1\u3001\u7cfb\u7edf\u670d\u52a1</p> <p>\u2460 <code>uname -a</code> \u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u540d\u79f0\u53ca\u73af\u5883</p> <p>\u2461 <code>hostname</code> \u67e5\u770b\u670d\u52a1\u5668\u540d\u79f0</p> <p>\u2462 <code>cat /etc/redhat-release</code> \u67e5\u770b\u7cfb\u7edf\u7684\u5177\u4f53\u7248\u672c</p> <p>2\u3001\u7cfb\u7edf\u78c1\u76d8</p> <p>\u2460 <code>df -h</code> \u67e5\u770b\u78c1\u76d8\u5206\u5e03\u4fe1\u606f</p> <p>\u2461 <code>du -h</code> \u67e5\u770b\u6587\u4ef6\u5360\u7528\u78c1\u76d8\u60c5\u51b5</p> <p>3\u3001\u7cfb\u7edf\u542f\u52a8</p> <p>\u2460 \u5173\u673a</p> <pre><code>shutdown -h 20:00/now\n</code></pre> <p>\u2461 \u91cd\u542f</p> <pre><code>shutdown -r  \u6216 reboot\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_13","title":"\u8f6f\u4ef6\u5b89\u88c5","text":"<p>1\u3001\u4e8c\u8fdb\u5236\u5b89\u88c5</p> <p>(1) rpm\u5305\uff08redhat package management\uff09</p> <ul> <li> <p>\u5b89\u88c5\uff1arpm  -ivh  \u7a0b\u5e8f\u5305</p> </li> <li> <p>\u5378\u8f7d\uff1arpm  -e</p> </li> <li> <p>\u67e5\u770b\u662f\u5426\u5b89\u88c5\uff1a rpm  -qa</p> </li> <li> <p>\u7edf\u8ba1\u591a\u5c11\u4e2a\u5b89\u88c5\u7a0b\u5e8f\uff1arpm  -qa | wc  -l</p> </li> <li> <p>\u67e5\u770b\u5b89\u88c5\u4fe1\u606f\uff1a rpm  -qi</p> </li> <li> <p>\u5217\u51fa\u5b89\u88c5\u76ee\u5f55\u6587\u4ef6\uff1arpm  -ql</p> </li> <li> <p>\u5217\u51fa\u914d\u7f6e\u6587\u4ef6\uff1a rpm  -qc</p> </li> <li> <p>\u5b89\u88c5\u524d\u67e5\u770b\u5305\u4fe1\u606f\uff1arpm  -qpi</p> </li> </ul> <p>(2) yum</p> <ul> <li> <p>\u5b89\u88c5\uff1ayum install -y \u5b89\u88c5\u5305</p> </li> <li> <p>\u5378\u8f7d\uff1ayum remove \u6216 yum erase</p> </li> </ul> <p>2\u3001\u6e90\u4ee3\u7801\u5b89\u88c5</p> <p>(1) \u5b89\u88c5\u6b65\u9aa4</p> <ul> <li> <p>\u2460 \u89e3\u538b\u540e\u627e\u5230configure</p> </li> <li> <p>\u2461 \u6267\u884c\uff1a./configure  --prefix=/usr/local/\u76ee\u5f55\u540d</p> </li> <li> <p>\u2462 make</p> </li> <li> <p>\u2463 make install</p> </li> </ul> <p>(2) \u5b89\u88c5\u540e\u9700\u8981\u6307\u660e\u8def\u5f84\uff08\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff09</p> <pre><code>ln  -s  /usr/local/lrzsz  /usr/lacal/bin\n</code></pre> <p>(3) \u5378\u8f7d\uff1arm -rf</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#shell","title":"shell\u7a0b\u5e8f\u8bbe\u8ba1","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#_14","title":"\u8f93\u5165\u8f93\u51fa","text":"<p>1\u3001\u7ba1\u9053 <code>|</code></p> <p>\uff081\uff09\u8868\u793a\u5c06\u524d\u9762\u547d\u4ee4\u7684\u7ed3\u679c\uff0c\u4f5c\u4e3a\u540e\u9762\u547d\u4ee4\u7684\u53c2\u6570</p> <p>\uff082\uff09<code>cat -n test | head -12 | tail -2</code> \u8868\u793a\u53d6\u7b2c11 \u548c12\u884c</p> <p>\uff083\uff09<code>-v</code> \u663e\u793a\u63a7\u5236\u5b57\u7b26\uff0c<code>-n</code> \u5bf9\u8f93\u51fa\u884c\u8fdb\u884c\u7f16\u53f7\uff0c<code>-b</code> \u548c <code>-n</code> \u4e00\u6837\uff0c\u4f46\u7a7a\u767d\u884c\u4e0d\u7f16\u53f7\u3002</p> <p>2\u3001<code>echo</code></p> <p>\uff081\uff09<code>echo $PATH  | tr \u201c:\u201d \u201c\\n\u201d</code>\u8868\u793a\u8f93\u51fa\u4ee5\uff1a\u5206\u5272\u6362\u884c\u7684\u683c\u5f0f</p> <p>\uff082\uff09<code>echo \u2013n \u201chello world\u201d</code> \u4e0d\u6362\u884c</p> <p>\uff083\uff09<code>echo \u201c${PATH}abc\u201c</code> \u8868\u793a\u8f93\u51fa\u53d8\u91cfPATH\u7684\u503c\uff0c\u540e\u9762\u8ddfabc</p> <p>\uff084\uff09<code>echo \u201cnow is $(date)\u201d</code> \u547d\u4ee4\u66ff\u6362</p> <p>\uff085\uff09<code>echo \u2018now is ${PATH}\u2019</code>\u5355\u5f15\u53f7\u53ef\u4ee5\u53bb\u6389$\u7684\u529f\u80fd\uff0c\u76f4\u63a5\u8f93\u51fa\u5355\u5f15\u53f7\u5185\u7684\u5b57\u7b26</p> <p>\uff086\uff09<code>echo \u2013e \u201chello\\nworld\u201d \u2013e</code> \u4f7f\u5f15\u53f7\u5185\u8f6c\u4e49\u7b26\u751f\u6548</p> <p>\uff087\uff09<code>\\</code>\u8f6c\u4e49\u7b26\uff0c\u4f7f\u540e\u9762\u4e00\u4e2a\u5b57\u7b26\u5931\u6548</p> <p>3\u3001read \u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf</p> <p>\uff081\uff09<code>read username age</code></p> <p>\uff082\uff09<code>read \u2013p \u201cplease input your name :\u201d name</code> \u8868\u793a\u5728\u8f93\u5165\u53d8\u91cf\u65f6\u7ed9\u51fa\u76f8\u5e94\u7684\u63d0\u793a\u3002</p> <p>4\u3001tee</p> <p><code>tee -a file</code> \u8868\u793a\u5c06\u6587\u4ef6\u8ffd\u52a0\u5230\u672b\u5c3e </p> <pre><code> ls | tee xxx.txt\n</code></pre> <p>5.\u91cd\u5b9a\u5411</p> <ul> <li><code>ls &gt; file</code> \u8868\u793a\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u4e2d\uff0c\u4f1a\u8986\u76d6\u539f\u6709\u5185\u5bb9\uff1b</li> <li><code>ls &gt;&gt;file</code> \u8868\u793a\u8ffd\u52a0\u5230\u6587\u4ef6\u672b\u5c3e\uff1b</li> <li><code>ls 2&gt;file</code> \u8868\u793a\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u4e2d\uff0c\u4f1a\u8986\u76d6\u539f\u6709\u5185\u5bb9\uff1b</li> <li><code>ls &amp;&gt;file</code> \u8868\u793a\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u4e00\u8d77\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u4e2d\uff1b</li> <li><code>ls 1&gt;file1 2&gt;file2</code> \u8868\u793a\u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411 <code>file1</code>\uff0c\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u91cd\u5b9a\u5411\u5230 <code>file2</code>\uff1b</li> </ul>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#shell_1","title":"shell\u540e\u53f0\u6267\u884c\u547d\u4ee4","text":"<p>1\u3001cron \u5b9a\u65f6\u4efb\u52a1</p> <p>\u7ba1\u7406\u5458\u5728<code>/etc/crontab</code> \u91cc\u9762\u53ef\u4ee5\u7f16\u8f91\u5b9a\u65f6\u4efb\u52a1</p> <ul> <li>\u7b2c\u4e00\u5217\u8868\u793a min\uff1b</li> <li>\u7b2c\u4e8c\u5217\u8868\u793a hou\uff1b</li> <li>\u7b2c\u4e09\u5217\u8868\u793a day\uff1b</li> <li>\u7b2c\u56db\u5217\u8868\u793a mon\uff1b</li> <li>\u7b2c\u4e94\u5217\u8868\u793a week\uff1b</li> <li>\u7b2c\u516d\u5217\u8868\u793a\u8981\u8fd0\u884c\u7684\u547d\u4ee4\uff1b</li> </ul> <p>\u6bd4\u5982\uff1a5\uff0c25 15 * * *\uff0c\u8868\u793a\u6bcf\u5929\u768415\u65f6\u76845\u5206\u548c25\u5206\u8fd0\u884c\u811a\u672c\u3002</p> <p>\u666e\u901a\u7528\u6237\u521b\u5efa\u4e3a\uff0c\u6267\u884c\u547d\u4ee4 <code>crontab * * * * *</code> \u52a0\u9009\u9879 <code>-e</code> \u7f16\u8f91 ,<code>-l</code> \u67e5\u770b\u4efb\u52a1\uff1b</p> <p>3\u3001&amp;</p> <p>\uff081\uff09\u5c06\u67d0\u4e2a\u8fd0\u884c\u7684\u547d\u4ee4\uff0c\u653e\u5230\u540e\u53f0\u6267\u884c\u3002</p> <p>\uff082\uff09<code>nohup \u547d\u4ee4 &amp;</code> \u6bd4\u5982\uff1a<code>nohup sleep 500 &amp;</code></p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#shell_2","title":"shell\u53d8\u91cf\u548c\u53c2\u6570","text":"<p>1\u3001\u7cfb\u7edf\u53d8\u91cf</p> <ul> <li> <p>\u7cfb\u7edf\u53d8\u91cf\u90fd\u662f\u5927\u5199\uff1b</p> </li> <li> <p>\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff1aexport \u5c06\u666e\u901a\u53d8\u91cf\u53d8\u6210\u7cfb\u7edf\u53d8\u91cf\uff1b</p> </li> </ul> <pre><code>var_name=value;export var_name\n</code></pre> <ul> <li> <p>\u53d8\u91cf\u547d\u4ee4\u8981\u6c42\uff1a\u53ea\u80fd\u4ee5\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u3001\u6570\u5b57\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b</p> </li> <li> <p><code>env</code> \u67e5\u770b\u6240\u6709\u7684\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff1b</p> </li> <li> <p><code>unset var_name</code> \u6e05\u9664\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff1b</p> </li> </ul> <p>2\u3001\u7528\u6237\u53d8\u91cf</p> <ul> <li>\u8bbe\u7f6e\u7528\u6237\u53d8\u91cf\uff1a</li> </ul> <pre><code>var_name=value\n</code></pre> <ul> <li> <p>\u6e05\u9664\u53d8\u91cf\uff1a<code>set var_name</code></p> </li> <li> <p><code>set</code> \u663e\u793a\u7528\u6237\u6240\u6709\u53d8\u91cf</p> </li> <li> <p><code>source /etc/profile</code> \u8ba9 <code>profile</code> \u751f\u6548</p> </li> <li> <p><code>eho ${name:=peter}</code> \u8868\u793a\u5982\u679c <code>name</code> \u5b58\u5728\u5c31\u663e\u793a <code>name</code> \u7684\u503c\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5c31\u663e\u793a <code>peter</code></p> </li> </ul> <p>3\u3001\u4f4d\u7f6e\u53d8\u91cf</p> <ul> <li>\u5411shell\u811a\u672c\u4f20\u9012\u53c2\u6570</li> </ul> <pre><code>#\uff01/bin/bash\necho \u201cThe script name is : $0\u201d\necho \u201cThe script name is : $1\u201d\n</code></pre> <p><code>$0</code> \u8868\u793a\u811a\u672c\u540d\u79f0\u672c\u8eab\uff08\u5305\u542b\u524d\u9762\u7684\u8def\u5f84\uff09\uff0c<code>$1</code>\u8868\u793a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <pre><code># \u4ec5\u663e\u793a\u811a\u672c\u540d\u79f0\uff0c\u4f46\u4e0d\u5305\u542b\u524d\u9762\u7684\u8def\u5f84\necho \u201dThe script name is : `basename $0`\u201c </code></pre> <p>4\u3001\u7279\u5b9a\u53d8\u91cf</p> <pre><code># \u68c0\u67e5\u4e0a\u4e00\u6761\u547d\u4ee4\u662f\u5426\u6267\u884c\u6210\u529f\necho $?\n</code></pre> <p>\u8fd4\u56de\u503c\u4e3a0\u5373\u6210\u529f\uff0c\u8fd4\u56de\u975e0\u5373\u5931\u8d25\u3002</p>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#shell_3","title":"shell\u7a0b\u5e8f\u8bbe\u8ba1\u6d41\u7a0b\u63a7\u5236","text":""},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#test","title":"test\u6d4b\u8bd5\u547d\u4ee4","text":"<p>1.\u6587\u4ef6\u6d4b\u8bd5</p> <ul> <li><code>[ -f file.txt ]</code> \u5224\u65adfile\u662f\u5426\u4e3a\u666e\u901a\u6587\u4ef6</li> <li><code>[ -d file ]</code>\u5224\u65adfile\u662f\u5426\u4e3a\u76ee\u5f55</li> <li><code>[ -s file ]</code> \u5224\u65adfile\u6587\u4ef6\u957f\u5ea6\u5927\u4e8e0</li> </ul> <p>2.\u903b\u8f91\u64cd\u4f5c\u7b26</p> <ul> <li><code>-a</code> </li> </ul> <p><code>[ -f file \u2013a \u2013d file1 ]</code> \u8868\u793a\u5224\u65ad\u4e24\u4e2a\u6761\u4ef6\u662f\u5426\u540c\u65f6\u6ee1\u8db3\u3002\uff08\u4e0e\u8fd0\u7b97\uff09</p> <ul> <li><code>-o</code> </li> </ul> <p><code>[ -f file \u2013o \u2013d file1 ]</code> \u8868\u793a\u5224\u65ad\u4e24\u4e2a\u6761\u4ef6\u662f\u5426\u6709\u4e00\u4e2a\u6ee1\u8db3\u3002\uff08\u6216\u8fd0\u7b97\uff09</p> <ul> <li><code>!</code></li> </ul> <p>\u8868\u793a\u53d6\u975e\uff0c\u6bd4\u5982 <code>[ ! \u2013f file ]</code></p> <p>3.\u6570\u503c\u6d4b\u8bd5</p> <ul> <li><code>-eq</code> \u6570\u503c\u76f8\u7b49 \uff0c\u6bd4\u5982 <code>[ \u201c$num\u201d \u2013eq \u201c100\u201d ]</code></li> <li><code>-ne</code> \u6570\u503c\u4e0d\u7b49</li> <li><code>-gt</code> \u7b2c\u4e00\u4e2a\u6570\u5927\u4e8e\u7b2c\u4e8c\u4e2a\u6570</li> <li><code>-lt</code> \u7b2c\u4e00\u4e2a\u6570\u5c0f\u4e8e\u7b2c\u4e8c\u4e2a\u6570</li> <li><code>-le</code> \u5c0f\u4e8e\u7b49\u4e8e</li> <li><code>-gt</code> \u5927\u4e8e\u7b49\u4e8e</li> </ul>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#expr","title":"<code>expr</code> \u7b80\u5355\u8ba1\u7b97","text":"<ul> <li>expr 10 + 10 \u8fd0\u7b97\u7b26\u4e24\u8fb9\u8981\u53f3\u7a7a\u683c</li> </ul> <pre><code>sum=`expr 9 +4`\nlet sum=5+5\necho $sum\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#if","title":"if\u6761\u4ef6\u5224\u65ad","text":"<ul> <li>\u683c\u5f0f\uff1a</li> </ul> <pre><code>if \u6761\u4ef6; then \u547d\u4ee4\nelif \u6761\u4ef6\n  \u547d\u4ee4\nelse\n\u547d\u4ee4\nfi\n</code></pre> <ul> <li><code>if</code>\u6761\u4ef6\u5224\u65ad\u6709\u771f\u5047\uff0c\u771f\u5219\u5199\u5728 <code>then</code> \u540e\u9762\uff0c\u5047\u5219\u5199\u5728 <code>else</code> \u540e\u9762\uff0c\u5176\u4e2d\u771f\u5047\u90fd\u53ef\u4ee5\u7ee7\u7eed\u5d4c\u5957 <code>if</code> \u8bed\u53e5\u3002</li> </ul> <pre><code>num=$1\nif [ \u201c$num\u201d = \u201c100\u201d ]; then echo \u201c$sum\u201d\nelse\necho \u201cwrong number\u201d\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#for","title":"for\u5faa\u73af","text":"<ul> <li>\u683c\u5f0f</li> </ul> <pre><code>for \u53d8\u91cf\u540d in \u5217\u8868\ndo\n\u547d\u4ee41\n  \u547d\u4ee41\ndone\n</code></pre> <ul> <li>\u4e3e\u4f8b</li> </ul> <pre><code>for mikigo in 1 2 3 4 5\ndo\necho $mikigo\ndone\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#whileuntil","title":"while\u548cuntil \u5faa\u73af","text":"<ul> <li>\u683c\u5f0f</li> </ul> <pre><code>while \u6761\u4ef6\ndo\n\u547d\u4ee41\ndone\n</code></pre> <ul> <li> <p>while \u662f\u5224\u65ad\u6761\u4ef6\u4e3a\u771f\u65f6\u6267\u884c\u547d\u4ee4\uff0cuntil\u662f\u5224\u65ad\u6761\u4ef6\u4e3a\u5047\u65f6\u6267\u884c\u547d\u4ee4\uff0c\u8bed\u6cd5\u683c\u5f0f\u90fd\u4e00\u6837\u3002</p> </li> <li> <p>\u4e3e\u4f8b</p> </li> </ul> <pre><code>while [ $num \u2013lt 5 ]\ndo\necho \u201c$num\u201d\n    let num=$num+1\ndone\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#break-continue","title":"break \u548c continue","text":"<ul> <li> <p>break \u662f\u8df3\u51fa\u79bb\u5b83\u6700\u8fd1\u7684\u4e00\u4e2a\u5faa\u73af</p> </li> <li> <p>continue \u662f\u7ed3\u675f\u8fd9\u4e00\u6b21\u5faa\u73af\uff0c\u7ee7\u7eed\u4e0b\u6b21\u5faa\u73af</p> </li> <li> <p>\u4e3e\u4f8b</p> </li> </ul> <pre><code>while num=0\ndo\nif [ \u201c$num\u201d \u2013eq 2 ]; then\ncontinue\nelse\necho \u201c$num\u201d\n      let num=$num+1\n    fi\ndone\n</code></pre>"},{"location":"Linux/Linux%E5%9F%BA%E7%A1%80/#case","title":"case\u6761\u4ef6\u9009\u62e9","text":"<ul> <li>\u683c\u5f0f</li> </ul> <pre><code>case \u503c in\n\u6a21\u5f0f1\uff09\n      \u547d\u4ee41\uff1b\uff1b\n    \u6a21\u5f0f2\uff09\n      \u547d\u4ee42\uff1b\uff1b\nesac\n</code></pre>"},{"location":"Linux/Nginx%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/","title":"Nginx\u5165\u95e8\u4f7f\u7528","text":""},{"location":"Linux/Nginx%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install nginx\n</code></pre> <p>\u5b89\u88c5\u4e4b\u540e <code>/var/www/html</code> \u5c31\u53ef\u4ee5\u4f5c\u4e3a\u9ed8\u8ba4\u7684 <code>http</code> \u670d\u52a1\u4f7f\u7528\u4e86\uff1b</p>"},{"location":"Linux/Nginx%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/#_2","title":"\u914d\u7f6e","text":"<p>\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a<code>/etc/nginx/nginx.conf</code></p> <pre><code>sudo vim /etc/nginx/nginx.conf\n</code></pre> <p>\u9ed8\u8ba4\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code># \u5168\u5c40\u914d\u7f6e\nuser mikigo;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n# events\u914d\u7f6e\nevents {\nworker_connections 768;\n# multi_accept on;\n}\n# http\u914d\u7f6e\nhttp {\n# http\u5168\u5c40\u914d\u7f6e\n##\n# Basic Settings\n##\nsendfile on;\ntcp_nopush on;\ntcp_nodelay on;\nkeepalive_timeout 65;\ntypes_hash_max_size 2048;\n# server_tokens off;\n# server_names_hash_bucket_size 64;\n# server_name_in_redirect off;\ninclude /etc/nginx/mime.types;\ndefault_type application/octet-stream;\n##\n# SSL Settings\n##\nssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\nssl_prefer_server_ciphers on;\n##\n# Logging Settings\n##\naccess_log /var/log/nginx/access.log;\nerror_log /var/log/nginx/error.log;\n##\n# Gzip Settings\n##\ngzip on;\n# gzip_vary on;\n# gzip_proxied any;\n# gzip_comp_level 6;\n# gzip_buffers 16 8k;\n# gzip_http_version 1.1;\n# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n##\n# Virtual Host Configs\n##\ninclude /etc/nginx/conf.d/*.conf;\ninclude /etc/nginx/sites-enabled/*;\nautoindex on;\nautoindex_exact_size on;\nautoindex_localtime on;\ncharset utf-8;\n# server\u914d\u7f6e\uff0c\u53ef\u4ee5\u6709\u591a\u4e2aserver\nserver {\nlisten          8001;\nserver_name     localhost;\nlocation / {\nroot /home/mikigo/Desktop/share;\nindex index.html;\n}\n}\n}\n</code></pre> <p>\u4e00\u5171\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u5206\u522b\u4e3a \u5168\u5c40\u914d\u7f6e\u3001<code>events</code>  \u914d\u7f6e\u548c <code>http</code> \u914d\u7f6e\uff1b</p> <p>\u5728 <code>http</code> \u4e2d\uff0c\u53c8\u5305\u542b <code>http</code> \u5168\u5c40\u914d\u7f6e\u3001\u591a\u4e2a <code>server</code> \u914d\u7f6e\uff0c\u6bcf\u4e2a <code>server</code> \u4e2d\uff0c\u53ef\u4ee5\u5305\u542b <code>server</code> \u5168\u5c40\u914d\u7f6e\u548c\u591a\u4e2a <code>location</code> \u914d\u7f6e\uff1b</p> <p>\u4e0b\u9762\u5c55\u5f00\u8bb2\u3002</p>"},{"location":"Linux/Nginx%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/#_3","title":"\u5168\u5c40\u914d\u7f6e","text":"<pre><code># \u5168\u5c40\u914d\u7f6e\nuser mikigo;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n</code></pre> <p><code>user</code>  \uff1a\u7528\u4e8e\u6307\u5b9a\u8fd0\u884c <code>nginx</code> \u670d\u52a1\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\uff1b\u5c06 <code>user</code> \u6ce8\u91ca\u6389\u6216\u8005\u914d\u7f6e\u6210 <code>nobady</code> \u8868\u793a\u6240\u6709\u7528\u6237\u90fd\u53ef\u4ee5\u8fd0\u884c\uff1b</p> <p><code>worker_processes</code> \uff1a\u6307\u5b9a\u5de5\u4f5c\u7ebf\u7a0b\u6570\uff0c<code>auto</code> \u8868\u793a\u81ea\u52a8\u6a21\u5f0f\uff1b</p> <p><code>pid</code>\uff1a\u6307\u5b9a <code>pid</code> \u6587\u4ef6\u5b58\u653e\u7684\u8def\u5f84</p>"},{"location":"Linux/Nginx%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/#events","title":"events","text":"<pre><code># events\u914d\u7f6e\nevents {\nworker_connections 768;\n# multi_accept on;\n}\n</code></pre> <p><code>worker_connections</code>\uff1a\u8bbe\u7f6e\u5141\u8bb8\u6bcf\u4e00\u4e2a <code>worker process</code> \u540c\u65f6\u5f00\u542f\u7684\u6700\u5927\u8fde\u63a5\u6570\uff1b</p> <p><code>multi_accept</code>: <code>on</code> \u8868\u793a\u4e00\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u53ef\u4ee5\u540c\u65f6\u63a5\u53d7\u6240\u6709\u7684\u65b0\u8fde\u63a5\uff0c<code>off</code> \u8868\u793a\u4e00\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u53ea\u80fd\u540c\u65f6\u63a5\u53d7\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\uff0c\u9ed8\u8ba4\u662f <code>off</code>\uff1b</p>"},{"location":"Linux/Nginx%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/#http","title":"http","text":"<pre><code># http\u914d\u7f6e\nhttp {\n# http\u5168\u5c40\u914d\u7f6e\n##\n# Basic Settings\n##\n# \u5f00\u542f\u5173\u95edsendfile\u65b9\u5f0f\u4f20\u8f93\u6587\u4ef6\nsendfile on;\n# \u6b64\u9009\u9879\u5141\u8bb8\u6216\u7981\u6b62\u4f7f\u7528socke\u7684TCP_CORK\u7684\u9009\u9879\uff0c\u6b64\u9009\u9879\u4ec5\u5728\u4f7f\u7528sendfile\u7684\u65f6\u5019\u4f7f\u7528\ntcp_nopush on;\ntcp_nodelay on;\n# \u957f\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\nkeepalive_timeout 65;\ntypes_hash_max_size 2048;\n# server_tokens off;\n# server_names_hash_bucket_size 64;\n# server_name_in_redirect off;\n# \u6587\u4ef6\u6269\u5c55\u540d\u4e0e\u6587\u4ef6\u7c7b\u578b\u6620\u5c04\u8868\ninclude /etc/nginx/mime.types;\n# \u9ed8\u8ba4\u6587\u4ef6\u7c7b\u578b\ndefault_type application/octet-stream;\n##\n# SSL Settings\n##\nssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\nssl_prefer_server_ciphers on;\n##\n# Logging Settings\n##\n# \u65e5\u5fd7\u8bb0\u5f55\u6587\u4ef6\naccess_log /var/log/nginx/access.log;\nerror_log /var/log/nginx/error.log;\n##\n# Gzip Settings\n##\n# \u5f00\u542fgzip\u538b\u7f29\u8f93\u51fa\ngzip on;\n# gzip \u7684\u4e00\u4e9b\u914d\u7f6e\u9879\n# gzip_vary on;\n# gzip_proxied any;\n# gzip_comp_level 6;\n# gzip_buffers 16 8k;\n# gzip_http_version 1.1;\n# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n##\n# Virtual Host Configs\n##\ninclude /etc/nginx/conf.d/*.conf;\ninclude /etc/nginx/sites-enabled/*;\n# \u5f00\u542f\u76ee\u5f55\u5217\u8868\u8bbf\u95ee\uff0c\u5408\u9002\u4e0b\u8f7d\u670d\u52a1\u5668\uff0c\u9ed8\u8ba4\u5173\u95ed\nautoindex on;\n# \u6587\u4ef6\u670d\u52a1\u5668\u6587\u4ef6\u5927\u5c0f\nautoindex_exact_size on;\n# \u6587\u4ef6\u670d\u52a1\u5668\u6587\u4ef6\u65f6\u95f4\nautoindex_localtime on;\n#\u9ed8\u8ba4\u7f16\u7801\ncharset utf-8;\n# server\u914d\u7f6e\uff0c\u53ef\u4ee5\u6709\u591a\u4e2aserver\nserver {\nlisten          8001;\nserver_name     localhost;\nlocation / {\nroot /home/mikigo/Desktop/share;\nindex index.html;\n}\n}\n}\n</code></pre> <p>\u9ed8\u8ba4\u7684 80 \u7aef\u53e3\u7684\u670d\u52a1\u662f\u4e0d\u7528\u914d\u7f6e\u7684\uff1b</p> <p>\u8bbf\u95ee\uff1a<code>IP:80</code>\uff0c\u5b9e\u9645\u8bbf\u95ee\u7684\u8def\u5f84\u4e3a\uff1a<code>/var/www/html</code></p> <p>\u8bbf\u95ee\uff1a<code>IP:8001</code>\uff0c\u5b9e\u9645\u8bbf\u95ee\u7684\u8def\u5f84\u4e3a\uff1a<code>/home/mikigo/Desktop/share</code></p>"},{"location":"Python/Linux%E4%B8%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E7%94%A8pip3%E8%BF%98%E6%98%AFsudopip3/","title":"Linux \u4e0a\u5982\u4f55\u9009\u62e9\u7528 pip3 \u8fd8\u662f sudo pip3","text":""},{"location":"Python/Linux%E4%B8%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E7%94%A8pip3%E8%BF%98%E6%98%AFsudopip3/#1sudo-pip3","title":"\uff081\uff09sudo pip3","text":"<p>\u5982\u679c\u8fd9\u4e2a\u5305\u662f\u5e26\u6709\u547d\u4ee4\u884c\u5de5\u5177\u7684\uff0c\u63a8\u8350\u4f7f\u7528<code>sudo pip3 install xxx</code> \u8fdb\u884c\u5b89\u88c5;</p> <p>\u8fd9\u6837\u547d\u4ee4\u884c\u5de5\u5177\u624d\u80fd\u5199\u5165\u5230\u7cfb\u7edf\u76ee\u5f55\u4e0b\uff0c\u4e00\u822c\u662f\u5728 <code>/usr/local/bin/</code> \u4e0b\u9762\uff1b</p> <p>\u5982\u679c\u4f60\u6ca1\u6709\u52a0 <code>sudo</code> \u5b89\u88c5\uff0c\u547d\u4ee4\u884c\u5de5\u5177\u65e0\u6cd5\u5199\u5165\u5230\u7cfb\u7edf\u76ee\u5f55\u4e0b\uff0c\u800c\u662f\u5199\u5165\u5230 <code>$HOME/.local/bin</code>\uff0c\u8fd9\u4e2a\u8def\u5f84\u5f88\u660e\u663e\u4e0d\u662f\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528\u6b64\u547d\u4ee4\uff0c\u8981\u60f3\u4f7f\u7528\u5b83\u4f60\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a</p> <p>\u7b2c\u4e00\u79cd\uff1a</p> <pre><code># \u8fdb\u5165\u5230\u547d\u4ee4\u76ee\u5f55 \ncd $HOME/.local/bin/\n# \u7ed9\u547d\u4ee4\u6267\u884c\u8d4b\u6743\u9650\nsudo chmod +x mycmd\n# \u6267\u884c\u5b83\n./mycmd\n</code></pre> <p>\u7b2c\u4e8c\u79cd\uff1a</p> <p>\u5c06 <code>$HOME/.local/bin</code> \u6dfb\u52a0\u5230 <code>PATH</code> \u91cc\u9762:</p> <p>\u4e34\u65f6\u4fee\u6539\uff1a</p> <pre><code>export PATH=/home/uos/.local/bin:$PATH\n#\u6216\u8005\u628aPATH\u653e\u5728\u524d\u9762\nexport PATH=$PATH:/home/uos/.local/bin\n</code></pre> <p>\u7528\u6237\u7ea7\u522b\u6c38\u4e45\u4fee\u6539\uff1a</p> <pre><code>vim ~/.bashrc\n# \u5728\u6700\u540e\u4e00\u884c\u52a0\u4e0a\nexport PATH=$PATH:/home/uos/.local/bin\n</code></pre> <p>\u7cfb\u7edf\u7ea7\u522b\u6c38\u4e45\u4fee\u6539\uff1a</p> <pre><code>vim ~/.bash_profile\n# \u5728\u6700\u540e\u4e00\u884c\u52a0\u4e0a\nexport PATH=$PATH:/home/uusama/mysql/bin\n</code></pre> <p>\u4f60\u770b\u5982\u679c\u5e26\u547d\u4ee4\u884c\u5de5\u5177\u7684\u5e93\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u6ca1\u6709\u52a0 <code>sudo</code> \u4f60\u8981\u591a\u505a\u591a\u5c11\u4e8b\u60c5\uff1b</p> <p>\u6240\u4ee5\u8bf7\u8bb0\u4f4f\uff0c\u5e26\u6709\u547d\u4ee4\u884c\u5de5\u5177\u7684\u4e09\u65b9\u5e93\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u4f7f\u7528 <code>sudo pip3 install</code>\u3002</p>"},{"location":"Python/Linux%E4%B8%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E7%94%A8pip3%E8%BF%98%E6%98%AFsudopip3/#2pip3","title":"\uff082\uff09pip3","text":"<p>\u5982\u679c\u8fd9\u4e2a\u5e93\u6ca1\u6709\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u6216\u8005\u8bf4\u5b83\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4e0d\u9700\u8981\u5199\u5165\u7cfb\u7edf\u76ee\u5f55\uff0c\u4f60\u4f7f\u7528 pip3 \u6216 sudo pip3 \u5b89\u88c5\u90fd\u53ef\u4ee5\uff1b</p> <p>\u4f46\u662f\uff0c\u6211\u4e2a\u4eba\u63a8\u8350\u4e0d\u8981\u52a0 <code>sudo</code>\uff1b</p> <p>\u539f\u56e0\u5c31\u9700\u8981\u4ecb\u7ecd\u4e00\u70b9\u70b9\u80cc\u666f\u77e5\u8bc6\uff1a</p> <p>\u5728 Linux \u4e0a\uff0cPython \u4e09\u65b9\u5305\u901a\u5e38\u88ab\u5b89\u88c5\u5728\u4ee5\u4e0b\u4e09\u4e2a\u8def\u5f84\u4e2d\uff1a</p> <ol> <li><code>/usr/lib/pythonX.X/site-packages</code></li> </ol> <p>\u8fd9\u4e2a\u8def\u5f84\u4e2d\u5b89\u88c5\u7684\u662f\u7cfb\u7edf\u9ed8\u8ba4\u7684 Python \u89e3\u91ca\u5668\u7684\u4e09\u65b9\u5305\uff0cX.X \u4ee3\u8868 Python \u7248\u672c\u53f7\uff0c\u5982 2.7\u30013.6;</p> <ol> <li><code>/usr/local/lib/pythonX.X/site-packages</code></li> </ol> <p>\u8fd9\u4e2a\u8def\u5f84\u4e2d\u5b89\u88c5\u7684\u662f\u7528\u6237\u81ea\u5df1\u5b89\u88c5\u7684 Python \u89e3\u91ca\u5668\u7684\u4e09\u65b9\u5305\uff0cX.X \u4ee3\u8868 Python \u7248\u672c\u53f7\uff0c\u5982 2.7\u30013.6;</p> <ol> <li><code>$HOME/.local/lib/pythonX.X/site-packages</code></li> </ol> <p>\u8fd9\u4e2a\u8def\u5f84\u4e2d\u5b89\u88c5\u7684\u662f\u5f53\u524d\u7528\u6237\u7684 Python \u89e3\u91ca\u5668\u7684\u4e09\u65b9\u5305\uff0cX.X\u4ee3\u8868 Python \u7248\u672c\u53f7\uff0c\u5982 2.7\u30013.6;</p> <p>\u5728\u52a0\u8f7dPython\u4e09\u65b9\u5305\u65f6\uff0c\u7cfb\u7edf\u4f1a\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u67e5\u627e\u4e09\u65b9\u5305\u7684\u8def\u5f84\uff1a</p> <ol> <li>\u5148\u67e5\u627e\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u662f\u5426\u6709\u9700\u8981\u7684\u5305;\u60f3</li> <li>\u67e5\u627e <code>$HOME/.local/lib/pythonX.X/site-packages</code>;</li> <li>\u67e5\u627e <code>/usr/local/lib/pythonX.X/site-packages</code></li> <li>\u67e5\u627e <code>/usr/lib/pythonX.X/site-packages</code></li> </ol> <p>\u5982\u679c\u5728\u4ee5\u4e0a\u8def\u5f84\u4e2d\u627e\u5230\u4e86\u9700\u8981\u7684\u5305\uff0c\u5c31\u4f1a\u52a0\u8f7d\u5b83\u4eec\uff1b</p> <p>\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5219\u4f1a\u629b\u51faImportError\u5f02\u5e38\uff1b</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u76f8\u540c\u7684\u5305\u5b58\u5728\u4e8e\u591a\u4e2a\u8def\u5f84\u4e2d\uff0c\u7cfb\u7edf\u4f1a\u52a0\u8f7d\u6700\u5148\u627e\u5230\u7684\u90a3\u4e2a\u5305\uff0c\u800c\u4e0d\u662f\u540e\u9762\u627e\u5230\u7684\u90a3\u4e2a\u5305\uff1b</p> <p>\u56e0\u6b64\uff0c\u5982\u679c\u6709\u591a\u4e2aPython\u89e3\u91ca\u5668\u6216\u7248\u672c\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u8def\u5f84\u5b89\u88c5\u4e09\u65b9\u5305\uff0c\u5c31\u9700\u8981\u786e\u8ba4\u52a0\u8f7d\u7684\u5305\u662f\u5426\u6b63\u786e\u3002</p> <p>\u4f7f\u7528 <code>pip3</code> \u5b89\u88c5\u7684\u65f6\u5019\u662f\u5b89\u88c5\u5230 <code>$HOME/.local/lib/pythonX.X/site-packages</code> \u8def\u5f84\u4e0b\uff1b</p> <p>\u800c\u4f7f\u7528 <code>sudo pip3</code> \u5b89\u88c5\u7684\u65f6\u5019\u662f\u5b89\u88c5\u5230 <code>/usr/local/lib/pythonX.X/site-packages</code> \u8def\u5f84\u4e0b</p> <p>\u57fa\u4e8e\u524d\u9762\u7684\u80cc\u666f\u77e5\u8bc6\uff0c\u8fd9\u4e2a\u8def\u5f84\u662f\u6392\u5728\u524d\u9762\u7684\uff0c\u662f\u4f1a\u88ab\u4f18\u5148\u52a0\u8f7d\u5230\uff1b</p> <p>\u56e0\u6b64\uff0c\u7ed3\u8bba\uff1a\u6211\u59cb\u7ec8\u63a8\u8350\u4f18\u5148\u8003\u8651\u4f7f\u7528 <code>pip3</code> \u5b89\u88c5\uff08\u4e0d\u52a0<code>sudo</code> \uff09\uff1b</p> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u51ed\u5565\u4f18\u5148\u52a0\u8f7d\u5230\uff0c\u6211\u5c31\u8981\u7528\u5b83\u5462\uff1f\u4f60\u7684\u9886\u5bfc\u505a\u5565\u90fd\u5148\u60f3\u5230\u4f60\uff0c\u4f60\u89c9\u5f97\u662f\u4e0d\u662f\u597d\u4e8b\uff0c\u4f60\u7ec6\u54c1\uff5e\uff5e</p>"},{"location":"Python/Linux%E4%B8%8A%E5%AE%89%E8%A3%85Python3.9.9/","title":"Linux \u4e0a\u5b89\u88c5 Python 3.9.9","text":"<p>\u5728 deepin \u4e0a\u9ed8\u8ba4\u662f Python \u7248\u672c\u662f 3.7.3 \uff0c\u5728\u505a\u4e00\u4e9b Django \u9879\u76ee\u7684\u65f6\u5019\u9700\u8981\u7528\u5230 3.9 \u7248\u672c\uff1b</p> <p>\u6b64\u811a\u672c\u76f4\u63a5\u4e0b\u8f7d\u5e76\u5b89\u88c5 Python 3.9.9\uff0c\u590d\u5236\u4ee5\u4e0b\u811a\u672c\u6267\u884c\u5728\u672c\u5730\u6267\u884c\u5373\u53ef\uff1b</p> <pre><code>#!/bin/bash\n# \u5237\u65b0\u6e90\nsudo apt update\n# \u88c5\u4f9d\u8d56\nsudo apt install -y zlib1g-dev libbz2-dev libssl-dev libncurses5-dev libsqlite3-dev libreadline-dev tk-dev libgdbm-dev libdb-dev libpcap-dev xz-utils libexpat1-dev liblzma-dev libffi-dev libc6-dev\n# \u4e0b\u8f7d\u6e90\u7801\nwget https://cdn.npm.taobao.org/dist/python/3.9.9/Python-3.9.9.tgz\n# \u89e3\u538b\ntar -xzf Python-3.9.9.tgz\n# \u653e\u5728/usr/local/share/\u4e0b\nsudo mv  Python-3.9.9 /usr/local/share/\n# \u7f16\u8bd1\ncd  /usr/local/share/Python-3.9.9/\n./configure --prefix=/usr/local/python3.9\n# \u8bbe\u7f6e\u4f18\u5316\u9009\u9879--enable-optimizations\n# ./configure --prefix=/usr/local/python3.9 --enable-optimizations\nmake -j4\nsudo make install\n# \u8bbe\u7f6e\u8f6f\u8fde\u63a5\nsudo ln -s /usr/local/python3.9/bin/python3.9 /usr/bin/python3.9\nsudo ln -s /usr/local/python3.9/bin/python3.9-config /usr/bin/python3.9-config\n</code></pre>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/","title":"Python\u4ece\u8fdb\u9636\u5230\u9ad8\u7ea7\u2014\u901a\u4fd7\u6613\u61c2\u7248","text":"<pre><code># ==================================\n# Author : Mikigo\n# ==================================\n</code></pre>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Python \u8fdb\u9636\u662f\u6211\u4e00\u76f4\u5f88\u60f3\u5199\u7684\uff0c\u4f5c\u4e3a\u81ea\u5df1\u5b66\u4e60\u7684\u8bb0\u5f55\uff0c\u8fc7\u53bb\u81ea\u5df1\u5728\u770b\u4e00\u4e9b\u4ee3\u7801\u7684\u65f6\u5019\u7ecf\u5e38\u4f1a\u56f0\u60d1\uff0c\u770b\u4e0d\u61c2\uff0c\u7136\u540e\u81ea\u5df1\u53bb\u67e5\u8d44\u6599\u3001\u770b\u4e66\u7c4d\uff0c\u6162\u6162\u7684\u4e00\u4e2a\u4e2a\u5f04\u61c2\uff0c\u7ecf\u5e38\u6c89\u6d78\u5176\u4e2d\u3002\u5173\u4e8e Python \u9ad8\u7ea7\u8bed\u6cd5\u7684\u8d44\u6599\u3001\u4e66\u7c4d\u4e0d\u5c11\uff0c\u8be6\u7ec6\u662f\u8be6\u7ec6\uff0c\u4f46\u662f\u603b\u611f\u89c9\u5199\u7684\u592a\u590d\u6742\uff0c\u5b66\u4e60\u6709\u96be\u5ea6\uff0c\u800c\u4e14\u4e0d\u80fd\u4f7f\u4eba\u5370\u8c61\u6df1\u523b\u3002</p> <p>\u201c<code>TLDR</code>\u201d \u662f\u6d41\u884c\u7684\u4e92\u8054\u7f51\u884c\u8bdd\uff0c\u610f\u601d\u662f\u201c\u592a\u957f\u4e0d\u8bfb\uff08 to long didn't read \uff09\u201d\u3002\u5176\u5b9e\u5f88\u591a\u5185\u5bb9\u7684\u6838\u5fc3\u77e5\u8bc6\u5c31\u90a3\u4e48\u4e00\u70b9\uff0c\u7ec6\u679d\u672b\u8282\u7684\u4e1c\u897f\u86ee\u591a\uff0c\u63cf\u8ff0\u8bcd\u53e5\u4e5f\u5f88\u5b98\u65b9\u5f88\u6666\u6da9\uff0c\u5f88\u96be\u8bfb\u61c2\uff0c\u7ed9\u4eba\u611f\u89c9\u5c31\u662f\u6bcf\u4e2a\u5b57\u6211\u90fd\u8ba4\u8bc6\uff0c\u600e\u4e48\u653e\u5230\u4e00\u8d77\u5c31\u4e0d\u8ba4\u8bc6\u4e86\u3002\u901a\u4fd7\u6613\u61c2\u7248\u5c31\u662f\u60f3\u7528\u4e00\u79cd\u6bd4\u8f83\u8f7b\u677e\u3001\u7b80\u5355\u7684\u65b9\u5f0f\u8bf4\u660e\u5176\u4e2d\u7684\u91cd\u70b9\u4e14\u5e38\u7528\u7684\u5185\u5bb9\uff0c\u5728\u5199\u4f5c\u7684\u8fc7\u7a0b\u4e2d\u6211\u4e5f\u65f6\u5e38\u544a\u8beb\u81ea\u5df1\u8981\u514b\u5236\uff0c\u522b\u6574\u590d\u6742\u4e86\u3002</p> <p>Python \u662f\u4e00\u95e8\u5f88\u5bb9\u6613\u5165\u95e8\u7684\u8bed\u8a00\uff0c\u4f46\u662f\u8981\u8fdb\u9636\u5176\u5b9e\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7684\u65f6\u95f4\u548c\u7cbe\u529b\uff0c\u800c\u4e14\u8fd8\u9700\u8981\u4e0d\u65ad\u7684\u7ec3\u4e60\u4f7f\u7528\uff0c\u6216\u8bb8\u4f60\u5df2\u7ecf\u82b1\u4e86\u4e24\u4e2a\u6708\u65f6\u95f4\u5b66\u4e60\u4e86 Python \u57fa\u7840\u5e76\u80fd\u591f\u5199\u4e00\u4e9b\u5c0f\u811a\u672c\uff0c\u6216\u8bb8\u4f60\u5df2\u7ecf\u8fbe\u5230\u4e00\u5b9a\u9ad8\u5ea6\u80fd\u72ec\u7acb\u7f16\u5199\u5927\u578b\u9879\u76ee\uff0c\u4f46\u662f\u5b66\u4e60\u6c38\u65e0\u6b62\u5883\uff0c\u6211\u4eec\u90fd\u8fd8\u6709\u5f88\u591a\u9700\u8981\u5b66\u4e60\u63d0\u5347\u7684\u5730\u65b9\u3002\u4ee5\u4e0b\u5185\u5bb9\u7edd\u5927\u90e8\u5206\u90fd\u662f\u6211\u5728\u9879\u76ee\u4e2d\u7528\u8fc7\u7684\uff0c\u5f88\u591a\u63cf\u8ff0\u662f\u6211\u81ea\u5df1\u7684\u7406\u89e3\uff0c\u53ef\u80fd\u4f1a\u548c\u5b98\u65b9\u6709\u4e00\u5b9a\u51fa\u5165\uff0c\u4f46\u662f\u76f8\u4fe1\u5927\u5dee\u4e0d\u5dee\uff0c\u4e5f\u6b22\u8fce\u6709\u5fc3\u4eba\u4e0d\u541d\u8d50\u6559\u3002</p> <p>\u5185\u5bb9\u8fd8\u4f1a\u7ee7\u7eed\u589e\u52a0\uff0c\u5305\u62ec\u4e00\u4e9b\u7b80\u5355\u597d\u7528\u7684\u6807\u51c6\u5e93\u3001\u4e09\u65b9\u5e93\u90fd\u4f1a\u6301\u7eed\u52a0\u8fdb\u6765\uff0c\u5e0c\u671b\u770b\u5230\u7684\u540c\u5b66\u53ef\u4ee5\u591a\u591a\u63d0\u610f\u89c1\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_2","title":"\u4e8c\u3001\u7c7b\u548c\u5bf9\u8c61","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1","title":"1\u3001\u9e2d\u5b50\u7c7b\u578b","text":"<p>\u201c\u5f53\u770b\u5230\u4e00\u53ea\u9e1f\u8d70\u8d77\u6765\u50cf\u9e2d\u5b50\u3001\u6e38\u6cf3\u8d77\u6765\u50cf\u9e2d\u5b50\u3001\u53eb\u8d77\u6765\u4e5f\u50cf\u9e2d\u5b50\uff0c\u90a3\u4e48\u8fd9\u53ea\u9e1f\u5c31\u53ef\u4ee5\u88ab\u79f0\u4e3a\u9e2d\u5b50\u3002\u201d \u8fd9\u662f\u767e\u79d1\u4e0a\u5bf9\u5b83\u7684\u89e3\u91ca\u3002</p> <p>\u9e2d\u5b50\u7c7b\u578b\uff08duck typing\uff09\u662f\u52a8\u6001\u7c7b\u578b\u7684\u4e00\u79cd\u98ce\u683c\uff0c\u9e2d\u5b50\u7c7b\u578b\u5bf9\u4e8e Python \u7f16\u7801\u6765\u8bb2\u975e\u5e38\u91cd\u8981\uff0c\u7406\u89e3\u5b83\u80fd\u8ba9\u4f60\u771f\u6b63\u7406\u89e3\u4ec0\u4e48\u662f\u4e00\u5207\u7686\u5bf9\u8c61\uff0c\u66f4\u6709\u52a9\u4e8e\u6211\u4eec\u7406\u89e3\u8fd9\u95e8\u8bed\u8a00\u7684\u8bbe\u8ba1\u601d\u60f3\u548c\u5b9e\u73b0\u539f\u7406\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u6d6e\u4e8e\u8868\u9762\u7684\u5ff5\u7ecf \u201c\u4e00\u5207\u7686\u5bf9\u8c61\u201d\u3002</p> <p>\u9e2d\u5b50\u7c7b\u578b\u59cb\u7ec8\u8d2f\u7a7f\u4e8e Python \u4ee3\u7801\u5f53\u4e2d\uff0c\u4e00\u4e2a\u5bf9\u8c61\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u53d6\u51b3\u4e8e\u5b83\u5b9e\u73b0\u4e86\u4ec0\u4e48\u534f\u8bae\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bf4 Python \u662f\u4e00\u79cd\u57fa\u4e8e\u534f\u8bae\u7684\u7f16\u7a0b\u8bed\u8a00\u3002</p> <p>\u90a3\u8fd9\u4e9b\u534f\u8bae\u662f\u4ec0\u4e48\uff0c\u53c8\u6709\u54ea\u4e9b\u534f\u8bae\uff1f\u8fd9\u91cc\u7684\u534f\u8bae\uff0c\u66f4\u591a\u7684\u65f6\u5019\u6211\u4eec\u79f0\u4e3a\u9b54\u6cd5\u51fd\u6570\u6216\u9b54\u6cd5\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u5177\u6709\u5f88\u591a\u795e\u5947\u7684\u9b54\u529b\uff0c\u574a\u95f4\u56e0\u6b64\u79f0\u4e4b\u4e3a\u9b54\u6cd5\u51fd\u6570\u3002</p> <p>\u5728 Python \u91cc\u9762\uff0c\u6240\u6709\u4ee5\u53cc\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u4e14\u4ee5\u53cc\u4e0b\u5212\u7ebf\u7ed3\u5c3e\u7684\u51fd\u6570\u90fd\u662f\u9b54\u6cd5\u51fd\u6570\uff0c\u5c31\u50cf <code>__init__</code> \u8fd9\u79cd\uff0c\u5b83\u4eec\u662f Python \u8bed\u8a00\u5929\u7136\u81ea\u5e26\u7684\uff0c\u4e0d\u662f\u901a\u8fc7\u67d0\u4e2a\u7c7b\u53bb\u7ee7\u627f\u800c\u6765\u7684\uff0c\u6211\u4eec\u4e5f\u4e0d\u8981\u968f\u610f\u53bb\u81ea\u5b9a\u4e49\u4e00\u4e2a\u8fd9\u6837\u7684\u51fd\u6570\uff0c\u5c0f\u5fc3\u7740\u9b54\u3002</p> <p>\u9b54\u6cd5\u51fd\u6570\u6709\u5f88\u591a\uff0c\u4f46\u662f\u7ecf\u5e38\u7528\u5230\u7684\u4e5f\u6ca1\u591a\u5c11\uff0c\u5e38\u7528\u7684\u4e00\u4e9b\u9b54\u6cd5\u51fd\u6570\u5728\u540e\u9762\u7684\u5185\u5bb9\u4f1a\u9010\u6b65\u4ecb\u7ecd\u5230\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2","title":"2\u3001\u7c7b\u578b\u5224\u65ad","text":"<p>\u5728\u5224\u65ad\u6570\u636e\u7c7b\u578b\u7684\u65f6\u5019\u5e38\u89c1\u7684\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a<code>isinstance</code> \u548c <code>type</code> </p> <pre><code>isinstance(\"123\", str)  # \u8fd4\u56de\u5e03\u5c14\u503c\ntype(\"123\")  # \u76f4\u63a5\u8fd4\u56de\u7c7b\u578b\n</code></pre> <p>isinstance \u4e3b\u8981\u7528\u4e8e\u5224\u65ad\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u8fd9\u4e2a\u597d\u7406\u89e3\uff0c\u4e0d\u591a\u8bb2\u3002</p> <p>type \u53ef\u4ee5\u67e5\u770b\u7c7b\u578b\uff0c\u4f46\u5b83\u80fd\u505a\u7684\u8fdc\u4e0d\u6b62\u4e8e\u6b64\uff0c\u5b83\u4e3b\u8981\u7528\u4e8e\u52a8\u6001\u7684\u521b\u5efa\u7c7b\u3002</p> <pre><code>t = type(\"Mikigo\", (), {\"name\": \"huangmingqiang\"})\nT = t()\nprint(t)\nprint(T.name)\nprint(type(t))\n</code></pre> <pre><code>&lt;class '__main__.Mikigo'&gt;\nhuangmingqiang\n&lt;class 'type'&gt;\n</code></pre> <p>\u4f60\u770b\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u5e76\u8d4b\u503c\u7ed9 t\uff0c\u7c7b\u540d\u4e3a <code>Mikigo</code>\uff0ct \u662f\u7c7b\u5bf9\u8c61\u7684\u5f15\u7528\uff0cname \u662f\u5176\u4e2d\u7684\u5c5e\u6027\uff0cPython \u4e2d\u4e00\u5207\u90fd\u662f\u5bf9\u8c61\uff0c\u7c7b\u4e5f\u662f\u5bf9\u8c61\uff0c\u53ea\u4e0d\u8fc7\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u662f <code>type</code> \u7684\u5bf9\u8c61\u3002</p> <p>\u8fd9\u4e2a\u5730\u65b9\u6709\u70b9\u7ed5\u54c8\uff0c\u4f60\u7ec6\u54c1\u3002</p> <p>\u6211\u770b\u5230\u7f51\u4e0a\u597d\u591a\u8bb2 <code>type</code> \u51fd\u6570\uff0c\u51c6\u786e\u8bb2 <code>type</code> \u662f\u4e00\u4e2a\u7c7b\uff0c\u53ea\u662f\u7528\u6cd5\u50cf\u51fd\u6570\u3002\u5728\u6e90\u7801\u4e2d\uff1a\uff08\u901a\u8fc7 <code>Pycharm</code> \u6309\u4f4f <code>Ctrl</code> \u70b9\u51fb\u8fdb\u5165\uff09</p> <pre><code>class type(object):\ndef __init__(cls, what, bases=None, dict=None): # known special case of type.__init__\n\"\"\"\n        type(object_or_name, bases, dict)\n        type(object) -&gt; the object's type\n        type(name, bases, dict) -&gt; a new type\n        # (copied from class doc)\n        \"\"\"\npass\n</code></pre> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u4e3a\u4ec0\u4e48\u6e90\u7801\u91cc\u9762\u6709 <code>pass</code>\uff0c\u4f60\u6ca1\u770b\u9519\uff0c\u6e90\u7801\u91cc\u9762\u5c31\u662f\u5199\u7684 <code>pass</code>\uff0c\u8fd9\u79cd\u5b9e\u9645\u4e0a\u662f\u7531\u4e8e\u5e95\u5c42\u662f\u7531 C \u8bed\u8a00\u5b9e\u73b0\u7684\uff08\u672c\u6587\u5185\u5bb9\u90fd\u662f\u57fa\u4e8e <code>CPython</code>\uff09\uff0c\u4e00\u822c\u7684\u64cd\u4f5c\u662f\u770b\u4e0d\u5230\u6e90\u7801\u7684\uff0c\u4e4b\u6240\u4ee5\u80fd\u770b\u5230\u662f\u56e0\u4e3a <code>Pycharm</code> \u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\u529f\u80fd\uff08\u5176\u4ed6\u7f16\u8f91\u5668\u4e0d\u77e5\u9053\u54c8\uff0c\u6ca1\u548b\u7528\u8fc7\u5176\u4ed6\u7684\uff09\uff0c\u76f8\u5f53\u4e8e\u4ee5\u4ee3\u7801\u7684\u5f62\u5f0f\u770b\u6587\u6863\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u5230\u7684\u4e0d\u662f\u771f\u6b63\u7684\u6e90\u7801\uff0c\u4f46\u662f\u6700\u63a5\u8fd1\u4e8e\u6e90\u7801\u7684\u6e90\u7801\uff0c\u59d1\u4e14\u79f0\u4e4b\u4e3a\u6e90\u7801\u5427\u3002</p> <p>type \u7684\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li> <p>\u5f53 type() \u53ea\u6709\u4e00\u4e2a\u53c2\u6570\u65f6\uff0c\u5176\u4f5c\u7528\u5c31\u662f\u8fd4\u56de\u53d8\u91cf\u6216\u5bf9\u8c61\u7684\u7c7b\u578b\u3002</p> </li> <li> <p>\u5f53 type() \u6709\u4e09\u4e2a\u53c2\u6570\u65f6\uff0c\u5176\u4f5c\u7528\u5c31\u662f\u521b\u5efa\u7c7b\u5bf9\u8c61\uff1a</p> </li> <li> <p>\u53c2\u6570 1\uff1a<code>what</code> \u8868\u793a\u7c7b\u540d\u79f0\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\uff1b</p> </li> <li>\u53c2\u6570 2\uff1a<code>bases</code> \u8868\u793a\u7ee7\u627f\u5bf9\u8c61\uff08\u7236\u7c7b\uff09\uff0c\u5143\u7ec4\u7c7b\u578b\uff0c\u5355\u5143\u7d20\u4f7f\u7528\u9017\u53f7\uff1b</li> <li>\u53c2\u6570 3\uff1a<code>dict</code> \u8868\u793a\u5c5e\u6027\uff0c\u8fd9\u91cc\u53ef\u4ee5\u586b\u5199\u7c7b\u5c5e\u6027\u3001\u7c7b\u65b9\u5f0f\u3001\u9759\u6001\u65b9\u6cd5\uff0c\u91c7\u7528\u5b57\u5178\u683c\u5f0f\uff0c<code>key</code> \u4e3a\u5c5e\u6027\u540d\uff0c<code>value</code> \u4e3a\u5c5e\u6027\u503c\u3002</li> </ul> <pre><code>@staticmethod\ndef my_static():\nprint(\"this is static\")\nt = type(\"Mikigo\", (), {\"name\": \"huangmingqiang\", \"static\": my_static})\nT = t()\nt.static()\nT.static()\n</code></pre> <pre><code>this is static\nthis is static\n</code></pre> <p>\u8fd9\u6837\u5c31\u6dfb\u52a0\u4e86\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5f88\u6e05\u695a\u54c8\uff0c\u5173\u4e8e\u9759\u6001\u65b9\u6cd5\u662f\u4ec0\u4e48\u6211\u4eec\u540e\u9762\u4f1a\u8bb2\u5230\uff0c\u8fd9\u91cc\u53ea\u9700\u8981\u77e5\u9053 type \u521b\u5efa\u7c7b\u7684\u65b9\u6cd5\u5c31\u597d\u4e86\u3002</p> <p>\u901a\u8fc7\u4e0a\u9762 type \u7684\u6e90\u7801\u53ef\u4ee5\u770b\u5230\uff0ctype \u662f\u7ee7\u627f\u4e86 object \u7684\uff0c\u6211\u4eec\u77e5\u9053\u6240\u6709\u7c7b\u7684\u9876\u5c42\u7c7b\u90fd\u662f\u7ee7\u627f\u7684 object\uff0c\u90a3 object \u53c8\u662f\u4ece\u54ea\u91cc\u6765\u7684\uff1f\u6253\u5370\u770b\u4e00\u4e0b\uff1a</p> <pre><code>print(type(object))\n</code></pre> <pre><code>&lt;class 'type'&gt;\n</code></pre> <p>\u597d\u5bb6\u4f19\uff0cobject \u4e5f\u662f\u7531 type \u521b\u5efa\u7684\uff0c\u524d\u9762\u8bf4\u4e86 type \u7ee7\u627f\u4e86 object\uff0c\u8fd9\u4fe9\u54e5\u4eec\u513f\u5b8c\u7f8e\u95ed\u73af\u4e86\uff0c\u6211\u76f4\u63a5\u597d\u5bb6\u4f19\uff0c\u7406\u89e3\u8d77\u6765\u6709\u70b9\u66f4\u7ed5\u4e86\u54c8\u3002</p> <p>\u4f60\u4e5f\u53ef\u4ee5\u8bf4 type \u81ea\u5df1\u521b\u5efa\u4e86\u81ea\u5df1\uff0c\u8fd9\u91cc\u8981\u7ec6\u7ec6\u7684\u54c1\u3002\u5b9e\u9645\u4e0a\u5982\u679c\u4f60\u4e86\u89e3\u6307\u9488\u7684\u6982\u5ff5\uff0c\u8fd9\u91cc\u5176\u5b9e\u4e5f\u4e0d\u96be\u7406\u89e3\uff0c\u4e0d\u5c31\u662f\u81ea\u5df1\u6307\u5411\u81ea\u5df1\u561b\uff0c\u6240\u4ee5\u8bf4 type \u521b\u5efa\u4e86\u6240\u6709\u7c7b\uff0c\u56e0\u4e3a\u4ed6\u8fde\u4ed6\u81ea\u5df1\u90fd\u4e0d\u653e\u8fc7\uff0c\u8fd8\u6709\u4ec0\u4e48\u4e8b\u60c5\u505a\u4e0d\u51fa\u6765\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3","title":"3\u3001\u7c7b\u53d8\u91cf\u548c\u5b9e\u4f8b\u53d8\u91cf","text":"<p>\uff081\uff09\u7c7b\u53d8\u91cf\u662f\u5728\u7c7b\u91cc\u9762\u76f4\u63a5\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5b83\u53ef\u4ee5\u88ab\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\uff0c\u4e5f\u53ef\u4ee5\u88ab\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\u3002</p> <pre><code>class Test:\nb = 1\ndef __init__(self):  # \u6784\u9020\u51fd\u6570\nself.a = 1\nT = Test()\nprint(T.b)\nprint(Test.b)\nT.b = 2  # \u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u8d4b\u503c\nprint(T.b)\nTest.b = 2 # \u901a\u8fc7\u7c7b\u5bf9\u8c61\u8d4b\u503c\nprint(Test.b)\n</code></pre> <pre><code>1\n1\n2\n2\n</code></pre> <p>b \u662f\u7c7b\u53d8\u91cf\uff0c\u90fd\u80fd\u88ab\u8bbf\u95ee\u548c\u8d4b\u503c\uff0c\u6ca1\u95ee\u9898\u54c8\u3002</p> <p>\uff082\uff09\u5b9e\u4f8b\u53d8\u91cf\u662f\u5728\u6784\u9020\u51fd\u6570\u91cc\u9762\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5b83\u53ef\u4ee5\u88ab\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\uff0c\u4e0d\u80fd\u88ab\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\u3002</p> <pre><code>class Test:\nb = 1\ndef __init__(self):\nself.a = 1\nT = Test()\nprint(T.a)\nT.a = 2\nprint(T.a)\nprint(Test.a)\nTest.a = 2\nprint(Test.a)\n</code></pre> <pre><code>1\n2\nTraceback (most recent call last):\nFile \"/tmp/pycharm_project_16/123.py\", line 12, in &lt;module&gt;\nprint(Test.a)\nAttributeError: type object 'Test' has no attribute 'a'\n</code></pre> <p>a \u662f\u5b9e\u4f8b\u53d8\u91cf\uff0c\u4f60\u770b\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\u6b63\u5e38\u7684\uff0c\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u5c31\u62a5\u9519\u4e86\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4","title":"4\u3001\u7c7b\u65b9\u6cd5\u3001\u9759\u6001\u65b9\u6cd5\u548c\u5b9e\u4f8b\u65b9\u6cd5","text":"<p>\uff081\uff09\u5b9e\u4f8b\u65b9\u6cd5\u53c8\u79f0\u5bf9\u8c61\u65b9\u6cd5\uff0c\u662f\u7c7b\u4e2d\u6700\u5e38\u89c1\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p> <pre><code>class Test:\ndef obj_method(self):\nprint(\"this is obj method\")\n</code></pre> <p>\u5b9e\u4f8b\u65b9\u6cd5\u53c2\u6570\u5fc5\u987b\u4f20\u5165 <code>self</code> \uff0c<code>self</code> \u8868\u793a\u5b9e\u4f8b\u5bf9\u8c61\u672c\u8eab\uff0c\u5b9e\u4f8b\u65b9\u6cd5\u7684\u8c03\u7528\u4e5f\u5fc5\u987b\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u6765\u8c03\u7528\uff1a</p> <pre><code>Test().obj_method()\n</code></pre> <p>\uff082\uff09\u7c7b\u65b9\u6cd5</p> <pre><code>class Test:\n@classmethod\ndef cls_method(cls):\nprint(\"this is class method\")\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7\u7c7b\u5bf9\u8c61\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u8c03\u7528\u3002</p> <pre><code>Test.cls_method()\nTest().cls_method()\n</code></pre> <p>\u6ce8\u610f\u4e24\u70b9\uff1a</p> <ul> <li>\u65b9\u6cd5\u524d\u9762\u5fc5\u987b\u52a0\u88c5\u9970\u5668 <code>classmethod</code> \uff0c\u88c5\u9970\u5668\u662f <code>Python</code> \u4e2d\u7684\u4e00\u79cd\u8bed\u6cd5\u7cd6\uff0c\u540e\u9762\u4f1a\u8bb2\u5230\uff0c\u8bb0\u4f4f\u8fd9\u79cd\u56fa\u5b9a\u7528\u6cd5\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u521d\u4ee3\u88c5\u9970\u5668\u7684\u7528\u6cd5\u3002</li> <li>\u53c2\u6570\u4f20\u5165 <code>cls</code> \uff0c<code>cls</code> \u8868\u793a\u7c7b\u5bf9\u8c61\uff0c\u4f46\u662f\u6ce8\u610f\u4e0d\u662f\u5fc5\u987b\u7684\u5199\u6cd5\uff0c\u5199 <code>cls</code> \u662f\u4e00\u79cd\u7ea6\u5b9a\u4fd7\u6210\u7684\u5199\u6cd5\uff0c\u65b9\u4fbf\u6211\u4eec\u7406\u89e3\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u91cc\u4f60\u5199 <code>self</code> \u4ece\u8bed\u6cd5\u4e0a\u4e5f\u662f\u4e0d\u4f1a\u6709\u95ee\u9898\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6709\u65f6\u5019\u6211\u4eec\u5c06\u4e00\u4e2a\u5b9e\u4f8b\u65b9\u6cd5\u6539\u6210\u7c7b\u65b9\u6cd5\uff0c\u76f4\u63a5\u5728\u65b9\u6cd5\u524d\u9762\u6dfb\u52a0\u4e86\u88c5\u9970\u5668\uff0c\u800c\u6ca1\u6709\u6539 <code>self</code>\uff0c\u4ecd\u7136\u80fd\u6b63\u5e38\u6267\u884c\u7684\u539f\u56e0\u3002</li> </ul> <p>\uff083\uff09\u9759\u6001\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u666e\u901a\u7684\u51fd\u6570\uff0c\u548c\u8fd9\u4e2a\u7c7b\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u5b83\u53ea\u662f\u8fdb\u5165\u7c7b\u7684\u540d\u79f0\u7a7a\u95f4\u3002</p> <pre><code>class Test:\n@staticmethod\ndef static_method():\nprint(\"this is static method\")\n</code></pre> <p>\u4e0d\u9700\u8981\u4f20\u5165\u4efb\u4f55\u53c2\u6570\u3002\u540c\u6837\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b\u5bf9\u8c61\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u8c03\u7528\u3002</p> <pre><code>Test.static_method()\nTest().static_method()\n</code></pre> <p>\u6211\u770b\u5230\u4e00\u4e9b\u793e\u533a\u5927\u4f6c\u90fd\u8868\u73b0\u51fa\u5bf9\u9759\u6001\u65b9\u6cd5\u7684\u5acc\u5f03\uff0c\u4ed6\u4eec\u89c9\u5f97\u65e2\u7136\u9759\u6001\u65b9\u6cd5\u548c\u7c7b\u6ca1\u6709\u5173\u7cfb\uff0c\u4f55\u4e0d\u5982\u5728\u7c7b\u5916\u9762\u5199\uff0c\u76f4\u63a5\u5199\u5728\u6a21\u5757\u91cc\u9762\u5c82\u4e0d\u5feb\u54c9\u3002\u54b1\u4eec\u4e0d\u4e88\u8bc4\u4ef7\uff0c\u5b58\u5728\u5373\u5408\u7406\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#5","title":"5\u3001\u7c7b\u548c\u5b9e\u4f8b\u5c5e\u6027\u7684\u67e5\u627e\u987a\u5e8f","text":"<p>\u8fd9\u91cc\u9700\u8981\u5f15\u5165\u4e00\u4e2a\u6982\u5ff5\uff1a<code>MRO\uff08Method Resolution Order\uff09</code>\uff0c\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\u201c\u65b9\u6cd5\u67e5\u627e\u987a\u5e8f\u201d\u3002</p> <p>\u5927\u5bb6\u77e5\u9053\u7c7b\u662f\u53ef\u4ee5\u7ee7\u627f\u7684\uff0c\u5b50\u7c7b\u7ee7\u627f\u4e86\u7236\u7c7b\uff0c\u5b50\u7c7b\u5c31\u53ef\u4ee5\u8c03\u7528\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u90a3\u4e48\u5728\u591a\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b\uff0c\u5b50\u7c7b\u5728\u8c03\u7528\u7236\u7c7b\u65b9\u6cd5\u65f6\u7684\u903b\u8f91\u65f6\u600e\u6837\u7684\u5462\uff0c\u5982\u679c\u591a\u4e2a\u7236\u7c7b\u4e2d\u5b58\u5728\u76f8\u540c\u7684\u65b9\u6cd5\uff0c\u8c03\u7528\u903b\u8f91\u53c8\u662f\u600e\u6837\u7684\u5462\uff0c\u8fd9\u5c31\u662f <code>MRO</code>\u3002</p> <p>\u5728<code>Python2.3</code> \u4e4b\u524d\u7684\u4e00\u4e9b\u67e5\u627e\u7b97\u6cd5\uff0c\u6bd4\u5982\uff1a\u6df1\u5ea6\u4f18\u5148\uff08<code>deep first search</code>\uff09\u3001\u5e7f\u5ea6\u4f18\u5316\u7b49\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u83f1\u5f62\u7ee7\u627f\u7684\u95ee\u9898\u90fd\u4e0d\u80fd\u5f88\u597d\u7684\u5904\u7406\u3002\u8fd9\u90e8\u5206\u5185\u5bb9\u6bd4\u8f83\u591a\u4e14\u6742\uff0c\u53ef\u4ee5\u81ea\u5df1\u67e5\u9605\u8d44\u6599\u3002</p> <p>\u5728 <code>Python2.3</code> \u4e4b\u540e\uff0c\u65b9\u6cd5\u7684\u67e5\u627e\u7b97\u6cd5\u90fd\u7edf\u4e00\u4e3a\u53eb <code>C3</code> \u7684\u67e5\u627e\u7b97\u6cd5\uff0c\u5347\u7ea7\u4e4b\u540e\u7684\u7b97\u6cd5\u66f4\u52a0\u590d\u6742\uff0c\u91c7\u7528\u7684\u7279\u6280\u7248\u62d3\u6251\u6392\u5e8f\uff0c\u8fd9\u91cc\u4e5f\u4e0d\u7ec6\u8bb2\uff0c\u53ef\u4ee5\u81ea\u5df1\u67e5\u9605\u8d44\u6599\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5173\u5fc3\u73b0\u5728\u65b9\u6cd5\u67e5\u627e\u987a\u5e8f\u662f\u600e\u6837\u7684\u5c31\u884c\u4e86\u3002</p> <p>\u6765\uff0c\u8fd9\u91cc\u4e3e\u4f8b\u8bf4\u660e\uff1a</p> <pre><code>class A:\npass\nclass B:\npass\nclass C(A, B):\npass\nprint(C.__mro__)\n</code></pre> <p><code>__mro__</code> \u53ef\u4ee5\u67e5\u770b\u65b9\u6cd5\u7684\u67e5\u627e\u987a\u5e8f\u3002</p> <pre><code>(&lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class '__main__.B'&gt;, &lt;class 'object'&gt;)\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e C \u6765\u8bb2\uff0c\u5b83\u91cc\u9762\u7684\u65b9\u6cd5\u67e5\u627e\u987a\u5e8f\u662f C \u2014 A \u2014 B\uff0c\u6ca1\u6bdb\u75c5\u54c8\uff0c\u5f88\u6e05\u695a\u3002</p> <p>\u73b0\u5728\u5347\u7ea7\u4e00\u4e0b\u7ee7\u627f\u5173\u7cfb\uff0c\u8bd5\u8bd5\u83f1\u5f62\u7ee7\u627f\uff1a</p> <pre><code>class A:\npass\nclass B(A):\npass\nclass C(A):\npass\nclass D(B, C):\npass\nprint(D.__mro__)\n</code></pre> <pre><code>(&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)\n</code></pre> <p>D \u7684\u67e5\u627e\u987a\u5e8f\u662f D \u2014 B \u2014 C \u2014 A</p> <p>\u8bf4\u660e\u4ec0\u4e48\u95ee\u9898\uff1f\u6211\u5728\u8fd9\u567c\u91cc\u556a\u5566\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u5230\u5e95\u60f3\u8bf4\u5565\uff1f</p> <p>\u60f3\u8c61\u4e00\u4e0b\uff0c\u5982\u679c\u4f60\u5728 B \u548c C \u91cc\u9762\u90fd\u91cd\u8f7d\u4e86 A \u91cc\u9762\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u6b64\u65f6\u5982\u679c\u4f60\u60f3\u8c03\u7528\u7684\u662f C \u91cc\u9762\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u662f\u65e0\u6cd5\u8c03\u7528\u7684\uff0c\u56e0\u4e3a\u6839\u636e\u65b9\u6cd5\u7684\u67e5\u627e\u987a\u5e8f\uff0c\u4f1a\u5148\u627e\u5230 B \u91cc\u9762\u7684\u65b9\u6cd5\u3002</p> <p>\u56e0\u6b64\uff0c\u91cd\u70b9\u6765\u4e86\uff1a\u5728 Python \u4e2d\u867d\u7136\u662f\u652f\u6301\u591a\u7ee7\u627f\u7684\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\u591a\u7ee7\u627f\uff0c\u56e0\u4e3a\u5982\u679c\u7ee7\u627f\u5173\u7cfb\u8bbe\u8ba1\u5f97\u4e0d\u597d\uff0c\u5f88\u5bb9\u6613\u9020\u6210\u903b\u8f91\u5173\u7cfb\u7684\u6df7\u4e71\uff0c\u539f\u56e0\u5c31\u662f <code>MRO</code>\u3002</p> <p>Ruby \u4e4b\u7236\u5728\u300a\u677e\u672c\u884c\u5f18\u7684\u7a0b\u5e8f\u4e16\u754c\u300b\u4e66\u4e2d\uff0c\u8bb2\u5230\u4e09\u70b9\u591a\u7ee7\u627f\u7684\u95ee\u9898\uff1a</p> <ul> <li> <p>\u7ed3\u6784\u590d\u6742\u5316\uff1a\u5982\u679c\u662f\u5355\u4e00\u7ee7\u627f\uff0c\u4e00\u4e2a\u7c7b\u7684\u7236\u7c7b\u662f\u4ec0\u4e48\uff0c\u7236\u7c7b\u7684\u7236\u7c7b\u662f\u4ec0\u4e48\uff0c\u90fd\u5f88\u660e\u786e\uff0c\u56e0\u4e3a\u53ea\u6709\u5355\u4e00\u7684\u7ee7\u627f\u5173\u7cfb\uff0c\u7136\u800c\u5982\u679c\u662f\u591a\u91cd\u7ee7\u627f\u7684\u8bdd\uff0c\u4e00\u4e2a\u7c7b\u6709\u591a\u4e2a\u7236\u7c7b\uff0c\u8fd9\u4e9b\u7236\u7c7b\u53c8\u6709\u81ea\u5df1\u7684\u7236\u7c7b\uff0c\u90a3\u4e48\u7c7b\u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u5f88\u590d\u6742\u4e86\u3002</p> </li> <li> <p>\u4f18\u5148\u987a\u5e8f\u6a21\u7cca\uff1a\u5047\u5982\u6211\u6709A\uff0cC\u7c7b\u540c\u65f6\u7ee7\u627f\u4e86\u57fa\u7c7b\uff0cB\u7c7b\u7ee7\u627f\u4e86A\u7c7b\uff0c\u7136\u540eD\u7c7b\u53c8\u540c\u65f6\u7ee7\u627f\u4e86B\u548cC\u7c7b\uff0c\u6240\u4ee5D\u7c7b\u7ee7\u627f\u7236\u7c7b\u7684\u65b9\u6cd5\u7684\u987a\u5e8f\u5e94\u8be5\u662fD\u3001B\u3001A\u3001C\u8fd8\u662fD\u3001B\u3001C\u3001A\uff0c\u6216\u8005\u662f\u5176\u4ed6\u7684\u987a\u5e8f\uff0c\u5f88\u4e0d\u660e\u786e\u3002</p> </li> <li> <p>\u529f\u80fd\u51b2\u7a81\uff1a\u56e0\u4e3a\u591a\u91cd\u7ee7\u627f\u6709\u591a\u4e2a\u7236\u7c7b\uff0c\u6240\u4ee5\u5f53\u4e0d\u540c\u7684\u7236\u7c7b\u4e2d\u6709\u76f8\u540c\u7684\u65b9\u6cd5\u662f\u5c31\u4f1a\u4ea7\u751f\u51b2\u7a81\u3002\u5982\u679cB\u7c7b\u548cC\u7c7b\u540c\u65f6\u53c8\u6709\u76f8\u540c\u7684\u65b9\u6cd5\u65f6\uff0cD\u7ee7\u627f\u7684\u662f\u54ea\u4e2a\u65b9\u6cd5\u5c31\u4e0d\u660e\u786e\u4e86\uff0c\u56e0\u4e3a\u5b58\u5728\u4e24\u79cd\u53ef\u80fd\u6027\u3002</p> </li> </ul> <p>\u770b\u770b\u8fd9\u662f\u5927\u4f6c\u8bf4\u7684\uff0c\u4e0d\u662f\u6211\u8bf4\u7684\u3002</p> <p>\u90a3\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u6211\u5199\u7684\u529f\u80fd\u5f88\u590d\u6742\u554a\uff0c\u5fc5\u987b\u8981\u7ee7\u627f\u591a\u4e2a\u7c7b\uff0c\u600e\u4e48\u529e\uff0c\u96be\u53d7\uff01</p> <p>\u5b9e\u9645\u4e0a\u6709\u4e00\u79cd\u6bd4\u8f83\u6d41\u884c\u4e14\u5148\u8fdb\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff1a<code>Mixin</code> \u6df7\u5408\u6a21\u5f0f\uff0c\u5b8c\u7f8e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a</p> <pre><code>class Animal:\npass\n# \u5927\u7c7b\nclass Mammal(Animal):\npass\n# \u5404\u79cd\u52a8\u7269\nclass Dog(Mammal):\npass\nclass Bat(Mammal):\npass\n</code></pre> <p>\u73b0\u5728\u52a8\u7269\u4eec\u6ca1\u6709\u4efb\u4f55\u6280\u80fd\uff0c\u54b1\u4eec\u9700\u8981\u7ed9\u52a8\u7269\u4eec\u589e\u52a0\u4e00\u4e0b\u6280\u80fd\uff1a</p> <pre><code>class RunnableMixIn:\ndef run(self):\nprint('Running...')\nclass FlyableMixIn:\ndef fly(self):\nprint('Flying...')\n</code></pre> <p>\u6ce8\u610f <code>Mixin</code> \u7684\u7c7b\u529f\u80fd\u662f\u72ec\u7acb\u7684\uff0c\u547d\u540d\u4e0a\u4e5f\u5e94\u8be5\u4f7f\u7528 <code>MixIn</code> \u7ed3\u5c3e\uff0c\u8fd9\u662f\u4e00\u79cd\u89c4\u8303\u3002</p> <p>\u9700\u8981 Run \u6280\u80fd\u7684\u52a8\u7269\uff1a</p> <pre><code>class Dog(Mammal, RunnableMixIn):\npass\n</code></pre> <p>\u9700\u8981 Fly \u6280\u80fd\u7684\u52a8\u7269\uff1a</p> <pre><code>class Bat(Mammal, FlyableMixIn):\npass\n</code></pre> <p>\u6709\u70b9\u611f\u89c9\u4e86\u6ca1\uff0c<code>Mixin</code> \u7c7b\u7684\u7279\u70b9\uff1a</p> <ul> <li>\u529f\u80fd\u72ec\u7acb\u3001\u5355\u4e00\uff1b</li> <li>\u53ea\u7528\u4e8e\u62d3\u5c55\u5b50\u7c7b\u7684\u529f\u80fd\uff0c\u4e0d\u80fd\u5f71\u54cd\u5b50\u7c7b\u7684\u4e3b\u8981\u529f\u80fd\uff0c\u5b50\u7c7b\u4e5f\u4e0d\u80fd\u4f9d\u8d56 <code>Mixin</code>\uff1b</li> <li>\u81ea\u8eab\u4e0d\u5e94\u8be5\u8fdb\u884c\u5b9e\u4f8b\u5316\uff0c\u4ec5\u7528\u4e8e\u88ab\u5b50\u7c7b\u7ee7\u627f\u3002</li> </ul> <p><code>Mixin</code> \u8bbe\u8ba1\u601d\u60f3\u7b80\u5355\u8bb2\u5c31\u662f\uff1a\u4e0d\u4e0e\u4efb\u4f55\u7c7b\u5173\u8054\uff0c\u53ef\u4e0e\u4efb\u4f55\u7c7b\u7ec4\u5408\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#6","title":"6\u3001\u7834\u89e3\u79c1\u6709\u5c5e\u6027","text":"<p>\u79c1\u6709\u5c5e\u6027\u5c31\u662f\u5728\u7c7b\u7684\u5185\u90e8\u80fd\u8bbf\u95ee\uff0c\u5916\u90e8\u4e0d\u80fd\u8bbf\u95ee\u3002</p> <p>\u5728 Python \u4e2d\u6ca1\u6709\u4e13\u95e8\u7684\u8bed\u53e5\u8fdb\u884c\u79c1\u6709\u5316\uff0c\u800c\u901a\u8fc7\u5728\u5c5e\u6027\u6216\u65b9\u6cd5\u524d\u9762\u52a0\u201c\u4e24\u4e2a\u4e0b\u5212\u7ebf\u201d\u5b9e\u73b0\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>class Test:\ndef __init__(self):\nself.__mi = \"Mikigo\" \ndef __ki(self):\nprint(\"Mikigo\")\ndef go(self):\nprint(self.__mi)\n</code></pre> <pre><code>Test().go()\n</code></pre> <pre><code>Mikigo\n</code></pre> <p>\u4f60\u770b\uff0c\u5728\u7c7b\u7684\u5185\u90e8\u8bbf\u95ee\u79c1\u6709\u5c5e\u6027\u662f\u53ef\u4ee5\u6b63\u5e38\u62ff\u5230\u7684\uff0c\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u8bbf\u95ee\u79c1\u6709\u5c5e\u6027\u8bd5\u8bd5\uff1a</p> <pre><code>Test().__mi\n</code></pre> <pre><code>Traceback (most recent call last):\nFile \"/tmp/pycharm_project_609/123.py\", line 6, in &lt;module&gt;\nprint(Test().__mi)\nAttributeError: 'Test' object has no attribute '__mi'\n</code></pre> <p>\u4ece\u5916\u90e8\u8fdb\u884c\u79c1\u6709\u5c5e\u6027\u8bbf\u95ee\u662f\u4e0d\u884c\u7684\uff0c\u4eba\u5bb6\u662f\u79c1\u6709\u7684\u3002</p> <pre><code>Test().__ki()\n</code></pre> <pre><code>Traceback (most recent call last):\nFile \"/tmp/pycharm_project_609/123.py\", line 9, in &lt;module&gt;\nTest().__ki()\nAttributeError: 'Test' object has no attribute '__ki'\n</code></pre> <p>\u79c1\u6709\u65b9\u6cd5\u4e5f\u65e0\u6cd5\u8bbf\u95ee\uff0c\u6ca1\u95ee\u9898\u54c8\u3002</p> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u6211\u5c31\u662f\u60f3\u8bbf\u95ee\uff0c\u8d8a\u662f\u79c1\u6709\u7684\u6211\u8d8a\u60f3\u770b\uff0c\u600e\u4e48\u624d\u80fd\u770b\u5230\u522b\u4eba\u7684\u9690\u79c1\uff0c\u5feb\u8bf4\uff01</p> <p>\u6cc4\u9732\u5929\u673a\u4e86\u54c8\uff0c\u8fd9\u662f Python \u4e00\u79cd\u5f88\u5947\u5999\u7684\u7ed3\u6784\u5316\u5904\u7406\uff0c\u4e3a\u4ec0\u4e48\u8bf4\u662f\u7ed3\u6784\u5316\u5904\u7406\uff0c\u5b9e\u9645\u4e0a Python \u62ff\u5230\u53cc\u4e0b\u5212\u7ebf\u4e4b\u540e\uff0c\u5bf9\u5176\u8fdb\u884c\u4e86\u53d8\u5f62\uff0c\u5728\u524d\u9762\u52a0\u4e86\u4e00\u4e2a\u4e0b\u5212\u7ebf\u548c\u7c7b\u540d\uff0c\u6211\u4eec\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee\uff1a</p> <pre><code>print(Test()._Test__mi)\nTest()._Test__ki()\n</code></pre> <pre><code>Mikigo\nMikigo\n</code></pre> <p>\u4f60\u770b\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u4e86\uff0c\u4f46\u662f\u65e2\u7136\u4f5c\u8005\u4e0d\u5e0c\u671b\u4f7f\u7528\u8005\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u6211\u4eec\u4e5f\u5c3d\u91cf\u4e0d\u8981\u53bb\u5f3a\u884c\u4f7f\u7528\u5b83\uff0c\u5f3a\u626d\u7684\u74dc\u4e0d\u751c\u3002</p> <p>\u6240\u4ee5\u8bf4\uff0c\u4ece\u8bed\u8a00\u7684\u89d2\u5ea6\u662f\u6ca1\u6709\u7edd\u5bf9\u7684\u5b89\u5168\uff0c\u4efb\u4f55\u8bed\u8a00\u90fd\u662f\u8fd9\u6837\uff0c\u66f4\u591a\u7684\u662f\u4e00\u79cd\u7f16\u7a0b\u4e0a\u7684\u7ea6\u675f\u3002</p> <p>\u901a\u5e38\u5728\u5927\u591a\u6570\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u66f4\u503e\u5411\u4e8e\u4f7f\u7528\u4e00\u4e2a\u4e0b\u5212\u7ebf\u6765\u8868\u793a\u79c1\u6709\u5c5e\u6027\uff0c\u8fd9\u4e0d\u662f\u771f\u6b63\u7684\u79c1\u6709\uff0c\u800c\u662f\u4e00\u79cd\u66f4\u53cb\u597d\u7684\u7f16\u7a0b\u89c4\u8303\uff0c\u793e\u533a\u79f0\u4e4b\u4e3a \u201c\u53d7\u4fdd\u62a4\u7684\u201d\u5c5e\u6027\uff0c\u5b83\u5411\u4f7f\u7528\u7740\u8868\u8fbe\u4e86\u8fd9\u662f\u4e00\u4e2a\u79c1\u6709\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u4f60\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u5b83\uff0c\u8fd9\u5c31\u662f\u793e\u533a\uff0c\u8fd9\u5c31\u662f\u5f00\u6e90\uff0crespect~\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#7","title":"7\u3001\u5bf9\u8c61\u7684\u81ea\u7701\u673a\u5236","text":"<p>\u81ea\u7701(introspection)\uff0c\u5373\u81ea\u6211\u53cd\u7701\uff0c\u800c\u5bf9\u8c61\u7684\u81ea\u7701\u5b9e\u9645\u4e0a\u5c31\u662f\u67e5\u770b\u5bf9\u8c61\u5b9e\u73b0\u4e86\u54ea\u4e9b\u5c5e\u6027\u6216\u65b9\u6cd5\u3002</p> <p>\u7b80\u5355\u8bb2\u5c31\u662f\uff0c\u544a\u8bc9\u522b\u4eba\uff1a\u6211\u662f\u8c01\uff0c\u6211\u80fd\u5e72\u5565\u3002</p> <p>Python \u7684\u5e38\u7528\u7684\u81ea\u7701\u51fd\u6570\u6709\u56db\u4e2a\uff1adir()\u3001type()\u3001 hasattr()\u3001isinstance()</p> <p>\uff081\uff09isinstance() \u548c type() \u524d\u9762\u4e5f\u63d0\u5230\u8fc7\uff0c\u8fd9\u91cc\u4e0d\u8bb2\u4e86\u3002</p> <p>\uff082\uff09dir() \u662f\u6700\u4e3a\u5e38\u7528\u7684\u4e00\u4e2a\u81ea\u7701\u51fd\u6570\uff1a</p> <p>\u5f15\u7528\u524d\u9762\u7684 Test \u7c7b</p> <pre><code>print(dir(Test))\n</code></pre> <pre><code>['_Test__ki', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'go']\n</code></pre> <p>\u9664\u4e86 <code>_Test__ki</code> \u548c <code>go</code> \u65b9\u6cd5\u4ee5\u5916\uff0c\u5176\u4ed6\u7684\u65b9\u6cd5\u90fd\u662f\u9b54\u6cd5\u51fd\u6570\uff0c\u5373\u6700\u5f00\u59cb\u6211\u4eec\u63d0\u5230\u7684\u534f\u8bae\uff0c\u4f60\u770b\u968f\u4fbf\u4e00\u4e2a\u5bf9\u8c61\u5c31\u5b9e\u73b0\u4e86\u8fd9\u4e48\u591a\u534f\u8bae\uff0c\u662f\u4e0d\u662f\u5f88\u795e\u5947\u3002</p> <p>\uff083\uff09hasattr() \u4e3b\u8981\u7528\u4e8e\u5224\u65ad\u5bf9\u8c61\u4e2d\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5c5e\u6027\uff0c\u8fd4\u56de\u5e03\u5c14\u503c\u3002</p> <pre><code>print(hasattr(Test, \"go\"))\nprint(hasattr(Test, \"wo\"))\n</code></pre> <pre><code>True\nFalse\n</code></pre> <p>\u5f88\u7b80\u5355\uff0c\u4e0d\u591a\u8bb2\u54c8\u3002</p> <p>\u5176\u4ed6\u8fd8\u6709\u4e00\u4e9b\u81ea\u7701\u51fd\u6570\u53ef\u4ee5\u4e86\u89e3\u4e00\u4e0b\uff0c\u5076\u5c14\u7528\u5230\u4e5f\u633a\u597d\u7684\uff1a</p> <ul> <li><code>__doc__</code> \u83b7\u53d6\u5230\u6587\u6863\u5b57\u7b26\u4e32\uff1b</li> <li><code>__name__</code> \u83b7\u53d6\u5bf9\u8c61\u7684\u540d\u79f0\uff1b</li> <li><code>__dict__</code> \u5305\u542b\u4e86\u7c7b\u91cc\u53ef\u7528\u7684\u5c5e\u6027\u540d-\u5c5e\u6027\u7684\u5b57\u5178\uff1b</li> <li><code>__bases__</code> \u8fd4\u56de\u7236\u7c7b\u5bf9\u8c61\u7684\u5143\u7ec4\uff1b\u4f46\u4e0d\u5305\u542b\u7ee7\u627f\u6811\u66f4\u4e0a\u5c42\u7684\u5176\u4ed6\u7c7b\u3002</li> </ul>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#8super","title":"8\u3001super","text":"<p>super \u51fd\u6570\u662f\u7528\u4e8e\u8c03\u7528\u7236\u7c7b\u7684\u4e00\u4e2a\u65b9\u6cd5\u3002</p> <pre><code>class A:\ndef mi(self):\nprint(\"=== mi ===\")\nclass B(A):\ndef ki(self):\nsuper().mi()\n</code></pre> <pre><code>B().ki()\n</code></pre> <pre><code>=== mi ===\n</code></pre> <p>super \u7684\u4f7f\u7528\u65b9\u6cd5\u662f\u5f88\u7b80\u5355\u7684\uff0c\u4f46\u662f\u5982\u679c\u6d89\u53ca\u5230\u591a\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u8981\u5c0f\u5fc3\u5904\u7406\u3002</p> <p>\u51c6\u786e\u7684\u8bb2\u5b83\u4e0d\u662f\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u800c\u662f\u8c03\u7528\u7684 <code>MRO</code> \u987a\u5e8f\u4e0a\u7684\u4e0b\u4e00\u4e2a\u65b9\u6cd5\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#9","title":"9\u3001\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668","text":"<p>\u5728\u8bb2\u5230\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u65f6\u5019\uff0c\u7ecf\u5e38\u6709\u540c\u5b66\u4e00\u8138\u61f5\uff0c\u7136\u540e\u6211\u8bf4 <code>with</code> \u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8131\u53e3\u800c\u51fa <code>with open</code> \u3002</p> <p>\u6ca1\u9519\uff0cwith \u8bed\u53e5\u7528\u5f97\u6700\u591a\u7684\u4e5f\u662f\u8fd9\u4e2a\uff0c\u5b83\u662f Python \u63d0\u4f9b\u7684\u4e00\u79cd\u5904\u7406\u8d44\u6e90\u56de\u6536\u7684\u795e\u5947\u65b9\u6cd5\uff0c\u5982\u679c\u6ca1\u6709 with \u6211\u4eec\u53ef\u80fd\u9700\u8981\u591a\u5199\u5f88\u591a\u4ee3\u7801\u3002</p> <p>\u5927\u5bb6\u90fd\u77e5\u9053\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u4e4b\u540e\u662f\u9700\u8981\u5173\u95ed\u7684\uff0c\u4f46\u662f\u5728\u64cd\u4f5c\u6587\u4ef6\u7684\u8fc7\u7a0b\u4e2d\u5f88\u5bb9\u6613\u62a5\u9519\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u9700\u8981\u8fdb\u884c\u5f02\u5e38\u5904\u7406\uff0c\u8981\u4fdd\u8bc1\u65e0\u8bba\u662f\u5426\u5b58\u5728\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u90fd\u80fd\u6b63\u5e38\u7684\u88ab\u5173\u95ed\uff0c\u6211\u4eec\u51e0\u4e4e\u53ea\u80fd\u4f7f\u7528try\u91cc\u9762\u7684finally\u6765\u5904\u7406\uff1a</p> <pre><code>f = open(\"test.txt\", \"w\")\ntry:\nf.write(some_txt)\nexcept:\npass\nfinally:\nf.close()\n</code></pre> <p>\u5982\u679c\u7528 with \u8bed\u53e5\u5904\u7406\u5c31\u4f1a\u5f88\u7b80\u5355\uff1a</p> <pre><code>with open(\"test.txt\", \"w\") as f:\nf.write(some_txt)\n</code></pre> <p>\u5bf9\u6bd4\u8d77\u6765\uff0c\u54ea\u4e2a\u66f4\u597d\u4e0d\u7528\u591a\u8bf4\uff0c\u81ea\u5df1\u54c1\u3002</p> <p>\u5728\u300a\u6d41\u7545\u7684 Python\u300b\u8fd9\u672c\u4e66\u91cc\u9762\u63d0\u5230\uff1a</p> <p>\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u5305\u62ecCPython\uff0c\u6700\u597d\u663e\u5f0f\u5173\u95ed\u6587\u4ef6\uff1b\u800c\u5173\u95ed\u6587\u4ef6\u7684\u6700\u53ef\u9760\u65b9\u5f0f\u662f\u4f7f\u7528with\u8bed\u53e5\uff0c\u5b83\u80fd\u4fdd\u8bc1\u6587\u4ef6\u4e00\u5b9a\u4f1a\u88ab\u5173\u95ed\uff0c\u5373\u4f7f\u6253\u5f00\u6587\u4ef6\u65f6\u629b\u51fa\u4e86\u5f02\u5e38\u4e5f\u65e0\u59a8\u3002</p> <p>\u90a3\u6211\u4eec\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5462\uff1f</p> <ul> <li>\u57fa\u4e8e\u7c7b\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668</li> </ul> <p>\u8981\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__enter__</code> \u548c <code>__exit__</code> \u3002</p> <p>\u770b\u540d\u79f0\u5c31\u77e5\u9053\u4e86\uff0center \u5c31\u662f\u8fdb\u5165\u7684\u65f6\u5019\u8981\u505a\u7684\u4e8b\u60c5\uff0cexit \u5c31\u662f\u9000\u51fa\u7684\u65f6\u5019\u8981\u505a\u7684\u4e8b\u60c5\uff0c\u5f88\u597d\u8bb0\u6709\u6ca1\u6709\u3002</p> <pre><code>class Context:\ndef __init__(self, file_name):\nself.file_name = file_name\nself.f = None\ndef __enter__(self):\nprint(\"\u8fdb\u5165 with\")\nself.f = open(self.file_name, \"r\")\nreturn self.f\ndef __exit__(self, exc_type, exc_val, exc_tb):\nprint(\"\u9000\u51fa with\")\nif self.f:\nself.f.close()\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 with \u8bed\u53e5</p> <pre><code>with Context(\"test.txt\") as f:\nprint(f.read())\n</code></pre> <pre><code>\u8fdb\u5165 with\n\u6211\u662f\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6\n\u9000\u51fa with\n</code></pre> <p>\u5b8c\u7f8e\u54c8\uff0c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u7c7b\u5c31\u8f7b\u677e\u641e\u5b9a\u3002</p> <ul> <li>\u57fa\u4e8e contextlib \u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668</li> </ul> <p>\u8fd8\u6709\u79cd\u901a\u8fc7\u6807\u51c6\u5e93\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u65b9\u6cd5\uff1a</p> <pre><code>from contextlib import contextmanager\n@contextmanager\ndef context_test(file_name):\nprint(\"\u8fdb\u5165 with\")\ntry:\nf = open(file_name, \"r\")\nyield f\nfinally:\nprint(\"\u9000\u51fa with\")\nf.close()\n</code></pre> <p>\u6765\u7528 with \u73a9\u800d\u4e00\u4e0b</p> <pre><code>with context_test(\"test.txt\") as f:\nprint(f.read())\n</code></pre> <pre><code>\u8fdb\u5165 with\n\u6211\u662f\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6\n\u9000\u51fa with\n</code></pre> <p>\u5229\u7528\u751f\u6210\u5668\u7684\u539f\u7406\uff0cyield \u4e4b\u524d\u662f\u8fdb\u5165\uff0cyield \u4e4b\u540e\u662f\u9000\u51fa\uff0c\u540c\u6837\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u7a0d\u5fae\u7406\u89e3\u4e00\u4e0b\u54c8\u3002</p> <p>\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u662f Python \u63d0\u4f9b\u7ed9\u6211\u4eec\u7684\u4e00\u4e2a\u975e\u5e38\u65b9\u4fbf\u4e14\u6709\u8da3\u7684\u529f\u80fd\uff0c\u7ecf\u5e38\u88ab\u7528\u5728\u6253\u5f00\u6587\u4ef6\u3001\u6570\u636e\u5e93\u8fde\u63a5\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u6444\u50cf\u5934\u8fde\u63a5\u7b49\u573a\u666f\u4e0b\u3002\u5982\u679c\u4f60\u7ecf\u5e38\u505a\u4e00\u4e9b\u56fa\u5b9a\u7684\u5f00\u59cb\u548c\u7ed3\u5c3e\u7684\u52a8\u4f5c\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u4e0b\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#10","title":"10\u3001\u88c5\u9970\u5668","text":"<p>\u88c5\u9970\u5668\u5c31\u662f\u4f7f\u7528 @ \u7b26\u53f7\uff0c\u50cf\u5e3d\u5b50\u4e00\u6837\u6263\u5728\u51fd\u6570\u7684\u5934\u4e0a\uff0c\u662f Python \u4e2d\u7684\u4e00\u79cd\u8bed\u6cd5\u7cd6\u3002</p> <p>\u524d\u9762\u8bb2\u7c7b\u65b9\u6cd5\u548c\u9759\u6001\u65b9\u6cd5\u7684\u65f6\u5019\u63d0\u5230\u8fc7\uff0c\u4f7f\u7528\u65b9\u6cd5\u975e\u5e38\u7b80\u5355\u3002</p> <p>\u539f\u7406\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u5b83\u6240\u88c5\u9970\u7684\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u6700\u540e\u8fd4\u56de\u8fd9\u4e2a\u51fd\u6570\u3002</p> <pre><code>@classmethod\ndef mikigo():\nprint(\"My name is mikigo\")\n</code></pre> <p>\u8fd9\u6837\u7684\u5199\u6cd5\u7b49\u540c\u4e8e</p> <pre><code>def mikigo():\nprint(\"My name is mikigo\")\nmikigo = classmethod(mikigo)\n</code></pre> <p>\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u4f7f\u7528\u88c5\u9970\u5668\u53ef\u8bfb\u6027\u5f88\u9ad8\uff0c\u5f88\u4f18\u96c5\u662f\u5427\uff0c\u8bed\u6cd5\u7cd6\u5c31\u662f\u7ed9\u4f60\u70b9\u7cd6\u5403\uff0c\u8ba9\u4f60\u4e0a\u763e\u3002</p> <p>\u5b9a\u4e49\u4e00\u4e2a\u88c5\u9970\u5668</p> <ul> <li>\u4e0d\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668</li> </ul> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>def logger(func):\ndef wrapper(*args, **kw):\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86'.format(func.__name__))\nfunc(*args, **kw)  # \u51fd\u6570\u6267\u884c\nprint('\u641e\u5b8c\u4e86')\nreturn wrapper\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u88c5\u9970\u51fd\u6570\uff0c\u7528\u9014\u5c31\u662f\u5728\u51fd\u6570\u6267\u884c\u524d\u540e\u5206\u522b\u6253\u5370\u70b9\u65e5\u5fd7\u3002</p> <p>\u67092\u70b9\u9700\u8981\u6ce8\u610f\uff1a</p> <p>\uff081\uff09\u88c5\u673a\u5668\u662f\u4e00\u79cd\u9ad8\u9636\u51fd\u6570\uff0c\u5728\u51fd\u6570\u5185\u5c42\u5b9a\u4e49\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u5bf9\u8c61\uff0c\u591a\u5c42\u7ea7\u540c\u7406\u3002</p> <p>\uff082\uff09\u6700\u5916\u5c42\u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570\u662f\u88ab\u88c5\u9970\u51fd\u6570\u7684\u51fd\u6570\u5bf9\u8c61\u3002</p> <pre><code>@logger\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <p>\u6765\uff0c\u8bd5\u8bd5\u770b</p> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <ul> <li>\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668</li> </ul> <pre><code>from functools import wraps\ndef logger(say_some):\n@wraps\ndef wrapper(func):\ndef deco(*args, **kw):\nprint(\"\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a{}\".format(say_some))\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86:'.format(func.__name__))\nfunc(*args, **kw)  # \u51fd\u6570\u6267\u884c\nprint('\u641e\u5b8c\u4e86')\nreturn deco\nreturn wrapper\n</code></pre> <p>\u4f60\u770b\uff0c\u90fd\u662f\u5916\u5c42\u51fd\u6570\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u5bf9\u8c61\uff0c\u53c2\u6570\u653e\u5728\u6700\u5916\u5c42\u3002<code>@wraps</code> \u53ef\u52a0\u53ef\u4e0d\u52a0\uff0c\u5b83\u7684\u7528\u9014\u4e3b\u8981\u662f\u4fdd\u7559\u88ab\u88c5\u9970\u51fd\u6570\u7684\u4e00\u4e9b\u5c5e\u6027\u503c\u3002</p> <pre><code>@logger(\"\u522b\u6574\uff0c\u4e0d\u5f97\u52b2\u513f~\")\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <p>\u6267\u884c\u8bd5\u8bd5</p> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a\u522b\u6574\uff0c\u4e0d\u5f97\u52b2\u513f~\n\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86:\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <p>\u5f88\u5948\u65af\uff0c\u5c31\u8fd9\u70b9\u513f\u4e1c\u897f\u3002</p> <p>\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u73b0\u5728\u54b1\u4eec\u641e\u70b9\u4e0d\u4e00\u6837\u7684\u3002</p> <p>\u57fa\u4e8e\u7c7b\u5b9e\u73b0\u88c5\u9970\u5668</p> <p>\u57fa\u4e8e\u7c7b\u88c5\u9970\u5668\u7684\u5b9e\u73b0\uff0c\u5fc5\u987b\u5b9e\u73b0 <code>__call__</code> \u548c <code>__init__</code> \u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\u3002</p> <ul> <li>\u4e0d\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\u5668</li> </ul> <pre><code>class logger:\ndef __init__(self, func):\nself.func = func\ndef __call__(self, *args, **kwargs):\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86'.format(self.func.__name__))\nf = self.func(*args, **kwargs)\nprint('\u641e\u5b8c\u4e86')\nreturn f\n</code></pre> <p>\u4e0d\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\uff0cfunc \u662f\u901a\u8fc7 init \u51fd\u6570\u91cc\u9762\u6784\u9020\u7684\u3002</p> <p>\u8bd5\u8bd5\u770b</p> <pre><code>@logger\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <p>so easy \u54c8\uff0c\u9e2d\u5b50\u7c7b\u578b\uff0c\u5b9e\u73b0\u4e86\u88c5\u9970\u5668\u534f\u8bae\uff0c\u5c31\u662f\u88c5\u9970\u5668\u5bf9\u8c61\u3002</p> <ul> <li>\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\u5668</li> </ul> <pre><code>class logger:\ndef __init__(self, say_some):\nself.say_some = say_some\ndef __call__(self, func):\ndef wrapper(*args, **kwargs):\nprint(\"\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a{}\".format(self.say_some))\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86'.format(func.__name__))\nfunc(*args, **kwargs)\nprint('\u641e\u5b8c\u4e86')\nreturn wrapper\n</code></pre> <p>\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\u5668\uff0cfunc \u662f\u5728 call \u51fd\u6570\u91cc\u9762\uff0c\u53c2\u6570\u662f\u901a\u8fc7 init\u51fd\u6570\u4f20\u5165\u7684\uff0c\u8fd9\u91cc\u533a\u522b\u6bd4\u8f83\u5927\u54c8\u3002</p> <pre><code>@logger(\"\u522b\u6574\uff0c\u771f\u7684\u4e0d\u5f97\u52b2\u513f~\")\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a\u522b\u6574\uff0c\u771f\u7684\u4e0d\u5f97\u52b2\u513f~\n\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <p>\u8fd9\u7c7b\u5c5e\u4e8e\u88c5\u9970\u5668\u7684\u9ad8\u9636\u7528\u6cd5\u4e86\uff0c\u5728\u4e00\u4e9b\u4f18\u79c0\u7684\u6846\u67b6\u6e90\u7801\u91cc\u9762\u6bd4\u8f83\u5e38\u89c1\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_3","title":"\u4e09\u3001\u81ea\u5b9a\u4e49\u5e8f\u5217","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_1","title":"1\u3001\u53ef\u5207\u7247\u5bf9\u8c61","text":"<p>\u5207\u7247\u5927\u5bb6\u90fd\u5f88\u719f\u6089\uff0c\u5728 Python \u57fa\u7840\u91cc\u9762\u662f\u5fc5\u5b66\u7684\uff0c\u5bf9\u5217\u8868\u4f7f\u7528\u4e2d\u62ec\u53f7\u53d6\u503c\uff0c\u6b63\u5207\u3001\u53cd\u5207\u3001\u52a0\u6b65\u957f\u7b49\u90fd\u6ca1\u95ee\u9898\uff0c\u8fd9\u91cc\u6211\u4eec\u4e3b\u8981\u8bb2\u600e\u4e48\u5b9e\u73b0\u4e00\u4e2a\u53ef\u5207\u7247\u5bf9\u8c61\u3002</p> <p>\u9686\u91cd\u8bf7\u51fa\u9b54\u6cd5\u51fd\u6570\uff1a<code>__getitem__</code> \uff0c\u5b83\u662f\u6211\u4eec\u5b9e\u73b0\u53ef\u5207\u7247\u5bf9\u8c61\u7684\u5173\u952e\u3002</p> <pre><code>class AutoTest:\ndef __init__(self, name_list):\nself.name_list = name_list\ndef __getitem__(self, item):\nreturn self.name_list[item]\nAT = AutoTest([\"mikigo\", \"lt\", \"jjb\", \"hhz\"])\n</code></pre> <p>\u54b1\u4eec\u5bf9\u5b9e\u4f8b\u5bf9\u8c61\u5207\u7247\u8bd5\u8bd5</p> <pre><code>print(AT[1])\nprint(AT[2])\n</code></pre> <pre><code>lt\njjb\n</code></pre> <p>\u7b80\u76f4\u6ca1\u96be\u5ea6\u54c8\uff0c\u5bf9\u8c61\u53ef\u4ee5\u5207\u7247\u4e86\u3002</p> <p>\u8fd9\u91cc\u518d\u8865\u5145\u4e00\u70b9\u6ca1\u6709\u7528\u7684\u5c0f\u77e5\u8bc6\uff0c\u5b9e\u73b0\u4e86 <code>__getitem__</code> \u65b9\u6cd5\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u4ee5\u4f7f\u7528 for \u5faa\u73af\u3002</p> <pre><code>for i in AT:\nprint(i)\n</code></pre> <pre><code>mikigo\nlt\njjb\nhhz\n</code></pre> <p>\u8fd9\u5176\u5b9e\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u4e00\u79cd\u9000\u800c\u6c42\u5176\u6b21\u7684\u5904\u7406\uff0c\u5b83\u627e\u4e0d\u5230\u8fed\u4ee3\u534f\u8bae\uff0c\u4f46\u662f\u627e\u5230\u4e86 <code>__getitem__</code> \uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u8fed\u4ee3\uff0c\u8fd9\u70b9\u76f8\u4fe1 99% \u7684\u540c\u5b66\u90fd\u4e0d\u77e5\u9053\uff0c\u6ca1\u5173\u7cfb\u54c8\uff0c\u5173\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\u548c\u8fed\u4ee3\u5668\u54b1\u4eec\u540e\u9762\u4f1a\u4e13\u95e8\u8bb2\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2_1","title":"2\u3001\u5217\u8868\u63a8\u5bfc\u5f0f","text":"<p>\u5217\u8868\u63a8\u5bfc\u662f Python \u63d0\u4f9b\u7684\u4e00\u79cd\u72ec\u6709\u7279\u6027\uff0c\u53ef\u4ee5\u7528\u4e00\u884c\u4ee3\u7801\u751f\u6210\u4e00\u4e2a\u5217\u8868\u3002</p> <p>\u666e\u901a\u64cd\u4f5c\uff1a</p> <pre><code>my_list = []\nfor i in range(10):\n    my_list.append(i)\n</code></pre> <p>\u8fd9\u6837\u751f\u6210\u4e00\u4e2a\u5217\u8868\uff0c\u81f3\u5c11\u9700\u89813\u884c\uff0c\u6765\u770b\u770b\u5217\u8868\u63a8\u5bfc\u5f0f\uff1a</p> <pre><code>my_list = [i for i in rang(10)]\n</code></pre> <p>\u4e00\u884c\u5c31\u641e\u5b9a\uff0c\u591a\u4e48\u7684\u7b80\u6d01\u4f18\u96c5\uff0c\u800c\u4e14\u53ef\u8bfb\u6027\u548c\u6027\u80fd\u90fd\u975e\u5e38\u9ad8\uff0c\u7231\u4e86\u3002</p> <p>\u8fd8\u53ef\u4ee5\u52a0\u4e00\u4e9b\u903b\u8f91\u5224\u65ad\u548c\u6570\u636e\u5904\u7406\uff0c\u4ee5\u4e0b\u662f\u9879\u76ee\u5b9e\u4f8b\uff1a</p> <pre><code>app_id_list = [int(_id) for _id in app_id if _id]  # to int\n</code></pre> <p>\u8fd9\u91cc\u8981\u63d0\u9192\u4e00\u4e0b\uff0c\u4e0d\u8981\u4e3a\u4e86\u63a8\u5bfc\u800c\u63a8\u5bfc\uff0c\u5982\u679c\u4f60\u7684\u903b\u8f91\u5f88\u590d\u6742\uff0c\u52a0\u4e86\u591a\u91cd\u5224\u65ad\u548c\u5904\u7406\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u63a8\u5bfc\u5f0f\uff0c\u8001\u8001\u5b9e\u5b9e\u5206\u5f00\u5199\uff0c\u56e0\u4e3a\u8fd9\u6837\u5199\u51fa\u6765\u7684\u8868\u8fbe\u5f0f\u4f1a\u5f88\u590d\u6742\uff0c\u5c31\u5931\u53bb\u4e86\u6211\u4eec\u7f16\u7801\u6700\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u5c31\u662f\u53ef\u8bfb\u6027\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3_1","title":"3\u3001\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":"<p>\u524d\u9762\u8bb2\u4e86\u5217\u8868\u63a8\u5bfc\u5f0f\uff0c\u662f\u7528\u4e2d\u62ec\u53f7\u91cc\u9762\u5199\u8868\u8fbe\u5f0f\uff0c\u90a3\u628a\u4e2d\u62ec\u53f7\u6362\u6210\u5c0f\u62ec\u53f7\u662f\u4ec0\u4e48\u5462\uff1f\u597d\u591a\u540c\u5b66\u806a\u660e\u7684\u5c0f\u8111\u888b\u80af\u5b9a\u60f3\u5230\u4e86\uff0c\u5143\u7ec4\u63a8\u5bfc\u5f0f ... \u3002</p> <p>\u6ce8\u610f\u5143\u7ec4\u662f\u4e0d\u53ef\u53d8\u5e8f\u5217\uff0c\u6ca1\u6cd5\u63a8\u5bfc\u7684\uff0c\u5c0f\u62ec\u53f7\u7684\u8868\u8fbe\u5f0f\u5b9e\u9645\u4e0a\u662f\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3002</p> <pre><code>my_gen = (i for i in range(10))\n</code></pre> <p>\u9a8c\u8bc1\u4e00\u4e0b\uff1a</p> <pre><code>from collections.abc import Generator\nprint(isinstance(my_gen, Generator))\nprint(my_gen)\n</code></pre> <pre><code>True\n&lt;generator object &lt;genexpr&gt; at 0x7f5676c57390&gt;\n</code></pre> <p>\u4f60\u770b\uff0c\u786e\u5b9e\u662f\u4e00\u4e2a\u751f\u6210\u5668\u5427\u3002\u751f\u6210\u5668\u7ec6\u8282\uff0c\u54b1\u4eec\u4e5f\u653e\u5230\u540e\u9762\u8bb2\u54c8\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4_1","title":"4\u3001\u5b57\u5178\u63a8\u5bfc\u5f0f","text":"<p>\u7406\u89e3\u4e86\u5217\u8868\u63a8\u5bfc\u5f0f\uff0c\u518d\u6765\u770b\u5b57\u5178\u63a8\u5bfc\u5f0f\u5c31\u5f88\u7b80\u5355\u4e86\u3002</p> <pre><code>my_dict = {i: None for i in range(10)}\n</code></pre> <p>\u7b2c\u4e00\u4e2a\u5143\u7d20\u5c31\u662f\u5b57\u5178\u7684 key \u548c value\uff0c\u6ce8\u610f\u5b57\u5178\u7684key \u662f\u552f\u4e00\u7684\uff08\u53ef\u54c8\u5e0c\uff09\uff0c\u503c\u65e0\u6240\u8c13\u3002</p> <p>\u6253\u5370\u770b\u4e0b</p> <pre><code>print(my_dict)\n</code></pre> <pre><code>{0: None, 1: None, 2: None, 3: None, 4: None, 5: None, 6: None, 7: None, 8: None, 9: None}\n</code></pre> <p>\u5c31\u8fd9\uff0c\u7b80\u76f4\u6ca1\u96be\u5ea6\uff0c\u8fd8\u662f\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u4ee3\u7801\u53ef\u8bfb\u6027\u54c8\uff0c\u522b\u6574\u590d\u6742\u4e86\u3002</p> <pre><code>tag_dict = {f\"{int(i[0]):0&gt;3}\": i[1:] for i in ReadCsv.read_csv_by_str(csv_dict.get(app), from_data=False)}\n</code></pre> <p>\u8fd9\u662f\u81ea\u52a8\u5316\u6d4b\u8bd5\u9879\u76ee\u4e2d\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u611f\u53d7\u4e0b\uff0c\u5982\u679c\u518d\u590d\u6742\u70b9\u5c31\u5efa\u8bae\u62c6\u5f00\u5199\u4e86\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_4","title":"\u56db\u3001\u5bf9\u8c61\u5f15\u7528","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_2","title":"1\u3001\u53d8\u91cf\u5230\u5e95\u662f\u4ec0\u4e48","text":"<p>\u5728 Python \u4e2d\u53d8\u91cf\u5230\u5e95\u662f\u4ec0\u4e48\uff0c\u6709\u4e00\u4e2a\u6bd4\u55bb\u6211\u89c9\u5f97\u975e\u5e38\u597d\uff0c\u53d8\u91cf\u5c31\u50cf\u4fbf\u5229\u8d34\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bb2\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u6570\u636e\uff0c\u6bd4\u5982\u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u6574\u6570\uff0c\u5728\u5185\u5b58\u4e2d\u90fd\u4f1a\u5206\u914d\u4e00\u4e2a\u7a7a\u95f4\u6765\u4fdd\u5b58\uff0c\u8fd9\u4e2a\u5185\u5b58\u7a7a\u95f4\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5c0f\u76d2\u5b50\uff0c\u6211\u4eec\u4f7f\u7528\u7b49\u53f7\u5c06\u8fd9\u4e2a\u6570\u636e\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5b9e\u9645\u4e0a\u5c31\u50cf\u7528\u4fbf\u5229\u8d34\u8d34\u5230\u8fd9\u4e2a\u5c0f\u76d2\u5b50\u4e0a\uff0c\u4fbf\u5229\u8d34\u4e0a\u8fd8\u5199\u4e86\u540d\u79f0\uff0c\u5c31\u662f\u53d8\u91cf\u540d\u3002\u6240\u4ee5\u8bf4\uff0c\u53d8\u91cf\u548c\u6570\u636e\u7684\u5173\u7cfb\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u7684\u5173\u7cfb\u3002</p> <p>\u4e00\u4e2a\u6570\u636e\u53ef\u4ee5\u8d4b\u503c\u7ed9\u591a\u4e2a\u53d8\u91cf\uff0c\u76f8\u5f53\u4e8e\u8fd9\u4e2a\u5c0f\u76d2\u5b50\u4e0a\u9762\u8d34\u4e86\u591a\u4e2a\u4fbf\u5229\u8d34\uff1b\u4e00\u4e2a\u53d8\u91cf\u4e5f\u53ef\u4ee5\u88ab\u91cd\u65b0\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e\u628a\u8fd9\u4e2a\u76d2\u5b50\u4e0a\u7684\u4fbf\u5229\u8d34\u6495\u4e86\uff0c\u8d34\u5230\u53e6\u4e00\u4e2a\u76d2\u5b50\u4e0a\u3002</p> <p>\u53d8\u91cf\u548c\u6570\u636e\u7684\u5173\u7cfb\uff0c\u5c31\u662f\u76d2\u5b50\u548c\u4fbf\u5229\u8d34\u7684\u5173\u7cfb\uff0c\u7406\u89e3\u8d77\u6765\u5f88\u5bb9\u6613\u3002</p> <p>\u51fd\u6570\u540d\u4e5f\u662f\u53d8\u91cf\uff0c\u662f\u53ef\u4ee5\u4f20\u53c2\u7684\u53d8\u91cf\uff0c\u4e5f\u540c\u6837\u662f\u4fbf\u5229\u8d34\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2-is","title":"2\u3001== \u548c is \u662f\u4e00\u6837\u7684\u5417","text":"<p>\u8fd9\u4e24\u4e2a\u5728\u7f16\u7a0b\u4e2d\u7ecf\u5e38\u7528\u5230\uff0c\u597d\u591a\u540c\u5b66\u7ecf\u5e38\u641e\u4e0d\u6e05\u695a\u5e94\u8be5\u7528\u54ea\u4e2a\u3002</p> <ul> <li>== \u662f\u6bd4\u8f83\u4e24\u8fb9\u7684\u201c\u503c\u201d\u662f\u5426\u76f8\u7b49;</li> <li>is \u662f\u5224\u65ad\u662f\u5426\u4e3a\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5373 id \u662f\u5426\u4e00\u6837\u3002</li> </ul> <pre><code>a = 1000\nb = 1000\nprint(a == b)\nprint(a is b)\nprint(id(a), id(b))\n</code></pre> <pre><code>True\nTrue\n140689217239312 140689217239312\n</code></pre> <p>\u8fd9\u91cc\u6709\u4e2a\u5f88\u795e\u5947\u7684\u5730\u65b9\uff0c\u5206\u522b\u5b9a\u4e49\u4e86\u4e24\u4e2a\u53d8\u91cfa, b\uff0c\u4ed6\u4eec\u7684\u503c\u76f8\u7b49\uff0c\u4f46\u662f\u8fd9\u6837\u5b9a\u4e49\u5e94\u8be5\u662f\u5206\u914d\u4e862\u4e2a\u5185\u5b58\u7a7a\u95f4\uff0c\u66f4\u6709\u610f\u601d\u7684\u662f\uff0c\u5982\u679c\u4f60\u901a\u8fc7\u547d\u4ee4\u884c\u6267\u884c\u4ee5\u4e0a\u4ee3\u7801\uff0c\u7ed3\u679c\u4f1a\u4e0d\u4e00\u6837\uff1a</p> <p>\u6709\u8fd9\u4e2a\u7b26\u53f7\u7684 <code>&gt;&gt;&gt;</code> \u8868\u793a\u662f\u5728\u547d\u4ee4\u884c\u6267\u884c\u3002</p> <pre><code>&gt;&gt;&gt; a = 1000\n&gt;&gt;&gt; b = 1000\n&gt;&gt;&gt; print(a == b)\nTrue\n&gt;&gt;&gt; print(a is b)\nFalse\n&gt;&gt;&gt; print(id(a), id(b))\n140601647494256 140601647494448\n</code></pre> <p>\u4e0a\u9762\u662f\u4f7f\u7528 <code>Pycharm</code> \u6267\u884c\u7684\uff0c\u5b9e\u9645\u4e0aPython\u89e3\u91ca\u5668\u5df2\u7ecf\u5bf9\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u5c0f\u6574\u6570\u505a\u4e86\u7279\u6b8a\u5904\u7406\uff0c\u89e3\u91ca\u5668\u4f1a\u63d0\u524d\u5c06 256 \u4ee5\u5185\u7684\u6574\u6570\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u4f1a\u56de\u6536\uff0c\u4ee5\u63d0\u5347\u6267\u884c\u6548\u7387\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\u7684\u6574\u6570 id \u6c38\u8fdc\u662f\u4e00\u6837\u7684\u3002</p> <pre><code>&gt;&gt;&gt; a = 256\n&gt;&gt;&gt; b = 256\n&gt;&gt;&gt; print(id(a), id(b))\n9095360 9095360\n</code></pre> <pre><code>&gt;&gt;&gt; a = 257\n&gt;&gt;&gt; b = 257\n&gt;&gt;&gt; print(id(a), id(b))\n140601647494512 140601647494384\n</code></pre> <p><code>Pycharm</code> \u5728\u89e3\u91ca\u5668\u7684\u57fa\u7840\u4e4b\u4e0a\u505a\u4e86\u8fdb\u4e00\u6b65\u7684\u4f18\u5316\u3002</p> <pre><code>a = 1000000\nb = 1000000\nprint(id(a), id(b))\n140061167311120 140061167311120\n</code></pre> <p>\u4f60\u770b\uff0c\u8fd9\u4e48\u5927\u7684\u6570\u5b57 id \u4e5f\u662f\u76f8\u540c\u7684\uff0c<code>Pycharm</code> \u5c31\u662f\u8fd9\u4e48\u9177\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3del","title":"3\u3001del\u8bed\u53e5\u548c\u5783\u573e\u56de\u6536","text":"<p>\u5728 Python \u4e2d\u7684\u5783\u573e\u56de\u6536\u673a\u5236\u662f\uff1a\u5f15\u7528\u8ba1\u6570\uff08Reference Counting\uff09\u3002</p> <p>\u7b80\u5355\u8bb2\u5c31\u662f\u6bcf\u4e2a\u5bf9\u8c61\u5185\u90e8\u6709\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u5668\uff0c\u5bf9\u8c61\u88ab\u521b\u5efa\u6216\u8005\u88ab\u5f15\u7528\u5c31\u4f1a +1\uff0c\u5bf9\u8c61\u88ab\u9500\u6bc1\u6216\u8005\u88ab\u8d4b\u4e88\u65b0\u7684\u5bf9\u8c61\u5c31\u4f1a -1</p> <p>del \u8bed\u53e5\u662f\u4f5c\u7528\u5728\u53d8\u91cf\u4e0a\uff0c\u4e0d\u662f\u6570\u636e\u5bf9\u8c61\u4e0a\u3002</p> <pre><code>a = 1\nb = a\ndel a\n</code></pre> <p>\u6253\u5370 b \u770b\u4e0b</p> <pre><code>print(b)\n</code></pre> <pre><code>1\n</code></pre> <p>\u518d\u6253\u5370 a \u770b\u4e0b</p> <pre><code>print(a)\n</code></pre> <pre><code>NameError: name 'a' is not defined\n</code></pre> <p>\u5f88\u660e\u663e\uff0ca \u88ab\u5220\u6389\u4e86\u3002</p> <p>\u4e4b\u524d\u770b\u5230\u56fd\u5916\u7684\u4e00\u4e2a\u5927\u4f6c\u8bb2 open \u7684\u8fd9\u79cd\u5199\u6cd5\u4e0d\u7528\u5173\u95ed\uff1a</p> <pre><code>open(\"test.txt\", \"r\").read()\n</code></pre> <p>\u5f88\u6709\u610f\u601d\u662f\u5427\uff0c\u8fd9\u70b9\u6ca1\u6709\u7528\u7684\u5c0f\u77e5\u8bc6\uff0c\u76f8\u4fe1\u4f60\u5728\u7f51\u4e0a\u5e94\u8be5\u67e5\u4e0d\u5230\u3002\u5f53\u65f6\u89c9\u5f97\u4e0d\u592a\u7406\u89e3\uff0c\u540e\u9762\u7406\u89e3\u5783\u573e\u56de\u6536\u4e4b\u540e\u624d\u660e\u767d\uff0c\u4f7f\u7528 open \u6253\u5f00\u7684\u6587\u4ef6\u5bf9\u8c61\u521b\u5efa\u4e4b\u540e\uff0c\u6ca1\u6709\u88ab\u5176\u4ed6\u5f15\u7528\uff0c\u6240\u4ee5\u4f1a\u88ab\u5185\u5b58\u56de\u6536\u7684\uff0c\u56e0\u800c\u4e0d\u7528\u5173\u95ed\u4e5f\u4e0d\u5f71\u54cd\u3002</p> <p>\u90aa\u95e8\u6b6a\u9053\u54c8\uff0c\u7528 open \u8fd8\u662f\u8001\u8001\u5b9e\u5b9e\u7528 with \u5427\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_5","title":"\u4e94\u3001\u5143\u7c7b\u7f16\u7a0b","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_3","title":"1\u3001\u52a8\u6001\u5c5e\u6027\u548c\u5c5e\u6027\u63cf\u8ff0\u7b26","text":"<p>\u6709\u4e9b\u540c\u5b66\u53ef\u80fd\u77e5\u9053 <code>@property</code> \uff0c\u5b83\u7684\u4e3b\u8981\u7528\u4e8e\u5c06\u4e00\u4e2a\u65b9\u6cd5\u53d8\u6210\u5c5e\u6027\uff0c\u8bbf\u95ee\u7684\u65f6\u5019\u76f4\u63a5\u901a\u8fc7\u540d\u79f0\u8bbf\u95ee\uff0c\u4e0d\u9700\u8981\u52a0\u62ec\u53f7\u3002\u6ce8\u610f\u52a0\u4e86 <code>@property</code> \u51fd\u6570\u4e0d\u80fd\u6709\u53c2\u6570\uff0c\u4f60\u60f3\u561b\uff0c\u4eba\u5bb6\u8c03\u7528\u7684\u65f6\u5019\u90fd\u4e0d\u7528\u62ec\u53f7\uff0c\u600e\u4e48\u4f20\u53c2\uff0c\u5bf9\u5427\u3002</p> <p>\u4e3e\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> <pre><code>class Mikigo:\n@property\ndef age(self):\nreturn \"\u6211\u6655\uff0c\u4eca\u5e7430\u4e86\"\nprint(Mikigo().age)\n</code></pre> <pre><code>\u6211\u6655\uff0c\u4eca\u5e7430\u4e86\n</code></pre> <p>\u4f60\u770b\uff0c\u8c03\u7528 age \u65b9\u6cd5\u6ca1\u52a0\u62ec\u53f7\u5427\uff0c\u90a3\u6211\u8981\u4fee\u6539 age \u7684\u503c\u600e\u4e48\u505a\u5462\uff1f</p> <pre><code>class Mikigo:\ndef __init__(self):\nself._age = 30\n@property\ndef age(self):\nreturn self._age\n@age.setter\ndef age(self, value):\nif not isinstance(value, int):\nraise ValueError\nself._age = value\nmi = Mikigo()\nmi.age = 25\nprint(mi.age)\n</code></pre> <pre><code>25\n</code></pre> <p>\u6ce8\u610f\u4e0a\u4f8b\u4e2d\u88c5\u9970\u5668\u7684\u5199\u6cd5\uff0csetter \u662f\u56fa\u5b9a\u5199\u6cd5\uff0csetter \u524d\u9762\u662f\u4f60\u5b9a\u4e49\u7684\u51fd\u6570\u540d\u3002</p> <p>\u6ca1\u4ec0\u4e48\u95ee\u9898\u54c8\uff0c\u505a\u4e86\u53c2\u6570\u7684\u7c7b\u578b\u68c0\u67e5\uff0c\u6574\u4f53\u770b\u8d77\u6765\u4e0d\u7b97\u590d\u6742\uff0c\u5176\u5b9e\u4e86\u89e3\u5230\u8fd9\u91cc\u5df2\u7ecf\u5dee\u4e0d\u591a\u4e86\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u8fd8\u6709\u5176\u4ed6\u5c5e\u6027\u8981\u5904\u7406\uff0c\u5c31\u5f97\u5199\u597d\u591a\u4e2a\u8fd9\u6837\u7684\uff0c\u633a\u8d39\u52b2\u4e0d\u8bf4\uff0c\u5173\u952e\u662f\u4e0d\u591f\u4f18\u96c5\u3002</p> <p>\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u8bf7\u51fa\u5c5e\u6027\u63cf\u8ff0\u7b26\u3002</p> <p>\u8fd9\u91cc\u53c8\u8981\u4ecb\u7ecd\u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__get__</code>\uff0c <code>__set__</code>\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8bb2\u89e3\u5176\u7528\u6cd5\uff1a</p> <pre><code>class UserAttr:\ndef __init__(self, user_age):\nself._age = user_age\ndef __get__(self, instance, owner):\nprint(\"get_instance:\", instance)\nprint(\"get_owner:\", owner)\nreturn self._age\ndef __set__(self, instance, value):\nprint(\"set_instance:\", instance)\nprint(\"gse_value:\", value)\nif not isinstance(value, int):\nraise ValueError\nself._age = value\n</code></pre> <p>\u771f\u6b63\u4f7f\u7528\u7684\u7c7b\uff1a</p> <pre><code>class Mikigo:\nage = UserAttr(30)\nmi = Mikigo()\nprint(mi.age)\n</code></pre> <pre><code>get_instance: &lt;__main__.Mikigo object at 0x7fb4eff50e10&gt;\nget_owner: &lt;class '__main__.Mikigo'&gt;\n30\n</code></pre> <p>\u5728\u5bf9\u8c61\u8bbf\u95ee age \u7684\u65f6\u5019\uff0c\u9996\u5148\u662f\u8fdb\u5165\u4e86 <code>__get__</code> \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5148\u6253\u5370\u4e86 get_instance \u548c get_owner\uff0cinstance \u662f Mikigo \u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f mi\uff0cowner \u662f Mikigo \u7c7b\u5bf9\u8c61\u3002</p> <p>\u56e0\u6b64\uff0c\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u77e5\u9053\u4e86\u7b2c\u4e00\u4e2a\u5c0f\u77e5\u8bc6\uff0c\u5728\u8bbf\u95ee\u503c\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662f <code>__get__</code> \u3002</p> <p>\u518d\u8d4b\u503c\u770b\u770b\uff1a</p> <pre><code>mi.age = 25\nprint(mi.age)\n</code></pre> <pre><code>set_instance: &lt;__main__.Mikigo object at 0x7fc7be222470&gt;\nset_value: 25\nget_instance: &lt;__main__.Mikigo object at 0x7fc7be222470&gt;\nget_owner: &lt;class '__main__.Mikigo'&gt;\n25\n</code></pre> <p>\u7b2c\u4e8c\u4e2a\u5c0f\u77e5\u8bc6\uff0c\u8d4b\u503c\u662f\u8c03\u7528\u7684 <code>__set__</code> \u65b9\u6cd5\uff0c\u4e00\u822c\u4e3a\u4e86\u4f7f\u5c5e\u6027\u63cf\u8ff0\u7b26\u6210\u4e3a\u53ea\u8bfb\u7684\uff0c\u5e94\u8be5\u540c\u65f6\u5b9a\u4e49 <code>__get__()</code> \u548c <code>__set__()</code> \uff0c\u5e76\u5728 <code>__set__()</code> \u4e2d\u5f15\u53d1 <code>AttributeError</code> \u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u9b54\u6cd5\u51fd\u6570 <code>__delete__</code> \u4e5f\u662f\u5c5e\u6027\u63cf\u8ff0\u7b26\uff0c\u4f7f\u7528 del \u4f1a\u8c03\u7528\uff0c\u7531\u4e8e\u4e0d\u548b\u4f7f\u7528\uff0c\u4e0d\u8bb2\u4e86\uff0c\u8fd8\u6709\u7f51\u4e0a\u597d\u591a\u533a\u5206\u6570\u636e\u63cf\u8ff0\u7b26\u548c\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u7684\uff0c\u6211\u611f\u89c9\u4e0d\u7528\u7ba1\u4e5f\u6ca1\u5fc5\u8981\uff0c\u54b1\u4eec\u662f\u901a\u4fd7\u6613\u61c2\u7248\uff0c\u4e0d\u6574\u90a3\u4e9b\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2_2","title":"2\u3001\u5c5e\u6027\u62e6\u622a\u5668","text":"<p>\u5c5e\u6027\u62e6\u622a\u5668\u5c31\u662f\u5728\u8bbf\u95ee\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\u8981\u505a\u7684\u4e00\u4e9b\u4e8b\u60c5\uff0c\u4f60\u60f3\u561b\uff0c\u62e6\u622a\u5c31\u662f\u62e6\u8def\u62a2\u52ab\uff0c\u62e6\u622a\u4e0b\u6765\u80af\u5b9a\u8981\u641e\u70b9\u4e8b\u60c5\u624d\u653e\u4f60\u8d70\u3002</p> <p>\u4e3b\u8981\u4ecb\u7ecd 2 \u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__getattr__</code> \u548c <code>__getattribute__</code></p> <p>\u8fd9\u4e24\u4e2a\u51fd\u6570\u7279\u522b\u795e\u5947\uff0c\u4e24\u4e2a\u51fd\u6570\u529f\u80fd\u76f8\u53cd\uff0c\u4e00\u4e2a\u662f\u627e\u5230\u5c5e\u6027\u8981\u505a\u7684\u4e8b\uff0c\u53e6\u4e00\u4e2a\u662f\u6ca1\u627e\u5230\u5c5e\u6027\u8981\u505a\u7684\u4e8b\u3002</p> <pre><code>class Mikigo:\ndef __init__(self):\nself.age = 30\ndef __getattribute__(self, item):\nprint(f\"\u627e\u5230{item}\uff0c\u6211\u5148\u641e\u70b9\u4e8b\u60c5\")\ndef __getattr__(self, item):\nprint(f\"\u6ca1\u627e\u5230{item}\uff0c\u6211\u60f3\u60f3\u80fd\u641e\u70b9\u5565\u4e8b\u60c5\")\n</code></pre> <p>\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5c5e\u6027 age \uff0c\u5148\u6765\u8bd5\u8bd5\u8bbf\u95ee\u5b83</p> <pre><code>mi = Mikigo()\nprint(mi.age)\n</code></pre> <pre><code>\u627e\u5230age\uff0c\u6211\u5148\u641e\u70b9\u4e8b\u60c5\n30\n</code></pre> <p>\u627e\u5230\u5c5e\u6027\uff0c\u4f1a\u5148\u8c03\u7528 <code>__getattribute__</code> \uff0c\u5e76\u6ca1\u6709\u8c03\u7528 <code>__getattr__</code>\u3002</p> <p>\u597d\uff0c\u73b0\u5728\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff1a</p> <pre><code>mi.name\n</code></pre> <pre><code>\u627e\u5230name\uff0c\u6211\u5148\u641e\u70b9\u4e8b\u60c5\n\u6ca1\u627e\u5230name\uff0c\u6211\u60f3\u60f3\u80fd\u641e\u70b9\u5565\u4e8b\u60c5\n</code></pre> <p>\u8fd9\u91cc\u5c31\u9700\u8981\u6ce8\u610f\u4e86\uff0c\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u9996\u5148\u8fd8\u662f\u4f1a\u8fdb\u5165 <code>__getattribute__</code> \uff0c\u8bf4\u660e\u5b83\u662f\u65e0\u6761\u4ef6\u8fdb\u5165\u7684\uff0c\u7136\u540e\u624d\u662f\u8c03\u7528 <code>__getattr__</code>\u3002</p> <p>\u518d\u6269\u5c55\u4e00\u4e2a <code>__setattr__</code> \u7528\u4e8e\u4fee\u6539\u5c5e\u6027\u503c\u7684\uff1a</p> <pre><code>class Mikigo:\ndef __init__(self):\nself.age = 30\ndef __setattr__(self, key, value):\nprint(f\"\u4fee\u6539{key}\u7684\u503c\u4e3a{value}\")\nself.__dict__[key] = value\nmi = Mikigo()\nmi.age = 25\nprint(mi.age)\n</code></pre> <pre><code>\u4fee\u6539age\u7684\u503c\u4e3a30\n\u4fee\u6539age\u7684\u503c\u4e3a25\n25\n</code></pre> <p>\u4f60\u770b\uff0cage \u7684\u503c\u88ab\u4fee\u6539\u4e86\uff0c\u4f46\u662f <code>__setattr__</code> \u8c8c\u4f3c\u88ab\u8c03\u7528\u4e86 2 \u6b21\uff0c\u90a3\u662f\u56e0\u4e3a\u5728\u7c7b\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\u5c31\u4f1a\u8fdb\u5165\u4e00\u6b21\uff0c\u7b2c\u4e00\u6b21\u662f\u5c06 <code>__init__</code> \u91cc\u9762\u7684\u503c\u6dfb\u52a0\u5230\u7c7b\u5b9e\u4f8b\u7684 <code>__dict__</code> \u5c5e\u6027\u4e2d\uff0c\u7b2c\u4e8c\u6b21\u4fee\u6539\u518d\u6b21\u8fdb\u5165\uff0c\u5c06 <code>__dict__</code> \u5c5e\u6027\u4e2d\u7684\u503c\u4fee\u6539\u6389\u3002</p> <p>\u5c5e\u6027\u62e6\u622a\u4e00\u5b9a\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u56e0\u4e3a\u5982\u679c\u5904\u7406\u4e0d\u597d\uff0c\u4f1a\u9020\u6210\u7c7b\u91cc\u9762\u5c5e\u6027\u5173\u7cfb\u7684\u6df7\u4e71\uff0c\u629b\u5f02\u5e38\u5f80\u5f80\u4e0d\u5bb9\u6613\u5b9a\u4f4d\u3002</p> <p>\u9879\u76ee\u5b9e\u4f8b\uff0cconfig \u6587\u4ef6\u91cc\u9762\u7528\u5230\uff1a</p> <pre><code>class Config:\ndefault = {\n# for cases\n\"SMB_URL\": \"SMB://10.8.10.214\",\n\"SMB_IP\": \"10.8.10.214\",\n}\ndef __getattr__(self, key):\ntry:\nreturn Config.default[key]\nexcept KeyError:\nraise AttributeError(f\"{key} is not a valid option!\") from KeyError\ndef __setattr__(self, key, value):\nif key not in Config.default:\nraise AttributeError(f\"{key} is not a valid option!\") from KeyError\nConfig.default[key] = value\n</code></pre> <p>\u8bd5\u7740\u5206\u6790\u4e0b\u4ed6\u4eec\u7684\u4f5c\u7528\u5427\uff0c\u903b\u8f91\u5f88\u7b80\u5355\u7684\uff0c\u4f60\u4e00\u5b9a\u80fd\u770b\u61c2\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3_2","title":"3\u3001\u81ea\u5b9a\u4e49\u5143\u7c7b","text":"<p>\u5143\u7c7b\uff08metaclass\uff09\u5c31\u662f\u751f\u6210\u7c7b\u7684\u7c7b\uff0c\u5148\u5b9a\u4e49metaclass\uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u7c7b\uff0c\u6700\u540e\u521b\u5efa\u5b9e\u4f8b\u3002</p> <p>\u5176\u5b9e\u6700\u5f00\u59cb\u8bb2 type \u7684\u65f6\u5019\u5df2\u7ecf\u6709\u6240\u63a5\u89e6\u4e86\uff0ctype \u751f\u6210\u4e86\u6240\u6709\u7c7b\uff0c\u5b83\u5c31\u662f\u9876\u5c42\u5143\u7c7b\uff0cmetaclass \u4e5f\u662f\u8981\u7ee7\u627f type\u7684\uff0c\u6392\u884c\u9876\u591a\u8001\u4e8c\uff0c\u662f\u4e0d\u662f\u5e94\u8be5\u53eb\u201c\u5143\u4e8c\u7c7b\u201d\uff0c\u6216\u8005\u201c\u5143\u7c7b\u4e8c\u201d\uff0c\u7231\u8c01\u8c01\u5427\u3002</p> <p>\u6765\uff0c\u54b1\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5143\u7c7b\uff0c\u7528\u9014\u662f\u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027 age \uff1a</p> <pre><code>class AutoTestMetaClass(type):\ndef __new__(cls, name, bases, dct):\nx = super().__new__(cls, name, bases, dct)\nx.age = 30\nreturn x\n</code></pre> <p>\u8fd9\u91cc\u6709 2 \u4e2a\u77e5\u8bc6\u70b9\uff1a</p> <ul> <li><code>__new__</code> \u4e5f\u662f\u6784\u9020\u51fd\u6570\uff0c\u548c <code>__init__</code> \u6709\u533a\u522b\uff0c<code>__new__</code> \u662f\u7528\u6765\u6784\u9020\u7c7b\u5bf9\u8c61\u7684\uff0c\u4f60\u770b\u5b83\u7684\u53c2\u6570\u662f cls\uff0c\u5fc5\u987b return \u4e00\u4e2a\u5bf9\u8c61\u3002</li> <li>name, bases, dct \u8fd9\u4e09\u4e2a\u53c2\u6570\u548c type \u7684\u4e09\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u610f\u601d\uff0c\u4e0d\u6e05\u695a\u53ef\u4ee5\u56de\u770b\u524d\u9762\u8bb2 type \u7684\u7ae0\u8282\u3002</li> </ul> <p>\u5143\u7c7b\u6709\u4e86\uff0c\u54b1\u4eec\u4f7f\u7528\u4e00\u4e0b\uff0c\u65e2\u7136\u5143\u7c7b\u662f\u7528\u6765\u751f\u6210\u7c7b\u7684\u7c7b\uff0c\u90a3\u54b1\u4eec\u5c31\u6765\u751f\u6210\u4e00\u4e2a\u7c7b\uff1a</p> <pre><code>class Mikigo(metaclass=AutoTestMetaClass):\n...\nmi = Mikigo()\nprint(mi.age)\nprint(Mikigo.age)\n</code></pre> <pre><code>30\n30\n</code></pre> <p>\u54b1\u4eec\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u9664\u4e86\u7701\u7565\u53f7\u6ca1\u6709\u4efb\u4f55\u5c5e\u6027\uff0c\u7701\u7565\u53f7\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528 pass\uff0c\u4f46\u662f\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee age \u5c5e\u6027\u3002\u56e0\u4e3a\u6211\u4eec\u662f\u901a\u8fc7\u5143\u7c7b\uff0c\u5411 Mikigo \u8fd9\u4e2a\u7c7b\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5c5e\u6027\uff0c\u5143\u7c7b\u6709\u65f6\u79f0\u4e3a\u7c7b\u5de5\u5382\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_6","title":"\u516d\u3001\u8fed\u4ee3\u5668\u548c\u751f\u6210\u5668","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_4","title":"1\u3001\u8fed\u4ee3\u534f\u8bae","text":"<p>\u8fed\u4ee3\u5c31\u662f\u53ef\u4ee5\u4f7f\u7528\u5faa\u73af\u5c06\u6570\u636e\u6328\u4e2a\u6328\u4e2a\u53d6\u51fa\u6765\uff0c\u8fd9\u4e2a\u597d\u7406\u89e3\u662f\u5427\uff0c\u6bd4\u5982\uff0c\u54b1\u4eec\u5e38\u89c1\u7684\u5bf9\u4e00\u4e2a\u5217\u8868\u8fdb\u884c\u8fed\u4ee3\uff1a</p> <pre><code>for i in [1, 2, 3]:\nprint(i)\n</code></pre> <p>\u7ed3\u679c\u4e0d\u7528\u8bb2\u80af\u5b9a\u662f\u6328\u7740\u53d6\u51fa\u5217\u8868\u91cc\u9762\u7684\u6570\u5b57\u4e86\u3002</p> <p>\u90a3\u5217\u8868\u91cc\u9762\u7a76\u7adf\u662f\u5b9e\u73b0\u4e86\u4ec0\u4e48\u534f\u8bae\uff0c\u6216\u8005\u8bf4\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u73b0\u4ec0\u4e48\u9b54\u6cd5\u51fd\u6570\u5c31\u53ef\u4ee5\u8fed\u4ee3\u5462\uff0c\u8fd9\u5c31\u662f\u8fed\u4ee3\u534f\u8bae\uff1a<code>__iter__</code></p> <p>\u4e00\u4e2a\u7c7b\u53ea\u8981\u5b9e\u73b0\u4e86\u9b54\u6cd5\u51fd\u6570 <code>__iter__</code> \u5c31\u662f\u53ef\u8fed\u4ee3\u7684\uff08<code>Iterable</code>\uff09\uff0c\u4f46\u662f\u5b83\u8fd8\u4e0d\u662f\u8fed\u4ee3\u5668(<code>Iterator</code>)\uff0c\u54c1\u4e00\u4e0b\u533a\u522b\u3002</p> <pre><code>class IterTest:\ndef __iter__(self):\n...\n</code></pre> <p>\u6765\u9a8c\u8bc1\u4e00\u4e0b\uff1a</p> <pre><code>from collections.abc import Iterable\nfrom collections.abc import Iterator\nprint(\"\u662f\u5426\u53ef\u8fed\u4ee3\uff1a\", isinstance(IterTest(), Iterable))\nprint(\"\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1a\", isinstance(IterTest(), Iterator))\n</code></pre> <pre><code>\u662f\u5426\u53ef\u8fed\u4ee3\uff1aTrue\n\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1aFalse\n</code></pre> <p>\u4f60\u770b\u5b9e\u73b0\u4e86\u8fed\u4ee3\u534f\u8bae\uff0c\u5c31\u662f\u53ef\u8fed\u4ee3\u7684\uff0c\u60f3\u8d77\u9e2d\u5b50\u7c7b\u578b\u4e86\u5417\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2_3","title":"2\u3001\u8fed\u4ee3\u5668\u548c\u53ef\u8fed\u4ee3\u5bf9\u8c61","text":"<p>\u6211\u4eec\u73b0\u5728\u77e5\u9053\u4e00\u4e2a\u5bf9\u8c61\u53ea\u8981\u5b9e\u73b0\u4e86 <code>__iter__</code> \u5c31\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\uff0c\u73b0\u5728\u54b1\u4eec\u6765\u8bd5\u8bd5\u5bf9\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4f7f\u7528 for \u5faa\u73af\u8fdb\u884c\u8fed\u4ee3\uff0c\u653e\u4e2a\u7b80\u5355\u7684\u5217\u8868\u8fdb\u53bb\u770b\u770b\uff1a</p> <pre><code>class IterTest:\ndef __iter__(self):\nreturn [1, 2, 3]\nfor i in IterTest():\nprint(i)\n</code></pre> <p>\u5728 <code>__iter__</code> \u51fd\u6570\u91cc\u9762\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\uff0c\u4f46\u4e0d\u662f\u8fed\u4ee3\u5668\u3002</p> <pre><code>Traceback (most recent call last):\nFile \"/tmp/pycharm_project_609/123.py\", line 11, in &lt;module&gt;\nfor i in IterTest():\nTypeError: iter() returned non-iterator of type 'list'\n</code></pre> <p>\u8fd0\u884c\u62a5\u9519\u4e86\uff0c\u8bf4 iter \u8fd4\u56de\u4e86\u4e00\u4e2a\u4e0d\u662f\u8fed\u4ee3\u5668\u7684\u5bf9\u8c61\u3002\u8bf4\u660e\u5728 <code>__iter__</code> \u91cc\u9762\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5bf9\u5427\uff0c\u5176\u4ed6\u7684\u5148\u4e0d\u7ba1\uff0c\u54b1\u4eec\u653e\u4e00\u4e2a\u8fed\u4ee3\u5668\u8fdb\u53bb\uff0c\u4fdd\u8bc1\u7a0b\u5e8f\u8dd1\u8d77\u6765\u4e0d\u62a5\u9519\u3002</p> <p>\u653e\u4e00\u4e2a\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u8fdb\u53bb\u8bd5\u8bd5\uff1a</p> <pre><code>class IterTest:\ndef __iter__(self):\nreturn (i for i in range(3))\nfor i in IterTest():\nprint(i)\n</code></pre> <pre><code>0\n1\n2\n</code></pre> <p>\u5509\uff0c\u8fd9\u4e0b\u5bf9\u4e86\uff0c\u6ca1\u62a5\u9519\uff0c\u800c\u4e14\u4e5f\u80fd\u8fed\u4ee3\u51fa\u6765\u4e86\u3002</p> <p>\u4f46\u662f\uff0c\u6b64\u65f6\u4ecd\u7136\u8fd8\u4e0d\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u8981\u5b9e\u73b0\u8fed\u4ee3\u5668\uff0c\u8fd8\u5fc5\u987b\u8981\u5b9e\u73b0\u53e6\u5916\u4e00\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__next__</code></p> <pre><code>class IterTest:\ndef __iter__(self):\nreturn (i for i in range(3))\ndef __next__(self):\n...\n</code></pre> <p>\u9a8c\u8bc1\u4e00\u4e0b</p> <pre><code>print(\"\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1a\", isinstance(IterTest(), Iterator))\n</code></pre> <pre><code>\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1a True\n</code></pre> <p>\u4f60\u770b\uff0c\u5b9e\u73b0 <code>__next__</code> \u4e4b\u540e\uff0c\u5c31\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u4e86\u3002\u90a3 <code>__next__</code> \u5e94\u8be5\u600e\u4e48\u5199\uff0c\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c <code>__iter__</code> \u91cc\u9762\u662f\u4e0d\u8d1f\u8d23\u903b\u8f91\u5904\u7406\u7684\uff0c\u5b83\u53ea\u7ba1\u8fd4\u56de\uff0c\u903b\u8f91\u5904\u7406\u9700\u8981\u5728 <code>__next__</code> \u91cc\u9762\u53bb\u505a\u3002</p> <p>\u4f7f\u7528\u7ecf\u5178\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\u6765\u4e3e\u4f8b\uff1a</p> <pre><code>class Fib:\ndef __init__(self, n):\nself.a, self.b = 0, 1\nself.n = n\n# \u8fd4\u56de\u8fed\u4ee3\u5668\u5bf9\u8c61\u672c\u8eab\ndef __iter__(self):\nreturn self\n# \u8fd4\u56de\u5bb9\u5668\u4e0b\u4e00\u4e2a\u5143\u7d20\ndef __next__(self):\nif self.n &gt; 0:\nself.a, self.b = self.b, self.a + self.b\nself.n -= 1\nreturn self.a\nelse:\nraise StopIteration\n</code></pre> <p>\u8fd9\u91cc\u9762 n \u662f\u7528\u6765\u9650\u5236\u8fed\u4ee3\u6b21\u6570\u7684\uff0c\u4e0d\u7136\u8fd9\u4e2a\u5faa\u73af\u5c06\u4e00\u76f4\u8fdb\u884c\u4e0b\u53bb\uff0c\u76f4\u5230\u5b87\u5b99\u7684\u5c3d\u5934\uff0c\u629b <code>StopIteration</code> \u5f02\u5e38\u4f1a\u88ab <code>for</code> \u5faa\u73af\u81ea\u52a8\u5904\u7406\u6389\u3002</p> <pre><code>for i in Fib(10):\nprint(i)\n</code></pre> <pre><code>1\n2\n3\n5\n8\n13\n21\n34\n55\n</code></pre> <p>\u8fd9\u6837\u6211\u4eec\u5c31\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u8fed\u4ee3\u5668\u3002</p> <p>\u7b80\u5355\u4e00\u53e5\u8bdd\u603b\u7ed3\u4e00\u4e0b\uff1a\u8fed\u4ee3\u5668\u5c31\u662f\u4f7f\u5bf9\u8c61\u53ef\u4ee5\u8fdb\u884c for \u5faa\u73af\uff0c\u5b83\u9700\u8981\u5b9e\u73b0 <code>__iter__</code> \u548c <code>__next__</code> \u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\u3002</p> <p>\u6709\u540c\u5b66\u8981\u8bf4\u4e86\uff0c\u5c31\u8fd9\uff1f\u4e0d\u5c31\u7528 for \u5faa\u73af\u561b\uff0c\u641e\u8fd9\u4e48\u590d\u6742\u560e\u54c8\uff0c\u6211\u4e3a\u4ec0\u4e48\u8981\u7528\u8fed\u4ee3\u5668\u554a\uff1f</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u8fed\u4ee3\u5668</p> <p>\u8282\u7701\u8d44\u6e90\u6d88\u8017\uff0c\u8fed\u4ee3\u5668\u5e76\u4e0d\u4f1a\u8ba1\u7b97\u6bcf\u4e00\u9879\u7684\u503c\uff0c\u5b83\u53ea\u5728\u4f60\u8bbf\u95ee\u8fd9\u4e9b\u9879\u7684\u65f6\u5019\u624d\u8ba1\u7b97\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4fdd\u5b58\u7684\u662f\u4e00\u79cd\u8ba1\u7b97\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u8ba1\u7b97\u7684\u7ed3\u679c\u3002\u80fd\u7406\u89e3\u5417\uff0c\u76f8\u5f53\u4e8e\u8fed\u4ee3\u5668\u662f\u9c7c\u7aff\uff0c\u800c\u4e0d\u662f\u4e00\u6c60\u5b50\u7684\u9c7c\uff0c\u9700\u8981\u9c7c\u7684\u65f6\u5019\u9493\u5c31\u884c\u4e86\uff0c\u800c\u4e0d\u7528\u628a\u6240\u6709\u9c7c\u90fd\u642c\u56de\u5bb6\u3002</p> <p>\u5e73\u65f6\u53ef\u80fd\u611f\u53d7\u4e0d\u5230\u54c8\uff0c\u5f53\u4f60\u9700\u8981\u8ba1\u7b97\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6570\u636e\u65f6\uff0c\u4f60\u5c31\u80fd\u611f\u53d7\u5230\u4e86\uff0c\u8fd9\u5c31\u662f\u201c\u60f0\u6027\u6c42\u503c\u201d\u7684\u9b45\u529b\u3002</p> <p>\u4f60\u53ef\u4ee5\u8bd5\u8bd5\u524d\u9762\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u5217\u5b50\uff0c\u5bf9\u6bd4\u4e00\u4e2a\u666e\u901a\u7684\u5217\u8868\uff0c\u7136\u540e\u7ed9\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u5b57\uff0c\u533a\u522b\u5c31\u5f88\u660e\u663e\u4e86\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3_3","title":"3\u3001\u751f\u6210\u5668","text":"<p>\u751f\u6210\u5668\u4e5f\u662f\u4e00\u79cd\u8fed\u4ee3\u5668\uff0c\u7279\u6b8a\u7684\u8fed\u4ee3\u5668\uff0c\u5b83\u4e5f\u53ef\u4ee5\u7528 for \u5faa\u73af\u6765\u53d6\u503c\uff0c\u4f46\u662f\u5927\u90e8\u5206\u7684\u60c5\u51b5\u4e0b\u662f\u4f7f\u7528 next() \u51fd\u6570\u8fdb\u884c\u53d6\u503c\u3002</p> <p>\u524d\u9762\u6211\u4eec\u8bb2\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u5df2\u7ecf\u89c1\u8bc6\u8fc7\uff0c\u8fd9\u662f\u4e00\u79cd\u4fbf\u643a\u7684\u5199\u751f\u6210\u5668\u7684\u65b9\u6cd5\uff1a</p> <pre><code>my_gen = (i for i in range(10))\nprint(next(my_gen))\nprint(next(my_gen))\nprint(next(my_gen))\nprint(next(my_gen))\n</code></pre> <pre><code>0\n1\n2\n3\n</code></pre> <p>\u4e00\u822c\u8fd9\u4e48\u73a9\u7684\u54c8\u3002</p> <p>\u524d\u9762\u8bb2\u7684\u597d\u591a\u5bf9\u8c61\u90fd\u662f\u5728\u7c7b\u91cc\u9762\u5b9a\u4e49\u7684\uff0c\u800c\u751f\u6210\u5668\u5bf9\u8c61\u5c31\u4e0d\u662f\u5728\u7c7b\u91cc\u9762\u4e86\uff0c\u800c\u662f\u5728\u51fd\u6570\u91cc\u9762\u5b9a\u4e49\uff0c\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\u53ea\u8981\u51fa\u73b0\u4e86 <code>yield</code> \u5b83\u5c31\u4e0d\u662f\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2a\u751f\u6210\u5668\u3002</p> <pre><code>def my_gen():\nprint(\"setp 1\")\nyield 1\nprint(\"setp 2\")\nyield 2\ng = my_gen()\nnext(g)\nnext(g)\n</code></pre> <pre><code>step 1\nstep 2\n</code></pre> <p><code>yield</code> \u7684\u7528\u9014\u662f\u8ba9\u51fd\u6570\u6682\u505c\uff0c\u5e76\u4fdd\u5b58\u5bf9\u8c61\u72b6\u6001\u5728\u5185\u5b58\u4e2d\uff0c\u4e0b\u6b21\u518d\u4f7f\u7528 <code>next</code> \u8c03\u7528\u540c\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53c8\u5f00\u59cb\u4ece\u4e4b\u524d\u6682\u505c\u7684\u4f4d\u7f6e\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u8fd0\u884c\u5230\u4e0b\u4e00\u4e2a <code>yield</code> \u53c8\u6682\u505c\uff0c\u5982\u679c\u540e\u9762\u6ca1\u6709 <code>yield</code>\u4e86\uff0c\u5219\u4f1a\u629b <code>StopIteration</code> \u5f02\u5e38\u3002</p> <p><code>yield</code> \u548c <code>return</code> \u90fd\u80fd\u8fd4\u56de\u6570\u636e\uff0c\u4f46\u662f\u6709\u533a\u522b\uff0c<code>return</code> \u8bed\u53e5\u4e4b\u540e\u7684\u4ee3\u7801\u662f\u4e0d\u6267\u884c\u7684\uff0c\u800c <code>yield</code> \u540e\u9762\u8fd8\u53ef\u4ee5\u6267\u884c\u3002</p> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u751f\u6210\u5668\u51fd\u6570\u91cc\u9762\u80fd\u7528 <code>return</code> \u5417\uff1f\u597d\u95ee\u9898\uff0c\u4e0d\u6127\u662f\u4f60\u3002</p> <p>\u751f\u6210\u5668\u91cc\u9762\u662f\u53ef\u4ee5\u7528 <code>return</code> \u7684\uff0c\u4f46\u662f\uff0c<code>return</code> \u540e\u9762\u7684\u6570\u636e\u4e0d\u4f1a\u88ab\u8fd4\u56de\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>def my_gen():\nyield 1\nyield 2\nreturn 3\nfor i in my_gen():\nprint(i)\n</code></pre> <pre><code>1\n2\n</code></pre> <p>\u4f60\u770b\uff0c3 \u5e76\u6ca1\u6709\u88ab\u8fd4\u56de\uff0c\u6240\u4ee5\u8bf4\u751f\u6210\u5668\u91cc\u9762\u7684 <code>return</code> \u53ea\u662f\u4e00\u4e2a\u7ed3\u675f\u7684\u6807\u5fd7\uff0c\u5b83\u4e0d\u4f1a\u628a\u540e\u9762\u7684\u503c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\uff0c\u8fd9\u8ddf\u51fd\u6570\u91cc\u9762\u7684 <code>return</code> \u662f\u4e0d\u4e00\u6837\u7684\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4_2","title":"4\u3001\u603b\u7ed3","text":"<p>\u770b\u5b8c\u524d\u9762\u8fed\u4ee3\u5668\u548c\u751f\u6210\u5668\u7684\u5185\u5bb9\uff0c\u53ef\u80fd\u6709\u4e9b\u540c\u5b66\u6709\u70b9\u6655\u4e86\uff0c\u6ca1\u5173\u7cfb\uff0c\u591a\u770b\u51e0\u904d\uff0c\u7ecf\u5e38\u770b\uff0c\u7ecf\u5e38\u6655\u3002</p> <p>\u6211\u4eec\u7b80\u5355\u603b\u7ed3\u4e00\u4e0b\uff1a</p> <ul> <li> <p>\u8fed\u4ee3\u5668\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__iter__</code> \u548c <code>__next__</code> \uff1b</p> </li> <li> <p>\u8fed\u4ee3\u5668\u5141\u8bb8\u60f0\u6027\u6c42\u503c\uff0c\u53ea\u6709\u5728\u8bf7\u6c42\u4e0b\u4e00\u4e2a\u5143\u7d20\u65f6\u8fed\u4ee3\u5668\u5bf9\u8c61\u624d\u4f1a\u53bb\u751f\u6210\u5b83\uff0c\u5b83\u4fdd\u5b58\u7684\u662f\u4e00\u79cd\u751f\u6210\u6570\u636e\u7684\u65b9\u6cd5\uff1b</p> </li> <li>\u751f\u6210\u5668\u662f\u8fed\u4ee3\u5668\u7684\u4e00\u79cd\u66f4 <code>Pythonic</code> \u7684\u5199\u6cd5\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u91cc\u9762\u7528 <code>yield</code> \u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff1b</li> <li>\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u662f\u751f\u6210\u5668\u7684\u4e00\u79cd\u66f4\u52a0 <code>Pythonic</code> \u7684\u5199\u6cd5\u3002</li> </ul>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_7","title":"\u4e03\u3001\u9ad8\u9636\u51fd\u6570","text":"<p>\u9ad8\u9636\u51fd\u6570\u662f\u901a\u8fc7\u7ec4\u5408\u7b80\u5355\u51fd\u6570\u6210\u4e00\u4e2a\u590d\u6742\u8868\u8fbe\u5f0f\u7684\u51fd\u6570\u3002\u4f60\u53ef\u4ee5\u7406\u89e3\u6210\uff0c\u51fd\u6570\u5957\u51fd\u6570\u3002\u51fd\u6570\u5f0f\u7f16\u7a0b\u662f\u4e00\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u8fd9\u90e8\u5206\u5185\u5bb9\u53ef\u4ee5\u4f53\u73b0 Python \u5728\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e0a\u7684\u5e94\u7528\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1lambda","title":"1\u3001lambda","text":"<p>\u533f\u540d\u51fd\u6570\uff08lambda\uff09\uff0c\u8fd9\u4e2a\u51fd\u6570\u6ca1\u6709\u51fd\u6570\u540d\uff0c\u7528\u4e8e\u4e00\u884c\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u4e5f\u662f\u4e00\u79cd\u8bed\u6cd5\u7cd6\u3002</p> <p>\u5b9a\u4e49\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u529f\u80fd\u5c31\u662f\u53c2\u6570\u52a01\uff1a</p> <pre><code>my_lb = lambda x: x + 1\n</code></pre> <p>\u666e\u901a\u51fd\u6570\u7684\u5199\u6cd5\u5c31\u662f\uff1a</p> <pre><code>def add_one(n):\nreturn n + 1\n</code></pre> <p>\u4f60\u770b\uff0c\u786e\u5b9e\u5f88\u7b80\u6d01\u54c8\uff0cmy_lb \u4e0d\u662f\u51fd\u6570\u540d\u54c8\uff0c\u6709\u51fd\u6570\u540d\u5b83\u5c31\u4e0d\u662f\u533f\u540d\u51fd\u6570\u4e86\uff0c\u800c\u662f\u51fd\u6570\u5bf9\u8c61\uff0c\u54b1\u53ef\u4ee5\u8c03\u7528\u5b83\u3002</p> <pre><code>print(my_lb(1))\n</code></pre> <p>\u6211\u4e2a\u4eba\u89c9\u5f97\uff0c\u533f\u540d\u51fd\u6570\u5f88\u5c34\u5c2c\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u7528\u5728\u4e0b\u9762\u51e0\u4e2a\u9ad8\u9636\u51fd\u6570\u91cc\u9762\u7684\uff0c\u5982\u679c\u4f60\u5e73\u65f6\u4e5f\u60f3\u7528\u5b83\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u662f\u4e0d\u7b26\u5408\u793e\u533a\u89c4\u8303\u7684\u3002\u7b80\u5355\u7684\u8868\u8fbe\u5f0f\u8fd8\u884c\uff0c\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u53ef\u8bfb\u6027\u592a\u5dee\u3002</p> <p>\u4f20\u8a00 Python \u4e4b\u7236 Guido \u4e5f\u4e0d\u63a8\u8350\u4f7f\u7528\u5b83\uff0c\u751a\u81f3\u66fe\u60f3\u8fc7\u79fb\u9664\u5b83\uff0c\u540e\u6765\u653e\u5f03\u4e86\uff0c\u4f30\u8ba1\u662f\u4e0d\u597d\u641e\u3002\u5c31\u50cf GIL \u4e00\u6837\uff0c\u5927\u5bb6\u90fd\u77e5\u9053\u4e0d\u597d\uff0c\u4f46\u662f\u8fd9\u4e48\u591a\u5e74\u4e0b\u6765\u592a\u591a\u5e93\u90fd\u7528\u5230\u4e86\uff0c\u54ea\u662f\u4f60\u60f3\u5220\u5c31\u80fd\u5220\u7684\uff0c\u793e\u533a\u4e0d\u7b54\u5e94\uff0c\u6211\u4e5f\u4e0d\u7b54\u5e94\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2map","title":"2\u3001map","text":"<p>map \u51fd\u6570\u662f\u7ed9\u4e00\u4e2a\u5e8f\u5217\u505a\u6620\u5c04\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u5e8f\u5217\u3002</p> <p>\u7b80\u5355\u901a\u4fd7\u8bb2\u5c31\u662f\uff1a\u62ff\u5230\u4e00\u4e2a\u5e8f\u5217\uff0c\u7ed9\u5e8f\u5217\u4e2d\u5143\u7d20\u4e00\u987f\u64cd\u4f5c\u4e4b\u540e\uff0c\u8fd4\u56de\u5e8f\u5217\u3002</p> <pre><code>my_map = map(lambda x: x + 1, [1, 2, 3])\nprint(my_map)\nmy_list = list(my_map)\nprint(my_list)\n</code></pre> <pre><code>&lt;map object at 0x7f201238cd68&gt;\n[2, 3, 4]\n</code></pre> <p>\u4f60\u770b\uff0cmap \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8f6c list \u4e4b\u540e\u6bcf\u4e2a\u5143\u7d20\u7684\u52a0\u4e861\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3reduce","title":"3\u3001reduce","text":"<p>reduce \u51fd\u6570\u5c31\u662f\u5bf9\u4e00\u4e2a\u5e8f\u5217\u505a\u7d2f\u79ef\uff0c\u5373\u5c06\u5e8f\u5217\u4e2d\u524d\u4e00\u4e2a\u5143\u7d20\u548c\u540e\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u903b\u8f91\u7ec4\u5408\uff0c\u7136\u540e\u7ed3\u679c\u518d\u548c\u540e\u9762\u4e00\u4e2a\u5143\u7d20\u7ec4\u5408\u3002</p> <p>\u7b80\u5355\u901a\u4fd7\u8bb2\u5c31\u662f\uff1a\u62ff\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u5e8f\u5217\uff0c\u7ed9\u5e8f\u5217\u4e2d\u5143\u7d20\u4e00\u987f\u64cd\u4f5c\u4e4b\u540e\uff0c\u8fd4\u56de\u64cd\u4f5c\u7ed3\u679c\u3002</p> <pre><code>from functools import reduce\nmy_rd = reduce(lambda x, y: x + y, [1, 2, 3])\nprint(my_rd)\n</code></pre> <pre><code>6\n</code></pre> <p>\u4f60\u770b\uff0c\u628a\u5217\u8868\u4e2d\u7684\u5143\u7d20\u90fd\u76f8\u52a0\u4e86\uff0c\u6ce8\u610f\u7ec4\u5408\u5173\u7cfb\u4e0d\u4e00\u5b9a\u662f\u76f8\u52a0\uff0c\u4f60\u53ef\u4ee5\u6362\u6210\u76f8\u4e58\u8bd5\u8bd5\u3002</p> <p>\u4e4d\u4e00\u770b\u548c\u4e0a\u9762\u7684 map \u662f\u4e00\u4e2a\u610f\u601d\u54c8\uff0c\u786e\u5b9e\u7528\u6cd5\u4e00\u6837\uff0c\u533a\u522b\u5c31\u662f reduce \u51fd\u6570\u91cc\u9762\u7684 lambda \u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u800c map \u51fd\u6570\u53c2\u6570\u7406\u8bba\u4e0a\u53ef\u4ee5\u591a\u4e2a\uff0c\u4f46\u662f\u6bcf\u4e2a\u53c2\u6570\u5bf9\u5e94\u4e00\u4e2a\u5e8f\u5217\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6709\u591a\u5c11\u4e2a\u53c2\u6570\uff0c\u5c31\u8981\u6709\u591a\u5c11\u4e2a\u5e8f\u5217\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4filter","title":"4\u3001filter","text":"<p>filter \u51fd\u6570\u7528\u4e8e\u8fc7\u6ee4\u7684\uff0c\u5373\u5c06\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u5224\u65ad\uff0c\u7136\u540e\u8fd4\u56de\u4e3a True \u7684\u5143\u7d20\u3002</p> <pre><code>my_ft = filter(lambda x: x % 2 == 1, [1, 2, 3])\nprint(my_ft)\nmy_list = list(my_ft)\nprint(my_list)\n</code></pre> <pre><code>&lt;filter object at 0x7f778f58fd68&gt;\n[1, 3]\n</code></pre> <p>\u5224\u65ad\u5e8f\u5217\u4e2d\u54ea\u4e9b\u6570\u662f\u5947\u6570\uff0cfilter \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8f6c\u5217\u8868\u4e4b\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#5sorted","title":"5\u3001sorted","text":"<p>sorted \u51fd\u6570\u7528\u4e8e\u6392\u5e8f\uff0c\u597d\u591a\u540c\u5b66\u53ef\u80fd\u7528\u8fc7\u5b83\u7684\u53c2\u6570 reverse=False \u5347\u5e8f\uff08\u9ed8\u8ba4\uff09\uff0creverse=True \u964d\u5e8f\uff0c\u4f46\u662f\u8fd8\u6709\u4e2a\u53c2\u6570 key \u53ef\u80fd\u6ca1\u548b\u7528\u8fc7\uff0c\u8fd9\u91cc\u53ef\u4ee5\u7ed9\u8868\u8fbe\u5f0f\u3002</p> <pre><code>my_st = sorted([1, 5, 3])\nprint(my_st)\nmy_st = sorted([1, 5, 3], reverse=True)\nprint(my_st)\n</code></pre> <pre><code>[1, 3, 5]\n[5, 3, 1]\n</code></pre> <p>\u6570\u5b57\u6392\u5e8f\u8fd8\u662f\u633a\u597d\u7528\u7684\u54c8\uff0c\u5904\u7406\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u4e5f\u90fd\u53ef\u4ee5\uff0c\u4f46\u662f\u5982\u679c\u662f\u5904\u7406\u6bd4\u8f83\u590d\u6742\u5b57\u7b26\u4e32\u6392\u5e8f\u5c31\u6709\u70b9\u8d39\u52b2\u4e86\uff0c\u4e0d\u4fe1\u8bd5\u8bd5\u770b\uff1a</p> <pre><code>test_list = [\"test_mi_001\",\"test_ki_012\",\"test_go_008\",\"test_lt_003\"]\n</code></pre> <p>\u6211\u60f3\u8ba9\u8fd9\u4e2a\u5217\u8868\u6309\u7167\u7ed3\u5c3e\u7684\u5e8f\u53f7\u6392\u5e8f\uff1a</p> <pre><code>my_st = sorted(test_list)\nprint(my_st)\n</code></pre> <pre><code>['test_go_008', 'test_ki_012', 'test_lt_003', 'test_mi_001']\n</code></pre> <p>\u6392\u4e86\u4e2a\u5bc2\u5bde\uff0c\u65e0\u8bba\u662f\u5347\u5e8f\u8fd8\u662f\u964d\u5e8f\u90fd\u662f\u4e0d\u884c\u7684\u3002</p> <p>\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u53c2\u6570 key\uff0c\u52a0\u8868\u8fbe\u5f0f\uff1a</p> <pre><code>my_st = sorted(test_list, key=lambda x: x.split(\"_\")[-1])\nprint(my_st)\n</code></pre> <pre><code>['test_mi_001', 'test_lt_003', 'test_go_008', 'test_ki_012']\n</code></pre> <p>\u5509\uff0c\u8fd9\u5c31\u5bf9\u4e86\uff0c\u6211\u4eec\u5728\u8868\u8fbe\u5f0f\u91cc\u9762\u5c06\u7ed3\u5c3e\u7684\u5e8f\u53f7\u53d6\u51fa\u6765\uff0ckey \u5c31\u662f\u5173\u952e\u5b57\uff0c\u610f\u601d\u5c31\u662f\u6309\u7167\u6211\u53d6\u51fa\u6765\u7684\u5173\u952e\u5b57\u6392\u5e8f\u3002\u8fd9\u91cc\u7a0d\u5fae\u7406\u89e3\u4e00\u4e0b\u54c8\uff0c\u91cc\u9762\u7684\u8868\u8fbe\u5f0f\u6bd4\u8f83\u7075\u6d3b\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u505a\uff1a</p> <pre><code>import re\nmy_st = sorted(test_list, key=lambda x: re.findall(r\"\\d+\", x))\n</code></pre> <p>\u4e5f\u90fd\u662f\u53ef\u4ee5\u7684\u54c8\uff0c\u6ca1\u6bdb\u75c5\u3002</p> <p>\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u5bf9\u5217\u8868\u6392\u5e8f\uff0c\u53ea\u8981\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\u90fd\u53ef\u4ee5\uff0c\u5217\u8868\u5bf9\u8c61\u7684\u5185\u5efa\u65b9\u6cd5 sort \u4e5f\u53ef\u4ee5\u8fd9\u6837\u7528\uff0c\u4f46\u533a\u522b\u662f sort \u662f\u5bf9\u539f\u5217\u8868\u8fdb\u884c\u6392\u5e8f\uff0c\u4e0d\u8fd4\u56de\u65b0\u5217\u8868\u3002</p> <p>\u8fd9\u91cc\u518d\u8865\u5145\u4e00\u4e2a\u5c0f\u77e5\u8bc6\uff0c\u6211\u4eec\u7ecf\u5e38\u5f80\u4e00\u4e2a\u5217\u8868\u4e2d\u53bb\u6dfb\u52a0\u6570\u636e\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd9\u6837\u505a\u6ca1\u5565\u95ee\u9898\uff0c\u4f46\u662f\u5982\u679c\u6570\u636e\u91cf\u5927\u4e86\u4e4b\u540e\uff0c\u6027\u80fd\u4f1a\u6bd4\u8f83\u4f4e\u3002</p> <p>\u7ef4\u62a4\u4e00\u4e2a\u6392\u5e8f\u5e8f\u5217\uff0c\u5efa\u8bae\u4f7f\u7528Python \u7684\u6807\u51c6\u5e93 bisect \u6765\u505a\uff0c\u5b83\u662f\u91c7\u7528\u4e8c\u5206\u67e5\u627e\u7b97\u6cd5\uff0c\u6027\u80fd\u8f83\u9ad8\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#6zip","title":"6\u3001zip","text":"<p>zip \u5c31\u662f\u5c06\u591a\u4e2a\u5e8f\u5217\u6253\u5305\u6210\u4e00\u4e2a\u4e2a\u5143\u7ec4\uff0c\u7136\u540e\u8fd4\u56de\u7531\u8fd9\u4e9b\u5143\u7ec4\u7ec4\u6210\u7684\u5217\u8868\u3002</p> <pre><code>a = [1, 2, 3]\nb = [4, 5, 6]\nc = zip(a, b)\nprint(c)\nmy_list = list(c)\nprint(my_list)\n</code></pre> <pre><code>&lt;zip object at 0x7f4ada0fa548&gt;\n[(1, 4), (2, 5), (3, 6)]\n</code></pre> <p>zip \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002</p> <p>\u8f6c\u5217\u8868\u4e4b\u540e\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u76f8\u5f53\u4e8e\u662f\u628a\u5143\u7d20\u7eb5\u5411\u5206\u522b\u53d6\u51fa\u6765\uff0c\u653e\u5230\u4e00\u4e2a\u5143\u7ec4\u91cc\u9762\uff0c\u7136\u540e\u5143\u7ec4\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\u3002\u505a\u6570\u636e\u5904\u7406\u7684\u65f6\u5019\u7ecf\u5e38\u7528\u5230\uff0c\u4e86\u89e3\u4e00\u4e0b\u3002</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/","title":"Python\u5305\u6784\u5efa\u548c\u53d1\u5e03","text":""},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#1","title":"1\u3001\u5fc5\u8981\u7684\u6587\u4ef6","text":"<p>\u9664\u4e86\u4f60\u7684\u6e90\u4ee3\u7801\u4ee5\u5916\uff0c\u4f60\u8fd8\u9700\u8981\u51c6\u5907\u4ee5\u4e0b\u6587\u4ef6\uff1b</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#license","title":"LICENSE","text":"<p>\u5f00\u6e90\u534f\u8bae\u6587\u4ef6</p> <p>\u8fd9\u91cc\u4ee5\u6211\u7684\u9879\u76ee\u7528\u5230\u7684\u5f00\u6e90\u534f\u8bae\u4e3e\u4f8b\uff1a</p> <p>https://github.com/funny-dream/pdocr-rpc/blob/main/LICENSE</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#readme","title":"README","text":"<p>\u4ecb\u7ecd\u8fd9\u4e2a\u5305\u7684\u5b89\u88c5\u53ca\u4f7f\u7528\uff0c\u7406\u8bba\u4e0a\u4f60\u53ef\u4ee5\u5199\u4efb\u4f55\u4e1c\u897f\u5728\u4e0a\u9762\uff0c\u4e3b\u8981\u8ba9\u522b\u4eba\u5168\u65b9\u4f4d\u4e86\u89e3\u8fd9\u4e2a\u5305\u7684\u4f7f\u7528\uff1b</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#pyprojecttoml","title":"pyproject.toml","text":"<p>\u7f51\u7edc\u4e0a\u5927\u591a\u5173\u4e8e Python \u6253\u5305\u4f7f\u7528\u7684\u90fd\u662f <code>setup.py</code>\uff0c\u6700\u65b0\u6700\u6d41\u884c\u7684\u662f\u4f7f\u7528 <code>pyproject.toml</code>\uff0c<code>pypi</code> \u5b98\u65b9\u4e5f\u63a8\u8350\u4f7f\u7528\u5b83\uff1b</p> <p>\u76f8\u6bd4\u4e8e<code>setup.py</code>\uff0c<code>pyproject.toml</code> \u7684\u63cf\u8ff0\u66f4\u4e3a\u7cbe\u7ec6\uff0c\u4f46\u4e5f\u66f4\u4e3a\u7e41\u7410\uff0c\u5982\u679c\u4f60\u662f\u9ad8\u5b9a\u73a9\u5bb6\uff0c\u5f53\u7136\u9996\u9009 <code>pyproject.toml</code> \uff1b</p> <p>\u5f53\u7136\uff0c\u5e38\u7528\u7684\u51e0\u4e2a\u4e1c\u897f\u90fd\u5dee\u4e0d\u591a\uff0c\u4e0b\u9762\u5c31\u4ee5\u6211\u7684\u9879\u76ee\u4e3e\u4f8b\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\uff1ahttps://github.com/funny-dream/pdocr-rpc/blob/main/pyproject.toml</p> <p>\u91cc\u9762\u4e3b\u8981\u5305\u542b\u8fd9\u4e9b\u5185\u5bb9\uff1a</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#build-system","title":"build-system","text":"<pre><code>[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n</code></pre> <p>\u6784\u5efa\u7cfb\u7edf</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#project","title":"project","text":"<pre><code>[project]\nname = \"pdocr-rpc\"\nauthors = [\n{ name=\"mikigo\", email=\"1964191531@qq.com\" },\n]\ndescription = \"PaddleOCR-RPC\"\nreadme = \"README.md\"\nrequires-python = \"&gt;=3.7\"\nclassifiers = [\n\"Programming Language :: Python :: 3\",\n\"License :: OSI Approved :: Apache Software License\",\n\"Operating System :: OS Independent\",\n]\ndependencies = [\n\"pyscreenshot;sys_platform == 'linux'\",\n\"pillow;sys_platform == 'win32'\",\n]\n</code></pre> <p>\u8fd9\u91cc\u9762\u5c31\u662f\u4e00\u4e9b\u57fa\u672c\u4fe1\u606f\uff0c\u4f60\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff1b</p> <p>\u6ce8\u610f\uff1a</p> <p>\uff081\uff09<code>classifiers</code> \u91cc\u9762 <code>License</code> \u5b57\u6bb5\u8981\u548c\u9879\u76ee\u7684\u5f00\u6e90\u534f\u8bae\u4e00\u81f4\uff1b\u5728\u8fd9\u91cc\u5217\u51fa\u4e86\u6240\u6709\u7684\u5f00\u6e90\u534f\u8bae\u5e94\u8be5\u600e\u4e48\u5199\uff1ahttps://pypi.org/classifiers/</p> <p>\uff082\uff09<code>dependencies</code> \u662f\u4f60\u9879\u76ee\u7684\u4f9d\u8d56\uff0c\u522b\u4eba\u4f7f\u7528 pip \u5b89\u88c5\u7684\u65f6\u5019\u4f1a\u540c\u65f6\u5b89\u88c5\u4e0a\u8fd9\u4e9b\u4f9d\u8d56\uff1b</p> <p>\u6ce8\u610f\u8fd9\u91cc\u5982\u679c\u6709\u4e00\u4e9b\u6761\u4ef6\uff0c\u6bd4\u5982\u6709\u4e9b\u5305\u6709\u7248\u672c\u7684\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001Python\u7248\u672c\u7684\u9650\u5236\uff0c\u5fc5\u987b\u8981\u6309\u7167\u89c4\u8303\u5199\uff1ahttps://peps.python.org/pep-0508/</p> <p>\uff083\uff09\u53ef\u9009\u4f9d\u8d56</p> <pre><code>[project.optional-dependencies]\ntest = [\n\"pytest\",\n]\ndoc = [\"mkdocs-material\"]\n</code></pre> <p>\u8fd9\u4e9b\u662f\u53ef\u9009\u7684\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u53ef\u4ee5\u8fd9\u6837\u8fdb\u884c\u5b89\u88c5\uff1a</p> <pre><code>pip install pdocr-rpc[test]\n</code></pre> <p>\u8fd9\u6837\u5c31\u4f1a\u5b89\u88c5 <code>pytest</code></p> <p>\uff084\uff09urls</p> <pre><code>[project.urls]\nSource = \"https://github.com/funny-dream/pdocr-rpc\"\nDocumentation = \"https://funny-dream.github.io/pdocr-rpc\"\n</code></pre> <p>\u8fd9\u4e2a\u5728 <code>pypi</code> \u7684\u7f51\u9875\u7aef\u80fd\u5c55\u793a\uff0c\u522b\u4eba\u53ef\u4ee5\u901a\u8fc7\u90a3\u91cc\u8df3\u8f6c\u7684\u4f60\u7684\u6587\u6863\u6216\u6e90\u7801\u9875\u9762\uff1b</p> <p>\uff085\uff09version</p> <pre><code>[tool.hatch.version]\npath = \"allure_custom/__version__.py\"\n</code></pre> <p>\u7528\u4e00\u4e2a <code>__version__.py</code> \u6307\u5b9a\u7248\u672c\u662f\u6bd4\u8f83\u4f18\u96c5\u7684\u65b9\u6cd5\uff1b</p> <pre><code>__title__ = \"allure_custom\"\n__version__ = \"2023.6.26\"\n</code></pre> <p>\u5173\u4e8e <code>project</code> \u4e0b\u7684\u8be6\u7ec6\u5185\u5bb9\u53ca\u89c4\u8303\uff0c\u8bf7\u67e5\u770b\uff1ahttps://packaging.python.org/en/latest/specifications/declaring-project-metadata/#declaring-project-metadata</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#2","title":"2\u3001\u6253\u5305","text":"<p>\u5b89\u88c5\u6253\u5305\u5de5\u5177\uff1a</p> <pre><code>sudo pip3 install build\n</code></pre> <p>\u6253\u5305\uff1a</p> <pre><code>python3 -m build\n</code></pre> <p>\u5b8c\u6210\u540e\u5e94\u751f\u6210\u4e24\u4e2a\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\uff1a<code>dist</code></p> <pre><code>dist/\n\u251c\u2500\u2500 xxx.whl\n\u2514\u2500\u2500 xxx.tar.gz\n</code></pre>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#3","title":"3\u3001\u53d1\u5e03","text":"<p>\u9996\u5148\u4f60\u9700\u8981\u6ce8\u518c\u4e00\u4e2a  pypi \u7684\u8d26\u53f7\uff1ahttps://pypi.org/account/register/</p> <p>\u5b89\u88c5\u53d1\u5e03\u5de5\u5177\uff1a</p> <pre><code>sudo pip3 install twine\n</code></pre> <p>\u53d1\u5e03\uff1a</p> <pre><code>twine upload dist/*\n</code></pre> <p>\u8f93\u5165\u4f60\u7684\u8d26\u53f7\u5bc6\u7801\u5373\u53ef\u53d1\u5e03\u5230 pypi\uff0c\u4ee5\u540e\u6bcf\u6b21\u53d1\u5e03\u5305\u8bb0\u5f97\u66f4\u65b0\u7248\u672c\uff1b</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Python\u57fa\u7840\u8bed\u6cd5\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#python","title":"\u4e00\u3001Python\u57fa\u7840","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\uff08\u4e00\uff09\u8f93\u5165\u8f93\u51fa","text":"<p>1. print</p> <pre><code>\uff081\uff09print(\"hello world\") \u62ec\u53f7\u8868\u793a\u8c03\u7528\u51fd\u6570print\uff0c\u62ec\u53f7\u5185\u7684\u5b57\u7b26\u4e32\u7528\u5f15\u53f7\u5f15\u8d77\u6765\u3002\n\uff082\uff09print(\"hello\",\"world\",\"mikigo\") \u53ef\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u3002\n\uff083\uff09print(name\uff09\u4e0d\u52a0\u5f15\u53f7\u8868\u793a\u8c03\u7528\u53d8\u91cf\u3002\n\uff084\uff09print(100+200) \u4e0d\u52a0\u5f15\u53f7\uff0c\u8868\u793a\u76f4\u63a5\u8fd0\u7b97\u3002\n</code></pre> <p>2. input</p> <pre><code>\uff081\uff09input() \u8f93\u5165\uff0c\u5149\u6807\u4f1a\u7b49\u5f85\u952e\u76d8\u8f93\u5165\u3002\n\uff082\uff09input(\"\u8bf7\u8f93\u5165\u5185\u5bb9\") \u62ec\u53f7\u5185\u5efa\u8bae\u8f93\u5165\u63d0\u793a\u4fe1\u606f\u3002\n\uff083\uff09input \u8f93\u5165\u7684\u503c\u90fd\u4f1a\u88ab\u5f53\u6210\u5b57\u7b26\u4e32\uff0c\u5305\u62ec\u6570\u5b57\u3002\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\uff08\u4e8c\uff09\u6570\u636e\u7c7b\u578b","text":"<pre><code>1. \u6574\u6570 int \u6ca1\u6709\u5c0f\u6570\u70b9\u3002\n2. \u6d6e\u70b9\u6570 float \uff1a\u6709\u5c0f\u6570\u70b9\u3002\n3. \u5e03\u5c14\u503c bool \uff1aTrue \u6216 False \u3002\u6ce8\u610f\u9996\u5b57\u6bcd\u5927\u5199\u3002\n4. \u7a7a\u503c None :\u7a7a\u503c\uff0c\u4f46\u548c0\u6709\u533a\u522b\u3002\n5. type() \u67e5\u770b\u6570\u636e\u7c7b\u578b\uff08isinstance\uff09\u3002\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\uff08\u4e09\uff09\u53d8\u91cf\u3001\u8868\u8fbe\u5f0f","text":"<p>1. \u53d8\u91cf\u8d4b\u503c</p> <p>\uff081\uff09<code>name=\"mikigo\"</code> \u8868\u793a\u5c06 <code>mikigo</code> \u8fd9\u4e2a\u5b57\u7b26\u4e32\u8d4b\u503c\u7ed9\u53d8\u91cf <code>name</code>\uff0c\u6ce8\u610f\u8981\u52a0\u5f15\u53f7\uff0c\u4e0d\u52a0\u5f15\u53f7\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u53d8\u91cf</p> <p>\uff082\uff09a,b,c=7,8,9 \u591a\u5143\u8d4b\u503c\uff0c\u8868\u793a\u5c06\u503c\u4e00\u4e00\u5bf9\u5e94\u7684\u590d\u5236\u5230\u7b49\u53f7\u524d\u9762\u7684\u53d8\u91cf\uff0c\u4f46\u4f4d\u7f6e\u7684\u4e2a\u6570\u4e00\u5b9a\u8981\u4e00\u81f4\u3002</p> <p>\uff083\uff09\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362</p> <pre><code> - str(age) \u8868\u793a\u5c06\u53d8\u91cfage\u8f6c\u6362\u6210\u5b57\u7b26\u578b\n- int\uff081.5\uff09\u8868\u793a\u5c06float\u8f6c\u6362\u6210int\uff08\u53d6\u6574\u4e3a1\uff09\n- float(6) \u8868\u793a\u5c06int\u8f6c\u6362\u6210float\n</code></pre> <p>2. \u8868\u8fbe\u5f0f</p> <pre><code>\uff081\uff09+ - * /\n\uff082\uff09% \u8868\u793a\u53d6\u4f59\u6570\n\uff083\uff09// \u8868\u793a\u53d6\u5546\u6570\n\uff084\uff09** \u8868\u793a\u6b21\u5e42 \uff0c\u6bd4\u598210**5 \u8868\u793a10\u76845\u6b21\u5e42\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#string","title":"\uff08\u56db\uff09\u5b57\u7b26\u4e32 string","text":"<p>1.\u683c\u5f0f\u5316\u5b57\u7b26\u4e32</p> <pre><code>\uff081\uff09%d\uff08data\uff09 \u8868\u793a\u6570\u5b57\u7ad9\u4f4d\n\uff082\uff09%s\uff08string\uff09 \u8868\u793a\u5bf9\u5b57\u7b26\u4e32\u7ad9\u4f4d\n\uff083\uff09%r \u4efb\u4f55\u7c7b\u578b\u90fd\u53ef\u4ee5\u63a5\u6536\uff0c\u4f46\u5b57\u7b26\u4e32\u6700\u7ec8\u6253\u5370\u51fa\u6765\u6709\u5f15\u53f7\u3002\n\uff084\uff09\u683c\u5f0f\uff1aprint(\"%s = %d\" % \uff08age,19\uff09)\n\uff085\uff09\"mikigo{}\".format((\"good\",))\n\uff086\uff09f\"mikigo{good}\"\n</code></pre> <p>2.\u5b57\u7b26\u4e32\u64cd\u4f5c</p> <p>\uff081\uff09\u5b57\u7b26\u4e32\u76f8\u52a0\uff0c\u6bd4\u5982\uff1a<code>\"mi\" + \"ki\" &gt; miki</code>\uff1b</p> <p>\uff082\uff09\u661f\u53f7\u76f8\u4e58\uff0c\u6bd4\u5982\uff1a<code>2 * \"mi\" &gt; mimi</code>\uff1b</p> <p>\uff083\uff09[ ] \u8868\u793a\u901a\u8fc7\u7d22\u5f15\u622a\u53d6\u5b57\u7b26\uff0c\u7b2c 1 \u4e2a\u5b57\u7b26\u7d22\u5f15\u662f 0 \uff1b</p> <p>\uff084\uff09[ : ] \u8868\u793a\u622a\u53d6\u5b57\u7b26\u4e32 \u6bd4\u5982\uff1a[2:4] \u8868\u793a\u4ece\u7d22\u5f15 2 \u5f00\u59cb\uff0c\u622a\u53d6\u5230\u7d22\u5f15 3\uff08\u4e0d\u5305\u542b 4 \uff09\uff1b</p> <p>\uff085\uff09in \u8868\u793a in \u540e\u9762\u5b57\u7b26\u4e32\u4e2d\u662f\u5426\u5305\u542b in \u524d\u9762\u7684\u5b57\u7b26\uff0c\u6bd4\u5982\uff1a<code>\"i\" in \"miki\"  &gt;&gt; True\uff1b</code></p> <p>\uff086\uff09not in \u7528\u6cd5\u4e0e in \u7c7b\u4f3c\u4f46\u662f\u53d6\u53cd\uff1b</p> <p>\uff087\uff09r/R \u8868\u793a\u6240\u6709\u5b57\u7b26\u90fd\u6309\u7167\u5b57\u9762\u610f\u601d\u6765\u4f7f\u7528\u3002\u6bd4\u5982\uff1a<code>print(r\"hello\\nmikigo\")</code> \u6362\u884c\u5b57\u7b26 \\n \u4e0d\u8d77\u4f5c\u7528\uff0c\u76f4\u63a5\u8f93\u5165\u5f15\u53f7\u5185\u7684\u5b57\u7b26\u4e32\u3002</p> <p>3.\u5b57\u7b26\u4e32\u7684\u5e38\u89c1\u51fd\u6570\u65b9\u6cd5</p> <p>\uff081\uff09len(str) \u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff1b</p> <p>\uff082\uff09count \u8ba1\u6570\uff1b</p> <pre><code>- \"mikigo\".count(\"mi\") \u76f4\u63a5\u8ddf\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002\n- \"mikigo\".count(\"i\",2,10) \u8868\u793a\u5728\u7d22\u5f152\u523010\u4e4b\u95f4\uff08\u4e0d\u5305\u542b10\uff09\uff0c\u8fd4\u56de\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002\n</code></pre> <p>\uff083\uff09startswith \u6216 endswith \u4ee5\u4ec0\u4e48\u5f00\u59cb\u6216\u4ee5\u4ec0\u4e48\u7ed3\u675f\uff1b</p> <pre><code>- \"mikigo\".startswith(\"m\") \u8868\u793a\u5224\u65ad\u662f\u5426\u4ee5\u5b57\u7b26m\u5f00\u59cb\uff0c&gt; True\n- \"mikigo\".endswith(\"m\") \u8868\u793a\u5224\u65ad\u662f\u5426\u4ee5\u5b57\u7b26m\u7ed3\u675f\uff0c&gt; False\n</code></pre> <p>\uff084\uff09find \u67e5\u627e\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u7d22\u5f15\u4f4d\u7f6e\uff0c\u5982\u679c\u627e\u4e0d\u5230\u4f1a\u8fd4\u56de -1\uff1b</p> <pre><code>- \"mikigo\".find(\"i\") \u8868\u793a\u627e\u51fa\u5b57\u7b26i\u5728\u5b57\u7b26\u4e32\u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c&gt; 1\n- \"mikigo\".rfind(\"i\") \u8868\u793a\u4ece\u53f3\u5f00\u59cb\u627e\u51fa\u5b57\u7b26i\u5728\u5b57\u7b26\u4e32\u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c&gt; 3\n</code></pre> <p>\uff085\uff09index \u7528\u6cd5\u540c find\uff0c\u533a\u522b\u5728\u4e8e\uff0c\u627e\u4e0d\u5230\u65f6\u4f1a\u62a5\u9519\uff1b</p> <p>\uff086\uff09strip \u5220\u9664\u6216\u622a\u6389\uff1b</p> <pre><code>- \" mikigo \".strip() \u5220\u9664\u524d\u540e\u7684\u7a7a\u683c\n- \" mikigo \".rstrip(\"o\") \u5220\u9664\u53f3\u8fb9\u7684\u5b57\u7b26o\n- \" mikigo \".lstrip(\"m\") \u5220\u9664\u5de6\u8fb9\u7684\u5b57\u7b26m\n</code></pre> <p>\uff087\uff09replace \u66ff\u6362</p> <pre><code>- \"mikigo\".replace(\"i\",\"oo\") \u8868\u793a\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u6240\u6709\u5b57\u7b26i\u66ff\u6362\u79f0\u5b57\u7b26\u4e32oo\n- \"mikigo\".replace(\"i\",\"oo\",1) \u8868\u793a\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26i\u66ff\u6362\u4e3aoo\uff0c\u53ea\u66ff\u6362\u4e00\u6b21\n</code></pre> <p>\uff088\uff09join \u52a0\u5165\uff1a<code>\"miki\".join(\"ab\")  &gt;&gt; \"amikib\"</code> \u6bcf\u4e2a\u5b57\u7b26\u62c6\u5f00\uff0c\u52a0\u5165\u67d0\u4e2a\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\u3002</p> <p>\uff089\uff09split \u4ee5\u5206\u9694\u7b26\u622a\u53d6</p> <pre><code>- \"mikigo\".split(\"i\") \u8868\u793a\u4ee5\u5b57\u7b26i\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u5c06\u5b57\u7b26\u4e32\u8fdb\u884c\u5206\u9694\u3002\n- \"mikigo\".split(\"i\",1) \u8868\u793a\u4ee5\u5b57\u7b26i\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u4ee5\u7b2c1\u4e2ai\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7684\u5206\u9694\u7b26 \u8fdb\u884c\u5206\u9694\u3002\n- \"mikigo\\nhello\".splitlines() \u6216  \"mikigo\\nhello\".splitlines(keepends=False) \u8868\u793a\u6309\u884c\uff08\"\\r\",\"\\n\",\"\\r\\n\"\uff09\u5206\u9694\uff08\u4e0d\u5305\u542b\u6362\u884c\u7b26\uff09\u3002\n- \"mikigo\\nhello\".splitlines(keepends=True) \u8868\u793a\u4ee5\\n\u6362\u884c\uff0c\u4e14\u5305\u542b\u6362\u884c\u7b26\u3002\n- \u6269\u5c55: \u591a\u79cd\u65b9\u5f0f\u5206\u5272\u5b57\u7b26\u4e32  re.split('a|b', 'fdasfweqgasfewaq')\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#list","title":"\uff08\u4e94\uff09\u5217\u8868\uff08list\uff09","text":"<p>1.list\u57fa\u672c\u64cd\u4f5c</p> <pre><code>\uff081\uff09\u5217\u8868\uff08list\uff09\u7528[ ]\u8868\u793a\uff0c\u662f\u6709\u5e8f\uff0c\u53ef\u53d8\uff0c\u53ef\u6307\u5b9a\u4f4d\u7f6e\u53d6\u503c\u7684\u3002\n\uff082\uff09\u5217\u8868\u91cc\u9762\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u5217\u8868\u3001None\u3001bool\n\uff083\uff09\u540c\u4e00\u5217\u8868\u4e2d\u53ef\u5b58\u653e\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\n</code></pre> <p>2.\u5207\u7247</p> <pre><code>\uff081\uff09lst[index] \u53d6\u5355\u4e2a\u5143\u7d20\uff0c\u76f4\u63a5\u8ddf\u7d22\u5f15\u3002\u6bd4\u5982 lst[2]\uff0c\u8868\u793a\u53d6\u7d22\u5f15 2 \u7684\u5143\u7d20\uff1b\n\uff082\uff09lst[0:2] \u53d6\u4e00\u4e2a\u533a\u95f4\u3002\u8868\u793a\u53d6\u7d22\u5f15 0 \u5230 1 \u7684\u5143\u7d20\uff1b\n\uff083\uff09lst[0:5:2] \u8868\u793a\u6309\u6b65\u957f 2 \u53bb\u53d6\u7d22\u5f15 0 \u5230 4 \u4e4b\u95f4\u7684\u5143\u7d20\uff1b\n\uff084\uff09lst[-1] \u8868\u793a\u53d6\u6700\u540e\u4e00\u4e2a\uff1b\n\uff085\uff09lst[::-1] \u8868\u793a\u5c06\u4e00\u4e2a\u5217\u8868\u53cd\u5411\u6392\u5e8f\u3002\n</code></pre> <p>3.list\u5e38\u89c1\u7684\u51fd\u6570\u548c\u65b9\u6cd5 </p> <p>\uff081\uff09\u51fd\u6570</p> <pre><code>1\uff09len(list) \u5217\u8868\u7684\u957f\u5ea6\uff0c\u5373\u5217\u8868\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\uff1b\n2\uff09max(list) \u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\u53d6\u6700\u5927\u503c\u3002\n</code></pre> <p>\uff082\uff09\u65b9\u6cd5</p> <pre><code>1\uff09list.append(obj) \u5728\u5217\u8868\u672b\u5c3e\u6dfb\u52a0\u65b0\u7684\u5bf9\u8c61\u3002list.append(\"ab\"),\u8868\u793a\u5728\u672b\u5c3e\u52a0\u5165\u5b57\u7b26\u4e32 \"ab\"\uff0c\u4f46 append \u4e00\u6b21\u53ea\u80fd\u589e\u52a0\u4e00\u4e2a\u5143\u7d20\uff1b\n2\uff09list.count(obj) \u7edf\u8ba1\u67d0\u4e2a\u5143\u7d20\u5728\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\uff1b\n3\uff09list.extend(seq) \u5728\u672b\u5c3e\u8ffd\u52a0\u53e6\u4e00\u4e2a\u5e8f\u5217\u3002\u8ffd\u52a0\u7684\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u4e0d\u80fd\u662f\u5355\u4e2a\u5143\u7d20\u3002\u6bd4\u5982 list.extend([123])\uff1b\n4\uff09list.index(obj) \u627e\u51fa\u67d0\u4e2a\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\u7d22\u5f15\u4f4d\u7f6e\uff1b\n5\uff09list.insert(index,obj) \u5c06\u5bf9\u8c61\u63d2\u5165\u5230\u5217\u8868\uff08\u4f4d\u7f6e\uff0c\u5143\u7d20\uff09\uff1b\n6\uff09list.pop(index) \u5220\u9664\u67d0\u4e2a\u4f4d\u7f6e\u7684\u5143\u7d20\uff08\u9ed8\u8ba4\u5220\u9664\u6700\u540e\u4e00\u4e2a\uff09\u3002\u6bd4\u5982 list.pop(1) \u8868\u793a\u5220\u9664\u7d22\u5f151\u7684\u5143\u7d20\uff0c\u4e14\u8fd4\u56de\u5143\u7d20\u7684\u503c\uff1b\n7\uff09list.remove(obj) \u5220\u9664\u5217\u8868\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\uff0c\u4fee\u6539\u5217\u8868\u672c\u8eab\uff1b\n8\uff09list.reverse() \u53cd\u5411\u6392\u5e8f\uff1b\n9\uff09list.sort() \u91cd\u65b0\u6392\u5e8f\uff1b\n10\uff09list.clear() \u6e05\u7a7a\u5217\u8868\uff1b\n11\uff09list.copy() \u590d\u5236\u5217\u8868\u3002\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#tuple","title":"\uff08\u516d\uff09\u5143\u7ec4\uff08tuple\uff09","text":"<p>\u5b9a\u4e49\uff1a\u4ee5\u5c0f\u62ec\u53f7\u62ec\u8d77\u6765\u7684\u6709\u5e8f\u5217\u8868\uff0c\u4f46\u4e0d\u80fd\u4fee\u6539\u3002</p> <pre><code>a = (2,3,4,5)\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#dict","title":"\uff08\u4e03\uff09\u5b57\u5178\uff08dict\uff09","text":"<p>1.\u5b9a\u4e49\uff1a\u5b57\u5178\u662f\u7528\u5927\u62ec\u53f7\u62ec\u8d77\u6765\uff0c\u7531\u952e\u503c\u5bf9\uff08key:value\uff09\u7ec4\u6210\u7684\uff0c\u4e14\u662f\u65e0\u5e8f\u7684\u3002</p> <p>2.key \u662f\u552f\u4e00\u7684\uff0c\u4e00\u822c\u8d4b\u503c\u4e3a string\uff0cvalue \u53ef\u4ee5\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b</p> <p>3.\u5e38\u7528\u64cd\u4f5c</p> <pre><code>\uff081\uff09dt[\"key\"] \u6839\u636e\u952e\u8bfb\u53d6\u503c\n\uff082\uff09dt[\"old_key\"]=\"new_value\" \u6839\u636e\u952e\u4fee\u6539\u503c\n\uff083\uff09dt[\"new_key\"]=\"new_value\" \u65b0\u589e\u952e\u503c\u5bf9\n\uff084\uff09len(dt) \u8fd4\u56de\u5143\u7d20\u7684\u91cf\uff08\u952e\u503c\u5bf9\uff09\n</code></pre> <p>4.dict\u5e38\u7528\u65b9\u6cd5</p> <pre><code>\uff081\uff09key in dict \u5224\u65ad\u952e\u662f\u5426\u5728\u5b57\u5178\u4e2d\n\uff082\uff09dict.items() \u8fd4\u56de\u5217\u8868\uff0c\u5217\u8868\u7531\u5143\u7ec4\u7ec4\u6210\uff0c\u6bcf\u4e2a\u5143\u7ec4\u7531\u4e00\u4e2a\u952e\u503c\u5bf9\u5c06\u952e\u548c\u503c\u62c6\u5206\u4e3a\u4e24\u4e2a\u5b57\u7b26\u4e32\u7ec4\u6210\u3002\n\uff083\uff09dict.keys() \u5c06\u6240\u6709\u7684\u952e\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\u3002\n\uff084\uff09dict.values() \u5c06\u6240\u6709\u7684\u503c\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\u3002\n\uff085\uff09dict1.update(dict2) \u5c06\u5b57\u51782\u4e2d\u7684\u952e\u503c\u5bf9\u6dfb\u52a0\u5230\u5b57\u51781\u4e2d\n\uff086\uff09dict.get(key,default=None) \u8fd4\u56de\u6307\u5b9a\u952e\u7684\u503c\uff0c\u5982\u679c\u503c\u4e0d\u5b58\u5728\uff0c\u8fd4\u56dedefault\u503c\u3002\u6bd4\u5982\uff1adict.get(\"name\",\"peter\") \u5982\u679c\u5b57\u5178\u4e2d\u6709name\u8fd9\u4e2a\u952e\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u5176\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u952e\uff0c\u5219\u8fd4\u56de\"peter\"\n\uff087\uff09dict.setdefault(key,default=None) \u548cget\u4e00\u6837\u4f1a\u8fd4\u56de\u6307\u5b9a\u952e\u7684\u503c\uff0c\u4f46\u82e5\u952e\u4e0d\u5728\u5b57\u5178\u4e2d\uff0c\u4f1a\u6dfb\u52a0\u6210\u4e3a\u65b0\u7684\u952e\u503c\u5bf9\u3002\u6bd4\u5982\uff1adict.setdefault(\"name\",\"peter\")\uff0c\u5982\u679c\u5b57\u5178\u4e2d\u6709name\u8fd9\u4e2a\u952e\uff0c\u5219\u8fd4\u56de\u5176\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u4f1a\u5c06\u5b9a\u4e49\u7684\u503c\uff0c\u6dfb\u52a0\u5230\u5b57\u5178\u4e2d\u3002\n\uff088\uff09dict.pop(key,default=None) \u5220\u9664\u952e\u5bf9\u5e94\u7684\u503c\uff0ckey\u4e0d\u5b58\u5728\u8fd4\u56dedefault\u503c\u3002\n\uff089\uff09dict.copy() \u6d45\u590d\u5236\n\uff0810\uff09dict.clear() \u6e05\u9664\u6240\u6709\u5143\u7d20\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u4e8c\u3001\u8fc7\u7a0b\u63a7\u5236","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\uff08\u4e00\uff09\u6761\u4ef6\u8bed\u53e5","text":"<p>1.\u53e5\u5f0f\uff1a</p> <pre><code>if \u6761\u4ef6\u5224\u65ad\uff1a\uff08\u7f29\u8fdb\u548c\u5192\u53f7\uff09\nprint(\"\u5b57\u7b26\u4e32\")\nelse:\nprint(\"\u5b57\u7b26\u4e32\")\n</code></pre> <p>2.else \u53ef\u4ee5\u4e0d\u8981\uff0c\u8bed\u6cd5\u4e0a\u6ca1\u6709\u95ee\u9898</p> <p>3.\u8fd0\u7b97\u7b26</p> <p>(1)  <code>&lt; , &lt;= , &gt; , &gt;= , == , !=</code></p> <p>(2\uff09<code>and , or , not , in , not in, is</code></p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\uff08\u4e8c\uff09\u5faa\u73af\u8bed\u53e5","text":"<p>1.while</p> <pre><code>while \u5224\u65ad\u6761\u4ef6\uff1a\n\u8bed\u53e5\nelse \uff1a\n\u8bed\u53e5\n</code></pre> <pre><code>break \u7ec8\u6b62\u5faa\u73af\u8bed\u53e5\n\ncontinue \u7ed3\u675f\u672c\u6b21\u5faa\u73af\uff0c\u7ee7\u7eed\u8fdb\u884c\u4e0b\u4e00\u8f6e\u5faa\u73af\u3002\n</code></pre> <p>2.for\u8bed\u53e5\uff08\u904d\u5386\u5e8f\u5217\u7684\u5143\u7d20\uff09</p> <pre><code>for i in [1,2,3,4]\uff1a\nprint(i)\n</code></pre> <ul> <li> <p>in \u540e\u9762\u53ef\u4ee5\u8ddf\u5143\u7ec4\u3001\u5217\u8868\u3001\u5b57\u7b26\u4e32\uff0c\u4f46\u8ddf\u5b57\u5178\u65f6\u53ea\u80fd\u53d6\u5230\u5b57\u5178\u4e2d\u7684\u952e\uff08key\uff09\u3002</p> </li> <li> <p>range(\u51fd\u6570)</p> </li> <li>range(3) \u8868\u793a\u4ece\u7d22\u5f150\uff0c\u53d6\u5230\u7d22\u5f152\uff08\u5f00\u533a\u95f4\uff09</li> <li>range(1,4) \u8868\u793a\u4ece\u7d22\u5f151\uff0c\u53d6\u5230\u7d22\u5f153</li> <li>range(1,10,2) \u8868\u793a\u4ece\u7d22\u5f151\uff0c\u53d6\u5230\u7d22\u5f1510\uff0c\u6b65\u957f\u4e3a2</li> </ul>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u4e09\u3001\u51fd\u6570","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\uff08\u4e00\uff09\u5b9a\u4e49","text":"<p>\u51fd\u6570\u662f\u53ef\u91cd\u590d\u4f7f\u7528\u7684\uff0c\u5177\u6709\u4e00\u5b9a\u529f\u80fd\u7684\u4ee3\u7801\u6bb5\u3002</p> <p>def \u51fd\u6570\u540d\uff08\u53c2\u65701\uff0c\u53c2\u65702\uff0c\u00b7\u00b7\u00b7\u00b7\uff09</p> <p><code>python def add(a,b):     c = a + b     print(c)</code></p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\uff08\u4e8c\uff09\u8fd4\u56de\u503c","text":"<p>\u8c03\u7528\u51fd\u6570\u540e\uff0c\u5c06\u6267\u884c\u7ed3\u679c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\u3002 <pre><code>def add(a,b):\nc = a + b\nreturn c\n</code></pre> &gt;&gt;x=add(1,2)  # \u8fd4\u56de\u4e00\u4e2ac\u7684\u503c\u8d4b\u7ed9x\uff0c\u5982\u679c\u8fd4\u56de\u503c\u6709\u591a\u4e2a\uff0c\u800c\u53d8\u91cf\u53ea\u67091\u4e2a\uff0c\u5219\u4f1a\u751f\u6210\u4e00\u4e2a\u5143\u7ec4\u3002\u4e5f\u53ef\u4ee5\u7528\u591a\u4e2a\u53d8\u91cf\u5bf9\u5e94\u591a\u4e2a\u8fd4\u56de\u503c\uff0c\u5373\u591a\u5143\u8d4b\u503c\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_10","title":"\uff08\u4e09\uff09\u53c2\u6570","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u4f4d\u7f6e\u53c2\u6570(\u5f62\u53c2)","text":"<p><pre><code>def func(name, age):\nprint(name, age)\n</code></pre> \u4f4d\u7f6e\u53c2\u6570\u65f6\u6839\u636e\u4f4d\u7f6e\u987a\u5e8f\u4f20\u5165\u51fd\u6570\uff0c\u8c03\u7528\u51fd\u6570\u65f6\u5fc5\u987b\u4e0e\u5b9a\u4e49\u65f6\u7684\u53c2\u6570\u6570\u91cf\u4e00\u81f4\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u9ed8\u8ba4\u53c2\u6570","text":"<ul> <li> <p>def func(name, age=18):      print(\"a\u672a\u88ab\u5b9a\u4e49\")  # \u53c2\u6570\u5728\u5b9a\u4e49\u7684\u65f6\u5019\u5c31\u8d4b\u503c\u7684</p> </li> <li> <p>\u9ed8\u8ba4\u53c2\u6570\u5728\u8c03\u7528\u7684\u65f6\u5019\u5982\u679c\u4e0d\u4f20\u5165\uff0c\u5219\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\uff0c\u5982\u679c\u7ed9\u4f20\u9012\u4e86\u53c2\u6570\uff0c\u5219\u503c\u4f1a\u88ab\u8986\u76d6\u3002</p> </li> </ul>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u53ef\u53d8\u53c2\u6570","text":"<p><pre><code>def func(*args):\nsum = 0\nfor n in args:\nsum = sum + n\nreturn sum\n</code></pre>   &gt;&gt;func(1,2,3,\u00b7\u00b7\u00b7)  \u4f20\u5165\u7684\u53c2\u6570\u6570\u91cf\u53ef\u53d8\uff0c\u4f1a\u81ea\u52a8\u7ec4\u88c5\u79f0\u4e00\u4e2a\u5143\u7ec4\uff0c\u5982\u679c\u4f20\u51650\u4e2a\u53c2\u6570\uff0c\u7ed3\u679c\u65f6\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5143\u7ec4\u3002</p> <ul> <li>\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u8c03\u7528\u7684\u65f6\u5019\u5728\u51fd\u6570\u62ec\u53f7\u5185\u52a0*\u53f7\uff08\u53c2\u6570\u89e3\u6784\uff09</li> </ul> <p>tp=\uff081\uff0c2\uff0c3\uff0c4\uff09</p> <p>resule = add(*tp)</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u5173\u952e\u5b57\u53c2\u6570\uff08\u952e\u548c\u503c\uff09","text":"<pre><code>def func(**kwargs):\nprint(kwargs)\n</code></pre> <p>&gt;&gt;func(name=\"peter\")   # \u7ed3\u679c\u662f\u6253\u5370\u4e00\u4e2a\u5b57\u5178{\"name\"\uff1a\"peter\"}</p> <ul> <li>\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u8c03\u7528\u7684\u65f6\u5019\u5728\u51fd\u6570\u62ec\u53f7\u5185\u52a0**</li> </ul> <p>&gt;&gt;dct = {\"eat1\":\"\u9178\u8fa3\u7c89\",\"eat2\":\"\u87ba\u72ee\u7c89\"}</p> <p>&gt;&gt;func(**dct)</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"5\u3001\u7ec4\u5408\u53c2\u6570","text":"<p>\u987a\u5e8f\u4e3a\u4f4d\u7f6e\u53c2\u6570\uff0c\u53ef\u53d8\u53c2\u6570\uff0c\u9ed8\u8ba4\u53c2\u6570\uff0c\u5173\u952e\u5b57\u53c2\u6570</p> <pre><code>def func(name, age, *args, gender=\u2019\u7537\u2019, **kwargs)\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#class","title":"\u56db\u3001\u7c7b\uff08class\uff09","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_11","title":"\uff08\u4e00\uff09\u7c7b\u7684\u5b9e\u4f8b","text":"<p>1.\u7c7b\u7684\u5b9e\u4f8b\u662f\u5bf9\u8c61\uff0c\u4e00\u4e2a\u5b9e\u4f8b\u5305\u542b\u5c5e\u6027\uff08\u6709\u4ec0\u4e48\uff09\u548c\u65b9\u6cd5\uff08\u80fd\u505a\u4ec0\u4e48\uff09\u3002</p> <p>2.\u7c7b\u7684\u58f0\u660e\uff1aclass \u7c7b\u540d():  \u7c7b\u540d\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u5982\u679c\u662f\u591a\u4e2a\u5355\u8bcd\uff0c\u5355\u8bcd\u4e0e\u5355\u8bcd\u4e4b\u95f4\u4e0d\u7a7a\u683c\uff0c\u76f4\u63a5\u6328\u7740\u5199\uff0c\u4f46\u6bcf\u4e2a\u5355\u8bcd\u9996\u5b57\u6bcd\u9700\u8981\u5927\u5199\u3002</p> <p>3.\u5b9a\u4e49\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>class Person():\ndef __init__ (self, name, age):\nself.name = name\nself.age = age\ndef run(self, food):\nprint(\"%s\u90fd%d\u5c81\u4e86,\u5929\u5929\u5403%s\" % \uff08self.name, self.age,food\uff09)\n</code></pre> <p>\uff082\uff09\u65b9\u6cd5\u8c03\u65b9\u6cd5\u6216\u65b9\u6cd5\u8c03\u5c5e\u6027\u7b49\uff0c\u5185\u90e8\u8c03\u7528\u90fd\u8981\u52a0self\u3002  \u2461</p> <p>\uff083\uff09\u8c03\u7528\u5916\u90e8\u53d8\u91cf\u65f6\uff0c\u4e0d\u52a0self\u3002</p> <p>\uff084\uff09\u8c03\u7528</p> <pre><code>\u2460 \u5b9e\u4f8b\u5316\uff1ax = Person(\"peter\",18)\n\u2461 print(x.name) \u8c03\u7528\u7c7b\u7684\u5c5e\u6027\n\u2462 print(x.run(\"\u8089\"))\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_12","title":"\uff08\u4e8c\uff09\u7ee7\u627f","text":"<p>\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>class Student(Person):  #\u7ee7\u627f\u65f6\u62ec\u53f7\u5185\u76f4\u63a5\u5199\u7236\u7c7b\u7684\u7c7b\u540d\npass #\u5b8c\u5168\u7ee7\u627f\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\n</code></pre> <pre><code>class Student(Person):\ndef __init__(self,name,age,cno)\nPerson.__init__(self,name,age)  \nself.cno = cno #\u5728\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\u65b0\u589e\u5c5e\u6027\uff0c\u9700\u8981\u5148\u5c06\u7236\u7c7b\u6307\u5b9a\u8fdb\u6765\u3002\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5c06\u7236\u7c7b\u7684\u5c5e\u6027\u8986\u76d6\u3002\ndef run(self):\nr = Person.run(self)\nreturn r  # \u5728\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\u65b0\u589e\u65b9\u6cd5\uff0c\u9700\u8981\u5148\u6307\u5b9a\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\n</code></pre> <p>\u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u540e\uff0c\u8c03\u7528\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u5148\u53bb\u8c03\u7528\u5b50\u7c7b\u7684\u65b9\u6cd5\uff0c\u7136\u540e\u518d\u53bb\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_13","title":"\uff08\u4e09\uff09\u8bbf\u95ee\u9650\u5236","text":"<p>1\uff0e\u8bbf\u95ee\u9650\u5236\u53ef\u4ee5\u4f7f\uff0c\u7c7b\u5185\u90e8\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4e0d\u80fd\u5916\u90e8\u968f\u4fbf\u8bbf\u95ee\u3002\u7528\u6cd5\u662f\u5728\u5c5e\u6027\u6216\u65b9\u6cd5\u524d\u9762\u52a0\u53cc\u4e0b\u5212\u7ebf\uff0c\u8868\u793a\u79c1\u6709\u5c5e\u6027\u3002</p> <p>2\uff0e\u8bbf\u95ee\u9650\u5236\uff0c\u4e0d\u80fd\u88ab\u5916\u90e8\u968f\u4fbf\u8bbf\u95ee\uff0c\u4f46\u53ef\u4ee5\u88ab\u5185\u90e8\u8c03\u7528\uff0c\u79c1\u6709\u5c5e\u6027\u53ef\u4ee5\u7528\u65b9\u6cd5\u8c03\u7528\uff0c\u79c1\u6709\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5b9a\u4e49\u5176\u4ed6\u65b9\u6cd5\u8c03\u7528\u3002</p> <pre><code>class Person():\ndef  __init__(self,name):\nself.__name = name\ndef  __eat(self,food):\nreturn \"%s\u7231\u4e0a\u5403%s\"% (self.__name,food)\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_14","title":"\uff08\u56db\uff09\u7f16\u7801\u89c4\u8303","text":"<p>1\uff0e\u7f29\u8fdb\uff0c4\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\uff0c\u7a7a\u683c\u548ctab\u4e0d\u80fd\u6df7\u7528\uff08tab\u4ec5\u5728\u7f16\u8f91\u5668\u4e2d\u53ef\u4f7f\u7528\uff09\u3002</p> <p>2\uff0e\u7c7b\u540d\u7684\u5355\u8bcd\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u3002</p> <p>3\uff0e\u51fd\u6570\u548c\u7c7b\u7684\u5c5e\u6027\u547d\u540d\u4ee5\u5c0f\u5199\uff0c\u7528\u4e0b\u5212\u7ebf\u8fde\u63a5</p> <p>4\uff0e\u6240\u6709\u7684\u547d\u540d\u90fd\u5e94\u91c7\u7528\u6709\u610f\u4e49\u7684\u82f1\u6587\u5355\u8bcd\uff0c\u591a\u5355\u8bcd\u7531\u4e0b\u5212\u7ebf\u8fde\u63a5\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_15","title":"\u4e94\u3001\u6a21\u5757","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_16","title":"\uff08\u4e00\uff09\u5f15\u5165\u6a21\u5757","text":"<p>\uff081\uff09import \u540e\u9762\u76f4\u63a5\u8ddf\u6a21\u5757\u540d\u6216\u7c7b\u6216\u51fd\u6570\u3002</p> <pre><code>import time\n</code></pre> <p>\uff082\uff09from \u8def\u5f84 import \u7c7b\u6216\u51fd\u6570 #\u8def\u5f84\u6700\u597d\u7528\u7edd\u5bf9\u8def\u5f84\u3002</p> <pre><code>from model.A import add\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_17","title":"\uff08\u4e8c\uff09\u5b89\u88c5\u4e09\u65b9\u5e93","text":"<p>\uff081\uff09sudo pip3  install  pymysql(\u4e09\u65b9\u5e93\u540d)  # \u5728\u547d\u4ee4\u884c\u76f4\u63a5\u8f93\u5165\u5373\u53ef\u3002</p> <p>\uff082\uff09\u5728 pycharm \u91cc\u9762\uff0c\u70b9\u51fb file\uff0c\u9009\u62e9 setting\uff0c\u9009\u62e9 Project\uff0c\u9009\u62e9 Project Interpreter\uff0c\u5728\u53f3\u4e0a\u89d2\u70b9 + \u53f7\uff0c\u8f93\u5165\u5e93\u540d\u5373\u53ef\u5b89\u88c5\u3002</p> <p>\uff083\uff09\u5982\u679c\u662f\u9700\u8981\u4e0b\u8f7d\u7684\u4e09\u65b9\u5e93\uff0c\u4e0b\u8f7d\u540e\u67e5\u770b\u6587\u4ef6\u5305\u91cc\u9762\u7684 readme \u6587\u4ef6\uff0c\u6839\u636e\u63cf\u8ff0\u8fdb\u884c\u5b89\u88c5\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_18","title":"\u516d\u3001\u5f02\u5e38\u5904\u7406","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#try","title":"\uff08\u4e00\uff09try\u8bed\u53e5","text":"<p>\uff081\uff09try ... except...except \u8868\u793a\u5f53\u7a0b\u5e8f\u8fd0\u884c\u9519\u8bef\u540e\uff0c\u88ab except \u6355\u6349\u5230\uff0c\u8fd4\u56de\u4e00\u4e2a\u53ef\u5b9a\u4e49\u7684\u4fe1\u606f\uff0c\u4e14\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u8bed\u53e5\u7684\u6267\u884c\u3002\u6bcf\u4e2a except \u540e\u9762\u8ddf\u4e0d\u540c\u7684\u8fd4\u56de\u4fe1\u606f\u3002 <pre><code>try:\n    print(a)\n    10/0\nexcept NameError:\n    print(\"a\u672a\u88ab\u5b9a\u4e49\")\nexcept ....\n</code></pre></p> <p>\uff082\uff09try ...except...finally \u540c\uff081\uff09\u4e00\u6837\uff0c\u4f46 finally \u540e\u7684\u8bed\u53e5\uff0c\u65e0\u8bba\u662f\u5426\u53d1\u751f\u5f02\u5e38\uff0c\u90fd\u4f1a\u6267\u884c\u3002</p> <p>\uff083\uff09try...except...else \u540c\uff081\uff09\u4e00\u6837\uff0c\u4f46 **else ** \u540e\u7684\u8bed\u53e5\uff0c\u662f\u5728\u6ca1\u6709\u53d1\u751f\u5f02\u5e38\u7684\u60c5\u51b5\u624d\u4f1a\u6267\u884c\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_19","title":"\uff08\u4e8c\uff09\u629b\u51fa\u5f02\u5e38","text":"<p>\u2460 raise NameError(\"\u8fd9\u662f\u4e00\u4e2a\u540d\u79f0\u9519\u8bef\")</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_20","title":"\uff08\u4e09\uff09\u5e38\u89c1\u7684\u5f02\u5e38","text":"<p>\u2460 AssertionError  assert\uff08\u65ad\u8a00\uff09\u8bed\u53e5\u5931\u8d25\u3002</p> <p>\u2461 AttributeError \u8bd5\u56fe\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\u6ca1\u6709\u7684\u5c5e\u6027\uff0c\u6bd4\u5982foo.x\uff0c\u4f46\u662ffoo\u6ca1\u6709x\u8fd9\u4e2a\u5c5e\u6027\u3002</p> <p>\u2462 IOError \u8f93\u5165/\u8f93\u51fa\u5f02\u5e38\uff0c\u57fa\u672c\u4e0a\u662f\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6\u3002</p> <p>\u2463 ImportError \u65e0\u6cd5\u5f15\u5165\u6a21\u5757\u6216\u8005\u5305\uff0c\u57fa\u672c\u4e0a\u662f\u8def\u5f84\u95ee\u9898\u3002</p> <p>\u2464 IndentationError \u8bed\u6cd5\u9519\u8bef\uff0c\u4ee3\u7801\u6ca1\u6709\u6b63\u786e\u5bf9\u9f50\u3002</p> <p>\u2465 IndexError \u4e0b\u6807\u7d22\u5f15\u8d85\u51fa\u5e8f\u5217\u8fb9\u754c\uff0c\u6bd4\u5982\u5f53x\u53ea\u6709\u4e09\u4e2a\u5143\u7d20\uff0c\u5374\u8bd5\u56fe\u8bbf\u95eex[5]\u3002</p> <p>\u2466 KeyError \u8bd5\u56fe\u8bbf\u95ee\u5b57\u5178\u91cc\u4e0d\u5b58\u5728\u7684\u952e\u3002</p> <p>\u2467 Kerboardinterrupt  Ctrl+C\u88ab\u6309\u4e0b\uff0c\u4e3b\u8981\u9488\u5bf9\u65e0\u9650\u5faa\u73af\u3002</p> <p>\u2468 NameError \u4f7f\u7528\u4e00\u4e2a\u8fd8\u672a\u88ab\u8d4b\u503c\u4e88\u5bf9\u8c61\u7684\u53d8\u91cf\u3002</p> <p>\u2469 SyntaxError \u4ee3\u7801\u975e\u6cd5\uff0c\u4ee3\u7801\u4e0d\u80fd\u89e3\u91ca\u3002</p> <p>\u246a TypeError \u4f20\u5165\u5bf9\u8c61\u7c7b\u578b\u4e0e\u8981\u6c42\u7684\u4e0d\u7b26\u3002</p> <p>\u246b UnboundLocalError \u8bd5\u56fe\u8bbf\u95ee\u4e00\u4e2a\u8fd8\u672a\u88ab\u8bbe\u7f6e\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u57fa\u672c\u4e0a\u662f\u7531\u4e8e\u53e6\u4e00\u4e2a\u540c\u540d\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5bfc\u81f4\u4f60\u4ee5\u4e3a\u6b63\u5728\u8bbf\u95ee\u5b83\u3002</p> <p>\u246c ValueError \u4f20\u5165\u4e00\u4e2a\u8c03\u7528\u8005\u4e0d\u671f\u671b\u7684\u503c\uff0c\u5373\u4f7f\u503c\u7684\u7c7b\u578b\u662f\u6b63\u786e\u7684\u3002</p> <p>\u246d FileNotFoundError \u8bd5\u56fe\u6253\u5f00\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_21","title":"\u4e03\u3001\u6587\u4ef6\u8bfb\u5199","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#r","title":"\uff08\u4e00\uff09\u4ee5\u8bfb\u7684\u5f62\u5f0f\u6253\u5f00\uff0c\u5e76\u80fd\u5199\uff08r+\uff09","text":"<p>1.</p> <pre><code>&gt;&gt; f = open(\"test.txt\",\"r+\")\n&gt;&gt; f.write(\"xxx\")\n&gt;&gt; f.flush()\n&gt;&gt; f.close()\n</code></pre> <p>2.\u5149\u6807\u4f1a\u653e\u5728\u6587\u4ef6\u5f00\u5934\uff0c\u8f93\u5165\u7684\u8f93\u5165\u4f1a\u8986\u76d6\u5f00\u5934</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#w","title":"\uff08\u4e8c\uff09\u4ee5\u5199\u7684\u5f62\u5f0f\u6253\u5f00\uff0c\u5e76\u80fd\u8bfb(w+)","text":"<p>1.</p> <pre><code>&gt;&gt; f = open(\"test.txt\",\"w+\")\n&gt;&gt; data = f.read()\n&gt;&gt; print(date)\n</code></pre> <p>2.\u82e5\u6587\u4ef6\u5df2\u5b58\u5728\u4f1a\u5c06\u5176\u8986\u76d6\uff0c\u82e5\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f1a\u65b0\u5efa\u6587\u4ef6\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#a","title":"\uff08\u4e09\uff09\u8ffd\u52a0\u6a21\u5f0f\uff08a+\uff09","text":"<p>1.</p> <pre><code>&gt;&gt; f = open(\"test.txt\",\"a+\")\n</code></pre> <p>2.\u5149\u6807\u5728\u6587\u4ef6\u7684\u672b\u5c3e\uff0c\u5199\u5165\u4f1a\u8ffd\u52a0\u5230\u672b\u5c3e\uff0c\u82e5\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f1a\u65b0\u5efa\u6587\u4ef6\u3002</p> <pre><code>with open(\"test.txt\",\"a+\",encoding=\"utf-8\") as f:\nf.write(\"\u6211\u662f\u4e2d\u6587\")\nf.flush()\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/","title":"Python\u73af\u5883\u4e0e\u4f9d\u8d56\u7ba1\u7406","text":"<p>Python\u6709\u4e00\u5927\u7279\u70b9\uff0c\u5373\u5177\u6709\u5f3a\u5927\u7684\u6807\u51c6\u5e93\u548c\u7b2c\u4e09\u65b9\u5e93\u3002\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u7528\u5230\u7b2c\u4e09\u65b9\u5e93\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u5b89\u88c5\u548c\u7ba1\u7406\u3002\u57fa\u4e8e\u4e00\u5b9a\u7684\u5de5\u5177\u94fe\uff0cPython\u4e5f\u80fd\u5199\u51fa\u4f18\u96c5\u6807\u51c6\u7684\u9879\u76ee\u4ee3\u7801\uff0c\u5c06\u4f9d\u8d56\u7ba1\u7406\u73a9\u7684\u660e\u660e\u767d\u767d\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pip","title":"pip","text":"<p>pip \u662f Python \u6807\u51c6\u5e93\u7684\u4e00\u4e2a\u5305\uff0c\u4ece Python3.4 \u5f00\u59cb pip \u5df2\u7ecf\u5185\u7f6e\u5728 Python \u4e2d\u3002Python \u6709\u6210\u5343\u4e0a\u4e07\u7684\u5b9d\u85cf\u5e93\uff0c\u5b83\u4eec\u88ab\u653e\u7f6e\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u4ed3\u5e93 <code>pypi</code>\u3002pip \u5728\u8fd9\u4e2a\u4ed3\u5e93\u4e2d\u5145\u5f53\u7740\u7ba1\u7406\u5458\u7684\u89d2\u8272\uff0c\u53ef\u4ee5\u5c06\u9700\u8981\u7684\u5e93\u4ece Pypi \u53d6\u51fa\u6765\uff0c\u5b89\u88c5\u5e76\u7ba1\u7406\u8fd9\u4e9b\u5e93\u3002</p> <p>\u7531\u4e8e\u5927\u591a\u6570\u7684\u7b2c\u4e09\u65b9\u5e93\u90fd\u53d1\u5e03\u5728 pypi\uff0c\u6240\u4ee5\u901a\u8fc7pip\u5c31\u53ef\u4ee5\u5b89\u88c595%\u4ee5\u4e0a\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u4f53\u91cf\u5728\u5305\u5b89\u88c5\u8fd9\u65b9\u9762\u662f\u5927\u54e5\u7ea7\u522b\u3002pip\u8fd8\u6709\u4e00\u5927\u4f18\u52bf\u5c31\u662f\u5728\u5b89\u88c5\u5e93\u7684\u540c\u65f6\u4f1a\u628a\u5e93\u6240\u9700\u8981\u7684\u4f9d\u8d56\u4e5f\u4e00\u5e76\u8fdb\u884c\u5b89\u88c5\u3002\u7efc\u4e0a\u6240\u8ff0\uff0c\u5728\u5355\u4e00\u7684\u9879\u76ee\u73af\u5883\u4e2d\u63a8\u8350\u4f7f\u7528\u5b83\uff0c\u7b80\u5355\u4fbf\u6377\u3002</p> <p>\u5982\u679c\u6709\u4e24\u4e2a\u53ca\u4ee5\u4e0a\u7684\u9879\u76ee\u73af\u5883\u5c31\u4e0d\u5efa\u8bae\u53bb\u4f7f\u7528pip\uff0c\u4f1a\u51fa\u73b0\u73af\u5883\u51b2\u7a81\u4e14\u96be\u4ee5\u7ba1\u7406\u3002\u5982\u679c\u4e00\u5b9a\u8981\u4f7f\u7528\u90a3\u4e48\u5c31\u9700\u8981\u642d\u914d\u4e0a\u73af\u5883\u7ba1\u7406\u5de5\u5177\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_1","title":"\u5b89\u88c5","text":"<p>\u5982\u679c Python \u73af\u5883\u6ca1\u6709 pip \u5de5\u5177\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6cd5\u8fdb\u884c\u5b89\u88c5\u3002</p> <p><pre><code>sudo apt-get install python-pip\n</code></pre> \u8fd8\u6709\u79cd\u65b9\u6cd5\uff1a</p> <p>\u5728 https://pypi.org/project/pip/#files \u4e2d\u4e0b\u8f7dpip\u5b89\u88c5\u6587\u4ef6\uff0c\u7136\u540e\u89e3\u538b\u5230 <code>python scripts</code> \u76ee\u5f55\u4e2d\uff0c\u6267\u884c <code>python setup.py install</code> \u547d\u4ee4\u5b89\u88c5\u5373\u53ef\uff1b</p> <p>\u8bb8\u591a\u4eba\u62b1\u6028 pip \u547d\u4ee4\u5b89\u88c5 Python \u5e93\u5f88\u6162\u6216\u8005\u662f\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u5931\u8d25\uff0c\u5176\u5b9e\u662f pip \u6e90\u7684\u95ee\u9898\uff0c\u5c06\u5176\u66f4\u6362\u4e3a\u6211\u4eec\u56fd\u5185\u6e90\u5373\u53ef\uff1b</p> <p>1.\u4e34\u65f6\u8bbe\u5b9a\uff1a</p> <p><pre><code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package matplotlib\n</code></pre> 2.\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\uff1a</p> <p><pre><code>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> \u8bbe\u4e3a\u9ed8\u8ba4\u540e\uff0c\u4ee5\u540e\u5b89\u88c5\u5e93\u90fd\u662f\u4ece\u6e05\u534e\u6e90\u4e0b\u8f7d\uff0c\u800c\u4e14\u65e0\u9700\u518d\u52a0\u955c\u50cf\u6e90\u7f51\u5740\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_2","title":"\u5feb\u901f\u914d\u7f6e\u73af\u5883","text":"<p>\u901a\u8fc7 pip list \u547d\u4ee4\u53ef\u4ee5\u9884\u89c8\u5f53\u524d\u73af\u5883\u4e0b\u7684\u4f9d\u8d56\u5305\uff1a</p> <p><pre><code>:~$ pip list\nPackage\u00a0 \u00a0 \u00a0 \u00a0Version\u00a0\n------------- --------\nasn1crypto\u00a0 \u00a0 0.24.0\u00a0\u00a0\ncolorama\u00a0 \u00a0 \u00a0 0.3.7\u00a0 \u00a0\nconfigparser\u00a0 3.5.0b2\u00a0\ncryptography\u00a0 2.6.1\u00a0 \u00a0\ndecorator\u00a0 \u00a0 \u00a04.3.0\n</code></pre> \u901a\u8fc7 pip install package_name \u547d\u4ee4\u5b89\u88c5 Python \u5305\uff1a \u4ee5 requests \u5305\u4e3e\u4f8b\u8bf4\u660e\uff1a</p> <p><pre><code>~$ pip install requests\nCollecting requests\n......\nSuccessfully installed certifi-2021.10.8 chardet-4.0.0 idna-2.10 requests-2.27.1 urllib3-1.26.16\n</code></pre> \u8fd8\u53ef\u4ee5\u901a\u8fc7pip install requests==&lt;\u7248\u672c\u53f7&gt;\u6765\u6307\u5b9a\u5305\u7684\u7248\u672c\u53f7\u8fdb\u884c\u5b89\u88c5\uff1a <pre><code>pip install requests==2.27.1\n</code></pre> \u5982\u679c\u6211\u4eec\u60f3\u5c06\u5b89\u88c5\u597d\u7684\u8fd9\u4e9b\u5305\u53ca\u4f9d\u8d56\u4fe1\u606f\u5168\u90e8\u8bb0\u5f55\u4e0b\u6765\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7pip freeze\u547d\u4ee4\u5c06\u4fe1\u606f\u8bb0  \u5728requirements.txt\u4e2d\u3002 <pre><code>pip freeze &gt; requirements.txt\n</code></pre> \u5f53\u6211\u4eec\u9700\u8981\u5728\u4e00\u4e2a\u65b0\u7684python\u73af\u5883\u4e2d\u5f15\u5165\u5f53\u524d\u7684\u4f9d\u8d56\u65f6\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u3002 <pre><code>pip  install -r requirements.txt\n</code></pre> \u8fd8\u53ef\u4ee5\u901a\u8fc7 pipreqs \u8fdb\u884c\u5bfc\u5305\u64cd\u4f5c\uff1a <pre><code>~$ pip install pipreqs\n~$ pipreqs ./  \u6b64\u547d\u4ee4\u4e5f\u662f\u751f\u6210\u4e00\u4e2arequirements.txt\u6587\u4ef6\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\n</code></pre> \u5982\u679c\u73af\u5883\u4e2d\u5b58\u5728 requirements.txt \u6587\u4ef6\uff0c\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u51fa requirements.txt \u6587\u4ef6\uff1a <pre><code>pipreqs ./ --encoding=utf-8 --force\n</code></pre> \u6ce8\u610f\u53ef\u80fd\u5728\u4f7f\u7528\u65f6\u4f1a\u53d1\u73b0\uff1a <pre><code>~$ pipreqs ./\nTraceback (most recent call last):\n\u00a0 File \"/home/uos/.local/bin/pipreqs\", line 6, in &lt;module&gt;\n\u00a0 \u00a0 from pipreqs.pipreqs import main\n\u00a0 File \"/home/uos/.local/lib/python2.7/site-packages/pipreqs/pipreqs.py\", line 51, in &lt;module&gt;\n\u00a0 \u00a0 from pipreqs import __version__\nImportError: cannot import name __version__\n</code></pre> \u62a5\u9519\u4e86\u600e\u4e48\u529e\uff1f</p> <p>\u4e0d\u8981\u614c\u5f20\uff0c\u5176\u5b9e\u8fd9\u662f\u56e0\u4e3a\u6b64\u73af\u5883\u4e0b\u7248\u672c\u4e0d\u53ef\u7528\uff0c\u6362\u4e2a\u7248\u672c\u5c31\u597d\u5566\uff01</p> <pre><code>~$\u00a0pip install pipreqs==100\nCollecting pipreqs==100\nCould not find a version that satisfies the requirement pipreqs==100 (from versions: 0.1.3, 0.1.4, 0.1.5, 0.1.6, 0.1.7, 0.1.8, 0.1.9, 0.2.0, 0.2.1, 0.2.2, 0.2.3, 0.2.4, 0.2.5, 0.2.7, 0.2.8, 0.2.9, 0.3.0, 0.3.1, 0.3.2, 0.3.3, 0.3.4, 0.3.5, 0.3.6, \n0.3.7, 0.3.8, 0.3.9, 0.4.0, 0.4.1, 0.4.2, 0.4.3, 0.4.4, 0.4.5, 0.4.6, 0.4.7, 0.4.8, 0.4.9, 0.4.10, 0.4.11)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0\nNo matching distribution found for pipreqs==100\n\u8fd9\u91cc\u5f88\u591a\u7248\u672c\uff0c\u53ef\u4ee5\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u672a\u5b89\u88c5\u7684\uff0c\u5efa\u8bae\u4e0d\u8981\u88c5\u592a\u65e7\u7684\n~$ pip install pipreqs==0.4.1\n~$ pipreqs --help \u67e5\u770b\u6709\u6ca1\u6709\u62a5\u9519\uff0c\u6ca1\u6709\u62a5\u9519\u5c31ok\n\u63a5\u4e0b\u6765\u6b63\u5e38\u64cd\u4f5c\u5c31\u4e0d\u4f1a\u62a5\u9519\u5566\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_3","title":"\u660e\u786e\u73af\u5883\u4f9d\u8d56","text":"<p>pip list \u548c pip freeze \u6253\u5370\u51fa\u6765\u7684\u4f9d\u8d56\u90fd\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u65e0\u6cd5\u660e\u786e\u4f9d\u8d56\u5173\u7cfb\u3002</p> <p>\u5f53\u6211\u4eec\u60f3\u6e05\u7406\u67d0\u4e00\u4e2a\u5305\u65f6\uff0c\u4e0d\u77e5\u9053\u54ea\u4e2a\u662f\u76f4\u63a5\u4f9d\u8d56\u54ea\u4e2a\u662f\u95f4\u63a5\u4f9d\u8d56\u3002\u5bfc\u81f4\u73af\u5883\u6e05\u7406\u4e0d\u5e72\u51c0\u6216\u8005\u6e05\u7406\u4e86\u4e0d\u8be5\u6e05\u9664\u7684\u4f9d\u8d56\u3002</p> <p>\u8fd9\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528 pipdeptree \u6765\u7ba1\u7406\u4f9d\u8d56\u6811\uff1a</p> <p><pre><code>~$ pip install pipdeptree\n......\n~$ pipdeptree\n...\npipreqs==0.4.1\n\u00a0 - docopt [required: Any, installed: 0.6.2]\n\u00a0 - yarg [required: Any, installed: 0.1.9]\n\u00a0 \u00a0 - requests [required: Any, installed: 2.27.1]\n\u00a0 \u00a0 \u00a0 - certifi [required: &gt;=2017.4.17, installed: 2021.10.8]\n\u00a0 \u00a0 \u00a0 - chardet [required: &gt;=3.0.2,&lt;5, installed: 4.0.0]\n\u00a0 \u00a0 \u00a0 - idna [required: &gt;=2.5,&lt;3, installed: 2.10]\n\u00a0 \u00a0 \u00a0 - urllib3 [required: &gt;=1.21.1,&lt;1.27, installed: 1.26.16]\n...\n</code></pre> \u8fd9\u6837\u6211\u4eec\u5c31\u6e05\u695a\u7684\u77e5\u9053\u4f9d\u8d56\u76f4\u63a5\u7684\u5173\u7cfb\uff0c\u5728\u4f9d\u8d56\u6e05\u7406\u65f6\u5c31\u53ef\u4ee5\u907f\u514d\u51fa\u73b0\u95ee\u9898\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_4","title":"\u73af\u5883\u4f9d\u8d56\u6cbb\u7406","text":"<p>\u5982\u679c\u8bf4\u6211\u4eec\u60f3\u5378\u8f7d requests \u5305\uff0c\u76f4\u63a5\u4f7f\u7528 pip uninstall requests \u547d\u4ee4\u4f60\u4f1a\u53d1\u73b0\u600e\u4e48\u5378\u4e0d\u5e72\u51c0\uff1f</p> <p><pre><code>:~$ pipdeptree\nsetuptools==40.8.0\nsix==1.12.0\nwheel==0.32.3\nyarg==0.1.9\n\u00a0 - requests [required: Any, installed: 2.27.1]\n\u00a0 \u00a0 - certifi [required: &gt;=2017.4.17, installed: 2021.10.8]\n\u00a0 \u00a0 - chardet [required: &gt;=3.0.2,&lt;5, installed: 4.0.0]\n\u00a0 \u00a0 - idna [required: &gt;=2.5,&lt;3, installed: 2.10]\n\u00a0 \u00a0 - urllib3 [required: &gt;=1.21.1,&lt;1.27, installed: 1.26.16]\n:~$ pip uninstall requests\n:~$ pipdeptree\nsetuptools==40.8.0\nsix==1.12.0\nurllib3==1.26.16\nwheel==0.32.3\nyarg==0.1.9\n\u00a0 - requests [required: Any, installed: 2.21.0]\n\u53d1\u73b0\u53ea\u662f\u5355\u7eaf\u7684\u5378\u8f7d\u4e86requests\uff0c\u5b83\u4f9d\u8d56\u7684\u5305\u5e76\u6ca1\u6709\u88ab\u5378\u8f7d\uff01\n</code></pre> \u90a3\u4e48\u63a8\u8350\u4e00\u4e2a\u5de5\u5177 pip-autoremove \u6765\u505a\u8fd9\u4ef6\u4e8b\u60c5\uff0c\u4e0b\u9762\u7528\u8fd9\u4e2a\u5de5\u5177\u6765\u8bd5\u8bd5\uff1a <pre><code>~$ pip install pip-autoremove\n...\n~$ pip-autoremove requests -y\n...\n:~$ pipdeptree\nsix==1.12.0\nwheel==0.32.3\nyarg==0.1.9\n\u00a0 - requests [required: Any, installed: 2.21.0]\n</code></pre> \u4f60\u4f1a\u53d1\u73b0\u975e\u5e38\u597d\u7528\u54c8\uff0c\u5b83\u4f1a\u68c0\u7d22\u5230 requests\u5305 \u548c\u5b83\u7684\u76f8\u5173\u4f9d\u8d56\uff0c\u7136\u540e\u5168\u90e8\u5378\u8f7d\uff0c\u53ef\u4ee5\u8bf4\u662f\u975e\u5e38\u5e72\u51c0\uff01</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_5","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>pip install \u4e0e python install \u533a\u522b</p> <p>\u4ee5 requests \u4e3a\u4f8b\uff1a</p> <ul> <li> <p>\u5f53\u6211\u4eec\u7528 pip install requests \u5b89\u88c5 requests \u6a21\u5757\uff0c\u5219\u4f1a\u628a requests \u4f9d\u8d56\u7684\u5176\u4ed6\u5e93\u90fd\u5b89\u88c5\u4e0a\uff0c\u4e0d\u9700\u8981\u5728\u53bb\u8d39\u529b\u5b89\u88c5\u4f9d\u8d56\u7684\u5e93\u4e86\u3002</p> </li> <li> <p>\u5f53\u6211\u4eec\u4f7f\u7528 pip setup.py install \u5b89\u88c5 requests \u6a21\u5757\uff0c\u9700\u8981\u53bb\u624b\u52a8\u5b89\u88c5\u7b2c\u4e09\u65b9\u4f9d\u8d56\uff0c\u5426\u5219\u5728 import requests \u65f6\u4f1a\u51fa\u73b0\u62a5\u9519\u3002</p> </li> </ul>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#conda","title":"conda","text":"<p>conda\u662f\u4e00\u4e2a\u652f\u6301\u591a\u8bed\u8a00\u7684\u5305\u3001\u4f9d\u8d56\u548c\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u5b83\u4e0d\u4ec5\u80fd\u7ba1\u7406\u5305\uff0c\u8fd8\u53ef\u4ee5\u9694\u79bb\u548c\u7ba1\u7406\u4e0d\u540cPython\u7248\u672c\u7684\u73af\u5883\uff0c\u7c7b\u4f3c\u4e8e\u7ba1\u7406node.js\u73af\u5883\u7684nvm\u5de5\u5177\u3002</p> <p>conda\u5b98\u65b9\u4e00\u5171\u6709\u4e24\u4e2a\u53d1\u884c\u7248anaconda\u548cminiconda\uff0canaconda\u76f8\u6bd4miniconda\u4f53\u79ef\u66f4\u5927\uff0c\u9884\u88c5\u4e86\u8bb8\u591a\u79d1\u5b66\u8ba1\u7b97\u7684\u5e93\uff0c\u5f88\u591a\u4e1c\u897f\u672a\u5fc5\u4f1a\u7528\u7684\u5230\uff0c\u6240\u4ee5\u5efa\u8bae\u4f7f\u7528miniconda\u3002</p> <p>\u5bf9\u4e8e\u8de8\u8bed\u8a00\u7684\u6216\u8005\u662f\u672c\u8eab\u5c31\u6574\u5408\u4e86\u5404\u79cd\u4f9d\u8d56\u7684\u73af\u5883(\u6bd4\u5982tenserflow)\uff0c\u518d\u8003\u8651\u4f7f\u7528conda\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#miniconda","title":"\u5b89\u88c5miniconda","text":"<p>1.\u9996\u5148\u4e0b\u8f7dminiconda\u7684\u5b89\u88c5\u811a\u672c</p> <pre><code>[https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh](https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh)\n</code></pre> <p>2.\u6267\u884c\u5b89\u88c5\u811a\u672c</p> <p>3.\u4e00\u76f4\u56de\u8f66\u7b49\u5230\u51fa\u73b0\u5982\u4e0b\u63d0\u793a\u5e76\u8f93\u5165yes\u56de\u8f66</p> <p><pre><code>Do you accept the license terms? [yes|no]\n[no] &gt;&gt;&gt;\u00a0\nPlease answer 'yes' or 'no':'\n&gt;&gt;&gt;\u00a0yes\n</code></pre> 4.\u6307\u5b9a\u5b89\u88c5\u8def\u5f84 <pre><code>[/home/uos/miniconda3] &gt;&gt;&gt;\u00a0\u8fd9\u91cc\u7684\u8def\u5f84\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u60c5\u51b5\u8bbe\u5b9a\uff0c\u6307\u5b9a\u5b8c\u6210\u56de\u8f66\n\u6211\u8fd9\u91cc\u5c31\u4e0d\u6307\u5b9a\u4e86\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8def\u5f84\n</code></pre> 5.\u521d\u59cb\u5316conda <pre><code>by running conda init? [yes|no]\n[no] &gt;&gt;&gt; yes\u00a0\n</code></pre> \u901a\u8fc7\u7b80\u5355\u7684\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5b89\u88c5\u6210\u529f\u4e86\uff0c\u5f53\u6253\u5f00\u7ec8\u7aef\u63d0\u793a\u7b26\u524d\u51fa\u73b0(base)\u8bf4\u660e\u8fdb\u5165\u4e86\u9ed8\u8ba4\u865a\u62df\u73af\u5883\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#base","title":"\u53d6\u6d88\u6fc0\u6d3bbase\u73af\u5883","text":"<p>\u5f53miniconda\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6bcf\u6b21\u6253\u5f00\u7ec8\u7aef\u90fd\u4f1a\u6fc0\u6d3b\u5176\u9ed8\u8ba4\u7684base\u73af\u5883\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u7981\u6b62\u6fc0\u6d3b\u9ed8\u8ba4base\u73af\u5883\u3002</p> <pre><code>conda config --set auto_activate_base false\u00a0\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#python_1","title":"\u5b89\u88c5/\u5378\u8f7dPython\u5305","text":"<p>\u5f53\u6211\u4eec\u60f3\u5728conda\u4e2d\u5b89\u88c5\u5305\uff0c\u53ef\u4ee5\u9009\u62e9\u7528conda install\u6216\u8005pip install\uff0c\u4e24\u8005\u57fa\u672c\u76f8\u540c\uff0c\u4f46\u662fpip\u662f\u901a\u8fc7pypi\u4ed3\u5e93\u62c9\u53d6\u7684\u6570\u636e\uff0c\u800cconda\u662f\u901a\u8fc7anaconda.org\u4e0a\u62c9\u53d6\u7684\u6570\u636e\u3002\u6240\u4ee5\u8bf4pip\u7684\u5305\u66f4\u5168\u3002</p> <p>\u4ee5requests\u4e3a\u4f8b\uff1a</p> <pre><code>:~$ conda install requests  \u5b89\u88c5\n:~$ conda uninstall requests  \u5378\u8f7d\n\u64cd\u4f5c\u65b9\u6cd5\u548cpip\u51e0\u4e4e\u4e00\u6837\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_6","title":"\u4f9d\u8d56\u7ba1\u7406","text":"<p>conda \u4e5f\u6709\u548cpip freeze\u7c7b\u4f3c\u7684\u4f9d\u8d56\u7ba1\u7406\u65b9\u5f0f\uff1a</p> <p>\u4e3a\u5f53\u524d\u73af\u5883\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\uff1a</p> <p><pre><code>:~$ conda env export &gt; environment.yaml \n</code></pre> \u6839\u636e\u914d\u7f6e\u6587\u4ef6\u590d\u73b0\u5f53\u524d\u73af\u5883\uff1a <pre><code>:~$ conda env create -f environment.yaml\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_7","title":"\u73af\u5883\u64cd\u4f5c","text":"<p>\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u73af\u5883\uff0c\u5e76\u6fc0\u6d3b\u8be5\u73af\u5883\uff1a</p> <pre><code>:~$ conda create -n uos python=3.7 -y  \u73af\u5883\u540d\u79f0\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u6211\u8fd9\u91cc\u4f7f\u7528uos\n...\n:~$ conda activate uos\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u521b\u5efa\u73af\u5883\u4e4b\u540e\uff0c\u4e00\u5b9a\u8981 activate \u8be5\u73af\u5883\uff0c\u5426\u5219\u540e\u7eed\u7684 install \u64cd\u4f5c\u8fd8\u662f\u5728 base \u73af\u5883\u3002 \u67e5\u770b\u5df2\u6709\u73af\u5883\u5217\u8868\uff1a</p> <pre><code>:~$ conda env list\n# conda environments:\n#\nbase\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0/home/uos/miniconda3\nuos\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0*\u00a0 /home/uos/miniconda3/envs/uos\n</code></pre> <p>\u67e5\u770b\u5f53\u524d\u73af\u5883\u4e0b\u7684\u4f9d\u8d56\uff1a</p> <pre><code>:~$ conda list\n# packages in environment at /home/uos/miniconda3/envs/uos:\n#\n# Name\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Version\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Build\u00a0 Channel\n_libgcc_mutex\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a00.1\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 main\u00a0\u00a0\n_openmp_mutex\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a05.1\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a01_gnu\u00a0\u00a0\nca-certificates\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a02023.01.10\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0h06a4308_0\u00a0\u00a0\ncertifi\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a02022.12.7\u00a0 \u00a0 \u00a0 \u00a0 py37h06a4308_0\u00a0\u00a0\nld_impl_linux-64\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 2.38\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0h1181459_1\n...\n</code></pre> <p>\u9000\u51fa\u73af\u5883\uff1a</p> <pre><code>:~$ conda deactivate\n:~$ exit  \u73af\u5883\u5185\u76f4\u63a5\u9000\u51fa\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_8","title":"\u5207\u6362\u73af\u5883\u6280\u5de7","text":"<p>\u5f53\u6211\u4eec\u5207\u6362\u73af\u5883\u65f6\uff0c\u4f1a\u4f7f\u7528conda activate\u547d\u4ee4\uff0c\u5982\u679c\u6211\u4eec\u60f3\u53ea\u8f93\u5165uos\u53ef\u4e0d\u53ef\u4ee5\u6fc0\u6d3b\u73af\u5883\u5462\uff1f</p> <p>\u5f53\u7136\u53ef\u4ee5\uff0c\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <pre><code>:~$ vim ~/.bash_profile\nalias uos=\"conda activate uos\"\n:~$ source ~/.bash_profile\n:~$ uos\n\u6b64\u65b9\u6cd5\u9002\u7528\u4e8e\u73af\u5883\u4e0e\u73af\u5883\u4e4b\u95f4\u5207\u6362\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_9","title":"\u5e38\u7528\u547d\u4ee4","text":"<p>\u73af\u5883\u76f8\u5173\uff1a</p> <pre><code>conda remove -n [env_name] --all  \u79fb\u9664\u73af\u5883\nconda create --name new_env_name --clone base_env_name  \u514b\u9686\u73af\u5883\n</code></pre> <p>\u65e5\u5e38\u76f8\u5173\uff1a</p> <pre><code>conda search [package_name]  \u641c\u7d22\u5b89\u88c5\u5305\u4fe1\u606f\nconda update [package_name]  \u66f4\u65b0\u5305\nconda remove [package_name]  \u5220\u9664\u5305\nconda clean -t  \u76f4\u63a5\u6e05\u9664\u88ab\u7f13\u5b58\u5305\nconda clean -y -a  \u76f4\u63a5\u6e05\u9664\u7d22\u5f15\u7f13\u5b58\u3001\u672a\u4f7f\u7528\u7f13\u5b58\u5305\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_10","title":"Python\u73af\u5883\u4e0e\u4f9d\u8d56\u7ba1\u7406","text":""},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pdm","title":"pdm","text":"<p>pdm\u662f\u4e00\u4e2a\u65b0\u7684Python\u5305\u7ba1\u7406\u5668\uff0c\u4e8e2021\u5e74\u53d1\u5e031.0\u7248\u672c\uff0c\u76ee\u524d\u6700\u65b0\u7248\u4e3a2.7\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\u8fd9\u6b3e\u5de5\u5177\u7684\u5f00\u53d1\u8005\u662f\u4e2d\u56fd\u4eba\u3002\u4e3a\u4ec0\u4e48\u9009\u62e9pdm\u5462\uff1f\u9996\u5148\u5b83\u4e0d\u662f\u4f20\u7edf\u7684\u5305\u7ba1\u7406\u5668(pipenv,poetry)\u9700\u8981\u57fa\u4e8e\u865a\u62df\u73af\u5883\uff0cpdm\u5f97\u76ca\u4e8e2018\u5e74\u7684\u4e00\u4e2aPEP\u63d0\u6848\uff08PEP582\uff0cPython local packages directory\uff09\uff0c\u5b8c\u5168\u6452\u5f03\u4e86\u865a\u62df\u73af\u5883\u3002</p> <p>PDM \u5305\u542b\u5982\u4e0b\u7279\u6027\uff1a</p> <p>1.PEP 582 \u672c\u5730\u9879\u76ee\u5e93\u76ee\u5f55\uff0c\u652f\u6301\u5b89\u88c5\u4e0e\u8fd0\u884c\u547d\u4ee4\uff0c\u5b8c\u5168\u4e0d\u9700\u8981\u865a\u62df\u73af\u5883\u3002</p> <p>2.\u4e00\u4e2a\u7b80\u5355\u4e14\u76f8\u5bf9\u5feb\u901f\u7684\u4f9d\u8d56\u89e3\u6790\u5668\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u5927\u7684\u4e8c\u8fdb\u5236\u5305\u53d1\u5e03\u3002</p> <p>3.\u517c\u5bb9 PEP 517 \u7684\u6784\u5efa\u540e\u7aef\uff0c\u7528\u4e8e\u6784\u5efa\u53d1\u5e03\u5305(\u6e90\u7801\u683c\u5f0f\u4e0e wheel \u683c\u5f0f)</p> <p>4.\u62e5\u6709\u7075\u6d3b\u4e14\u5f3a\u5927\u7684\u63d2\u4ef6\u7cfb\u7edf\uff08\u6709\u63d2\u4ef6\u7cfb\u7edf\u76f4\u63a5\u5c31\u62c9\u5f00\u4e00\u4e2a\u6863\u6b21\uff09</p> <p>5.PEP 621 \u5143\u6570\u636e\u683c\u5f0f</p> <p>6.\u50cf pnpm \u4e00\u6837\u7684\u4e2d\u5fc3\u5316\u5b89\u88c5\u7f13\u5b58\uff0c\u8282\u7701\u78c1\u76d8\u7a7a\u95f4</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_11","title":"\u5b89\u88c5","text":"<p>pdm\u7684\u5b89\u88c5\u65b9\u5f0f\u6709\u5f88\u591a\u79cd\uff0c\u6bd4\u5982pip\u3001pipx\u3001homebrew\u7b49\u3002\u8fd9\u91cc\u63a8\u8350\u4e00\u6b3e\u5b89\u88c5\u547d\u4ee4\u884c\u5b89\u88c5\u5de5\u5177\uff0cpipx \u662f\u5b89\u88c5\u5e76\u8fd0\u884c Python \u7ec8\u7aef\u7528\u6237\u5e94\u7528\uff08end-user applications\uff09\u7684\u5de5\u5177\u3002\u7ec8\u7aef\u7528\u6237\u5e94\u7528\uff0c\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u4e3a\u7528 Python \u7f16\u5199\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u76f4\u63a5\u4ece\u547d\u4ee4\u884c\u8c03\u7528\u7684\u90a3\u79cd\u3002</p> <p><pre><code>python3 -m pip install --user pipx\n</code></pre> pipx \u9700\u8981 Python 3.6 \u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u540c\u65f6\u5fc5\u987b\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86 pip\u3002 <pre><code>pipx install pdm\n</code></pre> \u5982\u679c\u63d0\u793a\u865a\u62df\u73af\u5883\u6ca1\u6709\u88ab\u521b\u5efa\u9700\u8981\u5b89\u88c5venv\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\u3002 <pre><code>sudo apt-get install python3-venv\n</code></pre> \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\u518d\u901a\u8fc7pipx\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5pdm\u3002 <pre><code>:~$ pipx install pdm\n\u00a0 installed package pdm 2.7.0, installed using Python 3.7.3\n\u00a0 These apps are now globally available\n\u00a0 \u00a0 - pdm\ndone! \u2728 \ud83c\udf1f \u2728\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pdm_1","title":"\u521d\u59cb\u5316pdm","text":"<p>\u6267\u884c pdm init \u5c31\u4f1a\u5f00\u59cb\u521d\u59cb\u5316\uff0c\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u4f1a\u8ba9\u4f60\u9009\u62e9\u9879\u76ee\u7684\u4e00\u4e9b\u4fe1\u606f</p> <p><pre><code>:~$ pdm init\nCreating a pyproject.toml for PDM...\nPlease enter the Python interpreter to use\n0. /usr/bin/python (2.7)\n1. /usr/bin/python3.7m (3.7)\n2. /usr/bin/python3.7 (3.7)\n3. /usr/bin/python2.7 (2.7)\n4. /home/uos/.local/pipx/venvs/pdm/bin/python (3.7)\nPlease select (0): 2\nUsing Python interpreter: /usr/bin/python3.7 (3.7)\nUsing __pypackages__ because non-venv Python is used.\nWould you like to create a virtualenv with /usr/bin/python3.7? [y/n] (y): y\nVirtualenv is created successfully at /home/uos/.venv\nIs the project a library that is installable?\nIf yes, we will need to ask a few more questions to include the project name and build backend [y/n] (n): y\nProject name (uos): 123like\nProject version (0.1.0):\u00a0\nProject description ():\u00a0\nWhich build backend to use?\n0. pdm-backend\n1. setuptools\n2. flit-core\n3. hatchling\n4. pdm-pep517\nPlease select (0): 4\nLicense(SPDX name) (MIT):\u00a0\nAuthor name ():\u00a0\nAuthor email ():\u00a0\nPython requires('*' to allow any) (&gt;=3.7):\u00a0\nChanges are written to pyproject.toml.\nFound following files from other formats that you may import:\n0. /home/uos/requirements.txt (requirements)\n1. don't do anything, I will import later.\nPlease select: 1\n</code></pre> \u5b8c\u6210\u4e4b\u540e\uff0cPDM \u4f1a\u5c06\u4f60\u7684\u9009\u62e9\u4ee5 toml \u683c\u5f0f\u5199\u5165 pyproject.toml \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002 <pre><code>:~$ cat pyproject.toml\u00a0\n[project]\nname = \"123like\"\nversion = \"0.1.0\"\ndescription = \"\"\nauthors = [\n\u00a0 \u00a0 {name = \"\", email = \"\"},\n]\ndependencies = []\nrequires-python = \"&gt;=3.7\"\nreadme = \"README.md\"\nlicense = {text = \"MIT\"}\n\n[build-system]\nrequires = [\"pdm-pep517&gt;=1.0\"]\nbuild-backend = \"pdm.pep517.api\"\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_12","title":"\u5305\u64cd\u4f5c","text":"<p>\u5b89\u88c5\u5305\u548c Poetry \u4e00\u6837\uff0c\u5b89\u88c5\u4f7f\u7528\u7684\u662f add \u547d\u4ee4</p> <p><pre><code>pdm add requests\n</code></pre> \u67e5\u770b\u5305 <pre><code>pdm list --graph\n</code></pre> pdm list \u8fd8\u6709\u4e24\u4e2a\u9009\u9879\uff1a \u2013freeze\uff1a\u4ee5 requirements.txt \u7684\u683c\u5f0f\u5217\u51fa\u5df2\u5b89\u88c5\u7684\u5305</p> <p>\u2013json\uff1a\u4ee5 json \u7684\u683c\u5f0f\u5217\u51fa\u5df2\u5b89\u88c5\u7684\u5305\uff0c\u4f46\u5fc5\u987b\u4e0e --graph \u540c\u65f6\u4f7f\u7528</p> <p>\u8981\u67e5\u770b\u67d0\u4e2a\u5305\u7684\u67d0\u4f53\u8be6\u60c5\uff0c\u76f4\u63a5\u7528 pdm show some_package\u5373\u53ef</p> <p><pre><code>pdm show requests\n</code></pre> \u5220\u9664\u5305 <pre><code>pmd remove requests\n</code></pre> \u66f4\u65b0\u5305 <pre><code># \u66f4\u65b0\u6240\u6709\u5305\npdm update # \u66f4\u65b0\u67d0\u4e2a\u5305\npdm update &lt;somepackage&gt;\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_13","title":"\u9879\u76ee\u914d\u7f6e","text":"<p><pre><code>pdm config\nSite/default configuration (/etc/xdg/pdm/config.toml):\nbuild_isolation = True\ncache_dir = /home/uos/.cache/pdm\ncheck_update = True\n...\nHome configuration (/home/uos/.config/pdm/config.toml):\nProject configuration (/home/uos/pdm.toml):\n</code></pre> pdm config \u91cc\u9762\u6709\u975e\u5e38\u591a\u7684\u914d\u7f6e\uff0c\u60f3\u8981\u4e00\u4e00\u641e\u6e05\u695a\u7684\u53ef\u4ee5\u53bb\u5b98\u7f51\u67e5\u9605\uff1ahttps://pdm.fming.dev/latest/reference/configuration/</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_14","title":"\u8fd0\u884c\u547d\u4ee4","text":"<p>\u60f3\u8981\u5728 pdm \u7684\u73af\u5883\u4e2d\u6267\u884c\u547d\u4ee4\u6216\u8005\u9879\u76ee\uff0c\u53ef\u4ee5\u4f7f\u7528 run \u547d\u4ee4\uff0c\u82e5\u662f\u6267\u884c\u9879\u76ee\u65f6\uff0c\u6709\u8bf8\u591a\u53c2\u6570\uff0c\u53ef\u4ee5\u5728 pyproject.toml \u914d\u7f6e\u547d\u4ee4\u522b\u540d\u3002</p> <pre><code>:~$ pdm run python main.py\u00a0\nhello,uos\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_15","title":"\u547d\u4ee4\u522b\u540d","text":"<p>\u5728 pyproject.toml \u6dfb\u52a0\u00a0[tool.pdm.scripts]\u53ef\u4ee5\u8bbe\u7f6e\u5feb\u6377\u547d\u4ee4\u522b\u540d\uff0c\u82e5\u9879\u76ee\u7684\u6267\u884c\u6709\u975e\u5e38\u591a\u7684\u53c2\u6570\uff0c\u8fd9\u79cd\u8bbe\u5b9a\u522b\u540d\u7684\u65b9\u6cd5\u5c06\u5f88\u6709\u7528 \u3002</p> <p><pre><code>[tool.pdm.scripts]\nstart = \"python main.py\"\n\n:~$ pdm run start\nhello,uos\n</code></pre> [tool.pdm.scripts]\u6709\u4e24\u79cd\u5f62\u5f0f\uff1a <pre><code># \u7b2c\u4e00\u79cd\n[tool.pdm.scripts]\nstart = \"python main.py\"\n# \u7b2c\u4e00\u79cd\n[tool.pdm.scripts]\nstart = {cmd = \"python main.py\"}\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#python_2","title":"\u5207\u6362 Python \u7248\u672c","text":"<p>\u5f53\u4f60\u5728\u521d\u59cb\u5316 pdm \u9879\u76ee\u65f6\uff0c\u5c31\u5df2\u7ecf\u9009\u5b9a\u4e86\u5f53\u524d\u7684 Python \u7248\u672c\u548c\u53ef\u7528\u7684 Python \u7248\u672c\u8303\u56f4\uff0c\u540e\u9762\u5982\u679c\u60f3\u66f4\u6539\uff0c\u53ef\u4ee5\u4f7f\u7528 use \u547d\u4ee4\uff0c\u4f46\u7248\u672c\u8981\u53d7\u4e4b\u524d\u8bbe\u5b9a\u7684\u7248\u672c\u8303\u56f4\u7ea6\u675f\u3002\u5047\u8bbe\u5141\u8bb8\u8303\u56f4\u662f python 3.9+\uff0c\u5f53\u524d\u4f7f\u7528\u7684\u662f python 3.10\uff0c\u53ef\u4ee5\u76f4\u63a5\u5207\u6362\u8fc7\u53bb\u3002</p> <p><pre><code>pdm use python3.9  \n</code></pre> \u5047\u8bbe\u5141\u8bb8\u8303\u56f4\u662f python 3.9+\uff0c\u5f53\u524d\u4f7f\u7528\u7684\u662f python 3.10\uff0c\u53ef\u4ee5\u76f4\u63a5\u5207\u6362\u8fc7\u53bb\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_16","title":"\u517c\u5bb9\u73af\u5883","text":"<p>pdm \u8db3\u591f\u597d\u7528\uff0c\u4e5f\u8db3\u591f\u5f00\u653e\uff0c\u5982\u679c\u4f60\u5f53\u524d\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u7684\u5305\u7ba1\u7406\u5668\uff0c\u6bd4\u5982 pipenv \uff0cpoetry\uff0c\u6216\u8005\u8fd8\u5728\u7528\u6700\u539f\u59cb\u7684 requirements.txt \uff0c\u4f60\u4e5f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fc1\u79fb\u5230 pdm \u4e2d\u6765\uff1a</p> <p>1.\u4f7f\u7528 pdm import -f {file} \u65e0\u9700\u521d\u59cb\u5316\uff0c\u76f4\u63a5\u8f6c\u6362</p> <p>2.\u6267\u884c pdm init \u6216\u8005 pdm install \u7684\u65f6\u5019\uff0c\u4f1a\u81ea\u52a8\u8bc6\u522b\u4f60\u5f53\u524d\u7684\u4f9d\u8d56\u60c5\u51b5\u5e76\u8f6c\u6362</p> <p>\u540c\u6837\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5f53 pdm \u7ba1\u7406\u7684\u9879\u76ee\uff0c\u5bfc\u51fa\u4e3a\u5176\u4ed6\u65b9\u6848pyproject.toml \u548c pdm.lock\u662f pdm \u7684\u4e24\u4e2a\u6838\u5fc3\u6587\u4ef6\u3002pdm \u505a\u4e3a\u4e00\u4e2a\u540e\u8d77\u4e4b\u79c0\uff0c\u4e5f\u6ca1\u6709\u5fd8\u672c\uff0c\u5b83\u652f\u6301\uff1a</p> <p>\u5c06 pyproject.toml \u8f6c\u6210 setup.py</p> <p><pre><code>pdm export -f setuppy -o setup.py\n</code></pre> \u5c06 pdm.lock \u8f6c\u6210 requirements.txt <pre><code>pdm export -o requirements.txt\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#venv","title":"venv","text":"<p>venv\u662fPython\u4e2d\u81ea\u5e26\u7684\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u7ba1\u7406\u865a\u62df\u73af\u5883\u7684\u6a21\u5757\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_17","title":"\u521b\u5efa\u865a\u62df\u73af\u5883","text":"<p><pre><code>:~$ python3 -m venv uos   uos\u4e3a\u865a\u62df\u73af\u5883\u540d\u79f0\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\n</code></pre> \u53ef\u4ee5\u8bf4\u662f\u975e\u5e38\u7684\u5feb\uff0c\u4e24\u4e09\u79d2\u5c31\u521b\u5efa\u6210\u529f\u4e86\uff01 \u521b\u5efa\u5b8c\u6210\u4e4b\u540e\u5728\u73af\u5883\u76ee\u5f55\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2apyvenv.cfg\u7684\u6587\u4ef6\uff0c\u5b83\u8bb0\u5f55\u7740\u865a\u62df\u73af\u5883\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5305\u62ec\u4f60\u4f7f\u7528\u7684 Python \u7684\u5bb6\u76ee\u5f55\uff0c\u8fd8\u6709\u5f53\u524d\u865a\u62df\u73af\u5883\u7684 Python \u7248\u672c\uff0c\u662f\u5426\u5f00\u542f\u4f7f\u7528\u7cfb\u7edf\u7684 site-packages \u6a21\u5757\uff0c\u5982\u679c\u5f00\u542f\u4e86\uff0c\u90a3\u4e48\u5f53\u4f60\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u88c5\u8fc7\u7684\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u4f46\u662f\u4f60\u5728\u865a\u62df\u73af\u5883\u4e0b\u88c5\u7684\u6a21\u5757\u5c31\u4e0d\u80fd\u88ab\u5176\u4ed6\u5730\u65b9\u7684\u7a0b\u5e8f\u4f7f\u7528\u3002</p> <p><pre><code>:~/uos$ cat pyvenv.cfg\u00a0\nhome = /usr/bin\ninclude-system-site-packages = false\nversion = 3.7.3\n</code></pre> \u5982\u679c\u4f60\u7684\u7cfb\u7edf\u91cc\u6709\u591a\u4e2aPython3\u73af\u5883\uff0c\u90a3\u4e48\u5728\u521b\u5efa\u65f6\u6307\u660e\u6e05\u695a\u7248\u672c\u53f7\u5c31\u53ef\u4ee5\u4e86\u3002 <pre><code>:~$ python3.9 -m venv [venv_dir]\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_18","title":"\u8fdb\u5165\u865a\u62df\u73af\u5883","text":"<p>\u9996\u5148\u6211\u4eec\u8fdb\u5165\u5230\u521b\u5efa\u597d\u7684\u865a\u62df\u73af\u5883\u76ee\u5f55\uff0c\u901a\u8fc7source\u8fdb\u5165\u865a\u62df\u73af\u5883\uff1a</p> <pre><code>:~/uos$ source bin/activate\n(uos) uos@uos-PC:~/uos$\n\u547d\u4ee4\u884c\u524d\u6709\u521b\u5efa\u7684\u865a\u62df\u73af\u5883\u540d\u79f0\u8bf4\u660e\u5c31\u5df2\u8fdb\u5165\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_19","title":"\u9000\u51fa\u865a\u62df\u73af\u5883","text":"<pre><code>:~$deactivate\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_20","title":"\u603b\u7ed3","text":"<p>venv\u662f Python3 \u4e2d\u81ea\u5e26\u7684\u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u4e0d\u9700\u8981\u989d\u5916\u5b89\u88c5\uff0c\u529f\u80fd\u7b80\u5355\uff0c\u7528\u6cd5\u4e5f\u7b80\u5355\u3002\u4f46\u662f\u5b83\u4e0d\u80fd\u50cf poetry \u548c pipenv \u7528\u4e8e\u9879\u76ee\u7684\u7ba1\u7406\uff0c\u56e0\u6b64 venv \u5efa\u8bae\u53ea\u505a\u4e86\u89e3\uff0c\u5728\u4e00\u4e9b\u7b80\u5355\u7684\u573a\u666f\u4e2d\u53ef\u4ee5\u4f7f\u7528\uff0c\u5982\u679c\u662f\u590d\u6742\u7684\u9879\u76ee\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0a poetry \u548c pipenv\u3002 </p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#virtualenv","title":"virtualenv","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#virtualenvwrapper","title":"virtualenvwrapper","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pyenv","title":"pyenv","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pipenv","title":"pipenv","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#poetry","title":"poetry","text":""},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/","title":"\u914d\u7f6e Python \u6e90\u7684\u51e0\u79cd\u65b9\u6cd5","text":""},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#1","title":"\uff081\uff09\u4e34\u65f6\u6dfb\u52a0\u4e09\u65b9\u6e90","text":"<pre><code>pip3 install funnylog -i https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <p>\u5982\u679c\u4e0d\u5c0f\u5fc3\u6dfb\u52a0\u4e86\u591a\u4e2a\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a</p> <pre><code>pip3 install xxx -i yyyy -i zzzz\n</code></pre> <p>\u53ea\u6709\u6700\u540e\u4e00\u4e2a -i \u6307\u5b9a\u7684\u4e09\u65b9\u6e90\u751f\u6548\uff1b</p>"},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#2requirementstxt","title":"\uff082\uff09requirements.txt \u4e34\u65f6\u6dfb\u52a0\u4e09\u65b9\u6e90","text":"<pre><code># requirements.txt\n-i https://pypi.tuna.tsinghua.edu.cn/simple\n\nfunnylog\n...\n</code></pre>"},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#3","title":"\uff083\uff09\u547d\u4ee4\u884c\u6c38\u4e45\u914d\u7f6e","text":"<ul> <li>\u9002\u7528\u4e8e <code>pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08\u666e\u901a\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <ul> <li>\u9002\u7528\u4e8e <code>sudo pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08root\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>sudo pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <p>\u53ef\u4ee5\u518d\u6b21\u6267\u884c\u518d\u6dfb\u52a0\u4e00\u4e2a:</p> <pre><code>pip3 config set global.extra-index-url https://pypi.douban.com/simple/\n</code></pre> <p>\u6ce8\u610f <code>global.extra-index-url</code> \u91cc\u9762\u548c\u4e0a\u9762\u4e0d\u540c\uff1b</p>"},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#4","title":"\uff084\uff09\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6c38\u4e45\u914d\u7f6e","text":"<ul> <li>\u9002\u7528\u4e8e <code>pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08\u666e\u901a\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>vi ~/.config/pip/pip.conf\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = https://pypi.douban.com/simple/\nextra-index-url = https://pypi.tuna.tsinghua.edu.cn/simple\nextra-index-url = https://mirrors.aliyun.com/pypi/simple/\n</code></pre> <ul> <li>\u9002\u7528\u4e8e <code>sudo pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08root\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>sudo vi /root/.config/pip/pip.conf\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = https://pypi.douban.com/simple/\nextra-index-url = https://pypi.tuna.tsinghua.edu.cn/simple\nextra-index-url = https://mirrors.aliyun.com/pypi/simple/\n</code></pre> <ul> <li>\u5168\u5c40\u914d\u7f6e</li> </ul> <pre><code>vi /etc/pip.conf\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = https://pypi.douban.com/simple/\nextra-index-url = https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>"},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#5","title":"\uff085\uff09\u4f5c\u7528\u57df","text":"<ul> <li>\u4e34\u65f6\u6dfb\u52a0\u7684\u65b9\u5f0f\uff0c\u53ea\u5728\u672c\u6b21\u64cd\u4f5c\u6709\u6548\uff08\u4e0d\u533a\u5206\u666e\u901a\u7528\u6237\u3001root\u7528\u6237\u3001\u5168\u5c40\u914d\u7f6e\uff09\uff1b</li> <li>\u666e\u901a\u7528\u6237\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u53ea\u5728\u666e\u901a\u7528\u6237\u6743\u9650\u4e0b\u751f\u6548\uff0c\u5c31\u662f\u53ea\u6709\u4f7f\u7528 <code>pip3 install</code> \u751f\u6548\uff1b</li> <li>root\u7528\u6237\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u53ea\u5728root\u7528\u6237\u6743\u9650\u4e0b\u751f\u6548\uff0c\u5c31\u662f\u53ea\u6709\u4f7f\u7528 <code>sudo pip3 install</code> \u751f\u6548\uff1b</li> <li>\u5168\u5c40\u914d\u7f6e\u65b9\u5f0f\uff0c\u6240\u6709\u60c5\u51b5\u4e0b\u5747\u751f\u6548\uff1b</li> </ul>"},{"location":"Python/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#6","title":"\uff086\uff09\u5e38\u7528\u7684\u51e0\u4e2a\u4e09\u65b9\u6e90","text":"<pre><code># \u6e05\u534e\nhttps://pypi.tuna.tsinghua.edu.cn/simple/\n# \u963f\u91cc\nhttps://mirrors.aliyun.com/pypi/simple/\n# \u4e2d\u56fd\u79d1\u6280\u5927\u5b66\nhttps://pypi.mirrors.ustc.edu.cn/simple/\n# \u534e\u4e2d\u79d1\u6280\u5927\u5b66\nhttps://pypi.hustunique.com/simple/\n# \u4e0a\u6d77\u4ea4\u901a\u5927\u5b66\nhttps://mirror.sjtu.edu.cn/pypi/web/simple/\n# \u8c46\u74e3\nhttps://pypi.douban.com/simple/\n</code></pre> <p>\u8865\u5145\u5c0f\u77e5\u8bc6\uff0cpip \u4e0b\u8f7d\u5b89\u88c5\u8d85\u65f6\u8bbe\u7f6e\uff1a</p> <pre><code>pip3 config set global.timeout 10000\n</code></pre> <p>\u5410\u69fd\u4e00\u4e0b\u963f\u91cc\u7684\u955c\u50cf\uff0c\u66f4\u65b0\u76f8\u5f53\u4e0d\u53ca\u65f6\uff0c\u6211\u4e2a\u4eba\u4e0d\u5efa\u8bae\u4f7f\u7528\u54c8\u3002</p>"},{"location":"ruankao/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/","title":"\u5206\u5e03\u5f0f\u7cfb\u7edf","text":""},{"location":"ruankao/%E5%9F%BA%E4%BA%8E%E6%9E%84%E4%BB%B6%E7%9A%84%E5%BC%80%E5%8F%91/","title":"\u57fa\u4e8e\u6784\u4ef6\u7684\u5f00\u53d1","text":""},{"location":"ruankao/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/","title":"\u6570\u636e\u5e93\u7cfb\u7edf","text":"<p>\u6570\u636e\u5e93\u7a0b\u5e8f\u5728\u7ebf\u8bbf\u95ee\u65b9\u5f0f\u548c ORM \u65b9\u5f0f\u7684\u4f18\u7f3a\u70b9\u3002</p> <p>\u5728\u7ebf\u8bbf\u95ee\u65b9\u5f0f\uff1a\u5728\u7a0b\u5e8f\u4e2d\u901a\u8fc7\u6570\u636e\u5e93\u63d0\u4f9b\u7684\u7a0b\u5e8f\u63a5\u53e3\u76f4\u63a5\u8bbf\u95ee\u6570\u636e\uff1b</p> <ul> <li>\u4f18\u70b9\uff1a\u7075\u6d3b\uff0c\u6027\u80fd\u9ad8\uff1b</li> <li>\u7f3a\u70b9\uff1a\u9700\u8981\u7a0b\u5e8f\u5458\u5bf9\u6570\u636e\u5e93\u6709\u8f83\u6df1\u4e86\u89e3\uff0c\u540c\u4e8b\u6570\u636e\u6a21\u578b\u7684\u53d8\u66f4\u4f1a\u5bfc\u81f4\u76f8\u5e94\u7a0b\u5e8f\u7684\u53d8\u66f4\uff0c\u6570\u636e\u5e93\u8fc1\u79fb\u56f0\u96be\u3002</li> </ul> <p>ORM \u65b9\u5f0f\uff1a\u662f\u4e00\u79cd\u5de5\u5177\u6216\u5e73\u53f0\uff0c\u80fd\u591f\u63d0\u4f9b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6570\u636e\u4e0e\u5173\u7cfb\u6570\u636e\u5e93\u4e2d\u7684\u8bb0\u5f55\u4e4b\u95f4\u7684\u76f8\u4e92\u8f6c\u6362\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u65e0\u9700\u8003\u8651\u8bb0\u5f55\uff0c\u4ec5\u8003\u8651\u5bf9\u8c61\u3002</p> <ul> <li>\u4f18\u70b9\uff1a\u7b80\u5316\u7a0b\u5e8f\u5f00\u53d1\uff0c\u964d\u4f4e\u4e86\u5bf9\u7a0b\u5e8f\u5458\u5173\u4e8e\u6570\u636e\u5e93\u7684\u77e5\u8bc6\u8981\u6c42\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u5458\u53ef\u4ee5\u4ec5\u5173\u6ce8\u4e0e\u4e1a\u52a1\u903b\u8f91\uff1b</li> <li>\u7f3a\u70b9\uff1a\u4e0d\u592a\u5bb9\u6613\u5904\u7406\u590d\u6742\u67e5\u8be2\u8bed\u53e5\uff0c\u6027\u80fd\u6bd4\u76f4\u63a5\u4f7f\u7528 SQL \u8981\u5dee\u3002</li> </ul>"},{"location":"ruankao/%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/","title":"\u7cfb\u7edf\u5f00\u53d1","text":""},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/","title":"\u8f6f\u4ef6\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#1","title":"1\u3001\u6982\u8ff0","text":"<p>\u8f6f\u4ef6\u67b6\u6784\u7684\u4f5c\u7528\uff1a</p> <ul> <li>\u8f6f\u4ef6\u67b6\u6784\u662f\u9879\u76ee\u5e72\u7cfb\u4eba\u8fdb\u884c\u4ea4\u6d41\u7684\u624b\u6bb5\uff1b</li> <li>\u8f6f\u4ef6\u67b6\u6784\u662f\u65e9\u671f\u8bbe\u8ba1\u51b3\u7b56\u7684\u4f53\u73b0\uff1b</li> <li>\u8f6f\u4ef6\u67b6\u6784\u662f\u53ef\u4f20\u9012\u548c\u53ef\u91cd\u7528\u7684\u6a21\u578b\uff1b</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#2","title":"2\u3001\u5efa\u6a21","text":"<p>\u8f6f\u4ef6\u67b6\u6784\u7684\u6a21\u578b\u5206\u4e3a5\u79cd\uff1a</p> <ul> <li>\u7ed3\u6784\u6a21\u578b\uff1b\uff08\u5e38\u7528\uff09</li> <li>\u6846\u67b6\u6a21\u578b\uff1b</li> <li>\u52a8\u6001\u6a21\u578b\uff1b\uff08\u5e38\u7528\uff09</li> <li>\u8fc7\u7a0b\u6a21\u578b\uff1b</li> <li>\u529f\u80fd\u6a21\u578b\uff1b</li> </ul> <p>\u5c065\u79cd\u6a21\u578b\u6709\u673a\u5730\u7edf\u4e00\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u6a21\u578b\u6765\u523b\u753b\u8f6f\u4ef6\u67b6\u6784\u66f4\u683c\u5f0f\u3002</p> <p>\u201c4 + 1\u201d\u89c6\u56fe\u6a21\u578b\u4ece5\u4e2a\u4e0d\u540c\u7684\u89c6\u89d2\u6765\u63cf\u8ff0\u8f6f\u4ef6\u67b6\u6784\uff1a</p> <ul> <li> <p>\u903b\u8f91\u89c6\u56fe\uff1b\u4e3b\u8981\u652f\u6301\u7cfb\u7edf\u7684\u529f\u80fd\u9700\u6c42\u3002</p> </li> <li> <p>\u5f00\u53d1\u89c6\u56fe\uff1b\u4e5f\u79f0\u4e3a\u6a21\u5757\u89c6\u56fe\uff0c\u4e3b\u8981\u4fa7\u91cd\u4e8e\u8f6f\u4ef6\u6a21\u5757\u7684\u7ec4\u7ec7\u548c\u7ba1\u7406\u3002</p> </li> <li> <p>\u8fdb\u7a0b\u89c6\u56fe\uff1b\u4fa7\u91cd\u4e8e\u7cfb\u7edf\u7684\u8fd0\u884c\u7279\u6027\uff0c\u4e3b\u8981\u5173\u6ce8\u4e00\u4e9b\u975e\u529f\u80fd\u6027\u7684\u9700\u6c42\uff0c\u4f8b\u5982\u7cfb\u7edf\u7684\u6027\u80fd\u548c\u53ef\u7528\u6027\u3002</p> </li> <li> <p>\u7269\u7406\u89c6\u56fe\uff1b\u4e3b\u8981\u8003\u8651\u5982\u4f55\u628a\u8f6f\u4ef6\u6620\u5c04\u5230\u786c\u4ef6\u4e0a\uff0c\u5b83\u901a\u5e38\u8981\u8003\u8651\u5230\u89e3\u51b3\u7cfb\u7edf\u62d3\u6251\u7ed3\u6784\u3001\u7cfb\u7edf\u5b89\u88c5\u3001\u901a\u4fe1\u7b49\u95ee\u9898\u3002</p> </li> <li> <p>\u573a\u666f\uff1b\u53ef\u4ee5\u770b\u4f5c\u662f\u90a3\u4e9b\u91cd\u8981\u7cfb\u7edf\u6d3b\u52a8\u7684\u62bd\u8c61\uff0c\u5b83\u4f7f\u56db\u4e2a\u89c6\u56fe\u6709\u673a\u8054\u7cfb\u8d77\u6765\u3002</p> </li> </ul> <p></p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#3","title":"3\u3001\u67b6\u6784\u98ce\u683c","text":""},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#31","title":"3.1 \u7ba1\u9053/\u8fc7\u6ee4\u5668","text":"<p>\u5728\u7ba1\u9053/\u8fc7\u6ee4\u5668\u98ce\u683c\u7684\u8f6f\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\uff0c\u6bcf\u4e2a\u6784\u5efa\u90fd\u6709\u4e00\u7ec4\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u6784\u4ef6\u8bfb\u8f93\u5165\u7684\u6570\u636e\u6d41\uff0c\u7ecf\u8fc7\u5185\u90e8\u5904\u7406\uff0c\u7136\u540e\u4ea7\u751f\u8f93\u51fa\u6570\u636e\u6d41\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#32","title":"3.2 \u6570\u636e\u62bd\u8c61\u548c\u9762\u5411\u5bf9\u8c61","text":"<p>\u8fd9\u79cd\u98ce\u683c\u5efa\u7acb\u5728\u6570\u636e\u62bd\u8c61\u548c\u9762\u5411\u5bf9\u8c61\u7684\u57fa\u7840\u4e0a\uff0c\u6570\u636e\u7684\u8868\u793a\u65b9\u6cd5\u548c\u5b83\u4eec\u7684\u76f8\u5e94\u64cd\u4f5c\u5c01\u88c5\u5728\u4e00\u4e2a\u62bd\u8c61\u6570\u636e\u7c7b\u578b\u6216\u5bf9\u8c61\u4e2d\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#33","title":"3.3 \u57fa\u4e8e\u4e8b\u4ef6\u7684\u9690\u5f0f\u8c03\u7528","text":"<p>\u57fa\u4e8e\u4e8b\u4ef6\u7684\u9690\u5f0f\u8c03\u7528\u98ce\u683c \u7684\u601d\u60f3\u662f \u6784\u4ef6\u4e0d\u76f4\u63a5\u8c03\u7528\u4e00\u4e2a\u8fc7\u7a0b\uff0c\u800c\u662f\u89e6\u53d1\u6216\u5e7f\u64ad\u4e00\u4e2a\u6216\u591a\u4e2a\u4e8b\u4ef6\u3002</p> <p>\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u6784\u4ef6\u4e2d\u7684\u8fc7\u7a0b \u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u4e8b\u4ef6\u4e2d\u6ce8\u518c\uff0c\u5f53\u4e00\u4e2a\u4e8b\u4ef6\u88ab\u89e6\u53d1\uff0c\u7cfb\u7edf\u81ea\u52a8\u8c03\u7528\u5728\u8fd9\u4e2a\u4e8b\u4ef6\u4e2d\u6ce8\u518c\u7684\u6240\u6709\u8fc7\u7a0b\uff0c\u8fd9\u6837\uff0c\u4e00\u4e2a\u4e8b\u4ef6\u7684\u89e6\u53d1\u5c31\u5bfc\u81f4\u4e86\u53e6\u4e00\u4e2a\u6a21\u5757\u4e2d\u7684\u8fc7\u7a0b\u7684\u8c03\u7528\u3002</p> <p>\u57fa\u4e8e\u4e8b\u4ef6\u7684\u9690\u5f0f\u8c03\u7528\u98ce\u683c\u7684\u4e3b\u8981\u7279\u70b9\u662f\u4e8b\u4ef6\u7684\u89e6\u53d1\u8005\u5e76\u4e0d\u77e5\u9053\u54ea\u4e9b\u6784\u4ef6\u4f1a\u88ab\u8fd9\u4e9b\u4e8b\u4ef6\u5f71\u54cd\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#44","title":"4.4 \u5206\u5c42\u7cfb\u7edf","text":"<p>\u5c42\u6b21\u7cfb\u7edf\u7ec4\u6210\u4e00\u4e2a\u5c42\u6b21\u7ed3\u6784\uff0c\u6bcf\u4e00\u5c42\u4e3a\u4e0a\u5c42\u670d\u52a1\uff0c\u5e76\u4f5c\u4e3a\u4e0b\u5c42\u5ba2\u6237\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#35","title":"3.5 \u4ed3\u5e93\u7cfb\u7edf\u53ca\u77e5\u8bc6\u5e93","text":"<p>\u5728\u4ed3\u5e93\u98ce\u683c\u4e2d\uff0c\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u6784\u4ef6\uff1a\u4e2d\u592e\u6570\u636e\u7ed3\u6784\u8bf4\u660e\u5f53\u524d\u72b6\u6001\uff0c\u72ec\u7acb\u6784\u4ef6\u5728\u4e2d\u592e\u6570\u636e\u5b58\u50a8\u4e0a\u6267\u884c\u3002\u82e5\u6784\u4ef6\u63a7\u5236\u5171\u4eab\u6570\u636e\uff0c\u5219\u4ed3\u5e93\u662f\u4e00\u4e2a\u4f20\u7edf\u578b\u6570\u636e\u5e93\u3002\u82e5\u4e2d\u592e\u6570\u636e\u7ed3\u6784\u7684\u5f53\u524d\u72b6\u6001\u89e6\u53d1\u8fdb\u7a0b\u6267\u884c\u7684\u9009\u62e9\uff0c\u5219\u4ed3\u5e93\u662f\u4e00\u4e2a\u9ed1\u677f\u7cfb\u7edf\u3002</p> <p>\u9ed1\u677f\u7cfb\u7edf\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li>\u77e5\u8bc6\u6e90\u3002\u77e5\u8bc6\u6e90\u4e2d\u5305\u62ec\u72ec\u7acb\u7684\u3001\u4e0e\u5e94\u7528\u7a0b\u5e8f\u76f8\u5173\u7684\u77e5\u8bc6\uff0c\u77e5\u8bc6\u6e90\u4e4b\u95f4\u4e0d\u76f4\u63a5\u8fdb\u884c\u901a\u4fe1\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u4ea4\u4e92\u53ea\u901a\u8fc7\u9ed1\u677f\u6765\u5b8c\u6210\uff1b</li> <li>\u9ed1\u677f\u6570\u636e\u7ed3\u6784\u3002\u9ed1\u677f\u6570\u636e\u662f\u6309\u7167\u4e0e\u5e94\u7528\u7a0b\u5e8f\u76f8\u5173\u7684\u5c42\u6b21\u6765\u7ec4\u7ec7\u7684\u89e3\u51b3\u95ee\u9898\u7684\u6570\u636e\uff0c\u77e5\u8bc6\u6e90\u901a\u8fc7\u4e0d\u65ad\u7684\u6539\u53d8\u9ed1\u677f\u6570\u636e\u6765\u89e3\u51b3\u95ee\u9898\uff1b</li> <li>\u63a7\u5236\u3002\u63a7\u5236\u5b8c\u5168\u7531\u9ed1\u677f\u7684\u72b6\u6001\u9a71\u52a8\uff0c\u9ed1\u677f\u72b6\u6001\u7684\u6539\u53d8\u51b3\u5b9a\u4f7f\u7528\u7684\u7279\u5b9a\u77e5\u8bc6\u3002</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#36-c2","title":"3.6 C2\u98ce\u683c","text":"<p>C2\u4f53\u7cfb\u7ed3\u6784\u98ce\u683c\u53ef\u4ee5\u6982\u62ec\u4e3a\u901a\u8fc7\u8fde\u63a5\u4ef6\u7ed1\u5b9a\u5728\u4e00\u8d77\uff0c\u6309\u7167\u4e00\u7ec4\u89c4\u5219\u8fd0\u884c\u7684\u5e76\u884c\u6784\u4ef6\u7f51\u7edc\uff1b</p> <p>\u7cfb\u7edf\u7ec4\u7ec7\u89c4\u5219\u5982\u4e0b\uff1a</p> <p>\u7cfb\u7edf\u4e2d\u7684\u6784\u4ef6\u548c\u8fde\u63a5\u4ef6\u90fd\u6709\u4e00\u4e2a\u9876\u90e8\u548c\u4e00\u4e2a\u5e95\u90e8\uff1b</p> <p>\u6784\u4ef6\u7684\u9876\u90e8\u5e94\u8fde\u63a5\u5230\u67d0\u4e2a\u8fde\u63a5\u4ef6\u7684\u5e95\u90e8\uff0c\u6784\u4ef6\u7684\u5e95\u90e8\u5219\u5e94\u8fde\u63a5\u5230\u67d0\u8fde\u63a5\u4ef6\u7684\u9876\u90e8\uff0c\u800c\u6784\u4ef6\u548c\u6784\u4ef6\u4e4b\u95f4\u7684\u76f4\u63a5\u8fde\u63a5\u662f\u4e0d\u5141\u8bb8\u7684\uff1b</p> <p>\u4e00\u4e2a\u8fde\u63a5\u4ef6\u53ef\u4ee5\u548c\u4efb\u610f\u6570\u76ee\u7684\u5176\u4ed6\u6784\u4ef6\u548c\u8fde\u63a5\u4ef6\u8fde\u63a5\uff1b</p> <p>\u5f53\u4e24\u4e2a\u8fde\u63a5\u4ef6\u8fdb\u884c\u76f4\u63a5\u8fde\u63a5\u65f6\uff0c\u5fc5\u987b\u6709\u5176\u4e2d\u4e00\u4e2a\u7684\u5e95\u90e8\u8fde\u63a5\u5230\u53e6\u4e00\u4e2a\u7684\u9876\u90e8\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#37","title":"3.7 \u5ba2\u6237\u673a/\u670d\u52a1\u5668\u98ce\u683c","text":"<p>C/S\u4f53\u7cfb\u7ed3\u6784\u6709\u4e09\u4e2a\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3001\u5ba2\u6237\u5e94\u7528\u7a0b\u5e8f\u3001\u7f51\u7edc\uff1b</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#38-cs","title":"3.8 \u4e09\u5c42 C/S \u7ed3\u6784\u98ce\u683c","text":"<p>\u4e8c\u5c42 C/S \u7ed3\u6784\u662f\u5355\u4e00\u670d\u52a1\u5668\u4e14\u4ee5\u5c40\u57df\u7f51\u4e3a\u4e2d\u5fc3\u7684\uff0c\u6240\u4ee5\u96be\u4ee5\u6269\u5c55\u81f3\u5927\u578b\u4f01\u4e1a\u5e7f\u57df\u7f51\uff0c\u8f6f\u786c\u4ef6\u7ec4\u5408\u53ca\u96c6\u6210\u80fd\u529b\u6709\u9650\uff0c\u5ba2\u6237\u673a\u7684\u8d1f\u8377\u592a\u91cd\uff0c\u96be\u4ee5\u7ba1\u7406\u5927\u91cf\u7684\u5ba2\u6237\u673a\uff0c\u7cfb\u7edf\u7684\u6027\u80fd\u5bb9\u6613\u53d8\u574f\uff0c\u6570\u636e\u5b89\u5168\u6027\u4e0d\u597d\u3002</p> <p>\u4e09\u5c42 C/S \u4f53\u7cfb\u7ed3\u6784\u662f\u5c06\u5e94\u7528\u529f\u80fd\u5206\u4e3a\u8868\u793a\u5c42\u3001\u529f\u80fd\u5c42\u3001\u6570\u636e\u5c42\uff1a</p> <p></p> <ul> <li>\u8868\u793a\u5c42\u3002\u8868\u793a\u5c42\u662f\u5e94\u7528\u7684\u7528\u6237\u63a5\u53e3\u90e8\u5206\uff0c\u5b83\u62c5\u8d1f\u7740\u7528\u6237\u4e0e\u5e94\u7528\u95f4\u7684\u5bf9\u8bdd\u529f\u80fd\u3002</li> <li>\u529f\u80fd\u5c42\u3002\u529f\u80fd\u5c42\u76f8\u5f53\u4e8e\u5e94\u7528\u7684\u672c\u4f53\uff0c\u5b83\u662f\u5c06\u5177\u4f53\u7684\u4e1a\u52a1\u5904\u7406\u903b\u8f91\u7f16\u5165\u7a0b\u5e8f\u4e2d\u3002</li> <li>\u6570\u636e\u5c42\u3002\u6570\u636e\u5c42\u5c31\u662fDBMS\uff0c\u8d1f\u8d23\u7ba1\u7406\u5bf9\u6570\u636e\u5e93\u7684\u8bfb\u5199\u3002</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#39-bs","title":"3.9 B/S \u67b6\u6784","text":"<p>B/S \u67b6\u6784\u662f\u4e0a\u5c42 C/S \u7ed3\u6784\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5177\u4f53\u7ed3\u6784\u4e3a\u6d4f\u89c8\u5668/Web \u670d\u52a1\u5668/\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#4dssa","title":"4\u3001\u7279\u5b9a\u9886\u57df\u8f6f\u4ef6\u67b6\u6784\uff08DSSA\uff09","text":"<p>\u201c\u9886\u57df\u201d\u7684\u542b\u4e49\uff0c\u6709\u4e24\u79cd\u7406\u89e3\u65b9\u5f0f\uff1a</p> <ul> <li>\u5782\u76f4\u57df\uff1a\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7279\u5b9a\u7684\u7cfb\u7edf\u65cf\uff0c\u5305\u62ec\u6574\u4e2a\u7cfb\u7edf\u65cf\u5185\u7684\u591a\u4e2a\u7cfb\u7edf\uff0c\u7ed3\u679c\u662f\u5728\u8be5\u9886\u57df\u4e2d\u53ef\u4f5c\u4e3a\u7cfb\u7edf\u7684\u53ef\u884c\u89e3\u51b3\u65b9\u6848\u7684\u4e00\u4e2a\u901a\u7528\u8f6f\u4ef6\u67b6\u6784\u3002</li> <li>\u6c34\u5e73\u57df\uff1a\u5b9a\u4e49\u4e86\u591a\u4e2a\u7cfb\u7edf\u548c\u591a\u4e2a\u7cfb\u7edf\u65cf\u4e2d\u529f\u80fd\u533a\u57df\u7684\u5171\u6709\u90e8\u5206\uff0c\u5728\u5b50\u7cfb\u7edf\u7ea7\u4e0a\u6db5\u76d6\u4e86\u591a\u4e2a\u7cfb\u7edf\u65cf\u7684\u7279\u5b9a\u90e8\u5206\u529f\u80fd\uff0c\u5355\u65e0\u6cd5\u4e3a\u7cfb\u7edf\u63d0\u4f9b\u5b8c\u6574\u7684\u901a\u7528\u67b6\u6784\u3002</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#dssa","title":"DSSA \u7684\u57fa\u672c\u6d3b\u52a8","text":"<ul> <li>\u9886\u57df\u5206\u6790\u3002\u76ee\u6807\u662f\u83b7\u5f97\u9886\u57df\u6a21\u578b\u3002</li> <li>\u9886\u57df\u8bbe\u8ba1\u3002\u76ee\u6807\u662f\u83b7\u5f97\u9886\u57df\u67b6\u6784\u3002</li> <li>\u9886\u57df\u5b9e\u73b0\u3002\u76ee\u6807\u662f\u4e00\u53e5\u9886\u57df\u6a21\u578b\u548cDSSA\u5f00\u53d1\u548c\u7ec4\u7ec7\u53ef\u91cd\u7528\u4fe1\u606f\u3002</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#dssa_1","title":"\u53c2\u4e0e DSSA \u7684\u4eba\u5458","text":"<p>\u9886\u57df\u4e13\u5bb6\u3001\u9886\u57df\u5206\u6790\u5e08\u3001\u9886\u57df\u8bbe\u8ba1\u4eba\u5458\u3001\u9886\u57df\u5b9e\u73b0\u4eba\u5458\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#5","title":"5\u3001\u67b6\u6784\u8bbe\u8ba1\u4e0e\u6f14\u5316","text":"<p>\u8bbe\u8ba1\u548c\u6f14\u5316\u8fc7\u7a0b\uff1a</p> <ul> <li>\u5b9e\u9a8c\u539f\u578b\u9636\u6bb5\u3002\u83b7\u5f97\u5bf9\u7cfb\u7edf\u652f\u6301\u7684\u95ee\u9898\u57df\u7684\u7406\u89e3\u3002</li> <li>\u6f14\u5316\u5f00\u53d1\u9636\u6bb5\u3002\u91cd\u70b9\u4e3a\u6700\u7ec8\u4ea7\u54c1\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#6","title":"6\u3001\u57fa\u4e8e\u67b6\u6784\u7684\u8f6f\u4ef6\u5f00\u53d1","text":"<p>6\u4e2a\u5b50\u8fc7\u7a0b\uff1a</p> <ul> <li>\u67b6\u6784\u9700\u6c42</li> <li>\u67b6\u6784\u8bbe\u8ba1</li> <li>\u67b6\u6784\u6587\u6863\u5316</li> <li>\u67b6\u6784\u590d\u5ba1</li> <li>\u67b6\u6784\u5b9e\u73b0</li> <li>\u67b6\u6784\u6f14\u5316</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#7","title":"7\u3001\u8f6f\u4ef6\u67b6\u6784\u8bc4\u4f30","text":"<p>\u8f6f\u4ef6\u67b6\u6784\u98ce\u9669\uff1a\u662f\u6307\u67b6\u6784\u8bbe\u8ba1\u4e2d\u6f5c\u5728\u7684\u3001\u5b58\u5728\u95ee\u9898\u7684\u67b6\u6784\u51b3\u7b56\u6240\u5e26\u6765\u7684\u9690\u60a3\u3002</p> <p>\u654f\u611f\u70b9\uff1a\u662f\u6307\u4e3a\u4e86\u5b9e\u73b0\u67d0\u79cd\u7279\u5b9a\u7684\u8d28\u91cf\u5c5e\u6027\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u7cfb\u7edf\u7ec4\u4ef6\u6240\u5177\u6709\u7684\u7279\u6027\u3002</p> <p>\u6743\u8861\u70b9\uff1a\u662f\u6307\u5f71\u54cd\u591a\u4e2a\u8d28\u91cf\u5c5e\u6027\uff0c\u5e76\u5bf9\u591a\u4e2a\u8d28\u91cf\u5c5e\u6027\u6765\u8bf4\u90fd\u662f\u654f\u611f\u70b9\u7684\u7cfb\u7edf\u5c5e\u6027\u3002</p>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#atam","title":"ATAM\u8bc4\u4f30\u65b9\u6cd5","text":"<p>\u67b6\u6784\u6743\u8861\u5206\u6790\u65b9\u6cd5\uff0c9\u4e2a\u6b65\u9aa4\uff1a</p> <p>\uff081\uff09\u63cf\u8ff0</p> <ul> <li>\u63cf\u8ff0ATAM\u65b9\u6cd5</li> <li>\u63cf\u8ff0\u4e1a\u52a1\u51ac\u5b63</li> <li>\u63cf\u8ff0\u67b6\u6784</li> </ul> <p>\uff082\uff09\u8c03\u67e5\u5206\u6790</p> <ul> <li>\u786e\u5b9a\u67b6\u6784\u65b9\u6cd5</li> <li>\u751f\u6210\u8d28\u91cf\u5c5e\u6027\u6548\u7528\u6811</li> <li>\u5206\u6790\u67b6\u6784\u65b9\u6cd5</li> </ul> <p>\uff083\uff09\u6d4b\u8bd5</p> <ul> <li>\u8ba8\u8bba\u548c\u573a\u666f\u5206\u7ea7</li> <li>\u5206\u6790\u67b6\u6784\u65b9\u6cd5</li> <li>\u63cf\u8ff0\u8bc4\u4f30\u7ed3\u679c</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#saam","title":"SAAM\u8bc4\u4f30\u65b9\u6cd5","text":"<p>\u8f6f\u4ef6\u67b6\u6784\u5206\u6790\u65b9\u6cd5\uff0c6\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u5f62\u6210\u573a\u666f</li> <li>\u63cf\u8ff0\u67b6\u6784</li> <li>\u5bf9\u573a\u666f\u8fdb\u884c\u5206\u7c7b\u548c\u786e\u5b9a\u4f18\u5148\u7ea7</li> <li>\u5bf9\u95f4\u63a5\u573a\u666f\u7684\u5355\u4e2a\u8bc4\u4f30</li> <li>\u8bc4\u4f30\u573a\u666f\u7684\u76f8\u4e92\u4f5c\u7528</li> <li>\u5f62\u6210\u603b\u4f53\u8bc4\u4f30</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#8","title":"8\u3001\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>\u521b\u5efa\u578b\u3001\u7ed3\u6784\u578b\u3001\u884c\u4e3a\u578b</p> <p></p> <p></p> <p>\u5de5\u5382\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u5b9a\u4e49\u4e86\u521b\u5efa\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u5141\u8bb8\u5b50\u7c7b\u51b3\u5b9a\u5b9e\u4f8b\u5316\u54ea\u4e2a\u7c7b\uff0c\u800c\u4e14\u5141\u8bb8\u8bf7\u6c42\u8005\u65e0\u987b\u77e5\u9053\u88ab\u5b9e\u4f8b\u5316\u7684\u7279\u5b9a\u7c7b\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\u5f15\u5165\u65b0\u7c7b\u3002</p> <p>\u4f18\u70b9\uff1a</p> <ul> <li>\u6ca1\u6709\u4e86\u5c06\u5e94\u7528\u7a0b\u5e8f\u7c7b\u7ed1\u5b9a\u5230\u4ee3\u7801\u4e2d\u7684\u8981\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5b9e\u73b0\u4e86\u63a5\u53e3\u7684\u7c7b\uff1b</li> <li>\u5141\u8bb8\u5b50\u7c7b\u63d0\u4f9b\u5bf9\u8c61\u7684\u6269\u5c55\u7248\u672c\uff1b</li> </ul> <p>\u5e94\u7528\u573a\u666f\uff1a</p> <ul> <li>\u7c7b\u4e0d\u80fd\u9884\u6599\u5b83\u5fc5\u987b\u521b\u5efa\u7684\u5bf9\u8c61\u7684\u7c7b\uff1b</li> <li>\u7c7b\u5e0c\u671b\u5176\u5b50\u7c7b\u6307\u5b9a\u5b83\u8981\u521b\u5efa\u7684\u5bf9\u8c61\uff1b</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#9soa","title":"9\u3001\u9762\u5411\u670d\u52a1\u7684\u67b6\u6784\uff08SOA\uff09","text":"<p>SOA \u662f\u4e00\u79cd\u7c97\u7c92\u5ea6\u3001\u677e\u8026\u5408\u7684\u670d\u52a1\u67b6\u6784\uff0c\u5176\u670d\u52a1\u4e4b\u95f4\u901a\u8fc7\u7b80\u5355\u3001\u7cbe\u786e\u5b9a\u4e49\u63a5\u53e3\u8fdb\u884c\u901a\u8baf\uff0c\u4e0d\u6d89\u53ca\u5e95\u5c42\u7f16\u7a0b\u63a5\u53e3\u548c\u901a\u4fe1\u6a21\u578b\u30023 \u4e2a\u7279\u5f81\uff1a</p> <ul> <li>\u677e\u6563\u8026\u5408</li> <li>\u7c97\u7c92\u5ea6\u670d\u52a1</li> <li>\u6807\u51c6\u5316\u63a5\u53e3</li> </ul>"},{"location":"ruankao/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/#10esb","title":"10\u3001\u4f01\u4e1a\u670d\u52a1\u603b\u7ebf\uff08ESB\uff09","text":"<p>\u662f\u7531\u4e2d\u95f4\u4ef6\u6280\u672f\u5b9e\u73b0\u5e76\u652f\u6301SOA\u7684\u4e00\u7ec4\u57fa\u7840\u67b6\u6784\uff0c\u652f\u6301\u5f02\u6784\u73af\u5883\u4e2d\u7684\u670d\u52a1\u3001\u6d88\u606f\u4ee5\u53ca\u57fa\u4e8e\u4e8b\u4ef6\u7684\u4ea4\u4e92\uff0c\u5e76\u4e14\u5177\u6709\u9002\u5f53\u7684\u670d\u52a1\u7ea7\u522b\u548c\u53ef\u7ba1\u7406\u6027\u3002</p> <p>\u4f18\u52bf\uff1a</p> <ul> <li>\u6269\u5c55\u7684\u3001\u57fa\u4e8e\u6807\u51c6\u7684\u94fe\u63a5\u3002</li> <li>\u7075\u6d3b\u7684\u3001\u670d\u52a1\u5bfc\u5411\u7684\u5e94\u7528\u7ec4\u5408\u3002</li> <li>\u63d0\u4f9b\u91cd\u7528\u7387\uff0c\u964d\u4f4e\u6210\u672c\u3002</li> <li>\u51cf\u5c11\u5e02\u573a\u53cd\u5e94\u65f6\u95f4\uff0c\u63d0\u9ad8\u751f\u4ea7\u7387\u3002</li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"FastAPI\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>FastAPI \u662f\u4e00\u4e2a Web \u670d\u52a1\u6846\u67b6\uff0c\u5176\u4e3b\u8981\u7279\u70b9\u5c31\u662f\"\u5feb\"\u3002</p> <p>\u5728 Python Web \u670d\u52a1\u9886\u57df\u6bd4\u8f83\u77e5\u540d\u7684\u5c31\u662f Django\u3001Flask\uff0c\u4f46\u5176\u6027\u80fd\u4e00\u76f4\u4e3a\u5927\u5bb6\u6240\u8bdf\u75c5\uff0c\u4ee5\u81f3\u4e8e\u5f88\u591a\u5927\u578b\u9879\u76ee\u4f1a\u9009\u62e9\u57fa\u4e8e Go \u8bed\u8a00\u7684 Web \u670d\u52a1\u6846\u67b6\uff0c\u6bd4\u5982 beego\u3002\u800c Django\u3001Flask \u8f83\u591a\u5e94\u7528\u4e8e\u4e00\u4e9b\u5c0f\u578b\u7f51\u7ad9\u6216\u8005\u4e00\u4e9b\u4e2a\u4eba\u535a\u5ba2\u7c7b\u7f51\u7ad9\u3002</p> <p>\u5e94\u8be5\u8bf4\uff0cPython \u5728 Web \u540e\u7aef\u670d\u52a1\u9886\u57df\u662f\u5931\u8d25\u7684\uff0c\u800c FastAPI \u7684\u51fa\u73b0\u6216\u8bb8\u6709\u53ef\u80fd\u4e3a Python \u6273\u56de\u4e00\u5c40\u3002</p> <p>FastAPI \u4e4b\u6240\u4ee5\u80fd\u7a81\u7834 Python \u8bed\u8a00\u672c\u8eab\u6240\u5e26\u6765\u7684\u6027\u80fd\u74f6\u9888\uff0c\u662f\u56e0\u4e3a\u5176\u4e3b\u8981\u91c7\u7528\u4e86\u5f02\u6b65\u7684\u8bbe\u8ba1\u601d\u8def\uff0c\u65e0\u8bba\u662f\u6e90\u7801\u8fd8\u662f\u793a\u4f8b\uff0c\u90fd\u6709\u5927\u91cf\u534f\u7a0b\u7684\u5199\u6cd5\u3002</p> <p>\u534f\u7a0b\uff0c\u662f Python \u552f\u4e00\u80fd\u7a81\u7834\u7ebf\u7a0b GIL\uff08\u5168\u5c40\u89e3\u91ca\u5668\u9501\uff09\u3001\u7a81\u7834\u8fdb\u7a0b CPU \u6570\u91cf\u9650\u5236\u7684\u9ad8\u9636\u7f16\u7801\u6a21\u5f0f\uff0c\u5b83\u4f7f\u5f97\u4efb\u52a1\u95f4\u7684\u5207\u6362\u80fd\u591f\u50cf\u8c03\u7528\u51fd\u6570\u4e00\u6837\u8f7b\u677e\u3002\u534f\u7a0b\u4e5f\u662f Python \u91cc\u9762\u6700\u4e0d\u597d\u7406\u89e3\u7684\u5185\u5bb9\u4e4b\u4e00\u3002</p> <p>\u4f46\u662f\u6ca1\u5173\u7cfb\uff0cFastAPI \u901a\u8fc7\u975e\u5e38\u7cbe\u826f\u7684\u8bbe\u8ba1\u8ba9\u4f60\u4e0d\u7528\u771f\u6b63\u5f04\u61c2\u534f\u7a0b\u5c31\u80fd\u8f7b\u677e\u4f7f\u7528\u5b83\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883: <code>deepin</code></p> <pre><code>$ pip3 install fastapi\n</code></pre> <p>\u5b89\u88c5 ASGI \u670d\u52a1\u5668\uff0c\u7528\u4e8e\u542f\u52a8\u670d\u52a1</p> <pre><code>$ pip3 install \"uvicorn[standard]\"\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u7b80\u5355\u7684\u4f8b\u5b50","text":"<p>\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u8fd4\u56de\u7b80\u5355\u7684 json \u54cd\u5e94\uff1a</p> <pre><code>from fastapi import FastAPI\napp = FastAPI()\n</code></pre> <p>\u8fd9\u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u540e\u9762\u7684\u5185\u5bb9\u5c31\u4e0d\u91cd\u590d\u5199\u8fd9\u4e24\u884c\u4e86\uff1b</p> <pre><code>@app.get(\"/\")\ndef hello():\nreturn {\"msg\": \"hello mikigo\"}\n</code></pre> <p>\u5728\u7ec8\u7aef\u901a\u8fc7\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a</p> <pre><code>uvicorn main:app --reload\n</code></pre> <p>\u5728\u672c\u673a\u6d4f\u89c8\u5668\u8bbf\u95ee\uff1ahttp://127.0.0.1:8000/\uff1b</p> <p>\u6211\u4e2a\u4eba\u559c\u6b22\u5728 <code>py</code> \u6587\u4ef6\u91cc\u9762\u5199\u542f\u52a8\uff1a</p> <pre><code>import os\nfrom fastapi import FastAPI\nimport uvicorn\napp = FastAPI()\n@app.get(\"/\")\nasync def hello():\nreturn {\"msg\": \"hello mikigo\"}\nif __name__ == '__main__':\nuvicorn.run(\napp=\"main:app\",\nhost=os.popen(\"hostname -I\").read().split(\" \")[0],  # \u52a8\u6001\u83b7\u53d6\u672c\u673aIP,\u5982\u679c\u4e0d\u4f20\u9ed8\u8ba4\u4e3a127.0.0.1\nport=5000, # \u6307\u5b9a\u4e00\u4e2a\u6d4b\u8bd5\u7528\u7aef\u53e3\nreload=True\n)\n</code></pre> <p>\u8fd9\u6837\u76f4\u63a5\u8fd0\u884c <code>py</code> \u811a\u672c\uff1a</p> <p></p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#openapi","title":"OpenAPI \u6587\u6863","text":"<p>FastAPI \u7684\u4e00\u4e2a\u7279\u70b9\u5c31\u662f\u81ea\u5e26\u63a5\u53e3\u6587\u6863\uff0c\u53ea\u9700\u8981\u5728 url \u540e\u9762\u52a0 <code>docs</code>\uff1a</p> <p></p> <p>\u4f60\u5982\u679c\u4e0d\u559c\u6b22 Swagger \u98ce\u683c\u7684\u6587\u6863\uff0c\u53ef\u4ee5\u5c06 <code>docs</code> \u6539\u6210 <code>redoc</code>\uff0cFastAPI \u9ed8\u8ba4\u643a\u5e26\u4e24\u79cd\u98ce\u683c\u7684\u63a5\u53e3\u6587\u6863\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#pydantic","title":"\u56db\u3001Pydantic","text":"<p>FastAPI \u662f\u501f\u52a9 Pydantic \u6765\u8fdb\u884c\u7c7b\u578b\u58f0\u660e\u7684\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u7528\u9014\uff1a</p> <ul> <li>\u5bf9\u8bf7\u6c42\u4f53\u548c\u54cd\u5e94\u4f53\u7684\u53c2\u6570\u7c7b\u578b\u8fdb\u884c\u58f0\u660e\uff1b</li> <li>\u5728\u7f16\u8f91\u5668\u91cc\u9762\u4eab\u53d7\u4ee3\u7801\u8865\u5168\u7684\u4e50\u8da3\uff1b</li> </ul> <p>\u4f7f\u7528\u8fc7 Python \u7684 typing \u7684\u540c\u5b66\u5e94\u8be5\u77e5\u9053\u3010\u7c7b\u578b\u6807\u6ce8\u3011\uff0c\u5b83\u53ef\u4ee5\u6821\u9a8c\u53c2\u6570\u53ca\u8fd4\u56de\u7684\u7c7b\u578b\uff0c\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u4e25\u7981\uff0c\u4e14\u66f4\u5177\u6709\u53ef\u8bfb\u6027\u3002</p> <p>Pydantic \u63d0\u4f9b\u4e86\u66f4\u52a0\u5f3a\u5927\u7684\u7c7b\u578b\u5b9a\u4e49\u548c\u66f4\u52a0\u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a\u529f\u80fd\u3002\u5373\u4f7f\u4e0d\u7528 FastAPI\uff0c\u5728\u5176\u4ed6\u7f16\u7801\u4e2d\u4f60\u4e5f\u53ef\u4ee5\u5f88\u6709\u6548\u7684\u4f7f\u7528\u5b83\u3002</p> <p>\u4f7f\u7528\u4e3e\u4f8b\uff1a</p> <pre><code>from datetime import date\nfrom pydantic import BaseModel\ndef main(user_id: str):\nreturn user_id\nclass User(BaseModel):\nid: int\nname: str\njoined: date\n</code></pre> <p>\u4f20\u9012\u53c2\u6570\u8fdb\u53bb\uff1a</p> <pre><code>my_user: User = User(id=3, name=\"mikigo\", joined=\"20230303\")\nsecond_user_data = {\n\"id\": 4,\n\"name\": \"Mary\",\n\"joined\": \"2018-11-30\",\n}\nmy_second_user: User = User(**second_user_data)\n</code></pre> <p><code>from pydantic import BaseModel</code> \u91cc\u9762\u7684 <code>BaseModel</code> \u8bb0\u4f4f\uff0c\u901a\u5e38\u90fd\u662f\u7ee7\u627f\u8fd9\u4e2a\u7c7b\u6765\u5199\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\uff1b</p> <p>\u5c06 <code>Pydantic</code> \u6570\u636e\u7c7b\u578b\u8f6c\u6362\u6210 JSON\uff1a</p> <pre><code>from fastapi.encoders import jsonable_encoder\njson_user = jsonable_encoder(my_user)\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u4e94\u3001\u53c2\u6570","text":"<p>FastAPI \u662f RESTful \u98ce\u683c\u7684\u6846\u67b6\uff0c\u540e\u9762\u4f8b\u5b50\u7684\u63a5\u53e3\u8bf7\u6c42\u6211\u90fd\u4f7f\u7528 Postman \u6765\u505a\uff0c\u8fd9\u4e2a\u53ea\u662f\u4e2a\u4eba\u4e60\u60ef\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u63a5\u53e3\u6587\u6863\u91cc\u9762\u63d0\u4f9b\u7684\u3010Try it out\u3011\u63a5\u53e3\u8c03\u8bd5\u529f\u80fd\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 requests \u8fd9\u7c7b\u7684 HTTP \u5e93\u8fdb\u884c\u63a5\u53e3\u8bf7\u6c42\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u8def\u5f84\u53c2\u6570","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11","title":"1.1 \u666e\u901a\u8def\u5f84\u53c2\u6570","text":"<p>\u58f0\u660e\u8def\u5f84\u53c2\u6570\uff1a</p> <pre><code>@app.get(\"/items/{item_id}\")\nasync def read_item(item_id):\nreturn {\"item_id\": item_id}\n</code></pre> <p>\u8def\u5f84\u53c2\u6570 <code>item_id</code> \u53ef\u4ee5\u4f20\u5165\u5230\u51fd\u6570\u4e2d\uff0c\u6bd4\u5982\uff1ahttp://10.8.13.224:5000/items/mikigo </p> <p>\u4f20\u9012\u53c2\u6570\u4e3a\uff1amikigo\uff0c\u54cd\u5e94\u5982\u4e0b\uff1a</p> <pre><code>{\"item_id\":\"mikigo\"}\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12","title":"1.2 \u6709\u7c7b\u578b\u7684\u8def\u5f84\u53c2\u6570","text":"<p>\u58f0\u660e\u8def\u5f84\u53c2\u6570\uff1a</p> <pre><code>@app.get(\"/items/{item_id}\")\nasync def read_item(item_id: int):\nreturn {\"item_id\": item_id}\n</code></pre> <p>\u533a\u522b\u662f\u7ed9\u53c2\u6570 <code>item_id</code> \u6307\u5b9a\u4e86\u4e00\u4e2a\u7c7b\u578b <code>int</code>\uff1b</p> <p>\u5982\u679c\u8fd8\u662f\u4f20\u9012\u53c2\u6570\u4e3a\uff1amikigo\uff0chttp://10.8.13.224:5000/items/mikigo \u4f1a\u62a5\u9519\uff1a</p> <pre><code>{\n\"detail\": [\n{\n\"loc\": [\n\"path\",\n\"item_id\"\n],\n\"msg\": \"value is not a valid integer\",\n\"type\": \"type_error.integer\"\n}\n]\n}\n</code></pre> <p>\u5fc5\u987b\u8981\u7ed9\u4e00\u4e2a\u6570\u5b57\u624d\u884c http://10.8.13.224:5000/items/520 \u54cd\u5e94\uff1a</p> <pre><code>{\n\"item_id\": 520\n}\n</code></pre> <p>\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u8def\u5f84\u53c2\u6570\u7684\u6570\u636e\u6821\u9a8c\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u67e5\u8be2\u53c2\u6570","text":"<p>\u4e0d\u5c5e\u4e8e\u8def\u5f84\u53c2\u6570\u7684\u5176\u4ed6\u51fd\u6570\u53c2\u6570\uff0c\u4f1a\u88ab\u88ab\u81ea\u52a8\u89e3\u91ca\u4e3a\"\u67e5\u8be2\u5b57\u7b26\u4e32\"\u53c2\u6570\u3002</p> <pre><code>@app.get(\"/items/\")\nasync def read_item(name: str = \"\"):\nreturn {\"name\" : name}\n</code></pre> <p>\u67e5\u8be2\u53c2\u6570\u7684\u952e\u503c\u5728 URL \u7684 <code>\uff1f</code> \u4e4b\u540e\uff0c\u5e76\u4ee5 <code>&amp;</code> \u7b26\u53f7\u5206\u9694\uff0c\u5c31\u548c\u6211\u4eec\u7406\u89e3\u7684\u666e\u901a GET \u8bf7\u6c42\u53c2\u6570\u4f20\u9012\u65b9\u5f0f\u662f\u4e00\u6837\u7684\uff1b</p> <pre><code>http://10.8.13.224:5000/items/?name=mikigo\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"name\": \"mikigo\"\n}\n</code></pre> <p>\u6ce8\u610f\u6211\u4eec\u5728 <code>read_item(name: str = \"\")</code> \u7ed9\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u8bf4\u660e\u53c2\u6570\u662f\u53ef\u9009\u7684\uff08\u4e0d\u4f20\u53c2\u4e5f\u53ef\u4ee5\uff09\uff0c\u5982\u679c \u76f4\u63a5\u7528<code>read_item(name: str)</code> \u8bf4\u660e\u53c2\u6570\u662f\u5fc5\u4f20\u7684\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u8bf7\u6c42\u4f53","text":"<p>\u8bf7\u6c42\u4f53\u662f\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9 API \u7684\u6570\u636e\u3002\u54cd\u5e94\u4f53\u662f API \u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u6570\u636e\u3002</p> <p>\u4e00\u822c\u6211\u4eec\u8bf4GET\u65b9\u6cd5\u6ca1\u6709\u8bf7\u6c42\u4f53\uff0cPOST\u3001PUT\u7b49\u65b9\u6cd5\u624d\u6709\u8bf7\u6c42\u4f53\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>from typing import Union\nfrom pydantic import BaseModel\nclass Item(BaseModel):\nname: str\ndescription: Union[str, None] = None\n@app.post(\"/items/\")\nasync def post_test(item: Item):\nreturn {\"data\": item}\n</code></pre> <p>\u53d1\u4e00\u4e2a POST \u8bf7\u6c42\uff0c\u53c2\u6570\u4e3a\uff1a</p> <pre><code>{\n\"name\": \"mikigo\",\n\"description\": \"\u641e\u4e8b\u60c5\"\n}\n</code></pre> <p>\u8fd4\u56de\u503c\uff1a</p> <pre><code>{\n\"data\": {\n\"name\": \"mikigo\",\n\"description\": \"\u641e\u4e8b\u60c5\"\n}\n}\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u5185\u5efa\u53c2\u6570\u7c7b\u578b","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#41query","title":"4.1\u3001Query","text":"<p>Query \u4e00\u822c\u662f\u7528\u5728\u67e5\u8be2\u53c2\u6570\u91cc\u9762\uff1a</p> <pre><code>from fastapi import Query\n@app.get(\"/query/\")\nasync def query_test(\nname: Union[str, None] = Query(default=None, max_length=10)\n):\nreturn {\"name\": name}\n</code></pre> <p><code>Query(default=None, max_length=10)</code> \u91cc\u9762:</p> <ul> <li><code>default=None</code> \u8868\u793a\u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u503c\u4e3a None\uff0c\u548c <code>name: str = None</code> \u5199\u6cd5\u662f\u4e00\u4e2a\u610f\u601d\uff1b</li> </ul> <p>\u5982\u679c\u60f3\u8981\u53c2\u6570\u5fc5\u586b\uff1a<code>default=...</code>\uff08\u6ca1\u9519\u54c8\uff0c\u5c31\u662f\u4e09\u4e2a\u70b9\uff0c\u4e09\u4e2a\u70b9\u5728 Python \u91cc\u9762\u662f\u4e00\u4e2a\u7701\u7565\u5bf9\u8c61\uff09\uff1b</p> <ul> <li><code>max_length=10</code> \u5b9a\u4e49\u4e86\u53c2\u6570\u7684\u6700\u5927\u957f\u5ea6\uff1b</li> </ul> <p><code>Query</code> \u652f\u6301\u7684\u53c2\u6570\u8fd8\u6709\u70b9\u591a\uff0c\u611f\u5174\u8da3\u53ef\u4ee5\u4e00\u4e2a\u4e2a\u8bd5\uff1a</p> <pre><code>def Query(\ndefault: Any = Undefined,\n*,\nalias: Optional[str] = None,\ntitle: Optional[str] = None,\ndescription: Optional[str] = None,\ngt: Optional[float] = None,\nge: Optional[float] = None,\nlt: Optional[float] = None,\nle: Optional[float] = None,\nmin_length: Optional[int] = None,\nmax_length: Optional[int] = None,\nregex: Optional[str] = None,\nexample: Any = Undefined,\nexamples: Optional[Dict[str, Any]] = None,\ndeprecated: Optional[bool] = None,\ninclude_in_schema: bool = True,\n**extra: Any,\n) -&gt; Any:\npass\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/query?name=mikigo\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"name\": \"mikigo\"\n}\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#42path","title":"4.2\u3001Path","text":"<p>Path \u4e00\u822c\u662f\u7528\u5728\u8def\u5f84\u53c2\u6570\u91cc\u9762\uff1a</p> <pre><code>from fastapi import Path\n@app.get(\"/path/{path_id}\")\nasync def path_test(\npath_id: int = Path(default=...),\nname: Union[str, None] = Query(default=..., max_length=10)\n):\nresults = {\"path_id\": path_id}\nif name:\nresults.update({\"name\": name})\nreturn results\n</code></pre> <p>\u53ef\u4ee5\u770b\u7684\u51fa\u6765 <code>Path(default=..., max_length=10)</code> \u548c Query \u7528\u6cd5\u51e0\u4e4e\u4e00\u6837\uff0c\u4e0d\u662f\u51e0\u4e4e\uff0c\u5c31\u662f\u4e00\u6837\u7684\u3002</p> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/path/10?name=mikigo\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"path_id\": 10,\n\"name\": \"mikigo\"\n}\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#43body","title":"4.3\u3001Body","text":"<p>Body \u4e00\u822c\u662f\u7528\u4e8e\u8bf7\u6c42\u4f53\uff1a</p> <pre><code>from fastapi import Body\n@app.post(\"/body/\")\nasync def body_test(\nitem: Item,\nage: int = Body(default=None, gt=0)\n):\nresults = {\"data\": item}\nif age:\nresults.update({\"age\": age})\nreturn {\"results\": results}\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/body\n</code></pre> <p>\u9700\u8981\u6784\u9020\u8bf7\u6c42\u4f53\uff1a</p> <pre><code>{\n\"item\": {\n\"name\": \"string\",\n\"description\": \"string\"\n},\n\"age\": 2\n}\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"results\": {\n\"data\": {\n\"name\": \"string\",\n\"description\": \"string\"\n},\n\"age\": 2\n}\n}\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#44field","title":"4.4\u3001Field","text":"<p>Field \u4e00\u822c\u7528\u4e8e\u8bf7\u6c42\u4f53\u7684\u5b57\u6bb5\uff0c\u5bf9\u8bf7\u6c42\u4f53\u7684\u53c2\u6570\u505a\u8fdb\u4e00\u6b65\u7684\u7ea6\u675f\uff0c\u5b83\u662f\u4ece pydantic \u5bfc\u5165\u7684\uff1a</p> <pre><code>from pydantic import Field\nclass FieldItem(BaseModel):\nname: str\ndescription: Union[str, None] = Field(\ndefault=None, title=\"deepin\", max_length=300\n)\n@app.post(\"/field/\")\nasync def field_test(\nitem: FieldItem,\nage: int = Body(default=None, gt=0)\n):\nresults = {\"data\": item}\nif age:\nresults.update({\"age\": age})\nreturn {\"field\": results}\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/field\n</code></pre> <p>\u6784\u9020\u8bf7\u6c42\u4f53\u5982\u4e0b\uff1a</p> <pre><code>{\n\"item\": {\n\"name\": \"mikigo\",\n\"description\": \"1234\"\n},\n\"age\":30\n}\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"field\": {\n\"data\": {\n\"name\": \"mikigo\",\n\"description\": \"1234\"\n},\n\"age\": 30\n}\n}\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#45cookie","title":"4.5\u3001Cookie","text":"<p>\u5148\u8bbe\u7f6e cookie\uff1a</p> <pre><code>@app.post(\"/cookieset\")\nasync def cookie_set(response: Response):\nresponse.set_cookie(key=\"cookie1\", value=\"mikigocookie11111\")\nreturn {\"cookie_id\": \"ok\"}\n</code></pre> <p>\u8bf7\u6c42\u4e00\u4e0b\uff0c\u67e5\u770b cookie \u8bbe\u7f6e\u662f\u5426\u6210\u529f:</p> <p></p> <p>\u7136\u540e\u518d\u5b9a\u4e49 Cookie \u53c2\u6570\uff1a</p> <pre><code>from fastapi import Cookie\n@app.get(\"/cookieget\")\nasync def cookie_get(\nads_id: Union[str, None] = Cookie(default=None)\n):\nreturn {\"ads_id\": ads_id}\n</code></pre> <p><code>Cookie</code> \u53c2\u6570\u7684\u7ed3\u6784\u4e0e\u58f0\u660e <code>Query</code> \u53c2\u6570\u548c <code>Path</code> \u53c2\u6570\u65f6\u76f8\u540c</p> <p>\u8bf7\u6c42\u4e00\u628a\uff1a</p> <p></p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#46header","title":"4.6\u3001Header","text":"<p><code>Header</code> \u4f7f\u7528\u548c<code>Path</code>, <code>Query</code> and <code>Cookie</code> \u4e00\u6837;</p> <pre><code>from fastapi import Header\n@app.get(\"/header\")\nasync def header_test(user_agent: Union[str, None] = Header(default=None)):\nreturn {\"User-Agent\": user_agent}\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/header\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"User-Agent\": \"PostmanRuntime/7.31.1\"\n}\n</code></pre> <p><code>Header</code> \u6709\u4e2a\u7279\u6b8a\u7684\u53c2\u6570 <code>convert_underscores: bool = True</code>\uff1b</p> <p>\u56e0\u4e3a\u5927\u591a\u6570\u6807\u51c6\u7684headers\u7528 \"\u8fde\u5b57\u7b26\" \u5206\u9694\uff0c\u56e0\u6b64\u9ed8\u8ba4\u5c06\u53c2\u6570\u540d\u79f0\u7684\u5b57\u7b26\u4ece\u4e0b\u5212\u7ebf (<code>_</code>) \u8f6c\u6362\u4e3a\u8fde\u5b57\u7b26 (<code>-</code>) \uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u516d\u3001\u54cd\u5e94","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_1","title":"1\u3001\u54cd\u5e94\u9650\u5236","text":"<p><code>Pydantic</code> \u4e0d\u4ec5\u53ef\u4ee5\u5bf9\u8bf7\u6c42\u53c2\u6570\u8fdb\u884c\u6821\u9a8c\u548c\u9650\u5236\uff0c\u5bf9\u54cd\u5e94\u540c\u6837\u53ef\u4ee5\uff1b</p> <pre><code>class Item(BaseModel):\nname: str\ndescription: Union[str, None] = None\n@app.post(\"/rsp_model/\", response_model=Item)\nasync def response_model_test(item: Item) -&gt; Any:\nreturn item\n</code></pre> <p>\u5728\u88c5\u9970\u5668 <code>@app.post</code> \u91cc\u9762\u6709\u4e2a\u53c2\u6570 <code>response_model</code> \u53ef\u4ee5\u58f0\u660e\u54cd\u5e94\u7684\u6a21\u578b\uff1b</p> <p><code>response_model=Item</code> \u8868\u793a\u54cd\u5e94\u4fe1\u606f\u4e5f\u662f <code>Item</code> \u7684\u7c7b\u578b\uff0cAPI \u6587\u6863\u91cc\u9762\u4e5f\u4f1a\u6709\u54cd\u5e94\u4fe1\u606f\u7684\u793a\u4f8b\uff0c\u5426\u5219\u5c31\u662f\u7a7a\u7684\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_1","title":"2\u3001\u54cd\u5e94\u72b6\u6001\u7801","text":"<pre><code>@app.post(\"/status\", status_code=201)\nasync def status_code_test(name: str):\nreturn {\"name\": name}\n</code></pre> <p>\u8bf7\u6c42\u6210\u529f\uff0c\u8fd4\u56de\u72b6\u6001\u7801\u4e3a\uff1a201;</p> <p>API \u6587\u6863\u91cc\u9762\u4e5f\u4f1a\u6709\u5c55\u793a\uff1b</p> <p>fastapi \u63d0\u4f9b\u4e86\u4e00\u4e2a <code>status</code> \u6a21\u5757\u6765\u8868\u793a\u72b6\u6001\u7801\uff1a</p> <pre><code>from fastapi import status\n@app.post(\"/status\", status_code=status.HTTP_201_CREATED)\nasync def status_code_test(name: str):\nreturn {\"name\": name}\n</code></pre> <p><code>status.HTTP_201_CREATED</code> \u8fd9\u79cd\u65b9\u5f0f\u66f4\u5bb9\u6613\u7406\u89e3\u72b6\u6001\u7801\u7684\u610f\u601d\uff0c\u56e0\u6b64\u6211\u4e2a\u4eba\u66f4\u63a8\u8350\u8fd9\u79cd\u5199\u6cd5\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_1","title":"3\u3001\u8fd4\u56de\u9519\u8bef\u4fe1\u606f","text":"<pre><code>from fastapi import HTTPException\nfrom fastapi import status\nnames = {\"one\": \"mikigo\"}\n@app.get(\"/resp_info/{name_id}\")\nasync def resp_info(name_id: str):\nif name_id not in names:\nraise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail=\"Item not found\")\nreturn {\"item\": names[name_id]}\n</code></pre> <p>\u53d1\u9001\u8bf7\u6c42\uff1a</p> <p></p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u4e03\u3001\u8868\u5355\u53ca\u6587\u4ef6","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1form","title":"1\u3001Form\u8868\u5355","text":"<p>\u5e38\u89c1\u7684\uff0c\u767b\u5f55\u63a5\u53e3\u4f1a\u63d0\u4ea4 <code>Form</code> \u8868\u5355\uff1a</p> <pre><code>from fastapi import Form\n@app.post(\"/login/\")\nasync def login(username: str = Form(), password: str = Form()):\nreturn {\"username\": username}\n</code></pre> <p>\u91cd\u542f\u670d\u52a1\uff0c\u539a\u793c\u8c22\uff0c\u4f60\u4f1a\u53d1\u73b0\u62a5\u9519\uff0c\u63d0\u793a\u8981\u5b89\u88c5\u4f9d\u8d56\uff1a<code>python-multipart</code>\uff0c\u5565\u4e5f\u522b\u95ee\u76f4\u63a5\u88c5\uff1a</p> <pre><code>pip3 install python-multipart\n</code></pre> <p>\u518d\u91cd\u542f\u670d\u52a1\u4e4b\u540e\uff0c\u901a\u8fc7\u8868\u5355\u5b57\u6bb5\u53d1\u9001\uff0c\u6ce8\u610f\u4e0d\u80fd\u7528 JSON \u53d1\u9001\uff1b</p> <p></p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_2","title":"2\u3001\u4e0a\u4f20\u6587\u4ef6","text":"<p>\u4e0a\u4f20\u6587\u4ef6\u529f\u80fd\u4e5f\u4f9d\u8d56\uff1a<code>python-multipart</code>\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21file","title":"2.1\u3001File","text":"<pre><code>from fastapi import File\n@app.post(\"/files/\")\nasync def create_file(file: bytes = File()):\nreturn {\"file_size\": len(file)}\n</code></pre> <p><code>File</code> \u662f\u76f4\u63a5\u7ee7\u627f\u81ea <code>Form</code> \u7684\u7c7b\uff0c\u628a\u6587\u4ef6\u5f53\u505a\u8868\u5355\u4e0a\u4f20\uff0c\u6e90\u7801\uff1a</p> <pre><code>class File(Form):\ndef __init__():\n...\n</code></pre> <p>\u4ee5 <code>bytes</code> \u5f62\u5f0f\u8bfb\u53d6\u548c\u63a5\u6536\u6587\u4ef6\u5185\u5bb9\uff0c\u8fd9\u79cd\u65b9\u5f0f\u628a\u6587\u4ef6\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5b58\u50a8\u5728\u5185\u5b58\u91cc\uff0c\u9002\u7528\u4e8e\u5c0f\u578b\u6587\u4ef6\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22uploadfile","title":"2.2\u3001UploadFile","text":"<pre><code>from fastapi import UploadFile\n@app.post(\"/uploadfile/\")\nasync def create_upload_file(file: UploadFile):\nreturn {\"filename\": file.filename}\n</code></pre> <p><code>UploadFile</code> \u4e0e <code>bytes</code> \u76f8\u6bd4\u66f4\u597d\u4e00\u70b9\uff0c\u5373\u4f7f\u662f\u5927\u6587\u4ef6\u4e5f\u4e0d\u4f1a\u5360\u7528\u6240\u6709\u5185\u5b58\uff0c\u56e0\u4e3a\u5b83\u5185\u90e8\u6709\u4e2a\u6587\u4ef6\u6700\u5927\u9650\u5236\uff0c\u8d85\u8fc7\u5c31\u4f1a\u5148\u5b58\u5165\u78c1\u76d8\uff1b</p> <pre><code>class UploadFile:\n\"\"\"\n    An uploaded file included as part of the request data.\n    \"\"\"\nspool_max_size = 1024 * 1024\nfile: typing.BinaryIO\nheaders: \"Headers\"\ndef __init__(\nself,\nfilename: str,\nfile: typing.Optional[typing.BinaryIO] = None,\ncontent_type: str = \"\",\n*,\nheaders: \"typing.Optional[Headers]\" = None,\n) -&gt; None:\nself.filename = filename\nself.content_type = content_type\nif file is None:\nself.file = tempfile.SpooledTemporaryFile(max_size=self.spool_max_size)  # type: ignore[assignment]  # noqa: E501\nelse:\nself.file = file\n... # \u7701\u7565\u90e8\u5206\u4ee3\u7801\n</code></pre> <p><code>spool_max_size</code> \u5c31\u662f\u9650\u5236\u6587\u4ef6\u7684\u5927\u5c0f\uff1b</p> <p>\u901a\u8fc7\u4e0a\u9762\u6e90\u7801\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u770b\u51fa\u6709 2 \u4e2a\u5fc5\u4f20\u53c2\u6570\uff1a</p> <ul> <li><code>filename</code>\uff1a\u4e0a\u4f20\u6587\u4ef6\u540d\u5b57\u7b26\u4e32\uff08<code>str</code>\uff09\uff0c\u4f8b\u5982\uff0c <code>mikigo.jpg</code>\uff1b</li> <li><code>content_type</code>\uff1a\u5185\u5bb9\u7c7b\u578b\uff08MIME \u7c7b\u578b / \u5a92\u4f53\u7c7b\u578b\uff09\u5b57\u7b26\u4e32\uff08<code>str</code>\uff09\uff0c\u4f8b\u5982\uff0c<code>image/jpeg</code>\uff1b</li> </ul> <p>\u5982\u679c file \u53c2\u6570\u4e0d\u4f20\uff0c\u9ed8\u8ba4\u4e3a None\uff0c\u90a3\u4e48\u5b9e\u9645\u8c03\u7528\u7684\u662f <code>tempfile</code> \u6a21\u5757\u5b50\u7684 <code>SpooledTemporaryFile</code> \uff0c\u8fd9\u4e2a\u7c7b\u4f1a\u5c06\u6570\u636e\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\u76f4\u5230\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 <code>max_size</code>\uff0c\u8fd9\u65f6\u6587\u4ef6\u5185\u5bb9\u4f1a\u88ab\u5199\u5165\u78c1\u76d8\uff1b</p> <p><code>UploadFile</code> \u6e90\u7801\u91cc\u9762\u6709\u8fd9\u51e0\u4e2a\u65b9\u6cd5\uff1a</p> <pre><code>class UploadFile:\n# \u7701\u7565\u90e8\u5206\u4ee3\u7801\nasync def write(self, data: bytes) -&gt; None:\nif self._in_memory:\nself.file.write(data)\nelse:\nawait run_in_threadpool(self.file.write, data)\nasync def read(self, size: int = -1) -&gt; bytes:\nif self._in_memory:\nreturn self.file.read(size)\nreturn await run_in_threadpool(self.file.read, size)\nasync def seek(self, offset: int) -&gt; None:\nif self._in_memory:\nself.file.seek(offset)\nelse:\nawait run_in_threadpool(self.file.seek, offset)\nasync def close(self) -&gt; None:\nif self._in_memory:\nself.file.close()\nelse:\nawait run_in_threadpool(self.file.close)\n</code></pre> <p>\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u662f\u5f02\u6b65(<code>async</code>)\u65b9\u6cd5\uff1a</p> <ul> <li><code>write(data)</code>\uff1a\u628a <code>data</code> \uff08<code>str</code> \u6216 <code>bytes</code>\uff09\u5199\u5165\u6587\u4ef6\uff1b</li> <li><code>read(size)</code>\uff1a\u6309\u6307\u5b9a\u6570\u91cf\u7684\u5b57\u8282\u6216\u5b57\u7b26\uff08<code>size</code> (<code>int</code>)\uff09\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff1b</li> <li><code>seek(offset)</code>\uff1a\u79fb\u52a8\u81f3\u6587\u4ef6 <code>offset\uff08int\uff09</code>\u5b57\u8282\u5904\u7684\u4f4d\u7f6e\uff1b</li> <li>\u4f8b\u5982\uff0c<code>await myfile.seek(0)</code> \u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934\uff1b</li> <li>\u6267\u884c <code>await myfile.read()</code> \u540e\uff0c\u9700\u518d\u6b21\u8bfb\u53d6\u5df2\u8bfb\u53d6\u5185\u5bb9\u65f6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7279\u522b\u597d\u7528\uff1b</li> <li><code>close()</code>\uff1a\u5173\u95ed\u6587\u4ef6\u3002</li> </ul> <p>\u4f7f\u7528\u5f02\u6b65\u7684\u65f6\u5019\u7528 <code>await</code> \uff1a</p> <pre><code>contents = await myfile.read()\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u516b\u3001\u4f9d\u8d56\u9879","text":"<p>\u4f9d\u8d56\u9879\u4e5f\u53eb\u201c\u4f9d\u8d56\u6ce8\u5165\u201d\uff0c\u4f7f\u7528 <code>Depends</code>\uff1a</p> <pre><code>from fastapi import Depends\nasync def common_parameters(\nq: Union[str, None] = None, skip: int = 0, limit: int = 100\n):\nreturn {\"q\": q, \"skip\": skip, \"limit\": limit}\n@app.get(\"/dps\")\nasync def depends_test(commons: dict = Depends(common_parameters)):\nreturn commons\n</code></pre> <p><code>Depends</code> \u9700\u8981\u4f20\u5165\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u4e00\u822c\u5c31\u7ed9\u51fd\u6570\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u4f9d\u8d56\u51fd\u6570\uff0c\u6ce8\u610f\u4e0d\u662f\u8c03\u7528\u51fd\u6570\uff0c\u6ca1\u6709\u62ec\u53f7\uff1b</p> <p>\u4f9d\u8d56\u51fd\u6570\u7684\u53c2\u6570\u548c\u67e5\u8be2\u53c2\u6570\u7684\u4e00\u6837\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\u4e5d\u3001\u5b89\u5168\u6027","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1oauth2","title":"1\u3001OAuth2","text":"<p>\u529f\u80fd\u4e5f\u4f9d\u8d56\uff1a<code>python-multipart</code>\uff1b</p> <p><code>OAuth2</code> \u4e3b\u8981\u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\uff1a</p> <pre><code>from fastapi.security import OAuth2PasswordBearer\nfrom fastapi import Depends\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n@app.get(\"/auth/\")\nasync def auth_test(token: str = Depends(oauth2_scheme)):\nreturn {\"token\": token}\n</code></pre> <p>\u67e5\u770b <code>OpenAPI</code> \u6587\u6863\u4f60\u4f1a\u53d1\u73b0\uff0c\u53f3\u4e0a\u89d2\u6709\u4e2a Authorize \u6309\u94ae\uff0c\u70b9\u5b83\uff1a</p> <p></p> <p>\u5f39\u51fa\u6388\u6743\u8868\u5355\uff0c\u8f93\u5165 <code>username</code> \u4e0e <code>password</code> \u53ca\u5176\u5b83\u53ef\u9009\u5b57\u6bb5\uff1b</p> <p>\u8fd9\u4e2a\u662f FastAPI \u7684\u5b89\u5168\u5de5\u5177\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_3","title":"2\u3001\u83b7\u53d6\u5f53\u524d\u7528\u6237","text":"<pre><code>from typing import Union\nfrom fastapi import Depends\nfrom fastapi.security import OAuth2PasswordBearer\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\nclass User(BaseModel):\nusername: str\nemail: Union[str, None] = None\nfull_name: Union[str, None] = None\ndisabled: Union[bool, None] = None\ndef fake_decode_token(token):\nreturn User(\nusername=token + \"fakedecoded\", email=\"john@example.com\", full_name=\"John Doe\"\n)\nasync def get_current_user(token: str = Depends(oauth2_scheme)):\nuser = fake_decode_token(token)\nreturn user\n@app.get(\"/users/me\")\nasync def read_users_me(current_user: User = Depends(get_current_user)):\nreturn current_user\n</code></pre> <p>\u5148\u521b\u5efa\u4e00\u4e2a\u8bf7\u6c42\u4f53\u6a21\u578b <code>User</code>\uff1b</p> <p>\u518d\u521b\u5efa\u4e00\u4e2a <code>get_current_user</code> \u4f9d\u8d56\u9879\uff0c\u5b83\u7684\u4f9d\u8d56\u9879\u662f <code>oauth2_scheme</code>\uff0c\u8fd9\u91cc\u63a5\u53d7\u4e00\u4e2a <code>token</code> \u5b57\u7b26\u4e32\uff0c\u5728\u7ed9\u53e6\u5916\u4e00\u4e2a\u51fd\u6570 <code>fake_decode_token</code> \u8fdb\u884c\u89e3\u7801\u540e\uff0c\u8fd4\u56de user \u5bf9\u8c61\uff1b</p> <p>\u6700\u540e\uff0c\u901a\u8fc7 <code>read_users_me</code> \u4f9d\u8d56\u9879\uff0c\u8fd4\u56de\u5f53\u524d\u7528\u6237\uff1b</p> <p>\u8fd9\u91cc\u5b9e\u9645\u662f\u4e00\u4e2a\u5d4c\u5957\u4f9d\u8d56\u7684\u5173\u7cfb\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\u5341\u3001\u4e2d\u95f4\u4ef6","text":"<p>\u4e2d\u95f4\u4ef6\u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a\u94a9\u5b50\u51fd\u6570\uff0c\u5728\u6bcf\u4e2a\u8bf7\u6c42\u88ab\u5904\u7406\u4e4b\u524d\uff0c\u4ee5\u53ca\u6ca1\u997f\u54cd\u5e94\u8fd4\u56de\u4e4b\u524d\u5de5\u4f5c\u3002\u5de5\u4f5c\u539f\u7406\u7c7b\u4f3c\u4e8e Python \u91cc\u9762\u7684\u5c5e\u6027\u62e6\u622a\u5668\u5c31\u53ef\u4ee5\u7406\u89e3\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_2","title":"1\u3001\u521b\u5efa\u4e2d\u95f4\u4ef6","text":"<p>\u4f7f\u7528\u88c5\u9970\u5668 <code>@app.middleware(\"http\")</code> \uff0c\u56fa\u5b9a\u7528\u6cd5\uff0c\u8bb0\u4f4f\u5c31\u597d\u4e86\uff1b</p> <pre><code>import time\nfrom fastapi import Request\n@app.middleware(\"http\")\nasync def add_process_time_header(request: Request, call_next):\nstart_time = time.time()\nresponse = await call_next(request)  # \u8def\u5f84\u64cd\u4f5c\nprocess_time = time.time() - start_time\nresponse.headers[\"X-Process-Time\"] = str(process_time)\nreturn response\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>request\uff0cFastAPI \u7684\u8bf7\u6c42\u5bf9\u8c61\uff1b</li> <li>\u4e00\u4e2a\u51fd\u6570 <code>call_next</code> \u5b83\u5c06\u63a5\u6536 <code>request</code> \u4f5c\u4e3a\u53c2\u6570\uff1b</li> <li>\u8fd9\u4e2a\u51fd\u6570\u5c06 <code>request</code> \u4f20\u9012\u7ed9\u76f8\u5e94\u7684 \u8def\u5f84\u64cd\u4f5c\uff1b</li> <li>\u7136\u540e\u5b83\u5c06\u8fd4\u56de\u7531\u76f8\u5e94\u7684\u8def\u5f84\u64cd\u4f5c\u751f\u6210\u7684 <code>response</code>\uff1b</li> <li>\u7136\u540e\u4f60\u53ef\u4ee5\u5728\u8fd4\u56de <code>response</code> \u524d\u8fdb\u4e00\u6b65\u4fee\u6539\u5b83\uff1b</li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2cors","title":"2\u3001\u8de8\u57df\u8d44\u6e90\u5171\u4eab(CORS)","text":"<p>\u5728\u540c\u4e00\u4e2aIP\u5730\u5740\u4e2d\uff0c\u4f46\u4f7f\u7528\u4e0d\u540c\u7684\u534f\u8bae\u6216\u8005\u7aef\u53e3\uff0c\u5c31\u662f\u4e0d\u540c\u7684\u57df\uff1b</p> <p>\u4f7f\u7528 <code>CORSMiddleware</code> \uff1a</p> <pre><code>from fastapi.middleware.cors import CORSMiddleware\norigins = [\n\"http://localhost\",\n\"http://localhost:8080\",\n]\napp.add_middleware(\nCORSMiddleware,\nallow_origins=origins,  #  \u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u6e90\u5217\u8868;\nallow_credentials=True, # \u6307\u793a\u8de8\u57df\u8bf7\u6c42\u652f\u6301 cookies,\u9ed8\u8ba4\u662f False\nallow_methods=[\"*\"],  # \u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684 HTTP \u65b9\u6cd5\u5217\u8868;\nallow_headers=[\"*\"],  # \u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684 HTTP \u8bf7\u6c42\u5934\u5217\u8868\n)\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#sql","title":"\u5341\u4e00\u3001SQL\u6570\u636e\u5e93","text":"<p>FastAPI \u4f7f\u7528\u6570\u636e\u4e00\u822c\u91c7\u7528 Python \u793e\u533a\u6700\u6d41\u884c\u7684 ORM \u5e93\uff1aSQLAlchemy\uff1b</p> <p>\u5982\u679c\u4f60\u4f1a\u7528 Django \u7684 model\uff0c\u90a3\u57fa\u672c\u4e0a\u5c31\u5f88\u7b80\u5355\u4e86\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_3","title":"1\u3001\u521b\u5efa\u6570\u636e\u5e93\u5de5\u7a0b\u6587\u4ef6","text":"<p>\u5148\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u76ee\u5f55\uff0c\u91cc\u9762\u5305\u542b\u8fd9\u4e9b\u6587\u4ef6\uff1a</p> <pre><code>.\n\u2514\u2500\u2500 sql_app\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 crud.py\n    \u251c\u2500\u2500 database.py\n    \u251c\u2500\u2500 main.py\n    \u251c\u2500\u2500 models.py\n    \u2514\u2500\u2500 schemas.py\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_4","title":"2\u3001\u5b89\u88c5","text":"<p>\u5b89\u88c5 SQLAlchemy \u975e\u5e38\u7b80\u5355\uff1a</p> <pre><code>pip3 install SQLAlchemy\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3sqlalchemy","title":"3\u3001\u521b\u5efaSQLAlchemy\u90e8\u4ef6","text":"<p>SQLAlchemy \u652f\u6301\u591a\u79cd\u5e38\u7528\u7684\u6570\u636e\u7c7b\u578b\uff1a</p> <p>\u4ee5 sqlite \u4e3e\u4f8b\uff1a</p> <pre><code># sql_app/database.py\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\n# \u5b9a\u4e49\u6570\u636e\u5e93\u7684URL\nSQLALCHEMY_DATABASE_URL = \"sqlite:///./sql_app.db\"  \n# \u521b\u5efa SQLAlchemy \u5f15\u64ce\nengine = create_engine(  \nSQLALCHEMY_DATABASE_URL, connect_args={\"check_same_thread\": False} \n)\n# \u4f7f\u7528sessionmaker\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\u5b9e\u4f8b\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n# \u521b\u5efa\u4e00\u4e2aBase\u7c7b\uff0c\u7528\u8fd9\u4e2a\u7c7b\u7ee7\u627f\uff0c\u6765\u521b\u5efa\u6bcf\u4e2a\u6570\u636e\u5e93\u6a21\u578b\u6216\u7c7b\nBase = declarative_base()\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4_1","title":"4\u3001\u521b\u5efa\u6570\u636e\u5e93\u6a21\u578b","text":"<pre><code># sql_app/models.py\n# \u5bfc\u5165\u4e00\u4e9b\u6570\u636e\u5e93\u7c7b\u578b,\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e9b\u5b57\u6bb5\u7684\u7c7b\u578b\nfrom sqlalchemy import Boolean, Column, ForeignKey, Integer, String\n# \u5173\u7cfb\nfrom sqlalchemy.orm import relationship\n# \u5bfc\u5165\u90e8\u4ef6Base\u7c7b\u7528\u4e8e\u521b\u5efa\u6570\u636e\u5e93\u6a21\u578b\nfrom .database import Base\nclass User(Base):\n__tablename__ = \"users\"\n# \u6bcf\u4e00\u4e2a\u90fd\u4ee3\u8868\u5176\u76f8\u5e94\u6570\u636e\u5e93\u8868\u4e2d\u7684\u4e00\u5217\nid = Column(Integer, primary_key=True, index=True)\nemail = Column(String, unique=True, index=True)\nhashed_password = Column(String)\nis_active = Column(Boolean, default=True)\n# \u8868\u793a\u8be5\u8868\u4e0e\u5176\u4ed6\u76f8\u5173\u7684\u8868\u4e2d\u7684\u503c\nitems = relationship(\"Item\", back_populates=\"owner\")\nclass Item(Base):\n__tablename__ = \"items\"\nid = Column(Integer, primary_key=True, index=True)\ntitle = Column(String, index=True)\ndescription = Column(String, index=True)\nowner_id = Column(Integer, ForeignKey(\"users.id\"))\n# \u8868\u793a\u8be5\u8868\u4e0e\u5176\u4ed6\u76f8\u5173\u7684\u8868\u4e2d\u7684\u503c\nowner = relationship(\"User\", back_populates=\"items\")\n</code></pre> <p>\u5f53\u8bbf\u95ee <code>my_user.items</code> \u65f6\uff0cSQLAlchemy \u5b9e\u9645\u4e0a\u4f1a\u4ece <code>items</code> \u8868\u4e2d\u7684\u83b7\u53d6\u4e00\u6279\u8bb0\u5f55\u5e76\u5728\u6b64\u5904\u586b\u5145\u8fdb\u53bb\u3002</p> <p>\u6ce8\u610f\uff0c\u6570\u636e\u5e93\u6a21\u578b\u90fd\u662f\u5c06\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9 Column \u6765\u5b9a\u4e49\u7684\uff0c\u4f8b\u5982\uff1a</p> <pre><code>email = Column(String)\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5-pydantic","title":"5\u3001\u521b\u5efa Pydantic \u6a21\u578b","text":"<p>Pydantic \u6a21\u578b\u548c\u6570\u636e\u5e93\u6a21\u578b\u7684\u5c5e\u6027\u4e00\u81f4\uff1a</p> <pre><code># sql_app/schemas.py\nfrom typing import List, Union\nfrom pydantic import BaseModel\n# ========== item\u7684Pydantic\u6a21\u578b ============\n# models\u91cc\u9762\u7684Item\u4e5f\u6709title\u548cdescription\u5c5e\u6027\nclass ItemBase(BaseModel):\ntitle: str\ndescription: Union[str, None] = None\nclass ItemCreate(ItemBase):\npass\n# \u521b\u5efa\u7528\u4e8e\u8bfb\u53d6/\u8fd4\u56de\u7684Pydantic\u6a21\u578b/\u6a21\u5f0f\nclass Item(ItemBase):\nid: int\nowner_id: int\n# \u4e3a Pydantic \u63d0\u4f9b\u914d\u7f6e \nclass Config:\norm_mode = True\n# ========== user\u7684Pydantic\u6a21\u578b ============\n# models\u91cc\u9762\u7684User\u4e5f\u6709email\u5c5e\u6027\nclass UserBase(BaseModel):\nemail: str\n# \u5728\u521b\u5efa\u65f6\u6709\u4e00\u4e2apassword\u5c5e\u6027\nclass UserCreate(UserBase):\npassword: str\n# \u521b\u5efa\u7528\u4e8e\u8bfb\u53d6/\u8fd4\u56de\u7684Pydantic\u6a21\u578b/\u6a21\u5f0f\n# \u8bfb\u53d6\u7528\u6237\uff08\u4ece API \u8fd4\u56de\uff09\u65f6\u5c06\u4f7f\u7528\u4e0d\u5305\u62ecpassword\u7684User Pydantic\u6a21\u578b\nclass User(UserBase):\nid: int\nis_active: bool\nitems: List[Item] = []\n# \u4e3a Pydantic \u63d0\u4f9b\u914d\u7f6e\nclass Config:\n# orm_mode\u5c06\u544a\u8bc9 Pydantic\u6a21\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u5373\u5b83\u4e0d\u662f\u4e00\u4e2adict\uff0c\u800c\u662f\u4e00\u4e2a ORM \u6a21\u578b\norm_mode = True\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#6crud","title":"6\u3001CRUD\u5de5\u5177","text":"<p>\u7528\u6765\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u4ea4\u4e92\uff0cCRUD\u5206\u522b\u4e3a\uff1a\u589e\u52a0\u3001\u67e5\u8be2\u3001\u66f4\u6539\u548c\u5220\u9664\uff0c\u5373\u589e\u5220\u6539\u67e5\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#61","title":"6.1\u3001\u8bfb\u53d6\u6570\u636e","text":"<pre><code># sql_app/crud.py\nfrom sqlalchemy.orm import Session\n# \u5bfc\u5165SQLAlchemy\u6a21\u578b\u548cPydantic\u6a21\u578b\nfrom . import models, schemas\ndef get_user(db: Session, user_id: int):\n\"\"\"\u901a\u8fc7ID\u67e5\u8be2\u7528\u6237\"\"\"\nreturn db.query(models.User).filter(models.User.id == user_id).first()\ndef get_user_by_email(db: Session, email: str):\n\"\"\"\u901a\u8fc7email\u67e5\u8be2\u7528\u6237\"\"\"\nreturn db.query(models.User).filter(models.User.email == email).first()\ndef get_users(db: Session, skip: int = 0, limit: int = 100):\n\"\"\"\u83b7\u53d6\u6240\u6709\u7528\u6237\"\"\"\nreturn db.query(models.User).offset(skip).limit(limit).all()\ndef get_items(db: Session, skip: int = 0, limit: int = 100):\n\"\"\"\u83b7\u53d6\u6240\u6709\u9879\u76ee\"\"\"\nreturn db.query(models.Item).offset(skip).limit(limit).all()\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#62","title":"6.2\u3001\u521b\u5efa\u6570\u636e","text":"<pre><code># sql_app/crud.py\ndef create_user(db: Session, user: schemas.UserCreate):\n\"\"\"\u521b\u5efa\u7528\u6237\"\"\"\nfake_hashed_password = user.password + \"notreallyhashed\"\n# \u83b7\u53d6\u6570\u636e\u5e93\u6a21\u578b\u5b9e\u4f8b\ndb_user = models.User(email=user.email, hashed_password=fake_hashed_password)\n# add\u65b9\u6cd5\u6dfb\u52a0\u6570\u636e\ndb.add(db_user)\n# \u63d0\u4ea4\ndb.commit()\n# \u5237\u65b0\ndb.refresh(db_user)\nreturn db_user\ndef create_user_item(db: Session, item: schemas.ItemCreate, user_id: int):\ndb_item = models.Item(**item.dict(), owner_id=user_id)\ndb.add(db_item)\ndb.commit()\ndb.refresh(db_item)\nreturn db_item\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#7","title":"7\u3001\u4e3b\u7a0b\u5e8f","text":"<pre><code># sql_app/main.py\nfrom typing import List\nfrom fastapi import Depends, FastAPI, HTTPException\nfrom sqlalchemy.orm import Session\nfrom . import crud, models, schemas\nfrom .database import SessionLocal, engine\nmodels.Base.metadata.create_all(bind=engine)\napp = FastAPI()\n# \u521b\u5efa\u4f9d\u8d56\u9879,\u6bcf\u4e2a\u8bf7\u6c42\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u5e93\u4f1a\u8bdd/\u8fde\u63a5\uff08SessionLocal\uff09\ndef get_db():\ndb = SessionLocal()\ntry:\nyield db\nfinally:\ndb.close()\n# SQLAlchemy\u6a21\u578b\u901a\u8baf\u9700\u8981\u4e00\u4e9b\u7b49\u5f85\u65f6\u95f4,\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528async\u548cawait\u8bed\u53e5\uff1b\n@app.post(\"/users/\", response_model=schemas.User)\ndef create_user(user: schemas.UserCreate, db: Session = Depends(get_db)):\ndb_user = crud.get_user_by_email(db, email=user.email)\nif db_user:\nraise HTTPException(status_code=400, detail=\"Email already registered\")\nreturn crud.create_user(db=db, user=user)\n@app.get(\"/users/\", response_model=List[schemas.User])\ndef read_users(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):\nusers = crud.get_users(db, skip=skip, limit=limit)\nreturn users\n@app.get(\"/users/{user_id}\", response_model=schemas.User)\ndef read_user(user_id: int, db: Session = Depends(get_db)):\ndb_user = crud.get_user(db, user_id=user_id)\nif db_user is None:\nraise HTTPException(status_code=404, detail=\"User not found\")\nreturn db_user\n@app.post(\"/users/{user_id}/items/\", response_model=schemas.Item)\ndef create_item_for_user(\nuser_id: int, item: schemas.ItemCreate, db: Session = Depends(get_db)\n):\nreturn crud.create_user_item(db=db, item=item, user_id=user_id)\n@app.get(\"/items/\", response_model=List[schemas.Item])\ndef read_items(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):\nitems = crud.get_items(db, skip=skip, limit=limit)\nreturn items\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#8","title":"8\u3001\u6267\u884c\u9879\u76ee","text":"<pre><code>uvicorn sql_app.main:app --reload\n</code></pre> <p>\u4ee5\u4e0a\u5185\u5bb9\u662f\u5165\u95e8\u7248\u77e5\u8bc6\uff0c\u8fd8\u6709\u4e00\u4e9b\u8fdb\u9636\u7684\u5185\u5bb9\u6216\u8005\u66f4\u52a0\u5de5\u7a0b\u5316\u7684\u5185\u5bb9\uff0c\u6211\u60f3\u653e\u5230 FastAPI \u5b9e\u6218\u91cc\u9762\u53bb\u5199\uff0c\u597d\u5566\u5c31\u5148\u5230\u8fd9\u91cc\u5427\uff0c\u671f\u5f85\u8fdb\u9636\u5185\u5bb9\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/Linux%E4%B8%8A%E5%AE%89%E8%A3%85Node.js/","title":"Linux \u4e0a\u5b89\u88c5 Node.js","text":"<p>\u5728\u5b98\u7f51\u4e0b\u8f7d\uff1ahttps://nodejs.cn/download/current/</p> <p>\u4ee5\u4e0b\u4ee3\u7801\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u4e0b\u6765\uff0c\u4e00\u952e\u6267\u884c\uff1b</p> <pre><code># \u5b9a\u4e49\u4e0b\u8f7d\u7248\u672c\nnode_version=v18.16.1\n\n# \u5b9a\u4e49/opt\u76ee\u5f55\u4e0bnode\u76ee\u5f55\u7684\u540d\u79f0\uff0c\u4ee5\u517c\u5bb9\u591a\u4e2anode\u7248\u672c\nopt_node_dir=\"node${node_version}\"\n# \u4e0b\u8f7dnode\u5305\nwget https://cdn.npmmirror.com/binaries/node/${node_version}/node-${node_version}-linux-x64.tar.xz\n\n# \u89e3\u538b\u5b89\u88c5\u5305\ntar -xvJf node-${node_version}-linux-x64.tar.xz\n\n# \u653e\u5230/opt\u76ee\u5f55\u4e0b\nsudo rm -rf /opt/${opt_node_dir}\nsudo mv node-${node_version}-linux-x64 /opt/${opt_node_dir}\n# \u521b\u5efanpm\u3001node\u94fe\u63a5\u5230\u7cfb\u7edf\u76ee\u5f55\nsudo rm -rf /usr/local/bin/npm; sudo ln -s /opt/${opt_node_dir}/bin/npm   /usr/local/bin/npm\nsudo rm -rf /usr/local/bin/node; sudo ln -s /opt/${opt_node_dir}/bin/node   /usr/local/bin/node\n\n# \u8bbe\u7f6e\u6dd8\u5b9d\u955c\u50cf\u6e90\nnpm config set registry https://registry.npm.taobao.org\n\n# \u5b89\u88c5pnpm\nnpm install -g pnpm\n\n# \u521b\u5efapnpm\u94fe\u63a5\u5230\u7cfb\u7edf\u76ee\u5f55\nsudo rm -rf /usr/local/bin/pnpm; sudo ln -s /opt/${opt_node_dir}/bin/pnpm /usr/local/bin/pnpm\nsudo rm -rf /usr/local/bin/pnpx; sudo ln -s /opt/${opt_node_dir}/bin/pnpx /usr/local/bin/pnpx\n</code></pre> <p>\u5b89\u88c5\u5b8c\u4e4b\u540e\u67e5\u770b\u7248\u672c\uff0c\u6ca1\u62a5\u9519\u5c31\u8bf4\u660e\u5b89\u88c5\u597d\u4e86\uff1b</p> <pre><code>node -v\nnpm -v\npnpm -v\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/","title":"MySQL\u57fa\u7840","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#mysql","title":"MySQL\u57fa\u7840","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#_1","title":"\u4e00\u3001\u6570\u636e\u5e93\u57fa\u7840","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#1","title":"1\u3001\u6570\u636e\u5e93\u6982\u8ff0","text":"<p>\u2460\u6982\u5ff5\uff1a\u4f9d\u7167\u67d0\u79cd\u6570\u636e\u6a21\u578b\u7ec4\u7ec7\u8d77\u6765\u5e76\u5b58\u653e\u5728\u4e8c\u7ea7\u5b58\u50a8\u5668\uff08\u786c\u76d8\uff09\u4e2d\u7684\u6570\u636e\u96c6\u5408\u3002</p> <p>\u2461\u4e3b\u6d41\u7684\u6570\u636e\u5e93\uff1a\u5173\u7cfb\u578b\u7684\u6709 <code>MySQL</code>\u3001<code>SQLserver</code>\u3001<code>oracle</code>\u3001<code>DB2</code>\uff0c\u975e\u5173\u7cfb\u578b\uff1a<code>HBase</code>\u3001<code>NoSQL</code>\uff08<code>mongoDB</code>\u3001<code>redis</code>\u3001<code>memache</code>\uff09</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#2","title":"2\u3001\u6982\u5ff5\u6a21\u578b","text":"<p>\u2460 \u6982\u5ff5\uff1a\u662f\u73b0\u5b9e\u4e16\u754c\u5230\u673a\u5668\u4e16\u754c\u7684\u4e00\u4e2a\u4e2d\u95f4\u5c42\u4fa7\uff0c\u662f\u6570\u636e\u5e93\u8bbe\u8ba1\u4eba\u5458\u548c\u7528\u6237\u4e4b\u95f4\u4ea4\u6d41\u7684\u5de5\u5177\uff0c\u901a\u8fc7\u5b83\u53ef\u4ee5\u8f6c\u6362\u5f97\u5230\u6570\u636e\u6a21\u578b\u3002</p> <p>\u2461 \u7279\u70b9\uff1a\u7b80\u5355\u6e05\u6670\uff0c\u6613\u4e8e\u7406\u89e3\uff0c\u8f83\u5f3a\u7684\u8bed\u4e49\u8868\u8fbe\u80fd\u529b\u3002</p> <p>\u2462 \u6d89\u53ca\u5230\u7684\u57fa\u672c\u6982\u5ff5\uff1a</p> <ul> <li> <p>\u5b9e\u4f53\uff08\u4e00\u672c\u4e66\uff0c\u4e00\u4e2a\u4eba\uff09</p> </li> <li> <p>\u5c5e\u6027\uff08\u5bf9\u5b9e\u4f53\u7684\u63cf\u8ff0\uff09</p> </li> <li> <p>\u7801\uff1a</p> </li> <li> <p>\u8d85\u7801\uff1a\u80fd\u591f\u552f\u4e00\u786e\u5b9a\u7684\u4e00\u4e2a\u5b9e\u4f53\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\u7684\u96c6\u5408\u3002</p> </li> <li> <p>\u5019\u9009\u7801\uff1a\u80fd\u591f\u786e\u5b9a\u4e00\u4e2a\u5b9e\u4f53\u7684\u591a\u4e2a\u5c5e\u6027\u3002</p> </li> <li> <p>\u4e3b\u7801\uff1a\u80fd\u591f\u552f\u4e00\u786e\u5b9a\u7684\u4e00\u4e2a\u5b9e\u4f53\u7684\u5c5e\u6027\u3002</p> </li> <li> <p>\u5b9e\u4f53\u578b\u548c\u5b9e\u4f53\u96c6\uff1a\u8bfe\u7a0b\uff08\u8bfe\u7a0b\u53f7\u3001\u8bfe\u7a0b\u540d\uff09\u5c31\u662f\u4e00\u4e2a\u5b9e\u4f53\u578b\uff0c\u6240\u6709\u8bfe\u7a0b\u7ec4\u6210\u4e00\u4e2a\u5b9e\u4f53\u96c6\u3002</p> </li> <li> <p>\u8054\u7cfb</p> </li> <li> <p>\u4e00\u5bf9\u4e00\uff08<code>1:1</code>\uff09</p> </li> <li> <p>\u4e00\u5bf9\u591a\uff08<code>1\uff1an</code>\uff09</p> </li> <li> <p>\u591a\u5bf9\u591a\uff08<code>m\uff1an</code>\uff09</p> </li> </ul> <p>\u2463 E-R\u6a21\u578b\u548cE-R\u56fe</p> <ul> <li>\u7528\u77e9\u5f62\u8868\u793a\u5b9e\u4f53\uff0c\u7528\u692d\u5706\u8868\u793a\u5c5e\u6027\uff0c\u7528\u83f1\u5f62\u8868\u793a\u5173\u7cfb\uff0c\u7528\u76f4\u7ebf\u8fde\u63a5\u3002</li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#3","title":"3\u3001\u6570\u636e\u6a21\u578b","text":"<p>\u2460 \u6570\u636e\u6a21\u578b\u7684\u7279\u70b9</p> <ul> <li> <p>\u80fd\u6bd4\u8f83\u771f\u5b9e\u7684\u6a21\u62df\u73b0\u5b9e\u4e16\u754c\uff1b</p> </li> <li> <p>\u5bb9\u6613\u7406\u89e3\uff1b</p> </li> <li> <p>\u4fbf\u4e8e\u5728\u8ba1\u7b97\u673a\u4e0a\u5b9e\u73b0\uff1b</p> </li> </ul> <p>\u2461 \u6570\u636e\u6a21\u578b\u7684\u7ec4\u6210\u8981\u7d20</p> <ul> <li> <p>\u6570\u636e\u7ed3\u6784\uff08\u9759\u6001\u7279\u6027\u7684\u63cf\u8ff0\uff09</p> </li> <li> <p>\u6570\u636e\u64cd\u4f5c\uff08\u4e3b\u8981\u662f\u67e5\u8be2\u548c\u66f4\u65b0\uff09</p> </li> <li> <p>\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6</p> </li> </ul> <p>\u2462 \u5e38\u89c1\u7684\u6570\u636e\u6a21\u578b</p> <ul> <li> <p>\u5c42\u6b21\u6a21\u578b</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u7528\u6811\u578b\u7ed3\u6784\u8868\u793a\u5b9e\u4f53\u4e4b\u95f4\u7684\u8054\u7cfb\u7684\u6a21\u578b</p> </li> <li> <p>\u7279\u70b9\uff1a\u5728\u4e00\u4e2a\u5c42\u6b21\u6a21\u578b\u4e2d\u7684\u9650\u5236\u6761\u4ef6\u662f\uff1a\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u8282\u70b9\uff0c\u65e0\u7236\u8282\u70b9\uff0c\u6b64\u8282\u70b9\u4e3a\u6811\u7684\u6839\uff1b\u5176\u4ed6\u8282\u70b9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u7236\u8282\u70b9\u3002</p> </li> <li> <p>\u7f51\u72b6\u6a21\u578b</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u7528\u7f51\u7edc\u7ed3\u6784\u8868\u793a\u5b9e\u4f53\u7c7b\u578b\u53ca\u5176\u5b9e\u4f53\u4e4b\u95f4\u8054\u7cfb\u7684\u6a21\u578b</p> </li> <li> <p>\u7279\u70b9\uff1a</p> <ul> <li> <p>\u5141\u8bb8\u4e00\u4e2a\u4ee5\u4e0a\u7684\u8282\u70b9\u65e0\u7236\u8282\u70b9</p> </li> <li> <p>\u4e00\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709\u591a\u4e8e\u4e00\u4e2a\u7236\u8282\u70b9</p> </li> </ul> </li> <li> <p>\u5173\u7cfb\u6a21\u578b</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u7528\u4e8c\u7ef4\u8868\u7684\u5f62\u5f0f\u8868\u793a\u5b9e\u4f53\u548c\u5b9e\u4f53\u4e4b\u95f4\u8054\u7cfb\u7684\u6570\u636e\u6a21\u578b</p> </li> <li> <p>\u7279\u70b9\uff1a</p> <ul> <li> <p>\u6570\u636e\u7ed3\u6784\u7b80\u5355\uff08\u4e8c\u7ef4\u8868\uff09</p> </li> <li> <p>\u624e\u5b9e\u7684\u7406\u8bba\u57fa\u7840\uff1a</p> </li> </ul> </li> <li> <p>\u5173\u7cfb\u8fd0\u7b97\u7406\u8bba</p> </li> <li> <p>\u5173\u7cfb\u6a21\u5f0f\u8bbe\u8ba1\u7406\u8bba</p> </li> <li> <p>\u5173\u7cfb\u6570\u636e\u6a21\u578b\u7684\u4e09\u79cd\u7ea6\u675f\u5b8c\u6574\u6027</p> <ul> <li> <p>\u5b9e\u4f53\u5b8c\u6574\u6027\uff1a\u5b9e\u4f53\u7684\u4e3b\u952e\u4e0d\u80fd\u53d6\u7a7a\u503c\u3002</p> </li> <li> <p>\u53c2\u7167\u5b8c\u6574\u6027\uff1a\u662f\u6307\u53c2\u7167\u5173\u7cfb\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u5916\u7801\u8981\u4e48\u4e3a\u7a7a(NULL)\uff0c\u8981\u4e48\u7b49\u4e8e\u88ab\u53c2\u7167\u5173\u7cfb\u4e2d\u67d0\u4e2a\u5143\u7d20\u7684\u4e3b\u7801\u3002</p> </li> <li> <p>\u7528\u6237\u5b9a\u4e49\u5b8c\u6574\u6027\uff1a\u6307\u5bf9\u5173\u7cfb\u4e2d\u6bcf\u4e2a\u5c5e\u6027\u7684\u53d6\u503c\u4f5c\u4e00\u4e2a\u9650\u5236(\u6216\u79f0\u4e3a\u7ea6\u675f)\u7684\u5177\u4f53\u5b9a\u4e49\u3002\u6bd4\u5982 \u6027\u522b\u5c5e\u6027\u53ea\u80fd\u53d6\u201d\u7537\u201c\u6216\u201d\u5973\u201c \uff0c\u518d\u5c31\u662f\u5e74\u9f84\u7684\u53d6\u503c\u8303\u56f4\uff0c\u53ef\u4ee5\u53d6\u503c0-130 \uff0c\u4f46\u4e0d\u80fd\u53d6\u8d1f\u6570\uff0c\u56e0\u4e3a\u5e74\u9f84\u4e0d\u53ef\u80fd\u662f\u8d1f\u6570\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#mysql_1","title":"\u4e8c\u3001MySQL\u57fa\u672c\u77e5\u8bc6","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#1mysql","title":"1.MySQL\u6982\u8ff0","text":"<p>\uff081\uff09<code>MySQL</code> \u662f\u4e00\u4e2a\u5c0f\u578b\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u3002</p> <p>\uff082\uff09\u7279\u70b9\uff1a</p> <ul> <li> <p>\u56fe\u5f62\u5316\u7528\u6237\u754c\u9762\uff0c\u4f7f\u5f97\u7cfb\u7edf\u7ba1\u7406\u548c\u6570\u636e\u5e93\u7ba1\u7406\u8ddf\u5bb6\u76f4\u89c2\u3001\u7b80\u5355\u3002</p> </li> <li> <p>\u4e30\u5bcc\u7684\u7f16\u7a0b\u63a5\u53e3\u5de5\u5177</p> </li> <li> <p>\u652f\u6301\u591a\u7528\u6237\u3001\u591a\u7ebf\u7a0b</p> </li> <li> <p>\u8de8\u5e73\u53f0\u4f7f\u7528</p> </li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#2mysql","title":"2.MySQL\u7684\u5b89\u88c5","text":"<p>(1) <code>MySQL</code>\u4e3a\u514d\u8d39\u5f00\u6e90\uff0c\u53ef\u4ee5\u5728\u5b98\u7f51\u4e0b\u8f7d\u5b89\u88c5\uff1b<code>Github</code> \u94fe\u63a5\uff1ahttps://github.com/mysql/mysql-server</p> <p>(2) <code>DBeaver</code> \u662f <code>MySQL</code> \u7684\u56fe\u5f62\u5316\u7ba1\u7406\u8f6f\u4ef6\uff0c<code>Github</code> \u94fe\u63a5\uff1ahttps://github.com/dbeaver/dbeaver</p> <p>(3) \u70b9\u51fb\u3010\u8fde\u63a5\u3011\uff0c\u9009\u62e9 <code>MySQL</code></p> <p>(4) \u8f93\u5165\u8fde\u63a5\u540d\uff08\u53ef\u4ee5\u81ea\u5df1\u53d6\u540d\u5b57\uff09\uff0c\u8f93\u5165\u670d\u52a1\u5668 <code>IP</code> \u5730\u5740\uff08\u672c\u6b21\u76f4\u63a5\u7528 <code>localhost</code> \u5373\u53ef\uff09\uff0c\u8f93\u5165\u670d\u52a1\u5668\u7aef\u53e3\u53f7\u3001\u7528\u6237\u540d\uff08root\uff09\u548c\u5bc6\u7801\uff08\u53ef\u4ee5\u4e3a\u7a7a\uff09</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#3_1","title":"3.\u8fdc\u7a0b\u8bbf\u95ee\u6570\u636e\u5e93","text":"<p>(1) \u670d\u52a1\u5668\u7aef\u9700\u8981\u6388\u6743\uff1a<code>MySQL</code>\u67e5\u8be2\u7f16\u8f91\u4e0a\u8f93\u5165\uff1a</p> <pre><code>grant all privileges on*.*to\u2019\u7528\u6237\u540d\u2019@\u2019%\u2019 identified by\u2019\u5bc6\u7801\u2019 with grant option;\n</code></pre> <p><code>%</code>\uff0c\u662f\u6307\u5bf9\u6240\u6709\u4eba\uff0c\u5982\u679c\u662f\u9488\u5bf9\u67d0\u4e2a\u4eba\uff0c\u53ef\u66ff\u6362\u4e3a\u5bf9\u5e94\u7684 <code>IP</code></p> <p>(2) \u5173\u95ed\u9632\u706b\u5899</p> <p>(3) <code>Flush privileges</code>\uff08\u5237\u65b0\u6743\u9650\uff09</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#4mysql","title":"4.MySQL\u7cfb\u7edf\u6570\u636e\u7b80\u4ecb","text":"<p>(1) \u56db\u4e2a\u7cfb\u7edf\u6570\u636e\u5e93</p> <ul> <li><code>Information schema</code> \u662f\u4fe1\u606f\u6570\u636e\u5e93\u3002\u4fdd\u5b58 <code>MySQL</code> \u670d\u52a1\u5668\u7ef4\u62a4\u7684\u5176\u4ed6\u6570\u636e\u5e93\u7684\u4fe1\u606f\u3002</li> <li><code>MySQL</code> \u7cfb\u7edf\u6570\u636e\u5e93\uff0c\u4e3b\u8981\u5b58\u50a8\u4e86\u4e00\u4e9b\u5b58\u50a8 <code>MySQL</code>\u670d\u52a1\u7684\u7cfb\u7edf\u4fe1\u606f\u8868\u3002</li> <li><code>Performance_schema</code> \u7528\u4e8e\u6536\u96c6\u6570\u636e\u5e93\u670d\u52a1\u5668\u6027\u80fd\u53c2\u6570\u3002</li> <li><code>Sys</code> \u7cfb\u7edf\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u4e86\u89e3\u7cfb\u7edf\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002</li> </ul> <p>(2) \u5e38\u7528\u7684 <code>MySQL</code> \u6570\u636e\u7c7b\u578b</p> <ul> <li><code>int</code> \u6574\u578b\uff0c\u53ef\u4ee5\u5b58\u50a8 <code>2</code> \u7684 <code>31</code> \u6b21\u65b9\u5230 <code>2</code> \u7684 <code>31</code> \u6b21\u65b9\u4e4b\u95f4\u7684\u6574\u6570\u3002\u5360\u75284\u4e2a\u5b57\u8282\u3002</li> <li><code>Float</code> \u6d6e\u70b9\u578b\uff0c\u5c0f\u6570\uff0c\u5728 <code>MySQL</code> \u91cc\u662f <code>4</code> \u4e2a\u5b57\u8282\u5355\u7cbe\u5ea6\u3002</li> <li><code>Char</code> \u5b57\u7b26\u578b\uff0c\u5b58\u50a8\u5236\u5b9a\u957f\u5ea6\u7684\u5b9a\u957f\u975e\u7edf\u4e00\u7f16\u7801\u578b\u7684\u6570\u636e\u3002\uff08\u56fa\u5b9a\u957f\u5ea6\uff09</li> <li><code>Varchar</code> \u5b57\u7b26\u578b\uff0c\u6307\u5b9a\u6700\u5927\u957f\u5ea6\u3002\uff08\u53ef\u4ee5\u5c0f\u4e8e\uff09</li> </ul> <p>(3) \u6570\u636e\u5e93\u7684\u57fa\u672c\u64cd\u4f5c</p> <ul> <li><code>create database dbname;</code>\uff08\u521b\u5efa\u6570\u636e\u5e93\uff09</li> <li><code>Drop database dbname;</code>\uff08\u5220\u9664\u6570\u636e\u5e93\uff09</li> <li><code>Create table name;</code>\uff08\u521b\u5efa\u8868\uff09</li> <li><code>Varchar(5)</code> \u957f\u5ea6\u4e3a5\u4e2a\u5b57\u7b26\u4ee5\u5185</li> <li> <p>Primary key`\uff08\u4e3b\u952e\uff09</p> </li> <li> <p>Not null`\uff08\u4e0d\u80fd\u4e3a\u7a7a\uff09</p> </li> <li> <p><code>Create database dbname default character set utf8 collate utf8_general_ci;</code> (\u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u96c6\u4e3autf8\u7684\u6570\u636e\u5e93\uff0c\u5426\u5219\u8f93\u5165\u6c49\u5b57\u65f6\uff0c\u4f1a\u53d8\u6210\u95ee\u53f7\uff09</p> </li> <li><code>Create database test</code> \uff1a\u4ee3\u8868\u7684\u662f\u521b\u5efa\u6570\u636e\u5e93 test\uff1b</li> <li><code>default character set utf8</code> \uff1a\u4ee3\u8868\u7684\u662f\u5c06\u9ed8\u8ba4\u7f16\u7801\u683c\u5f0f\u8bbe\u7f6e\u4e3autf8\u683c\u5f0f\uff1b</li> <li><code>collate utf8_general_ci</code> \uff1a\u4ee3\u8868\u7684\u662f\u6570\u636e\u5e93\u6821\u5bf9\u89c4\u5219\uff1b</li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#_2","title":"\u4e09\u3001\u6570\u636e\u5e93\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#1_1","title":"1.\u6570\u636e\u5e93\u5bf9\u8c61","text":"<p>\uff081\uff09\u8868\uff1a\u6709\u884c\u548c\u5217\u8868\u793a\uff1b</p> <ul> <li> <p>\u6bcf\u5217\u4e3a\u4e00\u4e2a\u5b57\u6bb5\u3002</p> </li> <li> <p>\u6bcf\u884c\u4e3a\u4e00\u6761\u8bb0\u5f55\u3002</p> </li> <li> <p>\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u4e3b\u952e\uff0c\u4e3b\u952e\u4e0d\u80fd\u4e3a\u7a7a\u3002</p> </li> </ul> <p>\uff082\uff09\u5916\u952e\uff1a\u4e24\u4e2a\u5b9e\u4f53\u4e2d\u7684\u4e3b\u952e\uff0c\u5728\u5173\u7cfb\u8868\u4e2d\u6210\u4e3a\u5916\u952e\u3002</p> <p>\uff083\uff09\u7d22\u5f15\uff08<code>index</code>\uff09\uff1a\u6839\u636e\u6307\u5b9a\u7684\u6570\u636e\u5e93\u8868\u5217\u5efa\u7acb\u8d77\u6765\u7684\u987a\u5e8f\uff1b\u5b83\u63d0\u4f9b\u4e86\u5feb\u901f\u8bbf\u95ee\u6570\u636e\u7684\u9014\u5f84\u3002\u7d22\u5f15\u6240\u6307\u5411\u7684\u5217\u4e2d\u7684\u6570\u636e\u4e0d\u91cd\u590d\u3002</p> <p>\uff084\uff09\u89c6\u56fe\uff08<code>view</code>\uff09\uff1a\u662f\u67e5\u8be2\u6570\u636e\u5e93\u4ea7\u751f\u7684\uff0c\u4ece\u6570\u636e\u5e93\u53bb\u76f8\u5e94\u7684\u6570\u636e\u8fdb\u884c\u5448\u73b0\uff0c\u89c6\u56fe\u5185\u6570\u636e\u65e0\u6cd5\u4fee\u6539\uff0c\u5728\u57fa\u8868\u4e2d\u4fee\u6539\u540e\uff0c\u89c6\u56fe\u8868\u4f1a\u81ea\u52a8\u4fee\u6539\u3002</p> <p>\uff085\uff09\u89e6\u53d1\u5668\uff08<code>trigger</code> .\u6273\u673a\u3001\u5f00\u67aa\uff09\uff1a\u8bbe\u7f6e\u4e00\u4e2a\u89e6\u53d1\u7684\u52a8\u4f5c\uff0c\u5bf9\u8868\u81ea\u52a8\u8fdb\u884c\u589e\u5220\u6539\u67e5\u3002</p> <p>\uff086\uff09\u5b58\u50a8\u8fc7\u7a0b\uff08<code>store procedure</code>\uff09:\u5b58\u50a8\u5728\u6570\u636e\u5e93\u7684 <code>SQL</code> \u7a0b\u5e8f\u3002 </p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#2_1","title":"2.\u8868\u7ea6\u675f","text":"<ul> <li> <p>\u4e3b\u952e\u7ea6\u675f\uff08<code>primary key</code>\uff09</p> </li> <li> <p>\u4e00\u4e2a\u8868\u901a\u8fc7\u4e00\u4e2a\u5217\u6216\u591a\u4e2a\u5217\u7ec4\u5408\u7684\u6570\u636e\u6765\u552f\u4e00\u6807\u8bc6\u8868\u603b\u7684\u6bcf\u4e00\u884c\uff0c\u8fd9\u4e00\u5217\u6216\u591a\u4e2a\u5217\u7684\u7ec4\u5408\u6210\u4e3a\u4e3b\u952e\u3002</p> <ul> <li> <p>\u4e3b\u952e\u5217\u5177\u6709\u552f\u4e00\u6027\uff1b</p> </li> <li> <p>\u4e00\u4e2a\u8868\u53ea\u6709\u4e00\u4e2a\u4e3b\u952e\uff1b</p> </li> <li> <p><code>MySQL</code> \u901a\u8fc7\u4e3b\u952e\u5efa\u8bae\u552f\u4e00\u7d22\u5f15\uff0c\u52a0\u5feb\u5bf9\u4e3b\u952e\u7684\u67e5\u8be2\u901f\u5ea6\uff1b</p> </li> </ul> </li> <li> <p>\u4e3b\u952e\u7ea6\u675f\u4e24\u79cd\u5199\u6cd5</p> <ul> <li>\u5217\u7ea7\u7ea6\u675f\uff1a\u76f4\u63a5\u5728\u5b57\u6bb5\u540e\u5b9a\u4e49 <code>primary key</code>\uff1b</li> </ul> <pre><code>Create table mikigo (\nm_name primary key\n);\n</code></pre> <ul> <li>\u8868\u7ea7\u7ea6\u675f\uff1a\u5148\u5199\u5b8c\u8868\uff0c\u518d\u5b9a\u4e49\u8868\u91cc\u7684 <code>primary key</code>\uff1b</li> </ul> <pre><code>Create table mikigo (\nm_name varchar(6),\nm_id varchar(11),\nConstraint pk_id primary key(m_id)\n);\n</code></pre> </li> <li> <p>\u5916\u952e\u7ea6\u675f\uff08<code>foreign</code>\uff09</p> </li> </ul> <p>\u5b9a\u4e49\uff1a\u5efa\u7acb\u548c\u5f3a\u8c03\u4e24\u4e2a\u8868\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5373\u5173\u7cfb\u8868\u7684\u4e00\u4e2a\u5217\u4e0e\u53e6\u4e00\u4e2a\u8868\u4e2d\u7684\u5177\u6709\u552f\u4e00\u6027\u7684\u5217\u76f8\u5173\uff0c\u8fd9\u4e2a\u5217\u5c31\u662f\u5173\u7cfb\u8868\u4e2d\u7684\u5916\u952e\u3002</p> <ul> <li> <p>\u552f\u4e00\u6027\u7ea6\u675f\uff08<code>unique</code>\uff09</p> </li> <li> <p>\u4fdd\u8bc1\u5728\u975e\u4e3b\u952e\u7684\u6307\u5b9a\u552f\u4e00\u6027\u7684\u5217\u4e0a\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u7684\u6570\u636e\uff08\u5728\u5b66\u751f\u8868\u4e2d\u6307\u5b9a\u4e86\u5b66\u597d\u4e3a\u4e3b\u952e\uff0c\u8eab\u4efd\u8bc1\u5217\u4f5c\u4e3a\u975e\u4e3b\u952e\u5efa\u7acb\u552f\u4e00\u6027\u7ea6\u675f\uff0c\u5219\u8eab\u4efd\u8bc1\u53f7\u4e0d\u80fd\u91cd\u590d\uff09\uff1b</p> </li> <li> <p>\u552f\u4e00\u6027\u7ea6\u675f\u53ef\u4ee5\u5efa\u7acb\u5728\u591a\u4e2a\u975e\u4e3b\u952e\u7684\u5217\u4e0a\uff0c\u800c\u4e14\u5141\u8bb8\u4e3a\u7a7a\u503c\uff08\u548c\u4e3b\u952e\u7ea6\u675f\u7684\u533a\u522b\uff09\uff1b</p> </li> <li> <p>\u68c0\u67e5\u7ea6\u675f\uff08<code>check</code>\uff09\uff1a\u5728 <code>MySQL</code> \u4e0a\u6ca1\u6709\u7528\uff1b</p> </li> <li> <p>\u9ed8\u8ba4\u503c\u7ea6\u675f\uff08<code>default</code>\uff09\uff1a\u5982\u679c\u7528\u6237\u6ca1\u6709\u660e\u786e\u51fa\u67d0\u4e00\u5217\u7684\u503c\uff0c\u5c06\u663e\u793a\u4e3a\u9ed8\u8ba4\u503c\uff1b</p> </li> <li> <p>\u7a7a\u503c\u7ea6\u675f\uff08<code>null</code>\uff09\uff1a\u4e0d\u4e3a\u7a7a\u65f6\u7ea6\u675f\u4e3a <code>not null</code>\uff0c \u4e3a\u7a7a\u4e3a <code>null</code>\uff0c\u4e3a\u7a7a\u53ef\u4ee5\u4e0d\u5199\u3002</p> </li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#3sql","title":"3.SQL\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u53e5","text":"<p>SQL\uff08structrued query language\uff09\u67e5\u8be2\u8bed\u53e5\u5305\u542b\u56db\u7c7b\uff1a</p> <ul> <li> <p>\u6570\u636e\u5b9a\u4e49\u8bed\u8a00\uff08<code>DDL</code>\uff0cdata definition language\uff09</p> </li> <li> <p>\u6570\u636e\u64cd\u7eb5\u8bed\u8a00\uff08<code>DML</code>,data manipulation language\uff09</p> </li> <li> <p>\u6570\u636e\u63a7\u5236\u8bed\u8a00\uff08<code>DCL</code>,data control language\uff09</p> </li> <li> <p>\u7cfb\u7edf\u5b58\u50a8\u8bed\u8a00\uff08System Stored procedure\uff09</p> </li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#31","title":"3.1.\u6570\u636e\u5b9a\u4e49\u8bed\u8a00","text":"<p>(1) <code>Create table</code>\uff08\u5efa\u8868\uff09</p> <pre><code>Create table \u8868\u540d(\nsname varchar(3) not null,\nSid varchar(5) primary key\n);\n</code></pre> <p>(2) <code>Create index</code>\uff08\u5efa\u7d22\u5f15\uff09</p> <p>(3) <code>Alter table</code>\uff08\u4fee\u6539\u8868\uff09</p> <p>(4) <code>Drop table</code>\uff08\u5220\u8868\uff09</p> <p>\u2460 <code>Drop table \u8868\u540d</code>\uff08\u5220\u9664\u67d0\u4e2a\u8868\uff09</p> <p>(5) <code>Drop index</code>\uff08\u5220\u7d22\u5f15\uff09</p> <p>(6) <code>Insert into....select...</code> \u8868\u793a\u5c06\u4e00\u4e2a\u8868\u4e2d\u7684\u6570\u636e\u63d2\u5165\u5230\u53e6\u4e00\u4e2a\u8868\u4e2d</p> <pre><code>Insert into student(sno,ssex,sname) Select sno,ssex,sname from student_1\n</code></pre> <p>(7) <code>update \u8868\u540d set \u5217\u540d=\u2019\u66f4\u65b0\u503c\u2019 Where..</code>  (\u8868\u793a\u66f4\u65b0\u67d0\u4e2a\u5b57\u6bb5\u6570\u636e\uff09</p> <pre><code>update student\nSet sname=\u2019mikigo\u2019\nWhere sno=401\n</code></pre> <p>(8) <code>delete from \u8868\u540d Where..</code> \uff08\u8868\u793a\u5220\u9664\u67d0\u884c\u6570\u636e\uff09(drop \u662f\u76f4\u63a5\u5220\u8868\uff0cdelete\u662f\u5bf9\u8868\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u5220\u9664)</p> <pre><code>Delete from student\nWhere sno=101\n</code></pre> <p>\uff089\uff09alter table\u4fee\u6539\u8868</p> <ul> <li>\u4fee\u6539\u8868\u540d\uff1a<code>Alter table \u539f\u8868\u540d rename to \u76ee\u6807\u8868\u540d</code></li> </ul> <pre><code>Alter table student rename to student_1\n</code></pre> <ul> <li>\u65b0\u589e\u5b57\u6bb5\uff1a<code>Alter table \u8868\u540d add \u5b57\u6bb5\u540d varchar(50) null</code></li> </ul> <pre><code>Alter table student add pass_or_not varchar\uff0850\uff09\n</code></pre> <ul> <li>\u4fee\u6539\u5b57\u6bb5\u5c5e\u6027\uff1a<code>Alter table \u8868\u540d change \u539f\u5b57\u6bb5\u540d \u65b0\u5b57\u6bb5\u540d varchar(4)</code></li> </ul> <pre><code> Alter table student change sno sno varchar(4) primary key\n</code></pre> <ul> <li>\u5220\u9664\u5b57\u6bb5\uff1a<code>alter table \u8868\u540d drop column \u5b57\u6bb5\u540d</code></li> </ul> <pre><code> Alter table student drop column pass_or_not\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#32","title":"3.2.\u6570\u636e\u64cd\u7eb5\u8bed\u8a00","text":""},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#1-insert","title":"(1) insert\u63d2\u5165\u8bed\u53e5","text":"<pre><code>Insert into student(sno, sname)\uff08\u8868\u540d\uff09\nValues\uff08001\uff0cmikigo\uff09\n</code></pre> <p>\u8868\u793a\u5411 <code>student</code>\u8868\u4e2d\u63d2\u5165\u4e00\u884c\u6570\u636e\u3002</p> <pre><code>Insert into student2\uff08sno,sname\uff09\nSelect student1 (s_no,s_name)\n</code></pre> <p>\u8868\u793a\u5c06 <code>student1</code> \u4e2d\u7684\u5185\u5bb9\u63d2\u5165\u5230 <code>student2</code> \u4e2d\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#2-select","title":"(2) select\u67e5\u8be2","text":"<p>\u2460 <code>Select * From student</code></p> <p>(\u67e5\u8be2 <code>student</code> \u8868\u4e2d\u6240\u6709\u5217)</p> <p>\u2461 <code>Distinct</code> \u8fc7\u6ee4\u91cd\u590d\u884c</p> <pre><code>Select distinct sno from score\n</code></pre> <p>\uff08\u4ece\u6210\u7ee9\u8868\u4e2d\u67e5\u8be2\u5254\u91cd\u540e\u7684\u5b66\u53f7\uff09</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#3-where","title":"(3) Where \u5b50\u53e5\uff0c\u6307\u5b9a\u6761\u4ef6\u67e5\u8be2","text":"<p>\u2460 \u8303\u56f4\u8fd0\u7b97\u7b26 <code>between...and..</code>\uff0c<code>not between....and...</code>\uff08\uff08\u4e0d\uff09\u5728\u4ec0\u4e48\u4e4b\u95f4\uff09</p> <pre><code>Select title , price\nFrom titles\nWhere price between 10 and 30\n</code></pre> <p>\u2461 \u5217\u8868\u8fd0\u7b97\u7b26 <code>in</code> \uff0c<code>not in</code>\uff08\u8868\u793a\u5728\u6307\u5b9a\u9879\u4e2d\uff09</p> <pre><code>Select sname\nFrom student\nWhere sno in (\u2018001\u2019,\u2019002\u2019)\n</code></pre> <p>\u2462 \u7a7a\u503c\u5224\u65ad\u7b26 <code>is null</code> , <code>is not null</code>  \uff08\u662f\u5426\u4e3a\u7a7a\uff09</p> <pre><code>Select title , price\nFrom titles\nWhere price is null\n</code></pre> <p>\u2463 \u903b\u8f91\u8fd0\u7b97\u7b26 <code>and</code> , <code>or</code></p> <ul> <li><code>And</code> \u8868\u793a\u540c\u65f6\u6ee1\u8db3</li> <li><code>Or</code> \u8868\u793a\u6ee1\u8db3\u4e00\u4e2a\u6761\u4ef6\u5373\u53ef</li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#4-like-not-like","title":"(4) \u6a21\u7cca\u5339\u914dlike \uff0c not like","text":"<p>\u2460 \u5339\u914d\u4efb\u610f\u7c7b\u578b\u957f\u5ea6\u7684\u5b57\u7b26\u7528 <code>%</code>\uff0c\u56fa\u5b9a\u957f\u5ea6\u5b57\u7b26\u7528\u4e0b\u5212\u7ebf <code>_</code></p> <pre><code>Select sname ,sage\nFrom student\nWhere sname like \u2018%\u738b%\u2019 (\u2018\u738b_\u2019)\n</code></pre> <p>\u8868\u793a\u67e5\u8be2\u547d\u4e2d\u4e2d\u5e26\u6709\u201c\u738b\u201d\u7684\u59d3\u540d</p> <p>\u2461 \u6307\u5b9a\u4e00\u4e2a\u5b57\u7b26\u3001\u5b57\u7b26\u4e32\u6216\u8303\u56f4\u7528[  ]\u3001<code>[^  ]</code></p> <pre><code>Select sname\nFrom student\nWhere sname like \u2018[b-k]%\u2019\n</code></pre> <p>\u8868\u793a\u540d\u5b57\u5f00\u5934\u662f <code>b-k</code> \u7684\u59d3\u540d</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#5","title":"(5) \u96c6\u5408\u51fd\u6570\uff08\u805a\u5408\u51fd\u6570\uff09","text":"<p>\u2460 \u5e73\u5747\u503c <code>avg</code></p> <p>\u2461 \u603b\u548c <code>sum</code></p> <p>\u2462 \u6700\u5c0f\u503c <code>min</code></p> <p>\u2463 \u6700\u5927\u503c <code>max</code></p> <p>\u2464 \u8ba1\u6570 <code>count</code></p> <p>\u96c6\u5408\u51fd\u6570\u4f7f\u7528\u5728select \u540e\u9762</p> <pre><code>Select min(price) from titles\n</code></pre> <p>\u8868\u793a\u5728\u8868\u4e2d\uff0c\u53d6\u4ef7\u683c\u7684\u6700\u5c0f\u503c\uff0cmin(price) as \u4ef7\u683c</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#6-group-by","title":"(6) Group by \u5b50\u53e5\uff0c\u5206\u7ec4","text":"<p>\u2460 <code>Group by</code> \u5b50\u53e5\u4e2d\uff0c\u4e0d\u80fd\u4f7f\u7528\u96c6\u5408\u51fd\u6570</p> <pre><code>Select sname,ssex\nFrom student\nGroup by ssex\n</code></pre> <p>\u8868\u793a\u5df2\u6027\u522b\u4f5c\u4e3a\u5206\u7ec4\uff0c\u7edf\u8ba1\u663e\u793a\u59d3\u540d\u548c\u6027\u522b</p> <p>\u2461 <code>select</code> \u4e2d\u591a\u4e2a\u975e\u96c6\u5408\u9879\u51fa\u73b0\u65f6\uff0c<code>group by</code> \u91cc\u9762\u4e5f\u8981\u6709\u540c\u6837\u7684\u975e\u96c6\u5408\u9879</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#7-order-by","title":"(7) Order by \u6392\u5e8f\uff1a","text":"<p>\u5bf9\u67e5\u8be2\u7ed3\u679c\u6309\u7167\u5347\u5e8f\uff08<code>asc</code>\uff09\u6216\u964d\u5e8f\uff08<code>desc</code>\uff09\u6392\u5217\u3002</p> <pre><code>Select sname,sage\nFrom student\nWhere ssex=\u2019\u7537\u2019\nOrder by sage desc\n</code></pre> <p>\u8868\u793a\u5c06 <code>student</code> \u8868\u4e2d\u7684\u7537\u751f\uff0c\u6309\u7167\u5e74\u9f84\u964d\u5e8f\u6392\u5217\uff0c\u663e\u793a\u59d3\u540d\u548c\u5e74\u9f84</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#8having","title":"(8)having ...\u6761\u4ef6","text":"<p><code>Having</code> \u5b50\u53e5\u4e0e <code>group by</code> \u4f7f\u7528\u8868\u793a\u589e\u52a0\u67d0\u4e2a\u6761\u4ef6\u3002</p> <pre><code>select count(*)\nFrom student\nGroup by ssex\nHaving age&lt;15\n</code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#9","title":"(9)\u5d4c\u5957\u67e5\u8be2","text":"<p>\u2460<code>Where \u8868\u8fbe\u5f0f \uff08not\uff09in  (\u5b50\u67e5\u8be2)</code></p> <pre><code>select *\nfrom score\nwhere cno in(select cno\nfrom course\nwhere tno in(select tno from teacherwhere depart ='\u7535\u5b50\u5de5\u7a0b\u7cfb'));\n</code></pre> <p>\u2461\u6bd4\u8f83\u8fd0\u7b97\u7b26</p> <ul> <li><code>Any</code> : <code>where degree &gt;any(81.85)</code>\u8868\u793adegree \u5927\u4e8e81\u621685\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u3002</li> <li><code>All</code>  : <code>where degree &gt;all(81.85)</code>\u8868\u793adegree \u5927\u4e8e81\u621685\u4e2d\u7684\u6bcf\u4e00\u4e2a\u3002</li> <li><code>Some</code> \uff1a\u540c any</li> </ul> <p>\u2462\u8054\u63a5\u67e5\u8be2</p> <ul> <li>\u5185\u8fde\u63a5</li> </ul> <pre><code>from student inner join score on student.sno=score.sno\n</code></pre> <p>\u6216</p> <pre><code>Where student.sno=score.sno\n</code></pre> <ul> <li> <p>\u5916\u8fde\u63a5</p> </li> <li> <p>\u5de6\u8054\u63a5\uff1a\uff08\u4ee5\u5de6\u8fb9\u8868\u4e3a\u57fa\u51c6\uff0c\u5de6\u8fb9\u6240\u6709\u6570\u636e\u8981\u51fa\u73b0\uff0c\u53f3\u8fb9\u8868\u65e0\u6570\u636e\u7684\uff0c\u4e3a\u7a7a\u503c\uff09</p> <pre><code>from course left join score on course.cno=score.cno </code></pre> </li> <li> <p>\u53f3\u8054\u63a5\uff1a (\u4ee5\u53f3\u8fb9\u8868\u4e3a\u57fa\u51c6\uff0c\u53f3\u8fb9\u6240\u6709\u6570\u636e\u8981\u51fa\u73b0\uff0c\u5de6\u8fb9\u8868\u65e0\u6570\u636e\u7684\uff0c\u4e3a\u7a7a\u503c\uff09</p> <pre><code>from course right join score on course.cno=score.cno\n</code></pre> </li> </ul>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#33dcl","title":"3.3.\u6570\u636e\u63a7\u5236\u8bed\u8a00\uff08<code>DCL</code>\uff09","text":"<p>\uff081\uff09grant \u8bed\u53e5</p> <p><code>Grant \u6743\u96501\uff0c\u6743\u96502 on \u8868\u540d to uername</code></p> <p>\u4e3a\u67d0\u4e2a\u7528\u6237\u6388\u4e88\u67d0\u4e2a\u6743\u9650</p> <pre><code>grant update on student to mikigo\n</code></pre> <p>\uff082\uff09<code>Revoke</code> \u8bed\u53e5</p> <p><code>Revoke \u6743\u96501\uff0c\u6743\u96502 on \u8868\u540d from uername</code></p> <p>\u6536\u56de\u67d0\u4e2a\u7528\u6237\u7684\u67d0\u4e2a\u6743\u9650</p> <pre><code>Revoke update on student from mikigo </code></pre>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#34view","title":"3.4.View \u89c6\u56fe","text":"<p>\uff081\uff09\u89c6\u56fe\u662f\u67d0\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u865a\u8868\u3002\u8bd5\u56fe\u5bf9\u5e94\u7684\u6570\u636e\u5e76\u4e0d\u5b9e\u9645\u5b58\u5728\u3002</p> <p>\uff082\uff09\u8bed\u6cd5\uff1a<code>create view \u89c6\u56fe\u540d\u79f0 As Select \u5217\u540d\u79f0 from \u8868\u540d\u79f0 where \u6761\u4ef6</code></p> <pre><code>Create view mikigo\nAs\nSelect *\nFrom Student\nWhere ssex=\u2019\u7537\u2019\n</code></pre> <p>\uff083\uff09\u4fee\u6539\u89c6\u56fe\uff1adrop view \u89c6\u56fe\u540d\u79f0\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#35procedure","title":"3.5.procedure \u5b58\u50a8\u8fc7\u7a0b","text":"<p>\uff081\uff09\u5b58\u50a8\u8fc7\u7a0b\u7684\u4e09\u4e2a\u7ec4\u6210\u90e8\u5206\u3002</p> <ul> <li>\u6240\u6709\u7684\u8f93\u5165\u53c2\u6570\u4ee5\u53ca\u4f20\u7ed9\u8c03\u7528\u8005\u7684\u8f93\u51fa\u53c2\u6570\uff1b</li> <li>\u88ab\u6267\u884c\u7684\u6b63\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u8bed\u53e5\uff0c\u5305\u62ec\u8c03\u7528\u5176\u5b83\u5b58\u50a8\u8fc7\u7a0b\u7684\u8bed\u53e5\uff1b</li> <li>\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\u7684\u72b6\u6001\u503c\uff0c\u4ee5\u6307\u660e\u8c03\u7528\u662f\u5426\u6210\u529f\uff1b</li> </ul> <p>\uff082\uff09\u4f7f\u7528 <code>DBeaver</code> \u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b</p> <ul> <li> <p>\u70b9\u51fb\u51fd\u6570\u53f3\u952e\uff0c\u9009\u62e9\u65b0\u5efa\u51fd\u6570\uff0c\u8f93\u5165\u5b9a\u4e49\u6a21\u5f0f\u3001\u53c2\u6570\u540d\u3001\u6570\u636e\u7c7b\u578b\uff1b</p> </li> <li> <p>\u70b9\u51fb\u5b8c\u6210\uff0c\u5728 <code>begin</code> \u548c <code>end</code> \u4e4b\u95f4\u5b58\u50a8\u8fc7\u7a0b\u8bed\u53e5\uff0c\u70b9\u51fb\u4fdd\u5b58\uff0c\u8bbe\u7f6e\u8fc7\u7a0b\u540d\uff1b</p> </li> </ul> <pre><code>Begin\nWhile i&lt;30 do\nInsert into score values (floor(110+rand()+20),\u20195-245\u2019,\u201999\u2019);\nSet i=i+1;\nEnd while;\nEnd\n</code></pre> <p>\u8c03\u7528\u7684\u4f7f\u7528\uff1a<code>call</code> \u8fc7\u7a0b\u540d\uff08\u8d4b\u503c\uff09\uff1b</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#36trigger","title":"3.6.trigger \u89e6\u53d1\u5668","text":"<p>\uff081\uff09\u89e6\u53d1\u5668\u662f\u4e00\u79cd\u7279\u6b8a\u7c7b\u578b\u7684\u5b58\u50a8\u8fc7\u7a0b\uff0c\u4e3b\u8981\u901a\u8fc7\u4e8b\u4ef6\u8fdb\u884c\u89e6\u53d1\u800c\u88ab\u6267\u884c\u3002\u89e6\u53d1\u5668\u7528\u4e8eMySQL\u7ea6\u675f\u3001\u9ed8\u8ba4\u503c\u548c\u89c4\u5219\u7684\u5b8c\u6574\u65b0\u7684\u68c0\u67e5\u3002</p> <p>\uff082\uff09\u89e6\u53d1\u5668\u7c7b\u578b\uff1a</p> <ul> <li><code>Update</code> \u5728\u66f4\u65b0\u65f6\u89e6\u53d1\uff1b</li> <li><code>Insert</code> \u5728\u63d2\u5165\u65f6\u89e6\u53d1\uff1b</li> <li><code>Delete</code> \u5728\u5220\u9664\u64cd\u4f5c\u65f6\u89e6\u53d1\uff1b</li> <li><code>After</code> \u5728\u4e00\u4e2a\u89e6\u53d1\u52a8\u4f5c\u4e4b\u540e\u6fc0\u6d3b\uff1b</li> </ul> <p>\uff083\uff09\u8bed\u6cd5\uff1a</p> <pre><code>Create trigger huang\nAfter update on student for each row\nInsert into student_1\nValues (404,\u2019\u660e\u5929\u2019,\u2019\u7537\u2019)\n</code></pre> <p>\u8868\u793a\u5f53\u5bf9 <code>student</code> \u8868\u8fdb\u884c\u66f4\u65b0\u4e4b\u540e\uff0c\u5c06\u4e00\u7ec4\u6570\u636e\u63d2\u5165\u5230 <code>student_1</code> \u8868\u4e2d\u3002</p>"},{"location":"%E5%89%8D%E5%90%8E%E7%AB%AF/MySQL%E5%9F%BA%E7%A1%80/#37","title":"3.7.\u5e38\u89c1\u51fd\u6570","text":"<p>\uff081\uff09<code>Left/right</code> \u51fd\u6570</p> <p><code>Select left (\u2018kdhoa\u2019,3)</code> \u8868\u793a\u4ece\u5de6\u5411\u53f3\uff0c\u622a\u53d63\u4e2a\u5b57\u8282</p> <p>\uff082\uff09<code>Length</code> \u51fd\u6570</p> <p><code>Select length(\u2018ijgoado\u2019)</code> \u8868\u793a\u62ec\u53f7\u5185\u5b57\u7b26\u7684\u957f\u5ea6</p> <p>\uff083\uff09<code>Replace</code> \u51fd\u6570</p> <p><code>Select replace (\u2018ydk\u2019,\u2019k\u2019,\u2019a\u2019)</code> \u8868\u793a\u5c06\u5b57\u7b26\u4e2d\u7684k \u66ff\u6362\u6210a</p> <p>\uff084\uff09<code>Substring</code> \u51fd\u6570</p> <p><code>Select substring (\u2018eohgdhd\u2019,2,3)</code> \u8868\u793a\u4ece\u7b2c2\u4f4d\u5f00\u59cb\u53d6\uff0c\u5f80\u540e\u53d63\u4f4d(ohg)</p> <p>\uff085\uff09\u65e5\u671f\u51fd\u6570</p> <ul> <li><code>Now( )</code>\uff1a\u8868\u793a\u5f53\u524d\u65e5\u671f\uff0c\u7cbe\u786e\u5230\u65f6\u5206\u79d2 <code>2019-10-29 19:31:20</code> \uff1b</li> <li><code>curdate( )</code>\uff1a\u8868\u793a\u5f53\u524d\u65f6\u95f4\uff0c\u7cbe\u786e\u5230\u65e5 <code>2019-10-29</code></li> <li><code>Year( )</code>\uff1a\u8868\u793a\u65e5\u671f\u5e74\u4efd <code>2019</code></li> <li><code>Month( )</code>\uff1a\u8868\u793a\u65e5\u671f\u6708\u4efd <code>10</code></li> <li><code>Day( )</code>\uff1a\u8868\u793a\u65e5\u671f\u7684\u65e5 <code>29</code></li> </ul> <p>\uff086\uff09<code>Datediff</code> \u51fd\u6570</p> <ul> <li>\u8868\u793a\u51fd\u6570\u8fd4\u56de\u4e24\u4e2a\u65e5\u671f\u4e4b\u95f4\u7684\u5929\u6570</li> <li><code>Select datediff (\u2018time1\u2019,\u2019time2\u2019)</code>  \u8ba1\u7b97\u903b\u8f91\u662f <code>time1-time2</code></li> </ul>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8Asudo%E5%85%8D%E5%AF%86/","title":"Linux \u4e0a sudo \u514d\u5bc6","text":"<pre><code>sudo visudo\n</code></pre> <p>\u6216\u8005</p> <pre><code>sudo vim /etc/sudoers\n</code></pre> <p>\u627e\u5230</p> <pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n</code></pre> <p>\u52a0\u4e2a NOPASSWD: \u5c31\u597d\u4e86\uff1b</p> <pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) NOPASSWD: ALL\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2VNC%E9%85%8D%E7%BD%AE/","title":"Linux \u4e0a\u8fdc\u7a0b\u684c\u9762 VNC \u670d\u52a1\u914d\u7f6e","text":""},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2VNC%E9%85%8D%E7%BD%AE/#_1","title":"\u670d\u52a1\u7aef","text":"<p>\u4e00\u952e\u90e8\u7f72\u811a\u672c\uff1a</p> <pre><code>#!/bin/bash\n# \u5b89\u88c5VNC\nsudo apt install x11vnc -y\n# \u5bc6\u7801\u8bbe\u7f6e\u4e3a1\nsudo x11vnc -storepasswd 1 /etc/x11vnc.pass\n# \u914d\u7f6e\u5f00\u673a\u81ea\u542f\u670d\u52a1\nvnc_connect(){\nsudo bash -c 'cat &lt;&lt; EOF &gt; \"/lib/systemd/system/x11vnc.service\"\n[Unit]\nDescription=Start x11vnc at startup\nAfter=multi-user.target\n[Service]\nType=simple\nExecStart=/usr/bin/x11vnc -auth guess -forever -loop -noxdamage -repeat -rfbauth /etc/x11vnc.pass -rfbport 5900 -shared\n[Install]\nWantedBy=multi-user.target\nEOF'\n}\nvnc_connect\nsudo chmod 755 /lib/systemd/system/x11vnc.service\nsudo chown root:root /lib/systemd/system/x11vnc.service\n# \u5f00\u673a\u81ea\u542f\nsudo systemctl enable x11vnc.service\n# \u542f\u52a8\u670d\u52a1\nsudo systemctl daemon-reload\nsudo systemctl start x11vnc.service\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2VNC%E9%85%8D%E7%BD%AE/#_2","title":"\u5ba2\u6237\u7aef","text":"<pre><code>#\u5b89\u88c5tigervnc-viewer\nsudo apt install tigervnc-viewer\n</code></pre> <p>\u5ba2\u6237\u7aef\u6253\u5f00 <code>tigervnc-viewer</code>\uff0c\u914d\u7f6e\u8981\u8fdc\u7a0b\u8fde\u63a5\u670d\u52a1\u5668\u5730\u5740\uff0c\u70b9\u51fb <code>Connect</code>\uff0c\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u3002</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/node-error-01/","title":"Error: ENOSPC: System limit for number of file watchers reached","text":"<p>\u62a5\u9519\u7684\u539f\u59cb\u8f93\u51fa\uff1a</p> <pre><code>node:internal/errors:490\n    ErrorCaptureStackTrace(err);\n^\n\nError: ENOSPC: System limit for number of file watchers reached, watch '/home/uos/github/muyi-frontend/.env.development'\nat FSWatcher.&lt;computed&gt; (node:internal/fs/watchers:247:19)\nat Object.watch (node:fs:2343:34)\nat createFsWatchInstance (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50470:17)\nat setFsWatchListener (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50517:15)\nat NodeFsHandler._watchWithNodeFs (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50672:14)\nat NodeFsHandler._handleFile (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50736:23)\nat NodeFsHandler._addToNodeFs (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50978:21)\nEmitted 'error' event on FSWatcher instance at:\n    at FSWatcher._handleError (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:52169:10)\nat NodeFsHandler._addToNodeFs (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50986:18) {\nerrno: -28,\n  syscall: 'watch',\n  code: 'ENOSPC',\n  path: '/home/uos/github/muyi-frontend/.env.development',\n  filename: '/home/uos/github/muyi-frontend/.env.development'\n}\n</code></pre> <p>\u8fbe\u5230\u6587\u4ef6\u89c2\u5bdf\u8005\u6570\u91cf\u7684\u7cfb\u7edf\u9650\u5236\uff1b</p> <p>\u9519\u8bef\u4ea7\u751f\u7684\u539f\u56e0\u662f\u8d1f\u8d23\u76d1\u63a7 Linux \u6587\u4ef6\u7cfb\u7edf\u7684 <code>inotify</code> \u7a0b\u5e8f\u8fbe\u5230\u4e86\u7cfb\u7edf\u9ed8\u8ba4\u7684\u9650\u5236\u4e0a\u9650\uff1b</p> <p><code>inotify</code> \u63d0\u4f9b\u4e86\u4e00\u79cd\u76d1\u63a7\u6587\u4ef6\u7cfb\u7edf\uff08\u57fa\u4e8e <code>inode</code> \u7684\uff09\u4e8b\u4ef6\u7684\u673a\u5236\uff0c\u53ef\u4ee5\u76d1\u63a7\u6587\u4ef6\u7cfb\u7edf\u7684\u53d8\u5316\u5982\u6587\u4ef6\u4fee\u6539\u3001\u65b0\u589e\u3001\u5220\u9664\u7b49\uff0c\u5e76\u53ef\u4ee5\u5c06\u76f8\u5e94\u7684\u4e8b\u4ef6\u901a\u77e5\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u67e5\u770b <code>inotify</code> \u5728\u5185\u6838\u4e2d\u7684\u9ed8\u8ba4\u914d\u7f6e</p> <pre><code>uos@uos-PC:~$ sudo sysctl fs.inotify\nfs.inotify.max_queued_events = 16384\nfs.inotify.max_user_instances = 128\nfs.inotify.max_user_watches = 8192\n</code></pre> <p>\u89e3\u51b3\u65b9\u6cd5</p> <p>\u4e34\u65f6\u89e3\u51b3\uff1a</p> <pre><code>sudo sysctl fs.inotify.max_user_watches=100000\n</code></pre> <p>\u6c38\u4e45\u89e3\u51b3\uff1a</p> <pre><code>echo fs.inotify.max_user_watches=100000 | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%8E%B7%E5%8F%96%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95/","title":"\u5e38\u7528\u7684\u83b7\u53d6\u968f\u673a\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5","text":""},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%8E%B7%E5%8F%96%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95/#base64","title":"base64","text":"<p>base64 \u4e0d\u662f\u7b97\u6cd5\u800c\u662f\u4e00\u79cd\u7f16\u7801\u65b9\u5f0f\uff0c\u662f\u53ef\u4ee5\u88ab\u89e3\u7801\u7684\uff0c\u6709\u65f6\u5019\u5728\u4ee3\u7801\u4e2d\u6211\u4eec\u7528\u5b83\u6765\u7f16\u7801\u540e\u5904\u7406\u4e1a\u52a1\u6548\u679c\u5f88\u597d\uff1b</p> <pre><code>from  datetime import datetime\nimport base64\na = str(datetime.now())\nb = base64.b64encode(a.encode(\"utf-8\")).decode(\"utf-8\")\nprint(b)\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%8E%B7%E5%8F%96%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95/#hash","title":"hash","text":"<p>hash \u662f\u4e00\u79cd\u7b97\u6cd5\uff0c\u4e0d\u540c\u7684\u7b97\u6cd5\u590d\u6742\u5ea6\u4e0d\u4e00\u6837\uff0c\u5e38\u7528\u7684 MD5\u7b97\u6cd5\uff1b</p> <pre><code>from  datetime import datetime\nimport hashlib\na = str(datetime.now())\n# \u6784\u9020\u4e00\u4e2ahashlib\u7684\u5bf9\u8c61\nobj = hashlib.md5() \nobj.update(a.encode(\"utf-8\"))\nh = obj.hexdigest()\nprint(h)\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u589e\u52a0\u70b9\u590d\u6742\u5ea6\uff0c\u7ed9 <code>md5()</code> \u91cc\u9762\u4f20\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1a</p> <pre><code>from  datetime import datetime\nimport hashlib\na = str(datetime.now())\n# \u4f20\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u589e\u52a0\u590d\u6742\u5ea6\nobj = hashlib.md5(\"mikigo\".encode(\"utf-8\")) \nobj.update(a.encode(\"utf-8\"))\nh = obj.hexdigest()\nprint(h)\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%8E%B7%E5%8F%96%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95/#secrets","title":"secrets","text":"<p>secrets \u7528\u4e8e\u751f\u6210\u9ad8\u5ea6\u52a0\u5bc6\u7684\u968f\u673a\u6570\uff0c\u5728\u540e\u7aef\u5904\u7406Token\u95ee\u9898\u65f6\u7ecf\u5e38\u4f7f\u7528\uff1b</p> <p>\u8fc7\u53bb\u54b1\u4eec\u4e60\u60ef\u4f7f\u7528 <code>random</code> \u6a21\u5757\u6765\u751f\u6210\u4e00\u4e9b\u968f\u673a\u5b57\u7b26\uff0c\u6700\u65b0\u6700\u6d41\u884c\u7684\u662f\u7528 secrets\uff1b</p> <pre><code>import secrets\na = secrets.token_hex()\nprint(a)\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E6%9C%8D%E5%8A%A1/","title":"\u914d\u7f6e\u5f00\u673a\u81ea\u542f\u670d\u52a1","text":"<p>\u5199\u5f00\u673a\u81ea\u542f\u670d\u52a1\u6587\u4ef6\uff1a</p> <pre><code>sudo vim /lib/systemd/system/test.service\n</code></pre> <p>\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>[Unit]\nDescription=Test Service\nAfter=multi-user.target\n\n[Service]\nUser=uos\nGroup=uos\nType=idle\nWorkingDirectory=/home/uos/ocr_env\nExecStart=$do you shell scripts$\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u6ce8\u610f\uff0c\u5728 <code>ExecStart=$do you shell scripts$</code> \u91cc\u9762\u914d\u7f6e\u4f60\u7684\u8981\u6267\u884c\u7684\u547d\u4ee4\uff0c\u6bd4\u5982\uff1a<code>ExecStart=bash test.sh</code></p> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u7684\u6743\u9650\uff1a</p> <pre><code>sudo chmod 644 /lib/systemd/system/test.service\n</code></pre> <p>\u81ea\u542f\u670d\u52a1\u751f\u6548\uff1a</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable test.service\n</code></pre> <p>\u67e5\u770b\u670d\u52a1\u72b6\u6001\uff1a</p> <pre><code>sudo systemctl status test.service\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/","title":"Httpx","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#1","title":"1\u3001\u7b80\u4ecb","text":"<p>\u867d\u7136 Requests \u57fa\u672c\u5df2\u7ecf\u53ef\u4ee5\u89e3\u51b3\u5927\u90e8\u5206\u95ee\u9898\uff0c\u4f46\u4ecd\u7136\u6709\u5c11\u90e8\u5206\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\uff0c\u6bd4\u5982\uff1aHTTP/2\uff08Requests \u53ea\u652f\u6301HTTP/1.1\uff09\u3001\u5f02\u6b65\u8bf7\u6c42\u7b49\uff0c\u8fd9\u5c31\u9700\u8981\u7528\u5230 httpx\uff1b</p> <p>httpx \u53f7\u79f0\u4e0b\u4e00\u4ee3 HTTP \u5ba2\u6237\u7aef\uff0c\u6700\u5f00\u59cb\u662f\u4e3a\u4e86\u89e3\u51b3 Requests \u4e0d\u652f\u6301\u5f02\u6b65\u8bf7\u6c42\u7684\u95ee\u9898\uff0c\u5de5\u7a0b\u540d\u79f0\u5c31\u53eb\uff1arequests-async\uff0c\u540e\u9762\u6574\u4f53\u8fc1\u79fb\u5230 httpx \u4ed3\u5e93\u4e2d\u3002</p> <p>\u7531\u4e8e httpx \u4ece\u4e00\u5f00\u59cb\u5c31\u662f\u57fa\u4e8e Requests \u6765\u641e\u7684\uff0c\u6240\u4ee5\u5b83\u63d0\u4f9b\u7684\u63a5\u53e3\u51e0\u4e4e\u548c Requests \u4fdd\u6301\u4e00\u81f4\uff0c\u8fd9\u5bf9\u4e8e\u6211\u4eec\u4f7f\u7528\u6765\u8bf4\u5c31\u7b80\u5355\u591a\u4e86\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#2","title":"2\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1adeepin</p> <pre><code>pip3 install httpx\n</code></pre> <p>\u5b83\u8fd8\u63d0\u4f9b\u547d\u4ee4\u884c\u5de5\u5177\uff1a</p> <pre><code>pip3 install 'httpx[cli]'\n</code></pre> <p>\u6211\u4e00\u822c\u4e0d\u548b\u4e60\u60ef\u7528\u547d\u4ee4\u884c\u505a\u63a5\u53e3\u8bf7\u6c42\uff0c\u6240\u4ee5\u57fa\u672c\u90fd\u4e0d\u88c5\u8fd9\u73a9\u610f\u513f\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#3","title":"3\u3001\u7b80\u5355\u7684\u4f8b\u5b50","text":"<p>\u524d\u9762\u8bf4\u4e86 httpx \u548c Requests \u63d0\u4f9b\u7684\u63a5\u53e3\u51e0\u4e4e\u4e00\u81f4\uff0c\u54b1\u4eec\u5c31\u7528 Requests \u6559\u7a0b\u91cc\u9762\u7684\u4f8b\u5b50\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#31get","title":"3.1\u3001GET\u8bf7\u6c42","text":"<pre><code>import httpx\nr = httpx.get(\"https://www.baidu.com\")\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>200\n&lt;html&gt;\n&lt;head&gt;\n        &lt;script&gt;\n                location.replace(location.href.replace(\"https://\",\"http://\"));\n        &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n        &lt;noscript&gt;&lt;meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\"&gt;&lt;/noscript&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#32post","title":"3.2\u3001POST\u8bf7\u6c42","text":"<pre><code>import httpx\nr = httpx.post('https://httpbin.org/post', data={'key': 'value'})\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>200\n{\n  \"args\": {}, \n  \"data\": \"\", \n  \"files\": {}, \n  \"form\": {\n    \"key\": \"value\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Content-Length\": \"9\", \n    \"Content-Type\": \"application/x-www-form-urlencoded\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-httpx/0.23.3\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642f820c-019ccf8938faee564386038e\"\n  }, \n  \"json\": null, \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/post\"\n}\n</code></pre> <p>\u4f60\u770b\uff0c\u7b80\u76f4\u662f\u4e00\u6bdb\u4e00\u6837\u3002</p> <p>\u884c\u5566\uff0c\u90fd\u4e00\u6837\u54b1\u4eec\u5c31\u4e0d\u804a\u4e86\uff0c\u540e\u9762\u91cd\u70b9\u8bb2\u8bb2\u4e0d\u4e00\u6837\u7684\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#4","title":"4\u3001\u5f02\u6b65\u8bf7\u6c42","text":"<p>\u5f02\u6b65\u662f\u4e00\u79cd\u5e76\u53d1\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u901a\u5e38\u8bf4\u7684\u201c\u534f\u7a0b\u201d\uff0c\u6bd4\u591a\u7ebf\u7a0b\u6548\u7387\u9ad8\u5f88\u591a\uff1b</p> <p>httpx \u7684\u5f02\u6b65\u8bf7\u6c42\u4e3b\u8981\u4f9d\u8d56\u4e8e\u6807\u51c6\u5e93 asyncio\uff0c\u4f7f\u7528 async \u548c await \u5173\u952e\u8bcd\uff1b</p> <pre><code>import asyncio\nimport httpx\nasync def my_get():\nasync with httpx.AsyncClient() as client:\nr = await client.get(\"https://www.baidu.com\")\nprint(r.text)\nif __name__ == '__main__':\nasyncio.run(my_get())\n</code></pre> <p>client \u5bf9\u8c61\u4f60\u53ef\u4ee5\u7406\u89e3\u4e3a Requests \u91cc\u9762\u7684 Session \u5bf9\u8c61\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#5http2","title":"5\u3001HTTP/2","text":"<p>\u8001\u5b9e\u8bb2 HTTP/2 \u7684\u7f51\u7ad9\u6211\u8fd8\u6ca1\u673a\u4f1a\u722c\u8fc7\uff0c\u6240\u4ee5\u6211\u8fd9\u91cc\u8fd8\u4e0d\u592a\u597d\u627e\u4f8b\u5b50\uff1b</p> <p>\u5982\u679c\u4f60\u5728\u4e0d\u5c0f\u5fc3\u9047\u5230\u4e86\u4e5f\u522b\u614c\uff0c\u53ea\u9700\u8981\u52a0\u4e00\u4e2a\u53c2\u6570\u5c31\u597d\u4e86\uff1b</p> <pre><code>import asyncio\nimport httpx\nasync def my_get():\nasync with httpx.AsyncClient(http2=True) as client:\nr = await client.get(\"https://www.xxxxxx.com\")\nprint(r.text)\nif __name__ == '__main__':\nasyncio.run(my_get())\n</code></pre> <p>\u5728 <code>httpx.AsyncClient()</code> \u91cc\u9762\uff0c\u9ed8\u8ba4\u53c2\u6570: </p> <pre><code>class AsyncClient:\ndef __init__(\nself,\n...\nhttp1: bool = True,\nhttp2: bool = False,\n...\n):\npass  # \u7701\u7565\u5176\u4ed6\u6e90\u7801\n</code></pre> <p>\u4e5f\u5c31\u662f\u8bf4\u9ed8\u8ba4\u662f\u5f00\u542f\u7684 http1\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5728\u5b9e\u4f8b\u5316 client \u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u4f20\u5165\u53c2\u6570 <code>http2=True</code> \u5373\u53ef\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/","title":"Requests","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#1","title":"1\u3001\u7b80\u4ecb","text":"<p>Requests \u662f Python \u6700\u4e45\u8d1f\u76db\u540d\u7684 HTTP \u5e93\uff0c\u6ca1\u6709\u4e4b\u4e00\uff1bK \u795e\uff08Kenneth Reitz\uff09\u7684 for humans \u7cfb\u5217\u4e2d\u6700\u6709\u540d\u7684\u4e00\u4e2a\uff1b</p> <p></p> <p>\u505a\u722c\u866b\u3001\u6570\u636e\u5206\u6790\u3001\u63a5\u53e3\u81ea\u52a8\u5316\u4f1a\u7ecf\u5e38\u7528\u5230\u5b83\uff0c\u975e\u5e38\u591a\u6709\u540d\u7684 Python \u5e93\u4f9d\u8d56\u4e8e Requests \u63d0\u4f9b\u57fa\u7840\u80fd\u529b\uff0c\u6bd4\u5982\uff1ahttpx\uff08\u652f\u6301\u5f02\u6b65\u7684 HTTP \u5e93\uff09\u3001locust\uff08\u6027\u80fd[\u8d1f\u8f7d]\u6d4b\u8bd5\u6846\u67b6\uff09\u3001HttpRunner\uff08\u63a5\u53e3\u81ea\u52a8\u5316\u6846\u67b6\uff09\u7b49\u7b49\uff0c\u90fd\u662f\u57fa\u4e8e Requests \u6784\u5efa\u8d77\u6765\u7684\u3002</p> <p>\u6709\u4eba\u751a\u81f3\u5efa\u8bae\u5c06 Requests \u5e93\u5408\u5165 Python \u6807\u51c6\u5e93\u53d1\u5e03\u3002\u53ea\u8981\u4f60\u60f3\u505a HTTP \u8bf7\u6c42\uff0c\u4f60\u80af\u5b9a\u4f1a\u60f3\u5230 Requests\u3002</p> <p>Requests \u7279\u70b9\uff1a\u7b80\u5355\u3001\u7b80\u6d01\u3001\u4f18\u96c5\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#2","title":"2\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1adeepin</p> <pre><code>pip3 install requests\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#3","title":"3\u3001\u8bf7\u6c42","text":""},{"location":"%E7%88%AC%E8%99%AB/Requests/#31","title":"3.1\u3001\u5bfc\u5165","text":"<pre><code>import requests\n</code></pre> <p>\u6240\u6709\u7684\u529f\u80fd\u90fd\u5728 requests \u8fd9\u4e2a\u540d\u79f0\u7a7a\u95f4\u4e0b\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#32get","title":"3.2\u3001GET \u8bf7\u6c42","text":"<pre><code>r = requests.get(\"https://www.baidu.com\")\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u7ec8\u7aef\u6253\u5370\uff1a</p> <pre><code>200\n&lt;!DOCTYPE html&gt;\n&lt;!--STATUS OK--&gt;&lt;html&gt; &lt;head&gt;&lt;meta http-equ ...... # \u7701\u7565\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#33post","title":"3.3\u3001POST \u8bf7\u6c42","text":"<p><code>https://httpbin.org</code> \u662f K \u795e\u7684\u4e00\u4e2a\u7b80\u5355\u7684 HTTP \u670d\u52a1\uff0c\u4e3b\u8981\u7528\u4e8e\u8bd5\u7528 requests \u91cc\u9762\u7684\u4e00\u4e9b\u529f\u80fd\uff0c\u65b9\u4fbf\u7406\u89e3\uff1b </p> <pre><code>r = requests.post('https://httpbin.org/post', data={'key': 'value'})\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u7ec8\u7aef\u6253\u5370\uff1a</p> <pre><code>200\n{\n\"args\": {}, \n\"data\": \"\", \n\"files\": {}, \n\"form\": {\n\"key\": \"value\"\n}, \n\"headers\": {\n\"Accept\": \"*/*\", \n\"Accept-Encoding\": \"gzip, deflate\", \n\"Content-Length\": \"9\", \n\"Content-Type\": \"application/x-www-form-urlencoded\", \n\"Host\": \"httpbin.org\", \n\"User-Agent\": \"python-requests/2.28.1\", \n\"X-Amzn-Trace-Id\": \"Root=1-642aa9b9-259b189c1acb1e114a5d6bc7\"\n}, \n\"json\": null, \n\"origin\": \"110.191.179.216\", \n\"url\": \"https://httpbin.org/post\"\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#34","title":"3.4\u3001\u5176\u4ed6\u8bf7\u6c42","text":"<p>\u5176\u4ed6\u8bf7\u6c42\u65b9\u5f0f\u4e0d\u5e38\u7528\uff0c\u5982\u4e0b\uff1a</p> <pre><code>r = requests.put('https://httpbin.org/put', data={'key': 'value'})\nr = requests.delete('https://httpbin.org/delete')\nr = requests.head('https://httpbin.org/get')\nr = requests.options('https://httpbin.org/get')\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#35headers","title":"3.5\u3001\u8bf7\u6c42\u5934\uff08headers\uff09","text":"<p>\u8bf7\u6c42\u5934\u901a\u5e38\u4f1a\u52a0 UA\uff08user agent\uff09\uff0c\u8fd9\u4e2a\u4e3b\u8981\u662f\u6a21\u4eff\u6d4f\u89c8\u5668\u7684\u884c\u4e3a\uff0c\u6bd4\u5982\u6a21\u4eff\u4f7f\u7528 Firefox \u6d4f\u89c8\u5668\uff1a</p> <pre><code>headers = {\n\"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/109.0\"\n}\nrequests.get(url, headers=headers)\nrequests.post(url, headers=headers)\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#36","title":"3.6\u3001\u53c2\u6570","text":"<p>(1) get \u8bf7\u6c42\u53c2\u6570</p> <p>get \u8bf7\u6c42\u7684\u53c2\u6570\u53ef\u4ee5\u76f4\u63a5\u5728url\u540e\u9762\u52a0\u53c2\u6570\uff0c<code>url?key1=value1&amp;key2=value2</code>\uff0c\u5373 url \u540e\u9762\u52a0\u95ee\u53f7\uff0c\u7136\u540e\u7d27\u63a5\u7740\u591a\u4e2a\u53c2\u6570\u7684\u952e\u548c\u503c\uff0c\u591a\u4e2a\u952e\u503c\u4e4b\u95f4\u7528 &amp; \u7b26\u53f7\u94fe\u63a5\uff1b</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u7b80\u5355\u662f\u7b80\u5355\uff0c\u4f46\u662f\u53c2\u6570\u591a\u4e86\u4e4b\u540e\uff0curl \u4f1a\u53d8\u5f97\u5f88\u957f\uff0c\u770b\u8d77\u6765\u80c0\u773c\u775b\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u53ef\u8bfb\u6027\uff0crequests \u652f\u6301\u8fd9\u6837\u4f20\u9012 get \u8bf7\u6c42\u7684\u53c2\u6570\uff1a</p> <pre><code>params = {'key1': 'value1', 'key2': 'value2'}\nr = requests.get('https://httpbin.org/get', params=params)\n</code></pre> <p>\u901a\u8fc7\u6253\u5370 r.url \u4f60\u4f1a\u53d1\u73b0\uff0c\u5b9e\u9645\u4e0a\u4e5f\u662f\u7ed9\u4f60\u8f6c\u6362\u6210\u4e86\u524d\u9762\u90a3\u79cd &amp; \u8fde\u63a5\u7684\u65b9\u5f0f\uff1b</p> <p>\uff082\uff09post \u8bf7\u6c42\u53c2\u6570</p> <p>post \u8bf7\u6c42\u53c2\u6570\u4e00\u822c\u662f\u901a\u8fc7data\u53c2\u6570\u4f20\u9012\uff0c\u901a\u5e38 data \u662f\u4e00\u4e2a\u5b57\u5178\u5f62\u5f0f\uff1a</p> <pre><code>data = {'key1': 'value1', 'key2': 'value2'}\nr = requests.post('https://httpbin.org/post', data=data)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"args\": {}, \n  \"data\": \"\", \n  \"files\": {}, \n  \"form\": {\n    \"key1\": \"value1\", \n    \"key2\": \"value2\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Content-Length\": \"23\", \n    \"Content-Type\": \"application/x-www-form-urlencoded\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-requests/2.28.1\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642e7884-7f20428d523e7fda1da61f1a\"\n  }, \n  \"json\": null, \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/post\"\n}\n</code></pre> <p>\u5982\u679c\u4f60\u62ff\u5230\u7684\u53c2\u6570\uff0c\u662f\u4e00\u4e2a json \u683c\u5f0f\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\u7ed9 json \u53c2\u6570\uff1a</p> <pre><code>jsons = '{\"key1\": \"value1\", \"key2\": \"value2\"}'\nr = requests.post('https://httpbin.org/post', json=jsons)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"args\": {}, \n  \"data\": \"\\\"{\\\\\\\"key1\\\\\\\": \\\\\\\"value1\\\\\\\", \\\\\\\"key2\\\\\\\": \\\\\\\"value2\\\\\\\"}\\\"\", \n  \"files\": {}, \n  \"form\": {}, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Content-Length\": \"46\", \n    \"Content-Type\": \"application/json\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-requests/2.28.1\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642e79d4-1f0aeb1370ea94cf2c858f9d\"\n  }, \n  \"json\": \"{\\\"key1\\\": \\\"value1\\\", \\\"key2\\\": \\\"value2\\\"}\", \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/post\"\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#4","title":"4\u3001\u54cd\u5e94","text":"<p>\u5176\u5b9e\u524d\u9762\u7684\u4f8b\u5b50\u5df2\u7ecf\u6709\u4f53\u73b0\u4e00\u70b9\u54cd\u5e94\u4e86\uff1b</p> <pre><code>r = requests.post('https://httpbin.org/post', data={'key': 'value'})\n</code></pre> <p>r \u4e3a\u8fd4\u56de\u503c\u7684\u5bf9\u8c61\uff08Response\uff09\uff0c\u901a\u5e38\u5728\u9879\u76ee\u4e2d\u6211\u4e00\u822c\u7528 <code>rsp</code> \u6765\u8868\u793a\uff08\u540e\u9762\u7684 <code>rsp</code> \u548c r \u662f\u4e00\u4e2a\u610f\u601d\uff0c\u90fd\u662f\u8868\u793a\u8fd4\u56de\u503c\u7684\u5bf9\u8c61\uff09\uff1b</p> <p>rsp \u65e2\u7136\u662f\u5bf9\u8c61\uff0c\u90a3\u6765\u770b\u4e0b\u5bf9\u8c61\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u54b1\u4eec Debug \u8dd1\u4e00\u4e0b\u5c31\u5f88\u6e05\u695a\uff1a</p> <p></p> <p>\u63a5\u4e0b\u6765\u8bb2\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#41","title":"4.1\u3001\u54cd\u5e94\u5185\u5bb9","text":"<pre><code>r.text\n</code></pre> <p>\u524d\u9762\u4f8b\u5b50\u5df2\u7ecf\u6253\u5370\u8fc7\uff0c\u8fd9\u91cc\u5c31\u4e0d\u6253\u5370\u4e86\uff1b</p> <p><code>text</code> \u7684\u89e3\u7801\u662f\u81ea\u52a8\u7684\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u80fd\u6b63\u5e38\u89e3\u7801\uff1b</p> <p>\u53ef\u4ee5\u901a\u8fc7 <code>encoding</code> \u6765\u67e5\u770b\u6216\u4fee\u6539\u7f16\u7801\u65b9\u5f0f\uff1a</p> <pre><code>print(r.encoding)\nr.encoding = 'ISO-8859-1'\n</code></pre> <p>\u4fee\u6539\u7f16\u7801\u65b9\u5f0f\u4e4b\u540e\uff0c\u518d\u4f7f\u7528 <code>r.text</code> \u5c31\u4f1a\u4ee5\u65b0\u7684\u7f16\u7801\u65b9\u5f0f\u89e3\u7801\u3002</p> <p>\u5982\u679c\u4f60\u53d1\u73b0\u8fd4\u56de\u7684\u5185\u5bb9\u7f16\u7801\u4e0d\u5bf9\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4fee\u6539\u4e0d\u540c\u7684\u7f16\u7801\uff0c\u8fd9\u662f\u4e2a\u7ecf\u9a8c\u79ef\u7d2f\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#42","title":"4.2\u3001\u4e8c\u8fdb\u5236\u54cd\u5e94\u5185\u5bb9","text":"<p>\u975e\u6587\u672c\u7c7b\u8bf7\u6c42\uff0c\u4e00\u822c\u8fd4\u56de\u7684\u662f\u4e8c\u8fdb\u5236\u5185\u5bb9\uff0c\u6b64\u65f6\u6211\u4eec\u5e94\u8be5\u4f7f\u7528 <code>content</code> \u65b9\u6cd5\uff1a</p> <pre><code>r.content\n</code></pre> <p>\u5c06\u4e8c\u8fdb\u5236\u6587\u4ef6\u4fdd\u5b58\u4e0b\u6765\uff0c\u6bd4\u5982\u8bf7\u6c42\u8fd4\u56de\u4e00\u4e2a mp3 \u6587\u4ef6\uff1a</p> <pre><code>with open(\"my.mp3\", \"wb\") as f\uff1a\nf.write(r.content)\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#43json","title":"4.3\u3001JSON\u54cd\u5e94\u5185\u5bb9","text":"<p>\u4e00\u4e9b RESTful API \u8fd4\u56de\u901a\u5e38\u662f json \u5185\u5bb9\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff1a</p> <pre><code>r.json()\n</code></pre> <p>\u83b7\u53d6\u7684\u7c7b\u578b\u4e3a Python \u7684\u5b57\u5178\u7c7b\u578b\uff1b</p> <p>\u5982\u679c\u54cd\u5e94\u5305\u542b\u65e0\u6548JSON\uff0c\u4f1a\u629b <code>requests.exceptions.JSONDecodeError</code> \u5f02\u5e38\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#5","title":"5\u3001\u9ad8\u9636\u7528\u6cd5","text":""},{"location":"%E7%88%AC%E8%99%AB/Requests/#51session","title":"5.1\u3001Session","text":"<p>Session \u5bf9\u8c61\u53ef\u4ee5\u5728\u4e00\u6b21\u4f1a\u8bdd\u4e2d\u53ef\u4ee5\u6709\u6548\u7684\u5904\u7406 cookie \u6301\u4e45\u5316\u7684\u95ee\u9898\uff1b</p> <pre><code>s = requests.Session()\n# \u8bbe\u7f6e\u4e00\u4e2acookie\u4e3a123456789\ns.get('https://httpbin.org/cookies/set/sessioncookie/123456789')\n# \u8bf7\u6c42\u4e00\u4e0b\nr = s.get('https://httpbin.org/cookies')\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"cookies\": {\n    \"sessioncookie\": \"123456789\"\n  }\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#52request","title":"5.2\u3001Request","text":"<p>\u65e0\u8bba\u662f\u524d\u9762\u8bb2\u5230\u7684 GET \u3001 POST \u7b49\u8bf7\u6c42\u65b9\u6cd5\uff1a</p> <pre><code>requests.get()\nrequests.post()\n</code></pre> <p>\u5176\u5e95\u5c42\u90fd\u662f\u901a\u8fc7\u8c03\u7528 Request \u8fd9\u4e2a\u7c7b\u6765\u5b9e\u73b0\u7684\uff1a</p> <pre><code>class Request():\ndef __init__(\nself,\nmethod=None,\nurl=None,\nheaders=None,\nfiles=None,\ndata=None,\nparams=None,\nauth=None,\ncookies=None,\nhooks=None,\njson=None,\n):\npass\n</code></pre> <p>\u56e0\u6b64\u6211\u4eec\u5f53\u7136\u53ef\u4ee5\u76f4\u63a5\u8de8\u8fc7\u8fd9\u4e00\u6b65\uff0c\u4e0d\u8ba9\u4e2d\u95f4\u5546\u8d5a\u5dee\u4ef7\uff0c\u76f4\u63a5\u7528 Request\uff1a</p> <pre><code>frome requests import Request\nr = Request(\"GET\", url, headers=headers)\nr = Request(\"POST\", url, headers=headers)\n</code></pre> <p>\u8fd8\u6ca1\u5b8c\uff0c\u8bb0\u5f97\u8c03\u7528\u4e00\u4e0b <code>prepare()</code> \u65b9\u6cd5\uff0c\u7136\u540e\u4f7f\u7528 Session \u91cc\u9762\u7684 send \u65b9\u6cd5\uff1a</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>from  requests import Session, Request\ns = Session()\nr = Request(\"GET\", 'https://httpbin.org/get')\nprepped = r.prepare()\nresp = s.send(prepped)\nprint(resp.text)\n</code></pre> <p>\u6267\u884c\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"args\": {}, \n  \"headers\": {\n    \"Accept-Encoding\": \"identity\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-urllib3/1.26.13\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642e84e2-1328a0210e2252741f20c648\"\n  }, \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/get\"\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/","title":"Scrapy","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#1","title":"1\u3001\u7b80\u4ecb","text":"<p>Scrapy \u662f\u73b0\u9636\u6bb5 Python \u793e\u533a\u6700\u6d41\u884c\u7684\u722c\u866b\u6846\u67b6\uff0c\u5b83\u80fd\u591f\u6781\u5927\u7684\u7b80\u5316\u722c\u866b\u7684\u7f16\u5199\u96be\u5ea6\uff0c\u7b80\u5316\u4ee3\u7801\u3002</p> <p>\u5f53\u7136\u5b83\u4e0d\u662f Python \u793e\u533a\u552f\u4e00\u7684\u722c\u866b\u6846\u67b6\uff0c\u4f46\u6211\u8ba4\u4e3a\u662f\u73b0\u9636\u6bb5\u6700\u597d\u7528\u7684\u722c\u866b\u6846\u67b6\u3002</p> <p>\u7ecf\u5e38\u7528\u540c\u5b66\u95ee\uff0c\u4e3a\u5565\u8981\u7528 Scrapy\uff0c\u6211\u7528 requests \u4e0d\u53ef\u4ee5\u5417\uff1f</p> <p>\u6211\u89c9\u5f97\u8fd9\u6837\u89e3\u91ca\uff1a</p> <ul> <li>\u4e0d\u662f\u4e00\u4e2a\u7c7b\u578b</li> </ul> <p>requests \u6700\u591a\u7b97\u662f\u722c\u866b\u5de5\u5177\uff0c\u4e0d\u540c\u7684\u4eba\u5199\u51fa\u6765\u7684\u722c\u866b\u4ee3\u7801\u90fd\u4e0d\u540c\uff0c\u91cd\u590d\u4ee3\u7801\u8fd8\u591a\uff0c\u800c\u4e14\u5bf9\u4e8e\u4e00\u4e9b\u9ad8\u7ea7\u7684\u5e94\u7528\u573a\u666f\uff0c\u5982\uff1a\u591a\u7ebf\u7a0b\u5904\u7406\u3001\u5f02\u6b65\u5904\u7406\u3001\u6301\u4e45\u5316\u7b49\uff0c\u4f30\u8ba1\u6ca1\u51e0\u4e2a\u4eba\u80fd\u5904\u7406\u7684\u5f88\u5b8c\u7f8e\uff0c\u6700\u540e\u722c\u4e0b\u6765\u7684\u6570\u636e\u8fd8\u8981\u627e\u4e00\u5806\u5de5\u5177\u6765\u89e3\u6790\u5904\u7406\uff0c\u6bd4\u5982\uff1are\u3001BeautifulSoup\u3001lxml\u7b49\uff0c\u5c5e\u5b9e\u8ba9\u4eba\u6320\u5934\uff1b</p> <p>\u800c\u722c\u866b\u6846\u67b6\u901a\u5e38\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u4f7f\u7528\u5f88\u5c11\u7684\u4ee3\u7801\u5c31\u80fd\u5b9e\u73b0\u590d\u6742\u7684\u529f\u80fd\uff0c\u4ee3\u7801\u91cf\u5c11\u4e86\uff0c\u800c\u4e14\u5e95\u5c42\u4e5f\u4e3a\u4f60\u5904\u7406\u4e86\u5f88\u5bf9\u95ee\u9898\uff0c\u6846\u67b6\u5728\u89e3\u6790\u6570\u636e\u4e5f\u6709\u81ea\u5e26\u7684\u65b9\u6848\uff0c\u6240\u4ee5\u4f60\u53ea\u9700\u8981\u6309\u7167\u6846\u67b6\u6240\u5b9a\u4e49\u597d\u7684\u89c4\u8303\uff0c\u5c31\u53ef\u4ee5\u8f7b\u677e\u5b8c\u6210\u5404\u79cd\u4efb\u52a1\uff1b</p> <ul> <li>\u4e0d\u662f\u4e00\u4e2a\u5708\u5b50</li> </ul> <p>Scrapy \u4e3b\u8981\u7528\u4e8e\u6570\u636e\u722c\u53d6\uff0c\u6240\u4ee5\u8bf4\u5b83\u662f\u722c\u866b\u6846\u67b6\uff0c\u4f60\u8bf4\u7528\u5b83\u6765\u505a\u4e00\u4e9b POST \u8bf7\u6c42\u53d1\u4e2a\u6570\u636e\u5565\u7684\uff0c\u54b1\u4eec\u8c8c\u4f3c\u6ca1\u8fd9\u4e48\u7528\u8fc7\uff1b</p> <p>\u800c requests \u53ea\u8981\u662f\u7f51\u7edc\u63a5\u53e3\u8bf7\u6c42\u90fd\u80fd\u7528\uff0c\u722c\u6570\u636e\u4e5f\u53ef\u4ee5\uff0c\u4f46\u4f60\u8981\u8bf4\u722c\u6570\u636e\u6709\u591a\u5f3a\u5462\uff0c\u5c31\u8981\u770b\u4f7f\u7528\u7684\u4eba\u6709\u591a\u5f3a\u4e86\uff1b</p> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u65b0\u624b\u3001\u8001\u53f8\u673a\u505a\u5c0f\u4efb\u52a1\uff0c\u7528\u54ea\u4e2a\u90fd\u65e0\u6240\u8c13\uff0c\u7528\u6846\u67b6\u7684\u8bdd\u4f1a\u8f7b\u677e\u5f88\u591a\uff1b</li> <li>\u65b0\u624b\u505a\u5927\u4efb\u52a1\uff0c\u7528\u6846\u67b6\uff0c\u4e0d\u8981\u60f3\uff0c\u7701\u65f6\u7701\u529b\uff1b</li> <li>\u8001\u53f8\u673a\u505a\u5927\u4efb\u52a1\uff0c\u7528\u5de5\u5177\u53ef\u4ee5\u505a\uff0c\u5c31\u662f\u6709\u70b9\u9ebb\u70e6\uff1b\u7528\u6846\u67b6\u4e5f\u80fd\u641e\uff0c\u4f46\u662f\u4e0d\u80fd\u79c0\u51fa\u4f60\u7684\u5b9e\u529b\uff1b</li> </ul>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#2","title":"2\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1adeepin</p> <pre><code>sudo pip3 install Scrapy\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#3","title":"3\u3001\u521b\u5efa\u9879\u76ee","text":"<p>\u54b1\u4eec\u5c31\u722c\u53d6 deepin \u8bba\u575b\u7684\u8d34\u5b50\uff0c\u627e\u627e\u611f\u89c9\uff1b</p> <p>\u521b\u5efa\u4e00\u4e2a\u722c\u866b\u9879\u76ee\u540d\u4e3a\uff1adeepin_bbs_spider</p> <pre><code>cd ~\nscrapy startproject deepin_bbs_spider\n</code></pre> <p>\u5de5\u7a0b\u76ee\u5f55\u7ed3\u6784\uff1a</p> <pre><code>deepin_bbs_spider\n\u251c\u2500\u2500 deepin_bbs_spider\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 items.py  # \u6570\u636e\u7c7b\u578b\u5b9a\u4e49\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 middlewares.py  # \u4e2d\u95f4\u4ef6\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pipelines.py  # \u6570\u636e\u7ba1\u9053\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings.py  # \u914d\u7f6e\u9879\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 spiders  # \u653e\u722c\u866b\u811a\u672c\u7684\u76ee\u5f55\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 __init__.py\n\u2514\u2500\u2500 scrapy.cfg  # \u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#4","title":"4\u3001\u5f00\u59cb\u5199\u722c\u866b","text":"<p>\u5728 <code>~/deepin_bbs_spider/deepin_bbs_spider/spiders</code> \u76ee\u5f55\u4e0b\u5199\u6211\u4eec\u7684\u722c\u866b\u811a\u672c\u6587\u4ef6\uff0c\u521b\u5efa\u4e00\u4e2a\u722c\u866b\uff0c\u76ee\u6807\u662f\u722c\u53d6\u8bba\u575b\u91cc\u9762\u5e16\u5b50\u5185\u5bb9\uff1a</p> <pre><code># bbs_spider.py\nimport scrapy\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nstart_urls = [\"https://bbs.deepin.org/?offset=0&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\"]\ndef parse(self, response):\npost_items = response.css(\"app-main-pc &gt; div &gt; div:nth-child(3) &gt; app-post-pc\")\nfor post_item in post_items:\nurl = post_item.css(\"a.post_lin_pc::attr(href)\").get()\ntitle = post_item.css(\"span.ng-star-inserted::text\").getall()\nprint(\"url:\", url)\nprint(\"title\", title)\n</code></pre> <p>\u5565\u4e5f\u4e0d\u8bf4\uff0c\u5148\u8dd1\u8d77\u6765\u8bd5\u8bd5\uff1a</p> <pre><code>cd ~/deepin_bbs_spider\nscrapy crawl bbs_spider\n</code></pre> <p>\u8dd1\u5b8c\u4e4b\u540e\uff0c\u7ec8\u7aef\u5c31\u4f1a\u6709\u8f93\u51fa\u722c\u53d6\u5230\u7684\u5e16\u5b50\u4fe1\u606f\uff1a</p> <p></p> <p>\u4f60\u5148\u522b\u7ba1\u5176\u4ed6\u7684\uff0c\u81f3\u5c11\u54b1\u4eec\u80fd\u722c\u5230\u6570\u636e\u4e86\uff0c\u63a5\u4e0b\u6765\u54b1\u4eec\u6162\u6162\u4ecb\u7ecd\u4e0a\u9762\u8fd9\u4e9b\u4ee3\u7801\u662f\u600e\u4e48\u6765\u7684~\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#5","title":"5\u3001\u903b\u8f91\u8bb2\u89e3","text":""},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#51","title":"5.1\u3001\u751f\u6210\u722c\u866b\u6a21\u677f","text":"<p>\u770b\u4e86\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6709\u540c\u5b66\u80af\u5b9a\u8981\u95ee\uff0c\u4f60\u548b\u77e5\u9053\u8981\u5199\u4e2a\u7c7b\u5462\uff0c\u4f60\u548b\u77e5\u9053\u8981\u5199\u4e2a <code>parse</code> \u51fd\u6570\u5462\uff1f</p> <p>\u6211\u786e\u5b9e\u4e0d\u77e5\u9053\uff0c<code>scrapy</code> \u4e5f\u77e5\u9053\u54b1\u4eec\u4e0d\u77e5\u9053\uff0c\u6240\u4ee5\u505a\u4e86\u4e2a\u5de5\u5177\u81ea\u52a8\u751f\u6210\uff1a</p> <pre><code>scrapy genspider &lt;spider name&gt; &lt;spider url&gt;\n</code></pre> <p>\u7528\u5b50\u547d\u4ee4 <code>genspider</code>\uff0c\u540e\u9762\u52a0\u722c\u866b\u7684\u540d\u79f0\uff08spider name\uff09\uff0c\u518d\u52a0\u8981\u722c\u53d6\u5730\u5740\uff08url\uff09\uff0c\u5c31\u53ef\u4ee5\u5728 <code>spiders</code> \u76ee\u5f55\u4e0b\u81ea\u52a8\u751f\u6210\u4e00\u4e2a <code>py</code> \u6587\u4ef6\uff1b</p> <p>\u6bd4\u5982\uff0c\u54b1\u4eec\u50cf\u8fd9\u6837\uff1a</p> <pre><code>scrapy genspider bbs_spider \"https://bbs.deepin.org\"\n</code></pre> <p>\u6267\u884c\u4e4b\u540e\u5c31\u4f1a\u81ea\u52a8\u751f\u6210 <code>py</code> \u6587\u4ef6\uff1a</p> <pre><code>import scrapy\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nstart_urls = [\"https://bbs.deepin.org\"]\ndef parse(self, response):\npass\n</code></pre> <p>\u7b80\u5355\u8bb2\u89e3\u4e00\u4e0b\uff1a</p> <ul> <li>\u722c\u866b\u7c7b\u662f\u8981\u7ee7\u627f <code>scrapy.Spider</code> \u7684\uff0c\u8fd9\u4e2a\u4e0d\u8981\u53bb\u52a8\uff0c\u77e5\u9053\u7ee7\u627f\u5c31\u5bf9\u4e86\uff1b</li> <li>\u7c7b\u53d8\u91cf <code>name</code> \u662f\u722c\u866b\u7684\u540d\u79f0\uff0c\u8fd9\u73a9\u610f\u513f\u5c31\u662f\u4e2a\u4ee3\u53f7\uff0c\u4f60\u60f3\u6539\u6210\u738b\u5927\u9524\u90fd\u884c\uff0c\u4e00\u822c\u8d56\u5f97\u53bb\u7ba1\uff1b</li> <li>\u7c7b\u53d8\u91cf <code>allowed_domains</code> \u722c\u866b\u57df\u540d\uff1b</li> <li>\u7c7b\u53d8\u91cf <code>start_urls</code> \u722c\u866b\u76ee\u6807\u5730\u5740\uff0c\u53ef\u4ee5\u7ed9\u591a\u4e2a\uff1b</li> <li>\u5b9e\u4f8b\u65b9\u6cd5 <code>parse(self, response)</code> \u4e5f\u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u51fd\u6570\u540d\u79f0\u6700\u597d\u4e0d\u52a8\uff0c\u53c2\u6570\u540d\u79f0\u4e0d\u80fd\u6539\uff0c\u56e0\u4e3a\u662f scrapy \u8fd4\u56de\u7684\u4e00\u4e2a Selector \u5bf9\u8c61\uff1b</li> </ul> <p>\u8fd9\u91cc\u9762\u6838\u5fc3\u903b\u8f91\u5c31\u662f\u5728 <code>parse</code> \u51fd\u6570\u91cc\u9762\u53bb\u5199\uff0c\u4f60\u53ef\u4ee5\u7406\u89e3\u6210 <code>response</code> \u5c31\u662f\u8fd4\u56de\u7684\u9875\u9762\u4fe1\u606f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u8fd9\u91cc\u9762\u53bb\u63d0\u53d6\u60f3\u8981\u7684\u6570\u636e\u5c31\u597d\u4e86\uff1b</p> <p><code>response</code> \u63d0\u4f9b\u4e00\u4e9b\u65b9\u6cd5\uff0c\u80fd\u591f\u5f88\u65b9\u4fbf\u7684\u8fdb\u884c\u9875\u9762\u4fe1\u606f\u63d0\u53d6\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#52","title":"5.2\u3001\u722c\u866b\u7f16\u5199\u65b9\u6cd5","text":"<p>\u524d\u9762\u8bf4\u5230\u722c\u866b\u811a\u672c\u91cc\u9762 <code>response</code>\uff0c\u5b83\u662f\u6211\u4eec\u7f16\u5199\u4ee3\u7801\u7684\u6838\u5fc3\uff0c\u6240\u6709\u7684\u6570\u636e\u63d0\u53d6\u90fd\u4ece\u8fd9\u91cc\u6765\uff1b</p> <p>\u4e0b\u9762\u6211\u4eec\u8bb2\u8bb2\u6570\u636e\u7684\u63d0\u53d6\u65b9\u6cd5\uff0c\u8fd9\u91cc\u591a\u5634\u4e00\u53e5\uff0c\u6211\u9ed8\u8ba4\u5927\u5bb6\u90fd\u662f\u6709\u4e00\u70b9\u524d\u7aef\u57fa\u7840\u7684\uff0c\u4e0d\u7136\u4e0b\u9762\u90e8\u5206\u5185\u5bb9\u53ef\u80fd\u9700\u8981\u53bb\u5b66\u4e60\u4e0b html\u3001css\u76f8\u5173\u77e5\u8bc6\uff1b</p> <p>\u9996\u5148\u6765\u8bb2 css \u63d0\u53d6\u65b9\u6cd5\uff0ccss \u7684\u89e3\u6790\u662f\u975e\u5e38\u7075\u6d3b\u7684\uff0c\u5148\u7528 F12 \u770b\u4e0b html \u6e90\u7801\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7684\u5e16\u5b50\u90fd\u5728 <code>app-post-pc</code> \u6807\u7b7e\u4e0b\u9762\uff0c\u54b1\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>def parse(self, response):\npost_items = response.css(\"app-post-pc\")\n</code></pre> <p>\u5982\u679c\u4f60\u662f\u4f7f\u7528\u53f3\u952e\u590d\u5236\u7684\u9009\u62e9\u5668\uff0c\u53ef\u80fd\u662f\u4e00\u4e2a\u5f88\u957f\u7684\u8868\u8fbe\u5f0f\uff0c\u4e0d\u592a\u4f18\u96c5\u4e5f\u4e0d\u5229\u4e8e\u7ef4\u62a4\uff0c\u6211\u4e2a\u4eba\u4e0d\u592a\u5efa\u8bae\u4f7f\u7528\u76f4\u63a5\u590d\u5236\u8868\u8fbe\u5f0f\uff0c\u800c\u5e94\u8be5\u901a\u8fc7\u89c2\u5bdf\u81ea\u5df1\u5199\uff1b</p> <p>\u8fd9\u6837\u7684\u8bdd\uff0c<code>post_items</code> \u5c31\u83b7\u53d6\u5230\u4e86\u6240\u6709\u5e16\u5b50\u7684 <code>app-post-pc</code> \u6807\u7b7e\uff0c\u518d\u770b\u4e0b <code>app-post-pc</code> \u6807\u7b7e\u4e0b\u90fd\u6709\u5565\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5728 <code>app-post-pc</code> \u6807\u7b7e\u4e0b\u8fd8\u6709 a \u6807\u7b7e\uff0c\u4fdd\u5b58\u4e86\u5e16\u5b50\u7684\u8be6\u60c5\u5730\u5740(<code>post_url</code>)\uff0c\u7136\u540e\u5728 a \u6807\u7b7e\u4e0b\u7684 span \u6807\u7b7e\u4fdd\u5b58\u4e86\u5e16\u5b50\u7684\u7c7b\u578b\u548c\u6807\u9898(<code>title</code>)\uff0c\u56e0\u6b64\u54b1\u4eec\u60f3\u529e\u6cd5\u628a\u8fd9\u4e24\u4e2a\u62ff\u5230\uff1a</p> <pre><code>def parse(self, response):\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nurl = post_item.css(\"a.post_lin_pc::attr(href)\").get()\ntitle = post_item.css(\"span.ng-star-inserted::text\").getall()\nprint(\"url:\", url)\nprint(\"title\", title)\n</code></pre> <p>\u5148\u7528 for \u5faa\u73af\u628a <code>post_items</code> \u91cc\u9762\u6bcf\u4e2a <code>Selector</code> \u5bf9\u8c61\u91cc\u9762\u7684 <code>url</code> \u548c <code>title</code> \u62ff\u5230\uff1b</p> <p><code>post_item</code> \u5c31\u662f\u5355\u4e2a\u7684 <code>Selector</code> \u5bf9\u8c61\uff0c\u6211\u4eec\u5728\u5b83\u7684\u57fa\u7840\u4e0a\u518d\u901a\u8fc7 css \u65b9\u6cd5\u83b7\u53d6\u5230\u6211\u4eec\u60f3\u8981\u7684\u6570\u636e\uff1b\uff08\u4e5f\u53ef\u4ee5\u4f7f\u7528 Xpath \u6280\u672f\u83b7\u53d6\uff09</p> <ul> <li><code>url</code> \u662f\u5728 a \u6807\u7b7e\u91cc\u9762\u7684 href \u5c5e\u6027\u91cc\u9762\uff0c\u56e0\u6b64\uff1a</li> </ul> <pre><code>post_item.css(\"a.post_lin_pc::attr(href)\").get()\n</code></pre> <p>\u8868\u8fbe\u5f0f\u91cc\u9762\u7684 <code>::attr(href)</code> \u8fd9\u90e8\u5206\u662f Scrapy \u7279\u6709\u7684\uff0c<code>::</code> \u8868\u793a\u53d6\u503c\uff0c<code>attr(href)</code> \u8868\u793a\u901a\u8fc7 <code>href</code> \u5c5e\u6027\u53d6\u503c\uff1b</p> <p><code>get()</code> \u65b9\u6cd5\u8868\u793a\u53d6\u7b2c\u4e00\u4e2a\u503c\uff0c<code>getall()</code> \u65b9\u6cd5\u8868\u793a\u53d6\u6240\u6709\u7684\u503c\uff1b\uff08\u4e5f\u517c\u5bb9\u8001\u7248\u672c\u7684 <code>extract_first()</code> \u548c <code>extract()</code> \u65b9\u6cd5\uff0c\u610f\u601d\u662f\u5bf9\u5e94\u4e00\u6837\u7684\uff0c\u4e0d\u8fc7\u660e\u663e<code>get()</code> \u8fd9\u79cd\u53ef\u8bfb\u6027\u66f4\u597d\u66f4\u6613\u4e8e\u7406\u89e3\u3002\uff09</p> <ul> <li><code>title</code> \u5728 span \u6807\u7b7e\u91cc\u9762\uff1a</li> </ul> <pre><code>post_item.css(\"span.ng-star-inserted::text\").getall()\n</code></pre> <p><code>text</code> \u4e5f\u662f Scrapy \u7279\u6709\u7684\uff0c\u8868\u793a\u628a\u6807\u7b7e\u7684\u6587\u672c\u53d6\u51fa\u6765\uff1b</p> <p>\u975e\u5e38\u597d\u7406\u89e3\u5bf9\u5427\uff0c\u53ea\u8981\u4f60\u7a0d\u5fae\u6709\u70b9\u524d\u7aef\u77e5\u8bc6\uff0c\u5c31\u80fd\u591f\u8f7b\u677e\u628a\u8868\u8fbe\u5f0f\u5199\u51fa\u6765\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#53","title":"5.3\u3001\u83b7\u53d6\u6570\u636e","text":"<p>\u524d\u9762\u4f8b\u5b50\u662f\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u6253\u5370\u51fa\u6765\uff0c\u5b9e\u9645\u4e1a\u52a1\u91cc\u9762\u6211\u4eec\u80af\u5b9a\u662f\u9700\u8981\u5c06\u6570\u636e\u4fdd\u5b58\u4e0b\u6765\u7684\uff1b</p> <p>\u9996\u5148\u6211\u4eec\u5728 <code>items.py</code> \u91cc\u9762\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\uff1a</p> <pre><code># items.py\nimport scrapy\nclass DeepinBbsSpiderItem(scrapy.Item):\n# define the fields for your item here like:\nurl = scrapy.Field()\ntitle = scrapy.Field()\n</code></pre> <p>\u5199\u6cd5\u975e\u5e38\u7b80\u5355\uff0c\u7edf\u4e00\u4f7f\u7528 <code>scrapy.Field()</code> \u6765\u5b9a\u4e49\u5c31\u884c\u4e86\uff1b</p> <p>\u7136\u540e\uff0c\u56de\u5230\u722c\u866b\u811a\u672c\u91cc\u9762\uff1a</p> <pre><code>import scrapy\nfrom deepin_bbs_spider.items import DeepinBbsSpiderItem\nclass BbsSpiderSpider(scrapy.Spider):\n... # \u7701\u7565\u90e8\u5206\u4ee3\u7801\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get()\nitem[\"title\"] = post_item.css(\"span.ng-star-inserted::text\").getall()\nyield item\n</code></pre> <p>\u5c06 <code>items.py</code> \u91cc\u9762\u7684 <code>DeepinBbsSpiderItem</code> \u5bfc\u8fdb\u6765\uff0c\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u590d\u5236\u7ed9\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u4f7f\u7528 <code>item[\"url\"]</code> \u8fd9\u79cd\u7ed9\u5b57\u5178\u6dfb\u52a0\u7684\u65b9\u5f0f\uff0c\u6ce8\u610f\u8981\u548c <code>items.py</code> \u91cc\u9762\u5b9a\u4e49\u7684\u5b57\u6bb5\u540d\u79f0\u4fdd\u6301\u4e00\u81f4\uff1b</p> <p>\u6700\u540e\uff0c\u4f7f\u7528 <code>yield</code> \u5c06\u6570\u636e\u8fd4\u56de\u51fa\u6765\u5c31\u884c\u4e86\uff1b</p> <p>\u5c06\u6570\u636e\u5199\u5165\u5230 csv \u6587\u4ef6\u91cc\u9762\uff1a</p> <pre><code>scrapy crawl bbs_spider -o bbs.csv\n</code></pre> <p><code>-o</code> \u8868\u793a\u5bfc\u51fa\u6570\u636e\uff0c\u6267\u884c\u540e\uff0c\u67e5\u770b bbs.csv \u6587\u4ef6\uff1a</p> <p></p> <p>\u8fd9\u6837\u5c31\u5c06\u722c\u53d6\u5230\u7684\u6570\u636e\u4fdd\u5b58\u5230\u4e86\u4e00\u4e2a csv \u6587\u4ef6\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#54","title":"5.4\u3001\u5904\u7406\u6570\u636e","text":"<p>\u5728\u722c\u866b\u811a\u672c\u91cc\u9762\u83b7\u53d6\u5230\u539f\u59cb\u6570\u636e\u4e4b\u540e\uff0c\u6211\u4eec\u8fd8\u6709\u53ef\u80fd\u4f1a\u62ff\u6570\u636e\u505a\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u6bd4\u5982\u8fd8\u60f3\u5199\u5165\u6570\u636e\u5e93\u3001\u5199\u5165 Excel\u7b49\u7b49\uff1b</p> <p>\u8fd9\u4e9b\u8fdb\u4e00\u6b65\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u901a\u5e38\u662f\u5728\u6570\u636e\u7ba1\u9053 <code>pipelines.py</code> \u91cc\u9762\u6765\u5904\u7406\uff1a</p> <pre><code>class DeepinBbsSpiderPipeline:\ndef process_item(self, item, spider):\nreturn item\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>item</code> \u5c31\u662f\u6bcf\u4e00\u6761\u6570\u636e\uff1b</p> <p>\u6bd4\u5982\uff0c\u4f60\u60f3\u5199\u5165 <code>MySQL</code>\u6570\u636e\u5e93\uff08\u9996\u5148\u8981\u786e\u4fdd\u6570\u636e\u5e93\u8868\u3001\u5b57\u6bb5\u7b49\u6b63\u5e38\uff09\uff1a</p> <pre><code>import pymysql\nclass DeepinBbsSpiderPipeline:\ndef __init__(self):\n# \u5728\u6784\u9020\u51fd\u6570\u91cc\u9762\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u548c\u6e38\u6807\ndef open_spider(self, spider):\n# open_spider \u662f\u8fd9\u4e2a\u7ba1\u9053\u5f00\u59cb\u65f6\u8981\u6267\u884c\u7684\uff1b\u8fd9\u91cc\u53ef\u4ee5\u4e0d\u8981\ndef close_spider(self, spider):\n# close_spider \u5199\u5165\u5173\u95ed\u6570\u636e\u5e93\u7684\u4ee3\u7801\ndef process_item(self, item, spider):\n# \u5728\u8fd9\u91cc\u505a\u5199\u5165\u6570\u636e\u5e93\u7684\u52a8\u4f5c\nreturn item \n</code></pre> <p>\u5728\u4e0a\u9762\u6ce8\u91ca\u91cc\u9762\u5199\u4e86\u5199\u5165\u6570\u636e\u5e93\u7684\u7f16\u5199\u903b\u8f91\uff0c\u7531\u4e8e\u6211\u4eec\u4e3b\u8981\u60f3\u8bb2\u89e3\u6570\u636e\u7ba1\u9053\u7684\u64cd\u4f5c\u903b\u8f91\uff0c\u6570\u636e\u5e93\u7684\u4ee3\u7801\u6570\u636e\u57fa\u672c\u64cd\u4f5c\uff0c\u5c31\u4e0d\u505a\u8be6\u7ec6\u4ee3\u7801\u793a\u4f8b\u4e86\uff0c\u5f80\u4e0a\u641c <code>pymysql</code> \u7684\u4f7f\u7528\u5f88\u591a\uff0c\u6309\u7167\u6ce8\u91ca\u7684\u903b\u8f91\uff0c\u5bf9\u53f7\u5165\u5ea7\u5c31\u884c\u4e86\uff1b</p> <p>\u5982\u679c\u60f3\u5199\u5165 Excel \u8868\u683c\u903b\u8f91\u662f\u4e00\u6837\u7684\uff0c\u4e5f\u53ef\u4ee5\u8868\u683c\u548c\u6570\u636e\u5e93\u540c\u65f6\u5199\u5165\uff0c\u5728 <code>pipelines.py</code> \u91cc\u9762\u518d\u5b9a\u4e49\u4e00\u4e2a\u7ba1\u9053\u7c7b\u5c31\u884c\u4e86\uff1b</p> <p>\u6ce8\u610f\uff0c\u6570\u636e\u7ba1\u9053\u903b\u8f91\u5199\u5b8c\u4e4b\u540e\uff0c\u8981\u5728 <code>settings.py</code> \u91cc\u9762\u4fee\u6539\u914d\u7f6e\uff1a</p> <pre><code>ITEM_PIPELINES = {\n\"deepin_bbs_spider.pipelines.DeepinBbsSpiderPipeline\": 300,\n# \"deepin_bbs_spider.pipelines.XxxxPipeline\": 2,\n}\n</code></pre> <p><code>ITEM_PIPELINES</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0ckey \u662f\u6570\u636e\u7ba1\u9053\uff0cvalue \u662f\u4e00\u4e2a\u6570\u5b57\uff1b</p> <p>value \u4e3b\u8981\u7528\u4e8e\u591a\u4e2a\u7ba1\u9053\u6392\u5e8f\u7684\uff0c\u56e0\u4e3a\u5728 <code>pipelines.py</code> \u91cc\u9762\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2a\u6570\u636e\u7ba1\u9053\u7c7b\uff0c\u5b83\u4eec\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f\u7531 value \u6765\u63a7\u5236\uff0c\u6570\u5b57\u8d8a\u5c0f\u8d8a\u5148\u6267\u884c\uff1b</p> <p>\u5982\u679c\u4f60\u5c31\u4e00\u4e2a\u6570\u636e\u7ba1\u9053\u7c7b\uff0c\u8fd9\u4e2a value \u7ed9\u591a\u5c11\u90fd\u65e0\u6240\u8c13\uff1b</p> <p>\u53e6\u5916\u63d0\u9192\uff0c\u5728 <code>process_item()</code> \u6700\u540e\u4e00\u5b9a\u8981 <code>return item</code>\uff0c\u4e0d\u7136\u5b58\u5728\u591a\u4e2a\u6570\u636e\u7ba1\u9053\u7684\u65f6\u5019\uff0c\u540e\u6267\u884c\u7684\u6570\u636e\u7ba1\u9053\u5c31\u62ff\u4e0d\u5230\u6570\u636e\u4e86\uff1b</p> <p>\u597d\uff0c\u914d\u7f6e\u5b8c\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u518d\u6b21\u6267\u884c\u4e86\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#55","title":"5.5\u3001\u4ece\u4e0b\u5c42\u9875\u9762\u89e3\u6790\u6570\u636e","text":"<p>\u8fd9\u90e8\u5206\u5185\u5bb9\u76f8\u5bf9\u6765\u8bb2\u662f\u96be\u70b9\uff0c\u641e\u61c2\u4e86\u8fd9\u90e8\u5206\uff0c\u5c31\u51e0\u4e4e\u80fd\u5904\u7406\u5bf9\u5927\u90e8\u5206\u6570\u636e\u722c\u53d6\u4e86\uff1b</p> <p>\u6765\uff0c\u5f00\u59cb\u71e5\u8d77\u6765~~</p> <p>\u524d\u9762\u6211\u4eec\u83b7\u53d6\u5230\u4e86\u5e16\u5b50\u7684 <code>url</code> \u548c <code>title</code>\uff0c\u6709\u540c\u5b66\u53ef\u80fd\u8981\u95ee\u4e86\uff0c\u8fd9\u4e2a\u5e16\u5b50\u7684\u6b63\u6587\u5185\u5bb9\u54ea\u91cc\uff1b</p> <p>\u6b63\u6587\u5185\u5bb9\u5728\u5e16\u5b50\u7684 <code>url</code> \u91cc\u9762\uff0c\u5982\u679c\u6211\u4eec\u8981\u540c\u65f6\u83b7\u53d6\u5e16\u5b50\u7684\u6b63\u6587\u5185\u5bb9\uff0c\u5c31\u9700\u8981\u505a\u4ee5\u4e0b\u5904\u7406\uff1b</p> <p></p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#551","title":"5.5.1\u3001\u56de\u8c03\u903b\u8f91","text":"<p>\u9996\u5148\uff0c\u524d\u9762\u83b7\u53d6\u7684 <code>url</code> \u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u94fe\u63a5\uff0c\u54b1\u4eec\u9700\u8981\u7a0d\u5fae\u5904\u7406\u4ee5\u4e0b\uff1a</p> <pre><code>class BbsSpiderSpider(scrapy.Spider):\nbase_url = \"https://bbs.deepin.org\"\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\n# \u7701\u7565\u90e8\u5206\u4ee3\u7801\n</code></pre> <p>\u6211\u4eec\u524d\u9762\u83b7\u53d6\u7684 <code>url</code> \u662f\u8fd9\u6837\u7684: <code>/en/post/254787</code> \uff0c\u56e0\u6b64\u505a\u4e00\u4e2a\u66ff\u6362\u5904\u7406\uff1b</p> <p>\u7136\u540e\uff0c\u54b1\u4eec\u62ff\u7740\u8fd9\u4e2a <code>url</code> \u7ee7\u7eed\u505a\u8bf7\u6c42\uff1a</p> <pre><code>class BbsSpiderSpider(scrapy.Spider):\nbase_url = \"https://bbs.deepin.org\"\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\nyield scrapy.Request(\nurl=item[\"url\"], \ncallback=self.post_parse, \ncb_kwargs={\"item\": item}\n)\ndef post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\n</code></pre> <p>\u8fd9\u91cc\u9700\u8981\u7528 <code>yield</code> \u8fd4\u56de\u5e76\u6784\u9020 scrapy.Request \u5bf9\u8c61\uff0c\u4f20\u5165\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li> <p>url \u5c31\u662f\u4e0b\u5c42\u9875\u9762\u7684\u5730\u5740\uff1b</p> </li> <li> <p>callback \u4f20\u5165\u56de\u8c03\u51fd\u6570\u5bf9\u8c61\uff0c\u56e0\u4e3a <code>parse()</code> \u8fd9\u4e2a\u51fd\u6570\u662f\u5904\u7406\u5f53\u524d\u9875\u9762\u7684\u903b\u8f91\uff0c\u4e0b\u5c42\u9875\u9762\u5c31\u4e0d\u80fd\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u7ee7\u7eed\u5904\u7406\u4e86\uff0c\u800c\u662f\u8981\u65b0\u5199\u4e00\u4e2a\u51fd\u6570\u6765\u5904\u7406\uff1b</p> </li> </ul> <p>\u5199\u6cd5\u548c <code>parse()</code> \u7c7b\u4f3c\uff0c\u51fd\u6570\u540d\u53ef\u4ee5\u81ea\u5df1\u5b9a\uff0c \u53c2\u6570\u4ecd\u7136\u662f response \u5bf9\u8c61\uff1b</p> <p>\u6ce8\u610f\uff0c\u53c2\u6570\u4f20\u5165\u662f <code>callback=self.post_parse</code>\uff0c\u540e\u9762\u6ca1\u6709\u52a0\u62ec\u53f7\u54c8\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u662f\u5728\u8fd9\u91cc\u8c03\u7528\u51fd\u6570\uff0c\u662f\u4f20\u5165\u51fd\u6570\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u53ea\u8981\u51fd\u6570\u540d\uff1b</p> <ul> <li>cb_kwargs \u662f\u4e3a\u4e86\u7ed9 <code>post_parse()</code> \u51fd\u6570\u4f20\u9012 item \u53c2\u6570\uff0c\u662f\u4e00\u4e2a\u5b57\u5178\u7c7b\u578b\uff0c\u8fd9\u6837\u5728 <code>post_parse(self, response, **kwargs)</code> \u91cc\u9762\u7684 <code>kwargs</code> \u5c31\u80fd\u62ff\u5230 item \u7684\u503c\uff0c\u54b1\u4eec\u540e\u7eed\u62ff\u5230\u6b63\u6587\u4e4b\u540e\uff0c\u7ee7\u7eed\u7ec4\u88c5\u5230 item \u91cc\u9762\u5c31\u884c\u4e86\uff1b</li> </ul>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#552","title":"5.5.2\u3001\u4e0b\u5c42\u9875\u9762\u89e3\u6790","text":"<p>\u4e0b\u5c42\u9875\u9762\u7684\u89e3\u6790\uff0c\u903b\u8f91\u548c\u524d\u9762\u4e00\u6837\uff0c\u5148\u770b\u4e0b html \u6e90\u7801\uff1a</p> <p></p> <p>\u83b7\u53d6\u6b63\u6587\uff1a</p> <pre><code>    def post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\npost_info = response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall()\n</code></pre> <p><code>post_info</code> \u83b7\u53d6\u7684\u7ed3\u679c\u4e3a\uff1a</p> <pre><code>['1\u3001\u7cfb\u7edf\u76d8\u5206\u914d\u4e8640g,\u8fd9\u624d\u4e00\u4e2a\u6708\u5c31\u5feb\u6ee1\u4e86\uff0c\u600e\u4e48\u8c03\u5927\u70b9\uff0c\u540e\u9762\u8fd8\u6709100G\u7a7a\u95f4\u3002', '2\u3001\u5e94\u7528\u5546\u5e97\u5565\u65f6\u5019\u653e\u51faconky\uff1f']\n</code></pre> <p>\u505a\u4e00\u4e2a\u5b57\u7b26\u4e32\u7ec4\u88c5\uff1a</p> <pre><code>post_info = \"\".join(response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall())\n</code></pre> <p>\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u83b7\u53d6\u5230\u4e86\u6b63\u6587\u7684\u6570\u636e\uff0c\u6dfb\u52a0\u5230 item \u5bf9\u8c61\u4e2d\uff1a</p> <pre><code>def post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\npost_info = \"\".join(response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall())\nitem[\"post_info\"] = post_info\nyield item\n</code></pre> <p>\u6ce8\u610f\uff0c\u5728 <code>items.py</code> \u4e2d\u628a\u65b0\u7684\u5b57\u6bb5\u4e5f\u6dfb\u52a0\u4e0a\uff1a</p> <pre><code># items.py\nclass DeepinBbsSpiderItem(scrapy.Item):\n...\npost_info = scrapy.Field()\n</code></pre> <p>\u6700\u540e\uff0c\u8dd1\u4e00\u4e0b\u722c\u866b\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#553","title":"5.5.3\u3001\u591a\u5c42\u6570\u636e\u4f20\u9012\u95ee\u9898","text":"<p>\u5230\u76ee\u524d\u4f4d\u7f6e\uff0c\u5b8c\u6574\u7684\u722c\u866b\u811a\u672c\uff1a</p> <pre><code>import scrapy\nfrom deepin_bbs_spider.items import DeepinBbsSpiderItem\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nstart_urls = [\"https://bbs.deepin.org/?offset=0&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\"]\nbase_url = \"https://bbs.deepin.org\"\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-main-pc &gt; div &gt; div:nth-child(3) &gt; app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\nitem[\"title\"] = \"\".join(post_item.css(\"span.ng-star-inserted::text\").getall()[:2])\nyield scrapy.Request(\nurl=item[\"url\"],\ncallback=self.post_parse,\ncb_kwargs={\"item\": item}\n)\ndef post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\npost_info = \"\".join(response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall())\nitem[\"post_info\"] = post_info\nyield item\n</code></pre> <p>\u4f7f\u7528\u547d\u4ee4\u8dd1\u4e00\u4e0b\u722c\u866b\uff1a</p> <pre><code>scrapy crawl bbs_spider -o bbs.csv\n</code></pre> <p>\u4f60\u4f1a\u60ca\u5947\u7684\u53d1\u73b0\uff0c\u600e\u4e48\u6240\u6709\u7684 title \u548c url \u6570\u636e\u76f8\u540c\uff0c\u5f00\u59cb\u6000\u7591\u81ea\u5df1\u903b\u8f91\u662f\u4e0d\u662f\u5199\u9519\u4e86\uff1b</p> <p>\u5176\u5b9e\uff0c\u6211\u4eec\u4ee3\u7801\u903b\u8f91\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u53ea\u4e0d\u8fc7\u5728\u591a\u5c42\u6570\u636e\u4f20\u9012\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u7279\u6b8a\u5904\u7406\u4e0b\uff0c\u5904\u7406\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a</p> <ul> <li>\u5bfc\u5165<code>from copy import deepcopy</code>\u6a21\u5757\uff0c\u5c06<code>cb_kwargs={'item': item}</code> \u66f4\u6539\u4e3a <code>cb_kwargs={'item': deepcopy(item)</code>\uff1b</li> <li>\u6700\u540e\u4e00\u884c\u4ee3\u7801<code>yield item</code> \u4fee\u6539\u6210 <code>yield deepcopy(item)</code>\u5c31\u5b8c\u5168 <code>ok</code> \u4e86\uff1b</li> </ul> <p>\u6539\u5b8c\u4e4b\u540e\u518d\u8dd1\u4e00\u4e0b\uff0c\u7b80\u76f4\u5b8c\u7f8e\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#554","title":"5.5.4\u3001\u591a\u9875\u9762\u722c\u53d6","text":"<p>\u5230\u73b0\u5728\u6211\u4eec\u6015\u53bb\u4e86\u7b2c\u4e00\u9875\u7684\u6570\u636e\uff0c\u90a3\u8fd8\u60f3\u722c\u53d6\u540e\u9762\u7684\u9875\u600e\u4e48\u529e\uff1f</p> <p>\u6709\u540c\u5b66\u8bf4\uff0c\u597d\u529e\uff0c<code>start_urls</code> \u4e0d\u662f\u4e00\u4e2a\u5217\u8868\u5417\uff0c\u628a\u591a\u4e2a url \u653e\u8fdb\u53bb\u4e0d\u5c31\u5b8c\u4e86\uff1b</p> <p>\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8fd9\u6837\u662f\u53ef\u4ee5\u7684\uff0c\u5c31\u662f\u4e0d\u591f\u4f18\u96c5\u3002</p> <p>\u901a\u8fc7\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e9b\u89c4\u5f8b\uff1a</p> <p></p> <p>\u5728\u5730\u5740\u4e2d\u53ea\u6709 <code>offset</code> \u53c2\u6570\u5728\u53d8\u5316\uff0c\u7b2c\u4e00\u9875\u662f 0\uff0c\u7b2c\u4e8c\u9875\u662f 1\uff0c\u975e\u5e38\u6709\u89c4\u5f8b\uff0c\u56e0\u6b64\u54b1\u4eec\u53ef\u4ee5\u52a8\u6001\u751f\u6210\uff1a</p> <pre><code>class BbsSpiderSpider(scrapy.Spider):\n# start_urls = [\"https://bbs.deepin.org/?offset=0&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\"]\ndef start_requests(self):\nfor i in range(5):\nyield scrapy.Request(url=f\"https://bbs.deepin.org/?offset={i}&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\")\n</code></pre> <p>\u4f7f\u7528 <code>start_requests()</code> \u51fd\u6570\u66ff\u4ee3 <code>start_urls</code>\uff1b</p> <p>\u5728\u91cc\u9762\u5199\u4e2a for \u5faa\u73af\uff0c\u8981\u722c\u53d6\u591a\u5c11\u9875\u586b\u5165 <code>range</code> \u51fd\u6570\u5c31\u884c\u4e86\uff0c\u52a8\u6001\u751f\u6210\u591a\u4e2a <code>scrapy.Request</code> \u5bf9\u8c61\uff0c\u6ce8\u610f\u8981\u7528 yield \u54e6~~</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#555","title":"5.5.5\u3001\u5b8c\u6574\u7684\u793a\u4f8b","text":"<p>\u722c\u866b\u811a\u672c <code>bbs_spider.py</code>\uff1a</p> <pre><code>from copy import deepcopy\nimport scrapy\nfrom deepin_bbs_spider.items import DeepinBbsSpiderItem\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nbase_url = \"https://bbs.deepin.org\"\ndef start_requests(self):\nfor i in range(5):\nyield scrapy.Request(url=f\"https://bbs.deepin.org/?offset={i}&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\")\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-main-pc &gt; div &gt; div:nth-child(3) &gt; app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\nitem[\"title\"] = \"\".join(post_item.css(\"span.ng-star-inserted::text\").getall()[:2])\nyield scrapy.Request(\nurl=item[\"url\"],\ncallback=self.post_parse,\ncb_kwargs={\"item\": deepcopy(item)}\n)\ndef post_parse(self, response, **kwargs):\nitem = kwargs[\"item\"]\npost_info = \"\".join(\nresponse.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall()\n)\nitem[\"post_info\"] = post_info\nyield deepcopy(item)\n</code></pre> <p>\u6570\u636e\u7c7b\u578b <code>items.py</code>\uff1a</p> <pre><code>import scrapy\nclass DeepinBbsSpiderItem(scrapy.Item):\n# define the fields for your item here like:\n# name = scrapy.Field()\nurl = scrapy.Field()\ntitle = scrapy.Field()\npost_info = scrapy.Field()\n</code></pre> <p>\u914d\u7f6e <code>settings.py</code>\uff1a\uff08\u7701\u7565\u4e86\u6ca1\u6709\u542f\u7528\u7684\u914d\u7f6e\u9879\uff09</p> <pre><code>BOT_NAME = \"deepin_bbs_spider\"\nSPIDER_MODULES = [\"deepin_bbs_spider.spiders\"]\nNEWSPIDER_MODULE = \"deepin_bbs_spider.spiders\"\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\nUSER_AGENT = \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36\"\n# Obey robots.txt rules\nROBOTSTXT_OBEY = True\n# Override the default request headers:\nDEFAULT_REQUEST_HEADERS = {\n\"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n\"Accept-Language\": \"en\",\n}\n# Set settings whose default value is deprecated to a future-proof value\nREQUEST_FINGERPRINTER_IMPLEMENTATION = \"2.7\"\nTWISTED_REACTOR = \"twisted.internet.asyncioreactor.AsyncioSelectorReactor\"\nFEED_EXPORT_ENCODING = \"utf-8\"\n</code></pre> <p>\u5982\u679c\u4f60\u81ea\u5df1\u73a9\u8d77\u6765\u6709\u70b9\u5c0f\u95ee\u9898\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u53c2\u8003\u6211\u7684\u4ee3\u7801\uff1ahttps://github.com/mikigo/deepin_bbs_spider</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#6","title":"6\u3001\u8c03\u8bd5","text":""},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#61","title":"6.1\u3001\u6570\u636e\u83b7\u53d6\u8c03\u8bd5","text":"<p>\u5728\u4f7f\u7528 <code>response.css()</code> \u8868\u8fbe\u5f0f\u65f6\uff0c\u901a\u5e38\u6211\u4eec\u9700\u8981\u8fdb\u884c\u8c03\u8bd5\uff0c\u770b\u8868\u8fbe\u5f0f\u5199\u5f97\u5bf9\u4e0d\u5bf9\uff0c\u5f53\u7136\u4f60\u53ef\u4ee5\u901a\u8fc7\u6267\u884c\u722c\u866b\u7136\u540e\u6253\u5370\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u6709\u70b9\u9ebb\u70e6\uff1b</p> <p>Scrapy \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5feb\u6377\u7684\u8c03\u8bd5\u65b9\u6cd5\uff0c\u5728\u7ec8\u7aef\u8f93\u5165\uff1a</p> <pre><code>scrapy shell &lt;scrapy url&gt;\n</code></pre> <p><code>&lt;scrapy url&gt;</code> \u662f\u4f60\u8981\u722c\u53d6\u7684\u5730\u5740\uff0c\u6bd4\u5982\u524d\u9762\u6211\u4eec\u60f3\u83b7\u53d6\u5e16\u5b50\u6b63\u6587\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u8fd9\u6837\u8c03\u8bd5\uff1a</p> <pre><code>scrapy shell https://bbs.deepin.org/post/254892\n</code></pre> <p>\u8fdb\u5165\u7ec8\u7aef\u4ea4\u4e92\u5f0f\uff0c\u8f93\u5165\uff1a</p> <pre><code>&gt;&gt;&gt; response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall()\n['1\u3001\u7cfb\u7edf\u76d8\u5206\u914d\u4e8640g,\u8fd9\u624d\u4e00\u4e2a\u6708\u5c31\u5feb\u6ee1\u4e86\uff0c\u600e\u4e48\u8c03\u5927\u70b9\uff0c\u540e\u9762\u8fd8\u6709100G\u7a7a\u95f4\u3002', '2\u3001\u5e94\u7528\u5546\u5e97\u5565\u65f6\u5019\u653e\u51faconky\uff1f']\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u5982\u679c\u8fd4\u56de\u4e3a\u7a7a\uff0c\u5c31\u8bf4\u660e\u8868\u8fbe\u5f0f\u53ef\u80fd\u6709\u70b9\u95ee\u9898\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#62pycharm-debug","title":"6.2\u3001Pycharm Debug","text":"<p>Scrapy \u7531\u4e8e\u5c01\u88c5\u5f97\u6bd4\u8f83\u597d\uff0c\u542f\u52a8\u722c\u866b\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u542f\u52a8\uff0c\u4f46\u662f\u8fd9\u6709\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u4e0d\u652f\u6301\u5728\u7f16\u8f91\u5668\u91cc\u9762 Debug \u8fd0\u884c\uff0c\u5bfc\u81f4\u4f60\u8c03\u8bd5\u4ee3\u7801\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u4e0d\u505c\u7684\u5728\u7ec8\u7aef\u542f\u52a8\u722c\u866b\uff0c\u6709\u70b9\u8d39\u52b2\uff1b</p> <p>\u7ecf\u8fc7\u4e00\u756a\u6298\u817e\uff0c\u7ec8\u4e8e\u9053\u7834\u4e86\u5929\u673a~</p> <p>\uff081\uff09\u5148\u5728\u5de5\u7a0b\u4e0b\u968f\u4fbf\u627e\u4e00\u4e2a <code>py</code> \u6587\u4ef6\uff0c\u91cc\u9762\u5565\u4e5f\u4e0d\u5199\uff0c\u6267\u884c\u4e00\u4e0b\uff0c\u7136\u540e\u70b9\u8fd9\u91cc\uff1a</p> <p></p> <p>\uff082\uff09\u5728\u7cfb\u7edf\u4e2d\u627e\u5230 scrapy \u5305\u4e2d\u7684 cmdline.py \u6587\u4ef6\uff0c\u8fd9\u4e2a\u4f60\u5f97\u7a0d\u5fae\u77e5\u9053\u70b9 Python \u5305\u7ba1\u7406\u7684\u4e00\u4e9b\u77e5\u8bc6\uff0c\u6bd4\u5982\u6211\u7684\u5728\u8fd9\u91cc\uff1a</p> <pre><code>/home/mikigo/.local/lib/python3.7/site-packages/scrapy/cmdline.py\n</code></pre> <p>\uff084\uff09\u5728 <code>Name</code> \u91cc\u9762\u5199\u4e2a\u4f60\u559c\u6b22\u7684\u540d\u5b57\uff0c\u6bd4\u5982\u6211\u5199\uff1aScrapy</p> <p>\uff084\uff09\u5728 <code>Script path</code> \u91cc\u9762\u628a <code>cmdline.py</code> \u7684\u8def\u5f84\u586b\u8fdb\u53bb\uff1b</p> <p>\uff085\uff09\u5728 <code>Parameters</code> \u91cc\u9762\u586b\u5165 Scrapy \u7684\u53c2\u6570\uff1a<code>crawl bbs_spider -o bbs.csv</code>\uff1b</p> <p></p> <p>\uff086\uff09\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684 \u3010ok\u3011\uff0c\u5728\u4e3b\u754c\u9762\u70b9\u3010Debug\u3011\u5c31\u53ef\u4ee5\u8fdb\u884c\u8c03\u8bd5\u4e86\uff0c\u5999\u554a~~</p> <p></p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#7","title":"7\u3001\u7ed3\u675f\u8bed","text":"<p>\u5230\u8fd9\u91cc Scrapy \u7684\u57fa\u7840\u5165\u95e8\u5c31\u7ed3\u675f\u4e86\uff0c\u4e00\u822c\u7684\u5c0f\u7f51\u7ad9\u53ef\u4ee5\u8f7b\u677e\u5feb\u901f\u7684\u641e\u5b9a\uff0c\u7b80\u76f4 yyds~~</p> <p>\u4ece\u5b8c\u6574\u793a\u4f8b\u6211\u4eec\u4e0d\u96be\u770b\u51fa\uff0c\u722c\u866b\u811a\u672c\u7b80\u5355\u7684 30 \u6765\u884c\u4ee3\u7801\u52a0\u4e0a\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u722c\u53d6\u5927\u91cf\u7684\u6570\u636e\uff0c\u800c\u4e14\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u5bf9\u6bd4\u4f60\u7528 requests \u53bb\u88f8\u5199\u770b\u770b\uff0c\u4f60\u4f1a\u53d1\u73b0\u5dee\u8ddd\u4e0d\u662f\u4e00\u822c\u7684\u5927\uff1b</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u7684\u4e00\u4e9b\u7ec6\u8282\u8fd8\u53ef\u4ee5\u5b8c\u5584\uff0c\u6bd4\u5982\uff1a\u4ee3\u7406\u3001\u5f02\u6b65\u3001\u4e2d\u95f4\u4ef6\u3001\u4e0e\u5176\u4ed6\u81ea\u52a8\u5316\u5de5\u5177\u6269\u5c55\uff08Selenium\uff09\uff0c\u540e\u7eed\u7cbe\u529b\u518d\u8865\u5145~~</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Appium\u20146\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u7b80\u4ecb","text":"<p>Appium \u4e3b\u8981\u7528\u4e8e\u505a APP UI \u81ea\u52a8\u5316\u6d4b\u8bd5\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u5b89\u88c5","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium","title":"\u5b89\u88c5 Appium \u5e94\u7528","text":"<pre><code>npm i -g appium@next\n</code></pre> <p>\u5b89\u88c5\u5b8c\u4e4b\u540e\u628a appium \u6620\u5c04\u5230\u73af\u5883\u53d8\u91cf\u91cc\u9762\uff1a</p> <pre><code>sudo ln -s /opt/nodev18.16.1/bin/appium /usr/local/bin/appium\n</code></pre> <p>\u6700\u540e\u5728\u7ec8\u7aef\u8f93\u5165\uff1a</p> <pre><code>appium\n</code></pre> <p>\u5982\u679c\u5f97\u5230\u8fd9\u6837\u7684\u8f93\u51fa\uff1a</p> <pre><code>uos@uos-PC:~$ appium [Appium] Welcome to Appium v2.0.0-rc.5\n....\n</code></pre> <p>\u8bf4\u660e\u5b89\u88c5\u6ca1\u95ee\u9898\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#uiautomator2","title":"\u5b89\u88c5\u9a71\u52a8\u7a0b\u5e8f UiAutomator2","text":"<p>Appium UiAutomator2 Driver \u662f Android \u8bbe\u5907\u7684\u6d4b\u8bd5\u81ea\u52a8\u5316\u6846\u67b6\u3002Appium UiAutomator2 Driver \u53ef\u81ea\u52a8\u6267\u884c\u672c\u673a\u3001\u6df7\u5408\u548c\u79fb\u52a8 Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u5728\u6a21\u62df\u5668\u548c\u771f\u5b9e\u8bbe\u5907\u4e0a\u8fdb\u884c\u6d4b\u8bd5\u3002</p> <p>Github\u5730\u5740\uff1ahttps://github.com/appium/appium-uiautomator2-driver</p> <p>1\u3001\u5b89\u88c5 Android SDK \u5e73\u53f0\u5de5\u5177</p> <p>Android SDK Platform-Tools \u662f Android SDK \u7684\u4e00\u4e2a\u7ec4\u4ef6\u3002\u5b83\u5305\u542b\u4e0e Android \u5e73\u53f0\u8fdb\u884c\u4ea4\u4e92\u7684\u5de5\u5177\uff0c\u4e3b\u8981\u662f adb \u548c fastboot\u3002</p> <p>\u4e0b\u8f7d\u94fe\u63a5\uff1ahttps://developer.android.com/studio/releases/platform-tools?hl=zh-cn</p> <p>\u9009\u62e9 Linux \u7248\u672c\u4e0b\u8f7d\u5373\u53ef\u5f97\u5230\u4e00\u4e2a\u538b\u7f29\u5305\uff1a<code>platform-tools_r34.0.4-linux.zip</code> \uff1b</p> <p>\u6211\u8fd9\u91cc\u5c31\u76f4\u63a5\u653e\u5230 <code>~/Downloads/</code> \u4e0b\u9762\uff1a</p> <p>\u89e3\u538b\u540e\u5f97\u5230\u8fd9\u6837\u7684\u6587\u4ef6\uff1a</p> <pre><code>platform-tools\n\u251c\u2500\u2500 adb  # adb\n\u251c\u2500\u2500 dmtracedump\n\u251c\u2500\u2500 etc1tool\n\u251c\u2500\u2500 fastboot  # fastboot\n\u251c\u2500\u2500 hprof-conv\n\u251c\u2500\u2500 lib64\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 libc++.so\n\u251c\u2500\u2500 make_f2fs\n\u251c\u2500\u2500 make_f2fs_casefold\n\u251c\u2500\u2500 mke2fs\n\u251c\u2500\u2500 mke2fs.conf\n\u251c\u2500\u2500 NOTICE.txt\n\u251c\u2500\u2500 source.properties\n\u2514\u2500\u2500 sqlite3\n</code></pre> <p>2\u3001\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</p> <pre><code>export ANDROID_HOME=~/Downloads\nexport PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools\n</code></pre> <p>\u4f60\u53ef\u4ee5\u5728\u7ec8\u7aef\u8f93\u5165 <code>env</code> \u67e5\u770b\u8fd9\u4e24\u4e2a\u73af\u5883\u53d8\u91cf\u662f\u5426\u5b58\u5728\u3002</p> <p>3\u3001\u5b89\u88c5 Java JDK</p> <pre><code>sudo apt install openjdk-11-jdk\n</code></pre> <p>4\u3001Android\u8bbe\u5907\u5fc5\u987b\u542f\u7528USB\u8c03\u8bd5\uff1b</p> <p>5\u3001\u5b89\u88c5</p> <pre><code># \u5b89\u5353\nappium driver install uiautomator2\n# IOS\nappium driver install xcuitest\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium-python","title":"\u5b89\u88c5 Appium Python \u5ba2\u6237\u7aef","text":"<pre><code>pip install Appium-Python-Client\n</code></pre> <p>\u6587\u6863\u5730\u5740\uff1ahttps://appium.github.io/python-client-sphinx/</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium_1","title":"Appium\u57fa\u7840","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#adb","title":"adb\u5de5\u5177","text":"<p>1.<code>android debug brige</code> \u5b89\u5353\u8c03\u8bd5\u6865\u63a5\u5668\u3002</p> <p>2.<code>adb</code> \u5e38\u7528\u547d\u4ee4</p> <ul> <li> <p><code>adb devices</code> \u67e5\u770b\u94fe\u63a5\u7684\u8bbe\u5907</p> </li> <li> <p><code>adb pull/push</code> \u5728\u8bbe\u5907\u4e0e <code>pc</code> \u4e4b\u95f4\u62f7\u8d1d\u6587\u4ef6</p> </li> </ul> <pre><code>adb push E:/data/app \\data\\\n</code></pre> <ul> <li><code>adb install/uninstall</code> \u5b89\u88c5/\u5378\u8f7d</li> </ul> <pre><code>adb install E:/app/baidu.apk\n</code></pre> <ul> <li> <p><code>adb shell</code> \u8fdb\u5165shell\u754c\u9762\uff08\u652f\u6301Linux\u547d\u4ee4\uff09</p> </li> <li> <p><code>adb connect/disconnect</code> \u94fe\u63a5\u67d0\u4e2a\u8bbe\u5907</p> </li> </ul> <pre><code>adb connect 127.0.0.1:62001\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#packageactivity","title":"Package\u548cActivity","text":"<ul> <li> <p><code>package</code> \u5305\uff0c\u544a\u77e5\u5de5\u5177\u5305\u540d\u662f\u4ec0\u4e48\uff1b</p> </li> <li> <p><code>Activity</code> \u5c31\u662f\u4e00\u4e2a\u4e2a\u7684\u9875\u9762\uff0c\u8981\u6307\u5b9a\u4e00\u4e2a\u4e3b <code>Activity</code>\uff0c\u624d\u80fd\u542f\u52a8\uff1b</p> </li> <li> <p>\u83b7\u53d6 <code>package</code> \u548c <code>activity</code></p> </li> </ul> <pre><code>apt dump badging E:/app/baidu.apk\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u63a7\u4ef6\u5e03\u5c40","text":"<p>1.\u5e38\u89c1\u5e03\u5c40\uff08Layout\uff09</p> <p>\uff081\uff09<code>LinearLoyout</code> \u7ebf\u6027\u5e03\u5c40</p> <p>\uff082\uff09<code>RelativeLayout</code> \u76f8\u5bf9\u5e03\u5c40</p> <p>\uff083\uff09<code>FrameLayout</code> \u6846\u67b6\u5e03\u5c40</p> <p>2.\u5e38\u89c1\u63a7\u4ef6</p> <p>\uff081\uff09<code>TextView</code> \u754c\u9762\u4e0a\u7684\u4e00\u6bb5\u6587\u5b57\uff0c\u4f46\u4e0d\u5141\u8bb8\u7528\u6237\u4fee\u6539</p> <p>\uff082\uff09<code>Button</code> \u6309\u94ae</p> <p>\uff083\uff09<code>EditText</code> \u76f8\u5f53\u4e8einput\u8f93\u5165\u6846</p> <p>\uff084\uff09<code>ImageView</code> \u5c55\u793a\u56fe\u7247\u7684\u63a7\u4ef6</p> <p>\uff085\uff09ListView \u5c31\u662f\u4e00\u4e2a\u5217\u8868\u7684\u5c55\u793a</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium_2","title":"Appium\u811a\u672c","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium_3","title":"\u8ba4\u8bc6appium","text":"<p>1.\u5b89\u88c5 <code>appium</code> \u4e4b\u540e\uff0c\u70b9\u51fb\u6253\u5f00</p> <p>2.\u754c\u9762\u6709\u4e09\u4e2a\u9009\u9879</p> <p>\uff081\uff09<code>Simple</code> \u9ed8\u8ba4\u914d\u7f6e</p> <p>\uff082\uff09<code>Advanced</code> \u9ad8\u7ea7\u8bbe\u7f6e\uff0c\u53ef\u81ea\u5b9a\u4e49\u914d\u7f6e</p> <p>\uff083\uff09<code>Presets</code> \u4fee\u6539\u9ad8\u7ea7\u8bbe\u7f6e\u4e2d\u7684\u914d\u7f6e\u9879</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#app","title":"\u542f\u52a8APP\u7684\u811a\u672c","text":"<pre><code>from appium import webdriver\ndesired_capabilities = {\n# \u5e73\u53f0\n'platformName': 'Android',\n# \u8bbe\u5907\n'deviceName': '127.0.0.1:62001',\n# \u7cfb\u7edf\u7248\u672c\n'platformVersion': '5.1.1',\n# \u5305\u540d\n'appPackage': 'com.tencent.news',\n# \u4e3bactivity\n'appActivity': 'com.tencent.news.activity.SplashActivity'\n}\ndriver = webdriver.Remote('http://localhost:4723/wd/hub', desired_capabilities)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#capability","title":"\u5e38\u7528Capability","text":"<ul> <li><code>noReset</code> \u9ed8\u8ba4\u6bcf\u6b21\u90fd\u6309\u7b2c\u4e00\u6b21\u5b89\u88c5\u7684\u72b6\u6001\u542f\u52a8</li> </ul> <pre><code>\"noReset\": True\n</code></pre> <ul> <li><code>newCommandTimeout</code> \u7b49\u5f85\u53d1\u9001\u65b0\u6d88\u606f\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u662f60\u79d2</li> </ul> <pre><code>\"newCommandTimeout\": 70\n</code></pre> <ul> <li><code>browserName</code> \u6307\u5b9a\u6d4f\u89c8\u5668\u7684\u540d\u79f0\uff08Chrome\u3001safari\uff09</li> </ul> <pre><code>\"browserName\" : 'Chrome'\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium_4","title":"Appium\u5143\u7d20\u5b9a\u4f4d","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1-appium-inspector","title":"1\u3001\u5143\u7d20\u63a2\u6d4b\u5de5\u5177-appium-inspector","text":"<p>Github\u5730\u5740\uff1ahttps://github.com/appium/appium-inspector</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2-uiautomatorviewer","title":"2\u3001\u5143\u7d20\u63a2\u6d4b\u5de5\u5177-UIAutomatorviewer","text":"<p>\uff081\uff09\u6253\u5f00\u5728 <code>Android_sdk_windows/tools_xpaths/uiautomatorviewer.bat</code></p> <p>\uff082\uff09\u70b9\u51fb\u5de6\u4e0a\u89d2\u6309\u94ae\uff0c\u83b7\u53d6 <code>APP</code> \u5feb\u7167</p> <p>\uff083\uff09\u9f20\u6807\u6307\u5b9a\u5feb\u7167\u4e0a\u7684\u5143\u7d20\uff0c\u53f3\u4fa7\u5373\u4f1a\u663e\u793a\u8be5\u5143\u7d20\u7684\u4fe1\u606f</p> <p>\uff084\uff09\u4fdd\u5b58\u529f\u80fd\uff0c\u53ef\u5c06\u9875\u9762\u5feb\u7167\u548c\u5143\u7d20\u4fe1\u606f\u4fdd\u5b58\u4e0b\u6765\uff0c\u65b9\u4fbf\u4e0b\u6b21\u67e5\u770b\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u539f\u751f\u5e94\u7528\u7684\u5b9a\u4f4d","text":"<p>\u5b9a\u4f4d\u7684\u65b9\u5f0f\u6709\u4ee5\u4e0b\u51e0\u79cd</p> <ul> <li>\u7528\u8fc7 <code>id</code>\uff0c\u4f46 <code>id</code> \u5e76\u4e0d\u552f\u4e00 </li> </ul> <pre><code>driver.find_element_by_id('id').click()\n</code></pre> <ul> <li>\u901a\u8fc7class name\u5b9a\u4f4d</li> </ul> <pre><code>driver.find_element_by_class_name('class')\n</code></pre> <ul> <li>\u901a\u8fc7xpath\u5b9a\u4f4d</li> </ul> <pre><code>driver.find_element_by_xpath('xpath')\n</code></pre> <p>\u200b    xpath\u8f74</p> <p>\u200b    \u7528\u6cd5\uff1a</p> <pre><code>//*[@id='kw']/parent::span\n</code></pre> \u8f74\u540d\u79f0 \u7ed3\u679c ancestor \u9009\u62e9\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5148\u8f88\uff08\u7236\u3001\u7956\u7236\u7b49\uff09 ancestor-or-self \u9009\u53d6\u5bf9\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5148\u8f88\uff08\u7236\u3001\u7956\u7236\u7b49\uff09\u4ee5\u53ca\u5f53\u524d\u8282\u70b9\u672c\u8eab attribute \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5c5e\u6027 child \u9009\u62e9\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5c5e\u6027 descendant \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u540e\u4ee3\u5143\u7d20\uff08\u5b50\u3001\u5b59\u7b49\uff09 descendant-or-self \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u540e\u4ee3\u5143\u7d20\u4ee5\u53ca\u5f53\u524d\u8282\u70b9\u672c\u8eab following \u9009\u53d6\u6587\u6863\u5f53\u524d\u8282\u70b9\u7684\u7ed3\u675f\u6807\u7b7e\u4e4b\u540e\u7684\u6240\u6709\u8282\u70b9 namespace \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u547d\u540d\u7a7a\u95f4\u8282\u70b9 parent \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u7236\u8282\u70b9 preceding \u9009\u53d6\u6587\u6863\u4e2d\u5f53\u524d\u8282\u70b9\u7684\u5f00\u59cb\u6807\u7b7e\u4e4b\u524d\u7684\u6240\u6709\u8282\u70b9 preceding-sibling \u9009\u53d6\u5f53\u524d\u8282\u70b9\u4e4b\u524d\u7684\u6240\u6709\u7edf\u8ba1\u8282\u70b9 <p>\uff084\uff09\u5c42\u7ea7\u5b9a\u4f4d\uff0c\u5c31\u662f\u5143\u7d20\u518d\u67e5\u627e</p> <pre><code> element = driver.find_element_by_id('id').find_element_by_xpath('path')\n</code></pre> <p>\uff085\uff09\u5f15\u5165By\u7c7b</p> <pre><code>  from appium.webdriver.common.mobileby import MobileBy as By\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4uiautomator","title":"4\u3001UIAutomator","text":"<pre><code> driver.find_element(By.ANDROID_UIAUTOMATOR,'new UiSelector().resourceId(\"resourece-id\")')\n</code></pre> <p>\u2460 <code>new UiSelector().text(\"text\")</code></p> <p>\u2461 <code>new UiSelector().classname(\"class\")</code></p> <p>\u200b    \u5c42\u7ea7\u5173\u7cfb\u5b9a\u4f4d</p> <p>\u2462\u5f53\u524d\u7c7b\u5f80\u4e0b\u9012\u5f52\u627e\u7b26\u5408\u6761\u4ef6\u7684\u5b50\u7ea7\u63a7\u4ef6</p> <pre><code>new UiSelector().resourceId(\"resourece-id\").childSelector(new UiSelector().resourceId(\"resourece-id\"))\n</code></pre> <p>\u2463\u4ece\u7236\u7c7b\u5f80\u4e0b\u9012\u5f52\u627e\u7b26\u5408\u6761\u4ef6\u7684\u63a7\u4ef6</p> <pre><code>new UiSelector().resourceId(\"resourece-id\").fromParent(new UiSelector().resourceId(\"resourece-id\"))\n</code></pre> <p>\uff086\uff09\u83b7\u53d6\u5143\u7d20\u5217\u8868</p> <pre><code>find_elements\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5hybrid","title":"5\u3001\u6df7\u5408\u5e94\u7528hybrid","text":"<p>\uff081\uff09Chrome \u8fdc\u7a0b\u8c03\u8bd5</p> <p>\u2460\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\uff1a</p> <pre><code>chrome://inspect/#devices\n</code></pre> <p>\u2461\u6d4f\u89c8\u5668\u4e0a\u4f1a\u663e\u793a\u624b\u673a\u4e0a\u6240\u6709APP\u7684web\u7f51\u9875\u7684\u5730\u5740</p> <p>\u2462\u590d\u5236\u5730\u5740\u5728\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\uff0c\u5373\u53ef\u5bf9\u5143\u7d20\u8fdb\u884c\u5b9a\u4f4d</p> <p>\uff082\uff09<code>driver.contexts</code></p> <p>\u67e5\u770b <code>context</code> \u7684\u60c5\u51b5</p> <pre><code>driver.switch_to.context('NATIVE_APP') \n</code></pre> <p>\u8df3\u8f6c\u5230\u539f\u751f\u5e94\u7528\u7684 <code>context</code></p> <p>\uff083\uff09<code>appium inspector</code> \u5b9a\u4f4d</p> <p>\u5728 <code>appium</code> \u53f3\u4e0a\u89d2\u70b9\u51fb\u653e\u5927\u955c\u7b26\u53f7\uff0c\u586b\u5165 <code>desired_capabilities</code> \u91cc\u9762\u7684\u53c2\u6570</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#6web","title":"6\u3001web\u5e94\u7528","text":"<p>\u901a\u8fc7 <code>pc</code> \u7aef <code>chrome</code> \u64cd\u4f5c</p> <pre><code>from selenium import webdriver\nfrom time import sleep\nmobile_emulation = {'deviceName': 'Galaxy S5'}\nchrome_options = webdriver.ChromeOptions()\nchrome_options.add_experimental_option('mobileEmulation', mobile_emulation)\ndriver = webdriver.Chrome(chrome_options=chrome_options)\ndriver.get('http://www.baidu.com')\nsleep(20)\ndriver.quit()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#appium_5","title":"Appium\u64cd\u4f5c","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u57fa\u672c\u64cd\u4f5c","text":"<p>1.\u70b9\u51fb</p> <pre><code>click\uff08\uff09\n</code></pre> <p>2.\u591a\u70b9\u89e6\u6478</p> <pre><code>driver.tap(positions, duration=None)\n</code></pre> <p>3.\u6e05\u9664\u6587\u672c</p> <pre><code>driver.find_element_by_id('id').clear()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u6eda\u52a8\u64cd\u4f5c","text":"<p>1.\u5143\u7d20\u6eda\u52a8</p> <p>\u6309\u4f4f\u4e0d\u653e\uff0c\u62d6\u52a8</p> <pre><code>driver.scroll(ele_1,ele_2) \n</code></pre> <p>\u4f20\u5165\u4e24\u4e2a\u5143\u7d20</p> <p>2.\u5143\u7d20\u62d6\u62fd</p> <p>\u5728\u5f00\u59cb\u5143\u7d20\u957f\u6309\uff081000\u6beb\u79d2\uff09</p> <pre><code>driver.drag_and_drop(ele_1,ele_2)\n</code></pre> <p>3.\u5c4f\u5e55\u6ed1\u52a8</p> <pre><code>driver.swipe(start_x,start_y,end_x,end_y,duration=None)\n</code></pre> <p>\u5206\u522b\u4f20\u5165\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u7684xy\u8f74\u503c</p> <p>4.\u5feb\u901f\u6ed1\u52a8</p> <pre><code>driver.flick(start_x,start_y,end_x,end_y)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u8f93\u5165\u3001\u952e\u76d8\u548c\u8f93\u5165\u6cd5\u63a7\u5236","text":"<p>1.\u6a21\u62df\u8f93\u5165</p> <pre><code>send_keys(\"text\")\n</code></pre> <p>2.\u53d1\u9001\u6309\u952e\u7801</p> <pre><code>driver.press_keycode(66)\n</code></pre> <p>\u5e38\u7528\u7684\u6309\u952e\u7801</p> <pre><code>4:\u8fd4\u56de\n66:\u56de\u8f66\n26:\u7535\u6e90\u952e\n3:home\u952e\n</code></pre> <p>3.\u8f93\u5165\u6cd5\u64cd\u4f5c</p> <pre><code># \u83b7\u53d6\u5f53\u524d\u8f93\u5165\u6cd5\u5f15\u64ce\nactive_ime_engine()\n# \u6fc0\u6d3b\u67d0\u4e2a\u8f93\u5165\u6cd5\nactivate_ime_engine(engine)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u83b7\u53d6\u9875\u9762\u5185\u5bb9","text":"<p>1.\u83b7\u53d6\u4e0a\u4e0b\u6587\u4fe1\u606f</p> <pre><code># \u770b\u6709\u6ca1\u6709webview\uff0c\u5305\u542b\u5f53\u524d\u4f1a\u8bdd\u6240\u6709\u4e0a\u4e0b\u6587\u7684list\ndriver.contexts \n# \u83b7\u53d6\u5f53\u524d\u4e0a\u4e0b\u6587\ndrover/current_context \n</code></pre> <p>2.\u83b7\u53d6\u5f53\u524d\u6240\u5728\u7684activity</p> <pre><code>driver.current_activity\n</code></pre> <pre><code># \u4efb\u610f\u7a0b\u5e8f\u9875\u9762\uff0c\u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684activity\nadb shell dumpsys window | findstr mCurrentFocus </code></pre> <p>3.\u83b7\u53d6\u5143\u7d20\u76f8\u5173\u5185\u5bb9</p> <p>\u2460 \u83b7\u53d6\u6587\u672c\u503c</p> <pre><code>driver.find_element_by_id('id').text\n</code></pre> <p>\u2461\u83b7\u53d6\u5143\u7d20\u5c5e\u6027\u503c</p> <pre><code>driver.find_element_by_id('id').get_attribute('text')\n</code></pre> <p>\u2462\u83b7\u53d6\u5143\u7d20\u5927\u5c0f</p> <pre><code>driver.find_element_by_id('id').size\n</code></pre> <p>\u2463\u83b7\u53d6\u5143\u7d20\u5750\u6807</p> <pre><code>driver.find_element_by_id('id').location\n</code></pre> <p>4.\u68c0\u67e5\u5143\u7d20\u72b6\u6001</p> <p>\u2460\u68c0\u67e5\u5143\u7d20\u662f\u5426\u88ab\u9009\u4e2d</p> <pre><code>driver.find_element_by_id('id').is_selected()\n</code></pre> <p>\u2461\u68c0\u67e5\u5143\u7d20\u662f\u5426\u53ef\u7528</p> <pre><code>driver.find_element_by_id('id').is_enabled()\n</code></pre> <p>\u2462\u83b7\u53d6\u7a97\u53e3\u5927\u5c0f</p> <pre><code>driver.get_window_size(windowHandle='current')\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\u7b49\u5f85","text":"<p>1.wait_activity </p> <p>\u7b49\u5f85\u67d0\u4e2a activity \u52a0\u8f7d\u5b8c</p> <pre><code># \u6bcf\u96941\u79d2\u626b\u63cf\u4e00\u4e0b\uff0c\u603b\u5171\u7b49\u5f8510\u79d2\nwait_activity('.base.ui.MainActiity',10,1) \n</code></pre> <p>2.\u5f3a\u5236\u7b49\u5f85</p> <pre><code>time.sleep(1)\n</code></pre> <p>3.\u9690\u5f0f\u7b49\u5f85 </p> <p>\u53ea\u9700\u8981\u58f0\u660e\u4e00\u6b21\uff0c\u4e00\u822c\u5728\u6253\u5f00\u6d4f\u89c8\u5668\u540e\u8fdb\u884c\u58f0\u660e\uff0c\u58f0\u660e\u4e4b\u540e\u5bf9\u6574\u4e2adriver\u7684\u751f\u547d\u5468\u671f\u90fd\u6709\u6548\u3002</p> <pre><code>driver.implicitly_wait(20)\n</code></pre> <p>4.\u663e\u793a\u7b49\u5f85</p> <p>\u7b49\u5f85\u67d0\u4e2a\u5143\u7d20\u51fa\u73b0</p> <pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nwait = WebDriverWait(driver,10,0.5)\nwait.until(EC.presence_of_element_located(By.ID,'kw'))\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\u622a\u56fe","text":"<p>1.\u622a\u56fe\u4fdd\u5b58\u4e3a\u6587\u4ef6</p> <pre><code>driver.save_screenshot(C:/filename.png)\n</code></pre> <p>2.\u622a\u56fe\u5e76\u4fdd\u5b58\u4e3a\u5b57\u7b26\u4e32</p> <pre><code>base64_png = driver.get_screenshot_as_base64()\nbase64_png_bytes = base64.b64decode(base64_png)\nwith open('xxx.png','wb') as f:\nf.write(base64_png_bytes)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#app_1","title":"APP\u5f39\u7a97\u5904\u7406","text":"<ul> <li><code>Dialog</code> \u5bf9\u8bdd\u6846\uff0c\u786e\u5b9a\u6216\u53d6\u6d88\u7b49\u5f39\u7a97</li> <li><code>Actionbar</code> \u529f\u80fd\u6846\uff0c\u5206\u4eab\u529f\u80fd\u4ece\u4e0b\u65b9\u5f39\u51fa\u7684\u7a97\u53e3</li> <li><code>Toast</code> \u63d0\u793a\u4fe1\u606f\uff0c\u9875\u9762\u5c0f\u63d0\u793a\uff0c\u8fc7\u51e0\u79d2\u949f\u5c31\u81ea\u52a8\u6d88\u5931</li> <li><code>Snackbar</code> \u63d0\u793a\u5bf9\u8bdd\u6846</li> <li><code>Dialog</code> \u548c <code>Actionbar</code> \u53ef\u4ee5\u76f4\u63a5\u7528\u5143\u7d20\u5b9a\u4f4d</li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Appium%E2%80%946%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_10","title":"\u89e6\u5c4f\u64cd\u4f5c","text":"<p>TouchAction \u8981\u4f7f\u7528\u5230\u8fd9\u4e2a\u7c7b\u91cc\u9762\u7684\u65b9\u6cd5</p> <pre><code>from appium.webdriver.common.touch_action import TouchAction\n</code></pre> <p>1.tap \u89e6\u6478</p> <pre><code>tap(element=None, x=None, y=None, count=1)\n</code></pre> <p>2.press \u77ed\u6309</p> <pre><code>press(el=None, x=None, y=None)\n</code></pre> <p>3.long_press \u957f\u6309</p> <pre><code>long_press(el=None, x=None, y=None, duration=1000)\n</code></pre> <p>4.wait \u7b49\u5f85</p> <pre><code>wait(ms=0)\n</code></pre> <p>5.move_to \u79fb\u52a8</p> <pre><code>move_to(el=None, x=None, y=None)\n</code></pre> <p>6.release \u91ca\u653e</p> <pre><code>driver.release()\n</code></pre> <p>7.perform \u63d0\u4ea4</p> <pre><code>driver.perform()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"HttpRunner\u20142\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># ==================================\n# Author : Mikigo\n# ==================================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>\u63a5\u53e3\u6d4b\u8bd5\u5f88\u591a\u540c\u5b66\u7528 <code>Postman</code>\u3001<code>Jmeter</code> \u6765\u505a\uff0c\u7528\u8d77\u6765\u4e5f\u633a\u7b80\u5355\u7684\uff0c\u4f46\u662f\u63a5\u53e3\u7528\u4f8b\u591a\u4e86\u4e4b\u540e\u5c31\u53d1\u73b0\u4e0d\u597d\u7ba1\u7406\u7ef4\u62a4\uff0c\u8981\u843d\u5730\u5230\u516c\u53f8\u7ea7 CI \u9879\u76ee\u5c31\u6709\u70b9\u96be\u641e\u4e86\uff1b</p> <p>\u7a0d\u5fae\u6709\u70b9\u6280\u672f\u80fd\u529b\u7684\u540c\u5b66\u66f4\u613f\u610f\u76f4\u63a5\u7528 <code>requests</code> \u6765\u505a\u63a5\u53e3\u81ea\u52a8\u5316\uff0c\u4f46\u662f\u5927\u591a\u7528 <code>requests</code> \u6765\u505a\u7684\u63a5\u53e3\u81ea\u52a8\u5316\u9879\u76ee\uff0c\u5728\u5de5\u7a0b\u5316\u65b9\u9762\u90fd\u505a\u5f97\u4e0d\u592a\u597d\uff0c\u4e0e\u5176\u8bf4\u662f\u63a5\u53e3\u81ea\u52a8\u5316\u9879\u76ee\uff0c\u4e0d\u5982\u8bf4\u662f\u63a5\u53e3\u811a\u672c\u7684\u96c6\u4e2d\u5b58\u653e\uff0c\u6ca1\u6709\u4f53\u7cfb\u5316\u7684\u6846\u67b6\u7ed3\u6784\u8bbe\u8ba1\uff0c\u56e0\u6b64\u5728\u5927\u578b CI \u9879\u76ee\u4e2d\u843d\u5730\u4e5f\u663e\u5f97\u4e0d\u592a\u591f\u7528\uff0c\u7ef4\u62a4\u4eba\u5458\u9664\u4e86\u5fd9\u4e8e\u63a5\u53e3\u811a\u672c\u7684\u7ef4\u62a4\uff0c\u8fd8\u8981\u6295\u5165\u5927\u91cf\u65f6\u95f4\u505a\u65b0\u529f\u80fd\u548c\u4fee\u590d\u4ee3\u7801\u4e2d\u7684 Bug\u3002</p> <p>\u60f3\u8981\u8f7b\u677e\u5feb\u901f\u7684\u843d\u5730\u63a5\u53e3\u81ea\u52a8\u5316\uff0c\u53c8\u4e0d\u60f3\u81ea\u5df1\u53bb\u6298\u817e\uff0c\u6211\u4e2a\u4eba\u8fd8\u662f\u63a8\u8350 <code>HttpRunner</code>\uff0c\u53ea\u9700\u8981\u5199\u5199\u914d\u7f6e\u6587\u4ef6\u5c31\u628a\u6d3b\u5e72\u5b8c\u4e86\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1a<code>deepin</code> / <code>UOS</code></p> <pre><code>sudo bash -c \"$(curl -ksSL https://httprunner.com/script/install.sh)\"\n</code></pre> <p>\u6ce8\u610f\uff0c\u4f7f\u7528 <code>sudo</code> \u5b89\u88c5\uff0c\u4e0d\u7136\u547d\u4ee4\u884c\u5de5\u5177\u65e0\u6cd5\u5199\u5165\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u88c5\u5b8c\u4e4b\u540e\u4f1a\u6709\u4e00\u4e9b\u7248\u672c\u3001\u547d\u4ee4\u884c\u53c2\u6570\u7684\u8f93\u51fa\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u521b\u5efa\u9879\u76ee","text":"<pre><code>hrp startproject funny-api-autotest\n</code></pre> <p>\u8fd9\u91cc\u4f1a\u4f7f\u7528 <code>venv</code> \u521b\u5efa\u4e00\u4e2a\u865a\u62df\uff0c\u6709\u53ef\u80fd\u62a5\u9519\u9700\u8981\u5b89\u88c5 <code>python3-venv</code>\uff1b</p> <p>\u4e0d\u8981\u614c\uff0c\u6211\u4eec\u6765\u4fee\u590d\u4e00\u4e0b\u73af\u5883\uff1a</p> <pre><code># \u5b89\u88c5\u4f9d\u8d56\nsudo apt install python3-pip\n# \u5b89\u88c5venv\nsudo apt install python3-venv\n# \u628a\u4e4b\u524d\u521b\u5efa\u5931\u8d25\u7684\u865a\u62df\u73af\u5883\u5220\u6389\ncd ~/.hrp/\nrm -rf venv\n# \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\npython3 -m venv venv\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource ~/.hrp/venv/bin/activate\n# \u628apip\u66f4\u65b0\u4e00\u4e0b\npip install --upgrade pip setuptools wheel\n# \u5b89\u88c5\u4f9d\u8d56funppy\npip install funppy\n</code></pre> <p>\u5982\u679c\u4e0d\u51fa\u610f\u5916\uff0c\u73af\u5883\u5c31\u5b89\u88c5\u597d\u4e86\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>.\n\u251c\u2500\u2500 debugtalk.py # \u5b9a\u4e49\u4e00\u4e9b\u51fd\u6570\u5e76\u8fd4\u56de\u4e00\u4e9b\u503c\uff0c\u51fd\u6570\u540d\u548c\u53c2\u6570\u53ef\u4ee5\u4f20\u5165\u5230yml\u6587\u4ef6\u53c2\u6570\u91cc\u9762\uff1b\n\u251c\u2500\u2500 .env # \u5b9a\u4e49\u5168\u5c40\u7684\u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 har # \u5bfc\u51fa\u7684har\u6587\u4ef6\n\u251c\u2500\u2500 proj.json # \u5de5\u7a0b\u4fe1\u606f\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 results # \u6d4b\u8bd5\u62a5\u544a\n\u2514\u2500\u2500 testcases # \u6d4b\u8bd5\u7528\u4f8b\n</code></pre> <p><code>testcases</code> </p> <p>\u8fd9\u91cc\u9762\u7528\u4f8b\u662f <code>yaml</code> \u6216 <code>json</code> \u6587\u4ef6\uff0c\u7528 <code>yaml</code> \u6587\u4ef6\u5199\u63a5\u53e3\u81ea\u52a8\u5316\u7684\u7528\u4f8b\u4e5f\u662f\u5e38\u89c4\u64cd\u4f5c\uff0c\u56e0\u4e3a\u63a5\u53e3\u51e0\u4e4e\u90fd\u662f\u4ee5\u5b57\u5178\uff08\u6216 <code>json</code>\uff09\u7684\u5f62\u5f0f\u63d0\u4f9b\u53c2\u6570\uff0c\u800c <code>yaml</code> \u6587\u4ef6\u8bfb\u51fa\u6765\u521a\u597d\u5c31\u662f\uff0c\u6240\u4ee5\u5927\u5bb6\u5c31\u559c\u6b22\u7528\u8fd9\u79cd\u683c\u5f0f\u3002</p> <p>\u524d\u9762\u6211\u8bf4\u8fd9\u4e2a\u6846\u67b6\u7b80\u5355\u5c31\u662f\u56e0\u4e3a\u628a\u63a5\u53e3\u7684\u4fe1\u606f\u5c31\u76f4\u63a5\u5728 <code>yaml</code> \u6587\u4ef6\u91cc\u9762\u4e00\u914d\u7f6e\uff0c\u6d3b\u5c31\u5e72\u5b8c\u4e86\uff0c\u6839\u672c\u90fd\u4e0d\u9700\u8981\u5199\u4ee3\u7801\uff1b</p> <p>\u5bf9\u65b0\u624b\u6765\u8bf4\u7b80\u76f4\u4e86\uff0c\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b <code>yaml</code> \u6587\u4ef6\u7684\u5b57\u6bb5\uff1a</p> <pre><code>config:\nname: \"request methods testcase with functions\"\nvariables:\nfoo1: config_bar1\nfoo2: config_bar2\nexpect_foo1: config_bar1\nexpect_foo2: config_bar2\nbase_url: \"https://postman-echo.com\"\nverify: False\nexport: [\"foo3\"]\nteststeps:\n-\nname: get with params\nvariables:\nfoo1: bar11\nfoo2: bar21\nsum_v: \"${sum_two(1, 2)}\"\nrequest:\nmethod: GET\nurl: /get\nparams:\nfoo1: $foo1\nfoo2: $foo2\nsum_v: $sum_v\nheaders:\nUser-Agent: HttpRunner/${get_httprunner_version()}\nextract:\nfoo3: \"body.args.foo2\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.args.foo1\", \"bar11\"]\n- eq: [\"body.args.sum_v\", \"3\"]\n- eq: [\"body.args.foo2\", \"bar21\"]\n-\nname: post form data\nvariables:\nfoo2: bar23\nrequest:\nmethod: POST\nurl: /post\nheaders:\nUser-Agent: HttpRunner/${get_httprunner_version()}\nContent-Type: \"application/x-www-form-urlencoded\"\ndata: \"foo1=$foo1&amp;foo2=$foo2&amp;foo3=$foo3\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.form.foo1\", \"$expect_foo1\"]\n- eq: [\"body.form.foo2\", \"bar23\"]\n- eq: [\"body.form.foo3\", \"bar21\"]\n</code></pre> <ul> <li>config\uff1a\u6d4b\u8bd5\u7528\u4f8b\u7684\u516c\u5171\u914d\u7f6e\u90e8\u5206\uff0c\u5305\u62ec\u7528\u4f8b\u540d\u79f0\u3001base_url\u3001\u53c2\u6570\u5316\u6570\u636e\u6e90\u3001\u662f\u5426\u5f00\u542f SSL \u6821\u9a8c\u7b49\uff0c\u4e3e\u4f8b\uff1a</li> </ul> <pre><code>config:\nname: \"demo with complex mechanisms\"\nverify: False\nbase_url: \"https://postman-echo.com\"\nheaders:\nX-Request-Timestamp: \"165460624942\"\nparameters:\nuser_agent: [ \"iOS/10.1\", \"iOS/10.2\" ]\nusername-password: ${parameterize($file)}\nparameters_setting:\nstrategies:\nuser_agent:\nname: \"user-identity\"\npick_order: \"sequential\"\nusername-password:\nname: \"user-info\"\npick_order: \"random\"\nlimit: 6\nthink_time:\nstrategy: random_percentage\nsetting:\nmax_percentage: 1.5\nmin_percentage: 1\nlimit: 4\nvariables:\napp_version: v1\nuser_agent: iOS/10.3\nfile: examples/hrp/account.csv\nwebsocket:\nreconnection_times: 5\nreconnection_interval: 2000\nexport: [\"app_version\"]\nweight: 10\n</code></pre> <ul> <li>teststeps\uff1a\u6709\u5e8f\u6b65\u9aa4\u7684\u96c6\u5408\uff1b</li> </ul> \u6d4b\u8bd5\u6b65\u9aa4\u7c7b\u578b \u542b\u4e49 request \u7528\u4e8e\u53d1\u8d77 HTTP \u8bf7\u6c42\u7684\u6b65\u9aa4\u7c7b\u578b api \u7528\u4e8e\u5f15\u7528 API \u7684\u6b65\u9aa4\u7c7b\u578b testcase \u7528\u4e8e\u5f15\u7528\u5176\u4ed6\u6d4b\u8bd5\u7528\u4f8b\u7684\u6b65\u9aa4\u7c7b\u578b transaction \u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u4e8b\u52a1 rendezvous \u96c6\u5408\u70b9 think_time \u601d\u8003\u65f6\u95f4 websocket \u7528\u4e8e\u53d1\u8d77 WebSocket \u8bf7\u6c42\u7684\u6b65\u9aa4\u7c7b\u578b <p>\u9664\u4e86\u57fa\u672c\u7684\u6d4b\u8bd5\u6b65\u9aa4\u4e4b\u5916\uff0c\u90e8\u5206\u6d4b\u8bd5\u6b65\u9aa4\u8fd8\u53ef\u4ee5\u8fdb\u884c\u589e\u5f3a\uff1b</p> \u589e\u5f3a\u64cd\u4f5c\u7c7b\u578b \u542b\u4e49 \u9002\u7528\u7684\u6d4b\u8bd5\u6b65\u9aa4 variables \u5c40\u90e8\u53d8\u91cf \u901a\u7528 setup_hooks \u524d\u7f6e\u51fd\u6570 request/api/websocket teardown_hooks \u540e\u7f6e\u51fd\u6570 request/api/websocket extract \u53c2\u6570\u63d0\u53d6 request/api/websocket validate \u7ed3\u679c\u6821\u9a8c request/api/websocket export \u5bfc\u51fa\u53d8\u91cf testcase <p>\u4e3e\u4f8b\uff1a</p> <pre><code>teststeps:\n-\nname: get with params\nvariables:\nfoo1: ${ENV(USERNAME)}\nfoo2: bar21\nsum_v: \"${sum_two_int(1, 2)}\"\nrequest:\nmethod: GET\nurl: $base_url/get\nparams:\nfoo1: $foo1\nfoo2: $foo2\nsum_v: $sum_v\nextract:\nfoo3: \"body.args.foo2\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.args.foo1\", \"debugtalk\"]\n- eq: [\"body.args.sum_v\", \"3\"]\n- eq: [\"body.args.foo2\", \"bar21\"]\n-\nname: post form data\nvariables:\nfoo2: bar23\nrequest:\nmethod: POST\nurl: $base_url/post\nheaders:\nContent-Type: \"application/x-www-form-urlencoded\"\nbody: \"foo1=$foo1&amp;foo2=$foo2&amp;foo3=$foo3\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.form.foo1\", \"$expect_foo1\"]\n- eq: [\"body.form.foo2\", \"bar23\"]\n- eq: [\"body.form.foo3\", \"bar21\"]\n</code></pre> <p>\u7279\u6b8a\u503c\u7684\u89c4\u5219\uff1a</p> <ul> <li> <p>\u53d8\u91cf\u5f15\u7528\uff1a\u7ea6\u5b9a\u901a\u8fc7 <code>${}</code> \u6216 <code>$</code> \u7684\u5f62\u5f0f\u6765\u5f15\u7528\u53d8\u91cf\uff0c\u4f8b\u5982 <code>$foo1</code> \u6216 <code>${foo1}</code></p> </li> <li> <p>\u51fd\u6570\u8c03\u7528\uff1a\u7ea6\u5b9a\u901a\u8fc7 <code>${}</code> \u7684\u5f62\u5f0f\u6765\u8c03\u7528\u63d2\u4ef6\u51fd\u6570\uff0c\u4f8b\u5982 <code>${sum_two(1, 2)}</code> \uff1b</p> </li> </ul> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0cyaml \u6587\u4ef6\u91cc\u9762\u5199 <code>${sum_two(1, 2)}</code>\uff0c\u4ece\u54ea\u91cc\u6765\u7684\uff1b</p> <p>\u5176\u5b9e\uff0c<code>sum_two</code> \u5728<code>debugtalk.py</code> \u91cc\u9762\u5b9a\u4e49;</p> <pre><code># debugtalk.py\nimport funppy\ndef sum_two_int(a: int, b: int) -&gt; int:\nreturn a + b\nif __name__ == '__main__':\nfunppy.register(\"sum_two\", sum_two_int)\nfunppy.serve()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u6267\u884c\u7528\u4f8b","text":"<pre><code>hrp run testcases/demo_requests.yml --gen-html-report\n</code></pre> <p>\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0c\u5728 <code>result</code> \u76ee\u5f55\u4e0b\u751f\u6210 <code>html</code> \u6d4b\u8bd5\u62a5\u544a\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u516d\u3001\u5b9e\u4f8b","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1mock","title":"1\u3001mock\u63a5\u53e3","text":"<p>\u54b1\u4eec\u5148\u4f7f\u7528 <code>FastAPI</code> \u7b80\u5355 <code>Mock</code> \u4e00\u4e2a\u63a5\u53e3\uff1a</p> <pre><code># mock.py\nimport os\nimport uvicorn\nfrom fastapi import FastAPI\napp = FastAPI()\n@app.get(\"/items/\")\nasync def read_item(name: str = \"\"):\nreturn {\"name\": name}\nif __name__ == '__main__':\nuvicorn.run(\napp=\"mock:app\",\nhost=os.popen(\"hostname -I\").read().split(\" \")[0], # \u81ea\u52a8\u83b7\u53d6\u672c\u673aIP\nport=5000,\nreload=True\n)\n</code></pre> <p>\u770b\u770b\u63a5\u53e3\u6587\u6863\uff0c\u975e\u5e38\u7b80\u5355\u7684\u4e00\u4e2a\u63a5\u53e3</p> <p></p> <p>\u597d\uff0c\u90a3\u54b1\u4eec\u56de\u5230httprunner\u91cc\u9762\u6765\u5199\u7528\u4f8b\u4e86\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u5199\u63a5\u53e3\u7528\u4f8b","text":"<p>\u7528\u4f8b\u4e5f\u975e\u5e38\u7b80\u5355\uff1a</p> <pre><code># testcases/demo_1.yml\nconfig:\nname: \"demo_1\"\nvariables:\nname: mikigo\nverify: False\nteststeps:\n-\nname: get with params\nrequest:\nmethod: GET\nurl: http://10.8.7.199:5000/items/  # ip\u5199\u4f60\u7684\u673a\u5668\u7684ip\nparams:\nname: mikigo\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.name\", \"mikigo\"]\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u6267\u884c\u7528\u4f8b","text":"<p>\u4f7f\u7528hrp\u547d\u4ee4\u6267\u884c</p> <pre><code>hrp run testcases/demo_1.yml --gen-html-report\n</code></pre> <p>run \u662f\u4f7f\u7528 go \u9a71\u52a8\u6267\u884c\uff1b</p> <p>\u5982\u679c\u4f60\u4e60\u60ef\u4f7f\u7528 pytest\uff1a</p> <pre><code>hrp pytest testcases/demo_1.yml\n</code></pre> <p>\u540e\u9762\u4f60\u8981\u751f\u6210\u4ec0\u4e48\u62a5\u544a\uff0c\u52a0\u4ec0\u4e48\u53c2\u6570\u5c31\u5b8c\u5168\u6309\u7167 <code>pytest</code> \u7684\u89c4\u8303\u6765\u5c31\u597d\uff0c\u4e0d\u8fc7 <code>pytest</code> \u90a3\u4e00\u5957\u54b1\u4eec\u5df2\u7ecf\u719f\u5f97\u4e0d\u80fd\u518d\u719f\u4e86\uff0c\u6ca1\u5565\u610f\u601d\uff0c\u5c31\u7528 go \u9a71\u52a8\u5427\u3002</p> <p>\u8dd1\u5b8c\u4e4b\u540e\u5728 <code>results</code> \u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a <code>html</code> \u6587\u4ef6\uff0c\u6253\u5f00\u5b83\uff1a</p> <p></p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#debugtalkpy","title":"\u4e03\u3001debugtalk.py\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>\u524d\u9762\u8bb2\u5230\u53ef\u4ee5\u5728 <code>debugtalk.py</code> \uff08\u4e0b\u9762\u5c31\u7528\u201c\u5b83\u201d\u6307\u4ee3\uff09\u91cc\u9762\u5b9a\u4e49\u4e00\u4e9b\u53d8\u91cf\u6216\u51fd\u6570\uff0c\u7136\u540e\u5728\u7528\u4f8b\u91cc\u9762\u901a\u8fc7 <code>$var</code> \u3001<code>${func()}</code> \u7684\u65b9\u5f0f\u8c03\u7528\uff1b</p> <p>\u8fd9\u7ae0\u54b1\u4eec\u5c31\u8bb2\u8bb2\uff0c\u4e3a\u5565\u5728 <code>debugtalk.py</code> \u91cc\u9762\u5b9a\u4e49\u7684\u4ee3\u7801\uff0c\u80fd\u5728 <code>yaml</code> \u6587\u4ef6\u91cc\u9762\u5199\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u8c03\u7528\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u83b7\u53d6\u8def\u5f84","text":"<p>\u5728 <code>loader.py</code> \u91cc\u9762\uff1a</p> <pre><code># loader.py\ndef locate_project_root_directory(test_path: Text) -&gt; Tuple[Text, Text]:\n\"\"\"locate debugtalk.py path as project root directory\n    Args:\n        test_path: specified testfile path\n    Returns:\n        (str, str): debugtalk.py path, project_root_directory\n    \"\"\"\n...\nreturn debugtalk_path, project_root_directory\n</code></pre> <p>\u5f88\u660e\u663e\u8fd4\u56de\u4e86\u4e24\u4e2a\u8def\u5f84\uff1a<code>ebugtalk_path</code>, <code>project_root_directory</code></p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_1","title":"2\u3001\u539f\u59cb\u6570\u636e","text":"<pre><code># loader\ndef load_project_meta(test_path: Text, reload: bool = False) -&gt; ProjectMeta:\n\"\"\"load testcases, .env, debugtalk.py functions.\n        testcases folder is relative to project_root_directory\n        by default, project_meta will be loaded only once, unless set reload to true.\n    Args:\n        test_path (str): test file/folder path, locate project RootDir from this path.\n        reload: reload project meta if set true, default to false\n    Returns:\n        project loaded api/testcases definitions,\n            environments and debugtalk.py functions.\n    \"\"\"\n...\nreturn project_meta\n</code></pre> <p>\u8fd4\u56de\u7684 <code>project_meta</code> \u662f <code>pydantic</code> \u7684\u6a21\u578b\u5bf9\u8c61\uff0c\u4f60\u53ef\u4ee5\u7406\u89e3\u6210\u5c31\u662f\u4e00\u4e2a\u5b57\u5178\uff1b</p> <p>\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u4e3b\u8981\u903b\u8f91\u662f\u901a\u8fc7\u4e00\u4e2a\u51fd\u6570\u83b7\u53d6\u5b83\u91cc\u9762\u7684\u51fd\u6570\u5bf9\u8c61\uff1a</p> <pre><code># loader\ndef load_module_functions(module) -&gt; Dict[Text, Callable]:\n\"\"\"load python module functions.\n    Args:\n        module: python module\n    Returns:\n        dict: functions mapping for specified python module\n            {\n                \"func1_name\": func1,\n                \"func2_name\": func2\n            }\n    \"\"\"\nmodule_functions = {}\nfor name, item in vars(module).items():\nif isinstance(item, types.FunctionType):\nmodule_functions[name] = item\nreturn module_functions\n</code></pre> <p>\u8fd9\u91cc\u9762\u4e3b\u8981\u7528\u5230\u4e86 <code>vars</code> \u51fd\u6570\u6765\u83b7\u53d6\uff0c\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u53bb\u67e5\u4e00\u4e0b\u8fd9\u4e2a\u7528\u6cd5\uff1b</p> <p>\u5230\u8fd9\u91cc\u4e5f\u5c31\u662f\u8bf4\u83b7\u53d6\u5230\u4e86\u5b83\u91cc\u9762\u7684 <code>\u51fd\u6570\u540d</code> \u53ca <code>\u51fd\u6570\u5bf9\u8c61</code> \uff0c\u6709\u4e86\u51fd\u6570\u5bf9\u8c61\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u8c03\u7528\u5c31\u884c\u4e86\uff1b</p> <p>\u54b1\u4eec\u63a5\u7740\u5f80\u540e\u770b\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_1","title":"3\u3001\u53c2\u6570\u89e3\u6784","text":"<p>\u5728 <code>parser.py</code> \u4e2d\u8fdb\u884c\u53c2\u6570\u7ed3\u6784\uff1a</p> <pre><code># parser.py\ndef parse_parameters(\nparameters: Dict,\n) -&gt; List[Dict]:\n\"\"\"parse parameters and generate cartesian product.\n    Args:\n        parameters (Dict) parameters: parameter name and value mapping\n            parameter value may be in three types:\n                (1) data list, e.g. [\"iOS/10.1\", \"iOS/10.2\", \"iOS/10.3\"]\n                (2) call built-in parameterize function, \"${parameterize(account.csv)}\"\n                (3) call custom function in debugtalk.py, \"${gen_app_version()}\"\n    Returns:\n        list: cartesian product list\n    \"\"\"\n...\nreturn utils.gen_cartesian_product(*parsed_parameters_list)\n</code></pre> <p>\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u6570\u636e\u5904\u7406\uff0c\u628a\u53c2\u6570\u5217\u8868\u8fd4\u56de\u51fa\u6765</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u51fd\u6570\u8c03\u7528","text":"<pre><code># parser.py\ndef parse_string(\nraw_string: Text,\nvariables_mapping: VariablesMapping,\nfunctions_mapping: FunctionsMapping,\n) -&gt; Any:\n\"\"\"parse string content with variables and functions mapping.\n    Args:\n        raw_string: raw string content to be parsed.\n        variables_mapping: variables mapping.\n        functions_mapping: functions mapping.\n    Returns:\n        str: parsed string content.\n    Examples:\n        &gt;&gt;&gt; raw_string = \"abc${add_one($num)}def\"\n        &gt;&gt;&gt; variables_mapping = {\"num\": 3}\n        &gt;&gt;&gt; functions_mapping = {\"add_one\": lambda x: x + 1}\n        &gt;&gt;&gt; parse_string(raw_string, variables_mapping, functions_mapping)\n            \"abc4def\"\n    \"\"\"\n</code></pre> <p>\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u4e3b\u8981\u4ee3\u7801\uff1a</p> <pre><code># parser.py\ndef parse_string(\nraw_string: Text,\nvariables_mapping: VariablesMapping,\nfunctions_mapping: FunctionsMapping,\n) -&gt; Any:\n...\nwhile match_start_position &lt; len(raw_string):\n...\nif func_match:\nfunc_name = func_match.group(1)\nfunc = get_mapping_function(func_name, functions_mapping)\nfunc_params_str = func_match.group(2)\nfunction_meta = parse_function_params(func_params_str)\nargs = function_meta[\"args\"]\nkwargs = function_meta[\"kwargs\"]\nparsed_args = parse_data(args, variables_mapping, functions_mapping)\nparsed_kwargs = parse_data(kwargs, variables_mapping, functions_mapping)\ntry:\nfunc_eval_value = func(*parsed_args, **parsed_kwargs)\nexcept Exception as ex:\n...\n...\nreturn parsed_string\n</code></pre> <p><code>func</code> \u4e3a\u51fd\u6570\u5bf9\u8c61\uff0c\u901a\u8fc7 <code>parse_data</code> \u51fd\u6570\u83b7\u53d6\u5230\u53c2\u6570 <code>parsed_args</code> \u548c <code>parsed_kwargs</code>\uff0c\u901a\u8fc7 <code>func(*parsed_args, **parsed_kwargs)</code> \u8c03\u7528\u51fd\u6570\u5e76\u83b7\u53d6\u5230\u503c\uff1b</p> <p>\u6700\u540e\u7ecf\u8fc7\u4e00\u987f\u7ec4\u88c5\u8fd4\u56de\u6700\u7ec8\u7684\u5b57\u7b26\u4e32\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"5\u3001\u53d8\u91cf\u83b7\u53d6","text":"<p>\u53d8\u91cf\u83b7\u53d6\u76f8\u5bf9\u7b80\u5355\uff0c\u4e0d\u60f3\u51fd\u6570\u8c03\u7528\uff0c\u8981\u8003\u8651\u51fd\u6570\u5bf9\u8c61\u53ca\u53c2\u6570\uff1b</p> <pre><code># parser.py\ndef parse_variables_mapping(\nvariables_mapping: VariablesMapping, functions_mapping: FunctionsMapping = None\n) -&gt; VariablesMapping:\n...\nwhile len(parsed_variables) != len(variables_mapping):\n...\ntry:\nparsed_value = parse_data(\nvar_value, parsed_variables, functions_mapping\n)\nexcept exceptions.VariableNotFound:\ncontinue\n...\nreturn parsed_variables\n</code></pre> <p>\u4e5f\u662f\u901a\u8fc7 <code>parse_data</code> \u51fd\u6570\u6765\u83b7\u53d6\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#6","title":"6\u3001\u9a71\u52a8\u5165\u53e3","text":"<pre><code># runner.py\nclass SessionRunner(object):\n...\ndef __parse_config(self, param: Dict = None) -&gt; None:\n# parse config variables\nself.__config.variables.update(self.__session_variables)\nif param:\nself.__config.variables.update(param)\nself.__config.variables = self.parser.parse_variables(self.__config.variables)\n# parse config name\nself.__config.name = self.parser.parse_data(\nself.__config.name, self.__config.variables\n)\n# parse config base url\nself.__config.base_url = self.parser.parse_data(\nself.__config.base_url, self.__config.variables\n)\n...\ndef test_start(self, param: Dict = None) -&gt; \"SessionRunner\":\n\"\"\"main entrance, discovered by pytest\"\"\"\n...\nself.__parse_config(param)\n...\n</code></pre> <p>\u5728\u5165\u53e3\u6587\u4ef6 <code>runner.py</code> \u91cc\u9762\u628a\u4e0a\u9762\u6240\u6709\u7684\u903b\u8f91\u4e32\u8d77\u6765\uff1b</p> <p>\u5728 <code>test_start</code> \u91cc\u9762\u8c03\u7528\u79c1\u6709\u65b9\u6cd5 <code>__parse_config</code>\uff0c\u5728 <code>__parse_config</code> \u91cc\u9762\u6328\u4e2a\u5904\u7406\u524d\u9762\u7684\u903b\u8f91\uff1b</p> <p>\u5728 <code>step</code> \u91cc\u9762\u901a\u8fc7\uff1a</p> <pre><code>runner = HttpRunner().test_start()\n</code></pre> <p>\u8fdb\u884c\u9a71\u52a8\u6267\u884c\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"JMeter\u201410\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u7b80\u4ecb","text":"<p>\u5168\u79f0 <code>Apache JMeter</code> \uff0c\u4e00\u4e2a\u57fa\u4e8e <code>Java</code> \u7684\u5f00\u6e90\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177\uff0c\u6709\u4e9b\u540c\u5b66\u4e5f\u7528\u6765\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u63a5\u53e3\u6d4b\u8bd5\uff0c\u4f46\u5b83\u4e3b\u8981\u7684\u529f\u80fd\u662f\u7528\u6765\u505a\u6027\u80fd\u7684\u3002</p> <p>\u5176\u5de5\u4f5c\u539f\u7406\u662f\uff0c\u5efa\u7acb\u4e00\u4e2a\u7ebf\u7a0b\u6c60\uff0c\u591a\u7ebf\u7a0b\u8fd0\u884c\u53d6\u6837\u5668\u4ea7\u751f\u5927\u91cf\u8d1f\u8f7d\uff0c\u5728\u8fd0\u884c\u4e2d\u901a\u8fc7\u65ad\u8a00\u6765\u9a8c\u8bc1\u7ed3\u679c\u7684\u6b63\u786e\u6027\uff0c\u901a\u8fc7\u76d1\u542c\u5668\u6765\u8bb0\u5f55\u6d4b\u8bd5\u7ed3\u679c\uff1b</p> <p>Github\u5730\u5740\uff1ahttps://github.com/apache/jmeter</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#jmeter","title":"Jmeter \u7ec4\u4ef6","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u7ebf\u7a0b\u7ec4","text":"<p>\u53ef\u4ee5\u770b\u505a\u4e00\u4e2a\u865a\u62df\u7528\u6237\u7ec4\uff0c\u7ebf\u7a0b\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u865a\u62df\u7528\u6237\uff1b</p> <p>\u7ebf\u7a0b\u6570\u5c31\u8868\u793a\u865a\u62df\u7528\u6237\u6570\uff1b</p> <p><code>Ramp-up Period</code> \u722c\u5761\u542f\u52a8\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u9ed8\u8ba4\u65f6\u95f4\u662f1\uff0c\u5b83\u5236\u5b9a\u4e86\u542f\u52a8\u6240\u6709\u7ebf\u7a0b\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002</p> <p>\uff08\u4e3e\u4f8b\uff1a\u7ebf\u7a0b\u657010\u4e2a\uff0c\u8fd0\u884c\u65f6\u95f45\uff0c\u5c31\u662f1\u79d2\u542f\u52a82\u4e2a\uff09</p> <p>\u200b    </p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#sampler","title":"\u53d6\u6837\u5668\uff08sampler\uff09","text":"<p>\u6027\u80fd\u6d4b\u8bd5\u4e2d\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u8bb0\u5f55\u54cd\u5e94\u4fe1\u606f\uff0c\u8bb0\u5f55\u54cd\u5e94\u65f6\u95f4\u7684\u6700\u5c0f\u5355\u5143\u3002</p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#logic-controller","title":"\u903b\u8f91\u63a7\u5236\u5668\uff08logic controller\uff09","text":"<p>\u4e24\u7c7b\uff1a</p> <p>\u2460  \u63a7\u5236\u6d4b\u8bd5\u8ba1\u5212\u4e2d\u53d6\u6837\u5668\u8282\u70b9\u53d1\u9001\u8bf7\u6c42\u7684\u903b\u8f91\u987a\u5e8f\u7684\u63a7\u5236\u5668\uff08if/switch/Controller\uff09</p> <p>\u2461 \u7528\u6765\u7ec4\u7ec7\u53ef\u63a7\u5236\u53d6\u6837\u5668\u8282\u70b9\u7684\uff0c\u5931\u8bef\u63a7\u5236\u5668\u3001\u541e\u5410\u91cf\u63a7\u5236\u5668\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"\uff081\uff09\u5faa\u73af\u63a7\u5236\u5668","text":"<p>\u200b    </p> <p>\u7ebf\u7a0b\u7ec4\u5faa\u73af\u6b21\u6570\u4e0e\u5faa\u73af\u63a7\u5236\u5668\u5faa\u73af\u6b21\u6570\u53e0\u52a0\uff08\u76f8\u4e58\uff09</p> <p><code>badboy</code> \u5f55\u5236\u7684\u5faa\u73af\u63a7\u5236\u5668\u548c <code>jmeter</code> \u5e26\u7684\u5faa\u73af\u63a7\u5236\u5668\u4e0d\u517c\u5bb9</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2foreach","title":"\uff082\uff09ForEach\u63a7\u5236\u5668","text":"<p>\u200b    </p> <p>\u540e\u9762\u7684\u8bf7\u6c42\u662f\u52a0\u5728 <code>ForEach</code> \u63a7\u5236\u5668\u4e0b\u9762</p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3if","title":"\uff083\uff09If \u63a7\u5236\u5668","text":"<p>\u200b    </p> <p>\u6ce8\u610f\uff1a\u6761\u4ef6\u91cc\u9762\uff0c\u53d8\u91cf\u8981\u7528 \"${}\" ,<code>if</code> \u4e0b\u9762\u52a0 <code>http</code> \u8bf7\u6c42</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4switch","title":"\uff084\uff09switch \u63a7\u5236\u5668\uff08\u5f00\u5173\uff09","text":"<ol> <li>\u5728\u903b\u8f91\u63a7\u5236\u5668\u91cc\u9762\u9009\u62e9 <code>switch controller</code>\uff08switch\u63a7\u5236\u5668\uff09</li> <li>\u5728\u63a7\u5236\u5668\u5185\u6dfb\u52a0\u591a\u4e2a\u8bf7\u6c42</li> <li>\u53ef\u901a\u8fc7\u8bf7\u6c42\u540d\u79f0\u6765\u63a7\u5236\uff0c\u6216\u901a\u8fc7\u8bf7\u6c42\u5e8f\u53f7\u6765\u63a7\u5236\uff08\u5e8f\u53f7\u4ece0\u5f00\u59cb\uff09</li> </ol> <p>\u200b    </p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"\uff085\uff09\u541e\u5410\u91cf\u63a7\u5236\u5668","text":"<ol> <li> <p>\u5728\u903b\u8f91\u63a7\u5236\u5668\u91cc\u9762\u9009\u62e9\u541e\u5410\u91cf\u63a7\u5236\u5668\uff08\u7528\u4e8e\u63a7\u5236\u53d1\u9001\u7684\u8bf7\u6c42\u6570\uff09</p> </li> <li> <p><code>Total Executions</code>\uff08\u541e\u5410\u91cf\uff09\u8f93\u5165\u6570\u636e\uff0c\u8f93\u5165\u6570\u636e\u8981\u5c0f\u4e8e\u7b49\u4e8e\u7ebf\u7a0b\u7ec4\u6570\uff08\u6bcf\u4e2a\u7ebf\u7a0b\u53d1\u90014\u6b21\uff0c\u7ebf\u7a0b\u7ec4\u6570\u548c\u5faa\u73af\u6b21\u6570\u65e0\u6548\uff09</p> </li> <li> <p><code>Percent Executions</code> \u541e\u5410\u91cf\u767e\u5206\u6bd4\uff08\u7ebf\u7a0b\u7ec4\u657010\u4e2a\uff0c\u541e\u5410\u91cf\u767e\u5206\u6bd425\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u53d1\u90012\u6b21\uff0c\u767e\u5206\u6bd425.5\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u53d1\u90013\u6b21\uff09</p> </li> </ol> <p>\u200b    </p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u5b9a\u65f6\u5668","text":"<p>\u2460\u56fa\u5b9a\u5b9a\u65f6\u5668\uff08\u601d\u8003\u65f6\u95f4\uff09</p> <p>\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u8bf7\u6c42\u4e4b\u524d\u6309\u76f8\u540c\u7684\u5236\u5b9a\u65f6\u95f4\u505c\u987f\u3002</p> <p>\u2461\u540c\u6b65\u5b9a\u65f6\u5668\uff08\u96c6\u5408\u70b9\uff09</p> <p>\u96c6\u5408\u70b9\uff0c\u7b49\u5230\u7279\u5b9a\u7684\u7528\u6237\u6570\u540e\u518d\u4e00\u8d77\u6267\u884c\u67d0\u4e2a\u64cd\u4f5c\u3002</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p><code>Number of Simulated Users to Group by</code>:\u96c6\u5408\u591a\u5c11\u4eba\u540e\u518d\u6267\u884c\u8bf7\u6c42\uff1b</p> <p><code>Timeout in milliseconds</code> :\u6307\u5b9a\u4eba\u6570\u591a\u5c11\u79d2\u6ca1\u6709\u96c6\u5408\u5230\u7b97\u8d85\u65f6\uff08\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2\uff09;\u5982\u679c\u4e3a0\uff0c\u8868\u793a\u65e0\u8d85\u65f6\u65f6\u95f4\uff0c\u4f1a\u4e00\u76f4\u7b49\u4e0b\u53bb\u3002\u5982\u679c\u7ebf\u7a0b\u6570\u5c0f\u4e8e\u96c6\u5408\u4eba\u6570\uff0c\u5230\u65f6\u95f4\u5c31\u4f1a\u53d1\u51fa\u53bb\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u914d\u7f6e\u5143\u4ef6","text":"<p>\u7528\u4e8e\u63d0\u4f9b\u5bf9\u9759\u6001\u6570\u636e\u914d\u7f6e\u7684\u652f\u6301</p> <p>\u53c2\u6570\u5316\u6709\u4e09\u79cd\uff1a</p> <ol> <li>CSV Data Set config  </li> <li>\u51fd\u6570\u52a9\u624b  </li> <li>\u7528\u6237\u81ea\u5b9a\u4e49\u53d8\u91cf</li> </ol> <p>\u2460 CSV Data Set config </p> <p>\u53ef\u4ee5\u5c06\u672c\u5730\u6570\u636e\u6587\u4ef6\u5f62\u6210\u6570\u636e\u6c60\u3002</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u2461 \u51fd\u6570\u52a9\u624b</p> <p>\u9009\u9879-\u51fd\u6570\u52a9\u624b</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u2462 \u7528\u6237\u81ea\u5b9a\u4e49\u53d8\u91cf</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u2463\u8ba1\u6570\u5668</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p><code>${__v(name_${N})}</code> \u4e24\u5c42\u53d8\u91cf\u7528v\u51fd\u6570\uff0c\u56fa\u5b9a\u7528\u6cd5\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u5143\u4ef6\u7684\u4f5c\u7528\u57df","text":"<ol> <li>\u914d\u7f6e\u5143\u4ef6</li> </ol> <p>\u4f1a\u5f71\u54cd\u5176\u4f5c\u7528\u8303\u56f4\u5185\u7684\u6240\u6709\u5143\u4ef6\u3002</p> <ol> <li>\u524d\u7f6e\u5904\u7406\u7a0b\u5e8f</li> </ol> <p>\u5728\u5176\u4f5c\u7528\u8303\u56f4\u5185\u7684\u6bcf\u4e2asampler\u5143\u4ef6\u4e4b\u524d\u6267\u884c\u3002</p> <ol> <li>\u5b9a\u65f6\u5668</li> </ol> <p>\u5bf9\u5728\u5176\u6240\u7528\u8303\u56f4\u5185\u7684\u6bcf\u4e2asampler\u6709\u6548\u3002</p> <ol> <li>\u540e\u7f6e\u5904\u7406\u7a0b\u5e8f</li> </ol> <p>\u5728\u5176\u4f5c\u7528\u8303\u56f4\u5185\u7684\u6bcf\u4e2asampler\u5143\u4ef6\u4e4b\u540e\u6267\u884c\u3002</p> <ol> <li>\u65ad\u8a00</li> </ol> <p>\u5728\u5176\u4f5c\u7528\u8303\u56f4\u5185\u7684\u6bcf\u4e2asampler\u5143\u4ef6\u6267\u884c\u540e\u7ed3\u679c\u8fdb\u884c\u6821\u9a8c\u3002</p> <ol> <li>\u76d1\u542c\u5668</li> </ol> <p>\u6536\u96c6\u5176\u4f5c\u7528\u8303\u56f4\u5185\u7684\u6bcf\u4e2a\u4ec0\u4e48sampler\u5143\u4ef6\u7684\u4fe1\u606f\u5e76\u5448\u73b0\u3002</p> <ol> <li>\u53d6\u6837\u5668</li> </ol> <p>\u4e0d\u4e88\u5176\u4ed6\u5143\u4ef6\u76f8\u4e92\u4f5c\u7528\u3002</p> <ol> <li>\u903b\u8f91\u63a7\u5236\u5668</li> </ol> <p>\u5bf9\u5176\u5b50\u8282\u70b9\u4e2d\u7684\u53bb\u5ef6\u671f\u6216\u903b\u8f91\u63a7\u5236\u5668\u4f5c\u7528\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u811a\u672c\u5f00\u53d1","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u811a\u672c\u5f55\u5236","text":"<p><code>badboy</code></p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\u811a\u672c\u751f\u6210","text":"<p>1.\u5173\u8054</p> <p>\u5173\u8054\uff1a\u7528\u4e8e\u83b7\u53d6\u4e00\u4e2a\u54cd\u5e94\u6570\u636e\u4e2d\u7684\u7ed3\u679c\uff1b</p> <p>\u5728\u540e\u7f6e\u5904\u7406\u5668\u4e2d-\u6b63\u5219\u8868\u8fbe\u5f0f\u63d0\u53d6\u5668\uff1b</p> <p>\u200b    </p> <p>\u6b63\u5219\u8868\u8fbe\u5f0f</p> <ol> <li>\u5f15\u7528\u540d\u79f0\uff1a\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u8981\u5f15\u7528\u7684\u53c2\u6570\u540d\u79f0\uff0c</li> </ol> <p>2.\uff08\uff09\uff1a\u62ec\u8d77\u6765\u7684\u90e8\u5206\u5c31\u662f\u8981\u63d0\u53d6</p> <pre><code>. \uff1a\u5339\u914d\u4efb\u4f55\u5b57\u7b26\u4e32\n\n\\+ \uff1a\u4e00\u6b21\u6216\u591a\u6b21\n\n*\uff1a\u4efb\u610f\u591a\u6b21\uff08\u53ef\u4ee5\u53d6\u5230\u7a7a\u683c\uff09\n\n\uff1f\uff1a\u4e0d\u8981\u592a\u8d2a\u5a6a\uff0c\u5728\u627e\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u9879\u540e\u505c\u6b62\u3002\n</code></pre> <p>3.\u6a21\u5757\uff1a\u7528$$\u5f15\u7528\u8d77\u6765\uff0c\u5982\u679c\u6709\u591a\u4e2a\uff08\uff09\u5185\u5bb9\uff0c\u53ef\u4ee5\u7528$1$,$2$\u7b49\uff0c\u6807\u8bc6\u89e3\u6790\u5230\u7b2c\u51e0\u4e2a\u503c</p> <p>4.\u5339\u914d\u6570\u5b57\uff1a0\u4ee3\u8868\u968f\u673a\uff0c-1\u4ee3\u8868\u5168\u90e8\uff0c\u5176\u4f59\u6574\u6574\u6570\u4ee3\u8868\u63d0\u53d6\u7b2c\u51e0\u4e2a\u5339\u914d\u7684\u5185\u5bb9\u3002</p> <p>5.\u6dfb\u52a0Debug\u8fdb\u884c\u8c03\u8bd5</p> <p>\u4efb\u610f\u5b57\u7b26\u4e32\u7684\u53d6\u6cd5\uff1a\uff08.+?\uff09\u6216\uff08.*?\uff09</p> <p>\u200b    </p> <p>\u6570\u5b57\u7684\u53d6\u6cd5\uff1a</p> <p>\uff08[0-9]\uff09,[0-9]\u8868\u793a\u53d60-9\u7684\u4efb\u610f\u6570\u5b57\uff0c\u8868\u793a\u4efb\u610f\u591a\u6b21  ##\u8868\u8fbe\u5f0f\u524d\u9762\u7684\u5b57\u7b26\u4e0d\u8981\u592a\u591a</p> <p>\u200b    </p> <p>2.http\u8bf7\u6c42\u9ed8\u8ba4\u503c</p> <p>\u6709\u76f8\u540c\u7684\u670d\u52a1\u5668\u540d\u79f0\u6216IP\u5730\u5740\u65f6\uff0c\u5c06\u5176\u586b\u5165\u8bf7\u6c42\u9ed8\u8ba4\u503c\u4e2d\uff0c\u51cf\u5c0f\u5de5\u4f5c\u91cf\u3002</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#webservice","title":"webservice\u63a5\u53e3\u6d4b\u8bd5","text":"<p>soap\u8bf7\u6c42\u5e95\u5c42\u662f\u8c03\u7528\u7684http\u8bf7\u6c42</p> <p>\u8bf7\u6c42\u7684\u62a5\u6587\u662fxml\uff0c\u8fd4\u56de\u7684\u62a5\u6587\u4e5f\u662fxml</p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#jdbc","title":"JDBC\u8bf7\u6c42","text":"<ol> <li>\u6dfb\u52a0\u63a7\u5236\u5143\u4ef6\uff0c<code>JDBC Connection Configuration</code></li> <li>\u6dfb\u52a0sampler \uff0c<code>JDBC Request</code></li> <li>\u914d\u7f6e\u5982\u4e0b\uff1a</li> </ol> <p>\uff081\uff09<code>Variable Name</code>\uff1a\u53d8\u91cf\u540d\u53ef\u81ea\u5b9a\u4e49</p> <p>\uff082\uff09<code>JDBC URL</code>\uff1a<code>jdbc:mysql://127.0.0.1:3306/ecshop</code></p> <p>\uff083\uff09<code>JDBC Driver Class</code>\uff1a<code>com.mysql.jdbc.Driver</code></p> <p>\uff084\uff09<code>username</code>: \u6570\u636e\u5e93\u540d</p> <p>\uff085\uff09<code>password</code>\uff1a\u6570\u636e\u5e93\u5bc6\u7801</p> <p>\u200b    </p> <ol> <li>\u65f6\u533a\u8bbe\u7f6e\u95ee\u9898</li> </ol> <p>\u5728 <code>URL</code> \u672b\u5c3e\u52a0 <code>?serverTimezone=UTC</code></p> <ol> <li>\u8981\u6dfb\u52a0\u591a\u6761 <code>SQL</code> \u8bed\u53e5</li> </ol> <p>\u5728 <code>URL</code> \u672b\u5c3e\u52a0 <code>?allowMultiQueries=true</code> \uff08\u524d\u9762\u6709\uff1f\u7684\u7528&amp;\u8fde\u63a5\uff09\uff0c<code>JDBC Request</code> \u4e2d</p> <ol> <li>\u8bbe\u7f6e\u5b57\u7b26\u96c6\u7c7b\u578b</li> </ol> <p>\u5728URL\u672b\u5c3e\u52a0 <code>?characterEncoding=UTF-8</code></p> <p>\u200b    </p> <p>\u200b    </p> <ol> <li>\u63d2\u5165\u5220\u9664\u66f4\u65b0\u64cd\u4f5c\uff0c<code>Query Type</code> \u90fd\u9009<code>update Statement</code></li> </ol> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#ftp","title":"FTP\u8bf7\u6c42","text":"<ol> <li><code>sampler</code> \u4e2d\u6dfb\u52a0 <code>FTP</code> \u8bf7\u6c42</li> <li>\u914d\u7f6e\u5982\u4e0b</li> </ol> <p>\u7aef\u53e3\u53f7\uff1a21</p> <p>\u670d\u52a1\u5668\u540d\u79f0\u548c <code>IP</code>\uff1a\u4e0a\u4f20\u6216\u7528\u6765\u4e0b\u8f7d\u7684\u670d\u52a1\u5668\u5730\u5740</p> <p><code>Remote File</code>\uff1a\u8fdc\u7a0b <code>FTP</code> \u670d\u52a1\u5668\u6587\u4ef6\u8def\u5f84\uff08\u8981\u52a0\u6587\u4ef6\u540d\uff09</p> <p><code>Local File</code>\uff1a\u672c\u5730\u6587\u4ef6\u8def\u5f84\uff08\u8981\u52a0\u6587\u4ef6\u540d\uff09</p> <p><code>Local File Contents</code>\uff1a\u672c\u5730\u6587\u4ef6\u5185\u5bb9</p> <p>\u7528\u6237\u540d\uff1a\u5982\u679c\u662f\u533f\u540d\u7528\u6237\u767b\u5f55\uff0c\u4e5f\u8981\u586b\u5165\u201canonymous\u201d</p> <p>\u5bc6\u7801\uff1a</p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\u573a\u666f\u8bbe\u7f6e","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_10","title":"\u5206\u5e03\u5f0f\u8fd0\u884c","text":"<p>\u63a7\u5236\u673a\uff1a\u53c8\u79f0\u8c03\u5ea6\u673a\uff0c\u53c2\u4e0e\u811a\u672c\u7684\u8fd0\u884c\uff0c\u4e3b\u8981\u662f\u7ba1\u7406\u8fdc\u7a0b\u8d1f\u8f7d\u673a\uff0c\u6307\u6325\u8fdc\u7a0b\u8d1f\u8f7d\u673a\u8fd0\u884c\u7684\u4efb\u52a1\uff0c\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\uff1b</p> <p>\u8d1f\u8f7d\u673a\uff1a\u53c8\u79f0\u6267\u884c\u673a\uff0c\u8fd0\u884c\u811a\u672c\u7684\u673a\u5b50\uff1b</p> <p>\uff081\uff09\u5206\u5e03\u5f0f\u6267\u884c\u539f\u7406</p> <p>\u2460\u9009\u62e9\u4e00\u53f0\u673a\u5668\u4f5c\u4e3a\u8c03\u5ea6\u673a\uff0c\u5176\u4ed6\u673a\u5668\u4f5c\u4e3a\u6267\u884c\u673a</p> <p>\u2461\u6267\u884c\u65f6\uff0c<code>master</code> \u4f1a\u628a\u811a\u672c\u53d1\u9001\u7ed9\u6bcf\u53f0 <code>slave</code>\uff0c<code>slave</code> \u62ff\u5230\u811a\u672c\u540e\u6267\u884c\uff0c<code>slave</code> \u6267\u884c\u65f6\u542f\u52a8 <code>jmeter-server.bat</code> \u5373\u53ef\uff08\u65e0\u9700\u542f\u52a8 <code>Jmeter</code> \u8f6f\u4ef6\uff09</p> <p>\u2462\u6267\u884c\u5b8c\u540e <code>slave</code> \u4f1a\u628a\u7ed3\u679c\u56de\u4f20\u7ed9 <code>master</code></p> <p>\uff082\uff09\u5206\u5e03\u5f0f\u914d\u7f6e\u65b9\u5f0f</p> <p>\u2460\u8c03\u5ea6\u673a\uff08master\uff09\u914d\u7f6e</p> <p>\u4ec5\u9700\u5c06\u81ea\u5df1\u7684 IP \u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u5c31\u884c</p> <ul> <li> <p>\u627e\u5230J <code>meter.properties</code></p> </li> <li> <p>\u5728 <code>remote_hosts</code> \u540e\u9762\u52a0\u4e0a\u8d1f\u8f7d\u673a\u7684 IP \u5730\u5740</p> </li> </ul> <p>\u2461\u6267\u884c\u673a\uff08slave\uff09\u914d\u7f6e</p> <ul> <li> <p>\u627e\u5230 <code>Jmeter.properties</code></p> </li> <li> <p>\u4fee\u6539\u914d\u7f6e\u9879\uff08\u9ed8\u8ba4\u7aef\u53e3\uff1a1099\uff09</p> </li> </ul> <pre><code>server_port=1099\nserver.rmi.localport=1099\n</code></pre> <ul> <li>\u542f\u52a8 <code>Jmeter-server.bat</code></li> </ul> <p>\u200b    </p> <p>\u2462\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u8f6f\u4ef6\u7248\u672c\u8981\u4e00\u81f4</p> </li> <li> <p>\u4e09\u65b9\u914d\u7f6e\u6587\u4ef6\u8981\u914d\u7f6e\u5728\u8d1f\u8f7d\u673a\u4e0a\uff0c\u8def\u5f84\u8981\u4e00\u81f4</p> </li> <li> <p>\u6ce8\u518c\u7b49\u7279\u6b8a\u60c5\u51b5\uff0c\u5206\u53d1\u7ed9\u8d1f\u8f7d\u673a\u7684\u53c2\u6570\u5316\u6587\u4ef6\uff0c\u53c2\u6570\u4e0d\u80fd\u76f8\u540c\u3002</p> </li> </ul> <p>d.\u811a\u672c\u4e0d\u8981\u653e\u5728\u684c\u9762\u4e0a</p> <p>\u2463\u5982\u679c\u8fde\u63a5\u5931\u8d25\u9700\u68c0\u67e5\uff1a</p> <ul> <li> <p>\u662f\u5426\u5173\u95ed\u4e86\u9632\u706b\u5899</p> </li> <li> <p>\u662f\u5426\u7981\u7528\u4e86\u6240\u6709\u7684\u865a\u62df\u7f51\u5361</p> </li> <li> <p>\u53c2\u6570\u5316\u7684 <code>CSV</code> \u6587\u4ef6\u8981\u590d\u5236\u5230\u8d1f\u8f7d\u673a\u4e0a</p> </li> <li> <p>\u4e09\u65b9\u7684jar\u5305\u8981\u590d\u5236\u5230\u8d1f\u8f7d\u673a\u4e0a</p> </li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_11","title":"\u6d6a\u6d8c\u6d4b\u8bd5","text":"<p>\uff081\uff09\u6982\u8ff0</p> <p>\u5b9a\u4e49\uff1a\u6d6a\u6d8c\u6d4b\u8bd5\u662f\u6301\u7eed\u8fdb\u884c\u9ad8\u5f3a\u5ea6\u548c\u666e\u901a\u5f3a\u5ea6\u7684\u4ea4\u53c9\u538b\u529b\u6d4b\u8bd5\u3002</p> <p>\u76ee\u7684\uff1a\u4e3b\u8981\u662f\u67e5\u770b\u8d44\u6e90\u7684\u91ca\u653e\u60c5\u51b5\u3002</p> <p>\uff082\uff09\u64cd\u4f5c\u6b65\u9aa4</p> <p>\u2460\u5728\u6d4b\u8bd5\u8ba1\u5212\uff0c\u53f3\u952e\u6dfb\u52a0 <code>threads\u2192Ultimate Thread Group</code></p> <p>\u2461\u6dfb\u52a0\u4ee5\u4e0b\u6d4b\u8bd5\u7b56\u7565\u6570\u636e\uff1a</p> <ul> <li><code>Start Thread Count</code>\uff1a\u5f00\u59cb\u7ebf\u7a0b\u6570\u91cf</li> <li><code>Initial Ddlay</code>\uff0csec\uff1a\u7ebf\u7a0b\u52a0\u8f7d\u591a\u957f\u65f6\u95f4\u5f00\u59cb\u8fd0\u884c</li> <li><code>Startup Time</code>\uff0csec\uff1a\u7ebf\u7a0b\u52a0\u8f7d\u591a\u957f\u65f6\u95f4</li> <li><code>Hold Load For</code>\uff0csec\uff1a\u7ebf\u7a0b\u6301\u7eed\u8fd0\u884c\u591a\u957f\u65f6\u95f4</li> <li><code>Shutdown Time</code>\uff1a\u7ebf\u7a0b\u505c\u6b62\u65f6\u957f\uff0c\u5728\u591a\u957f\u65f6\u95f4\u5185\u505c\u6b62\u4e0b\u6765\u3002</li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#ip","title":"IP\u6b3a\u9a97","text":"<ol> <li>\u5bf9\u7535\u8111\u6dfb\u52a0\u591a\u4e2a\u53ef\u7528 <code>IP</code>\uff0c\u5e76\u5c06IP\u5730\u5740\u4fdd\u5b58\u5728\u4e00\u4e2a <code>txt</code> \u6216 <code>csv</code> \u6587\u6863\u4e2d</li> <li>\u6dfb\u52a0\u914d\u7f6e\u5143\u4ef6 <code>CSV Data Set Config</code> \u5c06\u6587\u6863\u4e2d<code>IP</code> \u53c2\u6570\u5316</li> <li>\u5728\u8bf7\u6c42\u4e2d\u9009\u62e9 <code>[Advanced]</code>\uff0c<code>implementation</code> \u9009\u62e9 <code>HttpClient4</code>\uff0c<code>Source address</code> \u9009\u62e9 <code>IP/Hostname</code>\uff0c\u5e76\u8f93\u5165 <code>IP</code> \u53c2\u6570\uff08<code>${ip}</code>\uff09</li> </ol> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u200b    </p> <p>\u8fde\u4e0d\u4e0a\u7f51\uff0c\u9700\u8981\u628a\u201c\u9996\u9009 <code>DNS</code> \u670d\u52a1\u5668\u201d\u586b\u4e0a <code>192.168.1.1</code>\uff0c</p> <p>\u200b    </p> <p>\u5c06\u7f51\u7edc\u7981\u7528\u540e\u91cd\u542f\uff1b</p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/JMeter%E2%80%9410%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_12","title":"\u66f2\u7ebf\u62d0\u70b9\u6a21\u578b\u5206\u6790","text":"<p>1.\u5b9a\u4e49</p> <p>\u6027\u80fd\u6d4b\u8bd5\u66f2\u7ebf\u6a21\u578b\u662f\u4e00\u6761\u968f\u7740\u6d4b\u8bd5\u65f6\u95f4\u4e0d\u65ad\u53d8\u5316\u7684\u66f2\u7ebf\uff0c\u4e0e\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u7528\u6237\u6570\u6216\u5176\u4ed6\u7684\u6027\u80fd\u6307\u6807\u5bc6\u5207\u76f8\u5173\u7684\u66f2\u7ebf\u3002</p> <p>2.\u89e3\u91ca</p> <p>x\u8f74\u4ee3\u8868\u5e76\u53d1\u7528\u6237\u6570\uff0cY\u8f74\u4ee3\u8868\u8d44\u6e90\u5229\u7528\u7387\u3001\u541e\u5410\u91cf\u3001\u54cd\u5e94\u65f6\u95f4\u3002</p> <p>\u4ece\u5de6\u5f80\u53f3\u4f9d\u6b21\u4e3a\u8f7b\u8d1f\u8f7d\u533a\u3001\u91cd\u8d1f\u8f7d\u533a\u3001\u62d0\u70b9\u533a</p> <p>\uff081\uff09\u54cd\u5e94\u65f6\u95f4\uff1a\u8f7b\u8d1f\u8f7d\u533a\u53d8\u5316\u4e0d\u5927\uff0c\u91cd\u8d1f\u8f7d\u533a\u589e\u957f\uff0c\u62d0\u70b9\u533a\u503e\u659c\u7387\u589e\u5927\u3002</p> <p>\uff082\uff09\u541e\u5410\u91cf\uff1a\u8f7b\u8d1f\u8f7d\u533a\u589e\u52a0\uff0c\u91cd\u538b\u529b\u533a\u9010\u6b65\u5e73\u7a33\uff0c\u62d0\u70b9\u533a\u6025\u5267\u4e0b\u964d\u3002</p> <p>\u200b    </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Locust\u20142\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># ==================================\n# Author : Mikigo\n# ==================================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>\u6027\u80fd\u6d4b\u8bd5\u901a\u5e38\u6307\u7684\u662f <code>API</code> \u6027\u80fd\u6d4b\u8bd5\uff0c\u4f7f\u7528 <code>JMeter</code> \u505a\u7684\u540c\u5b66\u4f1a\u591a\u4e00\u70b9\uff0c\u56e0\u4e3a\u5b83\u5f00\u6e90\u514d\u8d39\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u63d2\u4ef6\uff0c\u53ea\u9700\u8981\u5728\u56fe\u5f62\u5316\u7684\u754c\u9762\u5f55\u5165\u4e00\u4e9b\u6570\u636e\u5c31\u80fd\u5f88\u65b9\u4fbf\u7684\u8fdb\u884c\u63a5\u53e3\u6d4b\u8bd5\u3001\u6027\u80fd\u6d4b\u8bd5\uff0c\u76f8\u6bd4\u4e8e\u5546\u7528\u8f6f\u4ef6 <code>LoadRunner</code>\u66f4\u9002\u5408\u666e\u901a\u73a9\u5bb6\uff0c\u6240\u4ee5 <code>JMeter</code> \u7fa4\u4f17\u57fa\u7840\u66f4\u597d\u3002</p> <p>locust \u662f\u8fd1\u51e0\u5e74\u624d\u6d41\u884c\u8d77\u6765\u7684\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u9700\u8981\u7f16\u7801\uff0c\u6240\u4ee5\u597d\u591a\u540c\u5b66\u6709\u70b9\u62b5\u89e6\uff0c\u4f46\u5176\u529f\u80fd\u5b8c\u5168\u4e0d\u8f93 <code>JMeter</code> \uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<pre><code>pip3 install locust\n</code></pre> <p>\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u6210\u529f\uff1a</p> <pre><code>locust -V\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u7528\u4f8b\u6a21\u677f","text":"<pre><code># template.py\nimport random\nfrom locust import TaskSequence, HttpLocust, task, seq_task, between\n# \u5b9a\u4e49\u4e00\u4e2a\u4efb\u52a1\u7c7b\uff0c\u8fd9\u4e2a\u7c7b\u540d\u79f0\u81ea\u5df1\u968f\u4fbf\u5b9a\u4e49\uff0c\u7c7b\u7ee7\u627f TaskSequence \u6216 TaskSet\u7c7b\n# \u5f53\u7c7b\u91cc\u9762\u7684\u4efb\u52a1\u8bf7\u6c42\u6709\u5148\u540e\u987a\u5e8f\u65f6\uff0c\u7ee7\u627fTaskSequence\u7c7b\uff0c \u6ca1\u6709\u5148\u540e\u987a\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ee7\u627fTaskSet\u7c7b\nclass MyTaskCase(TaskSequence):\n# \u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u76f8\u5f53\u4e8e setup\ndef on_start(self):\npass\n# @task \n# python\u4e2d\u7684\u88c5\u9970\u5668\uff0c\u544a\u8bc9\u4e0b\u9762\u7684\u65b9\u6cd5\u662f\u4e00\u4e2a\u4efb\u52a1\uff0c\u4efb\u52a1\u5c31\u53ef\u4ee5\u662f\u4e00\u4e2a\u63a5\u53e3\u8bf7\u6c42\uff0c\n# \u8fd9\u4e2a\u88c5\u9970\u5668\u548c\u4e0b\u9762\u7684\u65b9\u6cd5\u88ab\u590d\u5236\u591a\u6b21\uff0c\u6539\u52a8\u4e00\u4e0b\uff0c\u5c31\u80fd\u5199\u51fa\u591a\u4e2a\u63a5\u53e3\n# \u88c5\u9970\u5668\u540e\u9762\u5e26\u4e0a(\u6570\u5b57)\u4ee3\u8868\u5728\u6240\u6709\u4efb\u52a1\u4e2d\uff0c\u6267\u884c\u6bd4\u4f8b\n# \u8981\u7528\u8fd9\u4e2a\u88c5\u9970\u5668\uff0c\u9700\u8981\u5934\u90e8\u5f15\u5165 \u4ecelocust\u4e2d\uff0c\u5f15\u5165 task\n@task\n# \u88c5\u9970\u5668\uff0c\u5b9a\u4e49\u6709\u6267\u884c\u987a\u5e8f\u7684\u4efb\u52a1\uff0c\u6269\u5c55\u4e2d\u7684\u6570\u5b57\uff0c\u4ece\u5c0f\u5230\u5927\uff0c\u4ee3\u8868\u5148\u540e\u6267\u884c\u987a\u5e8f\n@seq_task(1)  \n# \u4e00\u4e2a\u65b9\u6cd5\uff0c \u65b9\u6cd5\u540d\u79f0\u53ef\u4ee5\u81ea\u5df1\u6539\ndef regist(self): \n# \u63a5\u53e3\u8bf7\u6c42\u7684URL\u5730\u5740\nurl = '/erp/regist'\n# \u5b9a\u4e49\u8bf7\u6c42\u5934\u4e3a\u7c7b\u53d8\u91cf\uff0c\u8fd9\u6837\u5176\u4ed6\u4efb\u52a1\u4e5f\u53ef\u4ee5\u8c03\u7528\u8be5\u53d8\u91cf\nself.headers = {\"Content-Type\": \"application/json\"} \nself.user = \"locust_\" + str(random.randint(10000, 100000))\nself.pwd = '1234567890'\n# post\u8bf7\u6c42\u7684 \u8bf7\u6c42\u4f53\ndata = {\"name\": self.user, \"pwd\": self.pwd}\n# \u4f7f\u7528self.client\u53d1\u8d77\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u65b9\u6cd5\u6839\u636e\u63a5\u53e3\u5b9e\u9645\u9009,\n# catch_response \u503c\u4e3aTrue \u5141\u8bb8\u4e3a\u5931\u8d25 \uff0c name \u8bbe\u7f6e\u4efb\u52a1\u6807\u7b7e\u540d\u79f0   -----\u53ef\u9009\u53c2\u6570\nrsp = self.client.post(url, json=data, headers=self.headers, catch_response=True, name='api_regist')\nif rsp.status_code == 200:\nrsp.success()\nelse:\nrsp.failure('regist_ \u63a5\u53e3\u5931\u8d25\uff01')\n@task \n# \u987a\u5e8f\u4efb\u52a1\u88c5\u9970\u5668\uff0c\u8bf4\u660e\u4e0b\u9762\u7684\u4efb\u52a1\uff0c\u7b2c\u4e8c\u4e2a\u6267\u884c\n@seq_task(2)  \ndef login(self):\nurl = '/erp/loginIn' \ndata = {\"name\": self.user, \"pwd\": self.pwd}\n# \u4f7f\u7528self.client\u53d1\u8d77\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u65b9\u6cd5 \u9009\u62e9post\nrsp = self.client.post(url, json=data, headers=self.headers, catch_response=True) \n# \u63d0\u53d6\u54cd\u5e94json \u4e2d\u7684\u4fe1\u606f\uff0c\u5b9a\u4e49\u4e3a \u7c7b\u53d8\u91cf\nself.token = rsp.json()['token']    \nif rsp.status_code == 200 and rsp.json()['code'] == \"200\":\nrsp.success()\nelse:\nrsp.failure('login_ \u63a5\u53e3\u5931\u8d25\uff01')\n@task\n@seq_task(3) \ndef getuser(self):\nurl = '/erp/user'\n# \u5f15\u7528\u4e0a\u4e00\u4e2a\u4efb\u52a1\u7684 \u7c7b\u53d8\u91cf\u503c,\u5b9e\u73b0\u53c2\u6570\u5173\u8054\nheaders = {\"Token\": self.token}  \n# \u4f7f\u7528self.client\u53d1\u8d77\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u65b9\u6cd5 \u9009\u62e9 get\nrsp = self.client.get(url, headers=headers, catch_response=True)  \nif rsp.status_code == 200:\nrsp.success()\nelse:\nrsp.failure('getuser_ \u63a5\u53e3\u5931\u8d25\uff01')\n# \u7ed3\u675f\u65b9\u6cd5\uff0c \u76f8\u5f53\u4e8eteardown\ndef on_stop(self):\npass\n# \u5b9a\u4e49\u4e00\u4e2a\u8fd0\u884c\u7c7b \u7ee7\u627fHttpLocust\u7c7b\nclass UserRun(HttpLocust):\n# \u5b9a\u4e49\u56fa\u5b9a\u7684 task_set  \u6307\u5b9a\u524d\u9762\u7684\u4efb\u52a1\u7c7b\u540d\u79f0\ntask_set = MyTaskCase\n# \u8bbe\u7f6e\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u95f4\u9694\u65f6\u95f4 \u9700\u8981\u4ece locust \u4e2d \u5f15\u5165 between\nwait_time = between(0.1, 3)  \n</code></pre> <p>\u6267\u884c\u65f6\u5728\u7ec8\u7aef\u8f93\u5165\uff1a</p> <pre><code>locust -f template.py </code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u7b80\u5355\u6d4b\u8bd5","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1mock","title":"1\u3001mock\u63a5\u53e3","text":"<p>\u54b1\u4eec\u5148\u4f7f\u7528 <code>FastAPI</code> \u7b80\u5355 <code>Mock</code> \u4e00\u4e2a\u63a5\u53e3\uff1a</p> <pre><code># mock.py\nimport os\nimport uvicorn\nfrom fastapi import FastAPI\napp = FastAPI()\n@app.get(\"/items/\")\nasync def read_item(name: str = \"\"):\nreturn {\"name\": name}\nif __name__ == '__main__':\nuvicorn.run(\napp=\"mock:app\",\nhost=os.popen(\"hostname -I\").read().split(\" \")[0], # \u81ea\u52a8\u83b7\u53d6\u672c\u673aIP\nport=5000,\nreload=True\n)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u6d4b\u8bd5\u7528\u4f8b","text":"<pre><code># demo_1.py\nfrom locust import HttpUser, task\nclass HelloWorldUser(HttpUser):\n@task\ndef hello_world(self):\nself.client.get(\"/items?name=mikigo\")\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u8fd0\u884c","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u7f51\u9875\u5728\u7ebf\u8fd0\u884c","text":"<pre><code>locust -f demo_1.py </code></pre> <p>\u7ec8\u7aef\u4f1a\u63d0\u793a\u4e00\u4e2a\u94fe\u63a5\uff0c\u4f7f\u52b2\u6233\u4ed6\uff1a</p> <pre><code>$ locust -f demo_1.py [2023-07-13 17:55:51,182] uos-PC/INFO/locust.main: Starting web interface at http://0.0.0.0:8089 </code></pre> <p></p> <p>\u7b2c1\u4e2a\"<code>Number of users</code>\" \u603b\u5171\u5c06\u8fd0\u884c\u7684\u7528\u6237\u6570\uff1b</p> <p>\u7b2c2\u4e2a \"<code>Spawn rate</code>\" \u6bcf\u79d2\u52a0\u8f7d\u7684\u7528\u6237\u6570\uff1b</p> <p>\u7b2c3\u4e2a \"<code>Host</code>\"\uff0c\u88ab\u6d4b\u63a5\u53e3\u7684\u57df\u540d\uff1b\u54b1\u4eec Mock \u7684\u63a5\u53e3\u5730\u5740\u662f\uff1ahttp://10.8.13.224:5000/items?name=mikigo</p> <p></p> <p>\u70b9\u51fb\u3010Start swarming\u3011\u5f00\u59cb\u6d4b\u8bd5\uff1a</p> <p></p> <p>\u8fd9\u73a9\u610f\u513f\u662f\u4e00\u76f4\u8dd1\u7684\uff0c\u4e0d\u4f1a\u81ea\u5df1\u505c\u4e0b\u6765\uff0c\u8981\u505c\u6b62\u6d4b\u8bd5\uff0c\u9700\u8981\u70b9\u51fb\u53f3\u4e0a\u89d2\u3010STOP\u3011\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u547d\u4ee4\u884c\u8fd0\u884c","text":"<p>\u5e38\u7528\u7684\u53c2\u6570</p> <pre><code>locust --headless -f demo_1.py -u 20 -r 2 -t 2m --host=http://10.8.13.224:5000/items?name=mikigo --csv=mikigo\n# --headless \u6307\u540d\u7528\u65e0\u56fe\u5f62\u754c\u9762\u6a21\u5f0f\n# -u \u6307\u5b9a\u8fd0\u884c\u7684\u6700\u5927\u7528\u6237\u6570\uff0c\u5bf9\u5e94\u56fe\u5f62\u754c\u9762\u4e2d\u7684 \n# -r \u6307\u5b9a\u6bcf\u79d2\u751f\u6210\u7528\u6237\u6570\uff0c\u5bf9\u5e94\u56fe\u5f62\u754c\u9762\u4e2d\u7684 Spawn rate\n# -t \u6307\u5b9a\u603b\u5171\u8fd0\u884c\u65f6\u957f\uff0c\u56e0\u5728\u65e0\u56fe\u5f62\u754c\u9762\u4e2d\uff0c\u6ca1\u6709\u505c\u6b62\u6309\u94ae\uff0c\u9700\u8981\u6709\u8fd9\u4e2a\u53c2\u6570\u624d\u80fd\u5230\u65f6\u95f4\u5c31\u505c\u6b62\uff0c\u4e0d\u7136\u4f1a\u4e00\u76f4\u8fd0\u884c\u4e0b\u53bb\uff0c\u76f4\u5230\u7ec8\u7aefctrl+c\u5f3a\u884c\u505c\u6b62\n# --host \u88ab\u6d4b\u670d\u52a1\u5668\u57df\u540d\u6216ip\u7aef\u53e3\u5730\u5740\n# --csv \u8f93\u51fa\u7ed3\u679c\u5230csv\u6587\u4ef6\u7684\u524d\u7f00\n</code></pre> <p>\u7ec8\u7aef\u4f1a\u4ee5\u8868\u683c\u7684\u5f62\u5f0f\u5237\u65b0\u6570\u636e\uff0c\u5728\u5f53\u524d\u76ee\u5f55\u4f1a\u751f\u6210\u4e00\u4e9b <code>csv</code> \u7684\u62a5\u544a\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Locust%E2%80%942%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\u5206\u5e03\u5f0f\u8fd0\u884c","text":"<p>\u4e3b\u63a7\u673a\u5668</p> <pre><code>locust -f demo_1.py --master\n</code></pre> <p>\u52a9\u653b\u673a\u5668</p> <pre><code># \u548c\u4e3b\u63a7\u5728\u540c\u4e00\u53f0\u673a\u5668\nlocust -f demo_1.py --worker\n# \u548c\u4e3b\u63a7\u5728\u4e0d\u540c\u4e00\u53f0\u673a\u5668\nlocust -f demo_1.py --worker --master-host=${master_ip} --master-port=${master_port}\n</code></pre> <p>\u52a9\u653b\u673a\u5668\u53ef\u4ee5\u6709\u591a\u4e2a\uff1b</p> <p>\u4e3b\u63a7\u673a\u5668\u7ec8\u7aef\u8f93\u5165\u7c7b\u4f3c\u8fd9\u6837\uff1a</p> <pre><code>Worker uos-PC_4880a337c8ed49769a9995d6a14950af (index 0) reported as ready. 1 workers connected.\n</code></pre> <p>\u5c31\u8bf4\u660e\u547c\u5e94\u4e0a\u4e86\uff1b</p> <p>\u5206\u5e03\u5f0f\u8fd0\u884c\u540c\u6837\u652f\u6301\u7f51\u9875\u8fd0\u884c\u548c\u547d\u4ee4\u884c\u8fd0\u884c\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Playwright\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# =============================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Playwright \u662f\u4e00\u4e2a Web UI \u81ea\u52a8\u5316\u6d4b\u8bd5\u7684\u6846\u67b6\uff0c\u5176\u5404\u65b9\u9762\u529f\u80fd\u548c\u4f7f\u7528\u4f53\u9a8c\u5168\u9762\u78be\u538b Selenium\u3002</p> <p>\u4e00\u5165 Playwright \u6df1\u4f3c\u6d77\uff0c\u4ece\u6b64 Selenium \u662f\u8def\u4eba\u3002</p> <p>\u66fe\u7ecf\uff0c\u5728 Web UI \u81ea\u52a8\u5316\u6d4b\u8bd5\u9886\u57df\uff0cSelenium  \u5982\u65e5\u4e2d\u5929\uff0c\u51e0\u4e4e\u53ea\u8981\u63d0\u5230 UI \u81ea\u52a8\u5316\u5c31\u4f1a\u60f3\u5230 Selenium\uff0cSelenium \u5c31\u662f Web UI\u81ea\u52a8\u5316\u7684\u4ee3\u540d\u8bcd\uff1b</p> <p>\u540e\u6765\uff0cPlaywright \u51fa\u73b0\u4e86\uff0c\u6162\u6162\u7684\u5927\u5bb6\u5bf9 Selenium \u5f00\u59cb\u51b7\u843d\u4e86\uff1b\u4e3a\u5565\u5462\uff1f</p> <p>\u7b80\u5355\u8bb2\uff0c\u56e0\u4e3a\u5728 Selenium \u65f6\u4ee3\uff0c\u5176\u5b9e\u5927\u5bb6\u9047\u5230\u5f88\u591a\u95ee\u9898\uff0c\u4f46\u4e00\u76f4\u5f97\u4e0d\u5230\u89e3\u51b3\uff1bSelenium 2.0 \u7248\u672c\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u98de\u8dc3\uff0c\u56e0\u4e3a\u5f15\u5165\u4e86 WebDriver\uff0c\u540e\u9762 3.0\u3001\u5230\u73b0\u5728 4.0 \u529f\u80fd\u4e0a\u6ca1\u6709\u4ec0\u4e48\u4eae\u70b9\uff0c\u800c\u4e14\u4ee5\u524d\u7684\u95ee\u9898\u8fd8\u5728\uff0c\u5927\u5bb6\u5bf9\u8fd9\u4e2a\u73a9\u610f\u513f\u5c31\u63d0\u4e0d\u8d77\u5174\u8da3\u53bb\u7814\u7a76\u4e86\u3002</p> <p>Selenium \u4e4b\u540e\u4e0d\u662f\u6ca1\u6709\u5176\u4ed6 UI \u6846\u67b6\uff0c\u786e\u5b9e\u4e5f\u51fa\u73b0\u8fc7\u51e0\u4e2a\u5c0f\u6709\u540d\u6c14\u7684\u6846\u67b6\uff0c\u6bd4\u5982\uff1acypress\u3001puppeteer\u3001testcafe\uff0c\u8fd9\u4e9b\u4e2a\u73a9\u610f\u513f\u7f3a\u70b9\u5c31\u662f\u4e0d\u652f\u6301 Python\uff0c\u592a\u62c9\u80ef\uff0c\u800c\u4e14\u50cf puppeteer \u53ea\u652f\u6301\u8c37\u6b4c\u6d4f\u89c8\u5668\uff0c\u56e0\u4e3a\u5b83\u5c31\u662f\u8c37\u6b4c\u5bb6\u7684\u5b83\u4e0d\u9700\u8981\u652f\u6301\u5176\u4ed6\u6d4f\u89c8\u5668\uff0c\u5c31\u8fd9\uff0c\u5e7f\u5927\u7684 Firefox \u548c\u5c0a\u8d35\u7684 Safari \u7528\u6237\u80fd\u5fcd\u4f60\u5417\uff0c\u7ed9\u8001\u5b50\u6eda\u3002\u4e8e\u662f\uff0cPlaywright \u96c6\u5404\u5bb6\u4e4b\u6240\u957f\uff0c\u8865\u5404\u5bb6\u4e4b\u7f29\u77ed\uff0c\u201c\u5929\u7a7a\u4e00\u58f0\u5de8\u54cd\uff0c\u8001\u5b50\u95ea\u4eae\u767b\u573a\u201d\u3002</p> <p>\u574a\u95f4\u4f20\u8a00\uff0cPlaywright \u6709\u51e0\u4e2a\u6838\u5fc3\u5f00\u53d1\u8005\u5c31\u662f\u4ece puppeteer \u8fc7\u6765\u7684\uff0c\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8001\u5916\u662f\u771f\u4f1a\u6574\u6d3b\u3002</p> <p>\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u4f7f\u7528 Playwright\uff0c\u6211\u4ec5\u4ec5\u53ea\u5199\u4e86\u4e00\u4e2a\u5c0f\u811a\u672c\uff0c\u4f46\u6709\u4e24\u4e2a\u70b9\u5370\u8c61\u6df1\u523b\uff1a</p> <p>1\u3001\u73af\u5883\u5b89\u88c5\u597d\u7b80\u5355\uff1b</p> <p>\u8981\u77e5\u9053 Selenium \u7684\u73af\u5883\u5b89\u88c5\u662f\u5f88\u70e6\u4eba\u7684\uff0c\u8981\u5355\u72ec\u88c5 WebDriver \u7684\u9a71\u52a8\uff0c\u800c\u4e14\u9a71\u52a8\u7248\u672c\u8981\u548c\u6d4f\u89c8\u5668\u7248\u672c\u4e00\u81f4\uff0c\u4e0d\u7136\u4f1a\u62a5\u4e00\u4e9b\u83ab\u540d\u5176\u5999\u7684\u9519\uff0c\u591a\u5c11\u4eba\u5728 Selenium \u7684\u73af\u5883\u4e0a\u5361\u4f4f\u800c\u65e0\u6cd5\u5165\u95e8\uff1b</p> <p>2\u3001\u6267\u884c\u901f\u5ea6\u597d\u5feb\uff1b</p> <p>\u7528\u8fc7 Selenium \u5e94\u8be5\u77e5\u9053\uff0c\u8dd1\u8d77\u6765\u633a\u6162\u7684\uff0cPlaywright \u7684\u6267\u884c\u901f\u5ea6\u771f\u7684\u201c\u8d77\u98de\u201d\u3002</p> <p>\u5728\u540e\u9762\u5bf9 Playwright \u4f7f\u7528\u548c\u4e86\u89e3\u8d8a\u6765\u8d8a\u591a\u4e4b\u540e\u53d1\u73b0\uff0c\u5b83\u786e\u5b9e\u5168\u9762\u78be\u538b Selenium\u3002\u5fae\u8f6f\u51fa\u54c1\uff0c\u5fc5\u5c5e\u7cbe\u54c1\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1a<code>deepin-20.8</code></p> <pre><code>pip3 install playwright\n# \u5b89\u88c5\u6d4f\u89c8\u5668\nplaywright install\n</code></pre> <p>\u5b8c\u4e8b\u513f\u4e86\uff0c\u8fd9\u6837\u73af\u5883\u5c31\u88c5\u597d\u4e86\uff0c\u662f\u4e0d\u662f\u5f88\u7b80\u5355\uff0c\u4e0d\u7528\u53bb\u5173\u5fc3\u7528\u4ec0\u4e48\u6d4f\u89c8\u5668\uff0c\u7528\u4ec0\u4e48 WebDriver \u9a71\u52a8\uff0c\u4f60\u7684\u7535\u8111\u4e0a\u751a\u81f3\u4e0d\u7528\u88c5\u6d4f\u89c8\u5668\uff0c<code>playwright install</code> \u5df2\u7ecf\u628a\u6d4b\u8bd5\u7528\u7684\u6d4f\u89c8\u5668\u90fd\u88c5\u597d\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u811a\u672c\u751f\u6210\u5668","text":"<p>Selenium IDE \u662f\u7528\u6765\u5f55\u5236\u811a\u672c\u7684\uff0c\u597d\u591a\u521a\u5f00\u59cb\u5165\u95e8\u7684\u540c\u5b66\u5e94\u8be5\u90fd\u7528\u8fc7\uff0c\u5c31\u662f\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u88c5\u4e2a\u63d2\u4ef6\uff0c\u7136\u540e\u76d1\u63a7\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\uff0c\u751f\u6210\u811a\u672c\uff1b\u6211\u4e2a\u4eba\u5012\u662f\u6781\u5c11\u7528\uff0c\u56e0\u4e3a\u4f1a\u5199\u4ee3\u7801\u7528\u90a3\u73a9\u610f\u513f\u5e72\u5565\u3002\uff08\u6210\u529f\u88c5\u5230\uff09</p> <p>Playwright \u5f53\u7136\u4e5f\u6709\u5f55\u5236\u7684\u529f\u80fd\uff0c\u5728\u7ec8\u7aef\u6267\u884c\uff1a</p> <pre><code>playwright codegen\n</code></pre> <p>\u4f1a\u542f\u52a8\u4e00\u4e2a\u201c\u6d4f\u89c8\u5668\u201d\u7a97\u53e3\u548c\u4e00\u4e2a\u201c\u811a\u672c\u751f\u6210\u5668\u201d\u7a97\u53e3</p> <p></p> <p>\u811a\u672c\u751f\u6210\u5668\u521d\u59cb\u72b6\u6001\u4f1a\u6709\u6a21\u677f\u4ee3\u7801\uff0c\u4f60\u901a\u8fc7\u6d4f\u89c8\u5668\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6bcf\u4e00\u6b65\u7684\u64cd\u4f5c\uff0c\u90fd\u4f1a\u5bf9\u5e94\u5728\u811a\u672c\u751f\u6210\u5668\u81ea\u52a8\u751f\u6210\u4e00\u884c\u4ee3\u7801\uff0c\u6bd4\u5982\uff0c\u6211\u8f93\u5165\u767e\u5ea6\u7684\u7f51\u5740\uff1a</p> <p></p> <p>\u5728\u767e\u5ea6\u9996\u9875\uff0c\u70b9\u51fb\u8f93\u5165\u6846\uff0c\u8f93\u5165\u4e00\u4e2a\u5185\u5bb9\uff0c\u70b9\u51fb\u201c\u767e\u5ea6\u4e00\u4e0b\u201d\uff0c\u4e00\u987f\u64cd\u4f5c\u4e0b\u6765\uff0c\u4ee3\u7801\u81ea\u52a8\u751f\u6210\u5982\u4e0b\uff1a</p> <pre><code>from playwright.sync_api import Playwright, sync_playwright, expect\ndef run(playwright: Playwright) -&gt; None:\nbrowser = playwright.chromium.launch(headless=False)\ncontext = browser.new_context()\npage = context.new_page()\npage.goto(\"https://www.baidu.com/\")\npage.locator(\"#kw\").click()\npage.locator(\"#kw\").fill(\"youqu\")\npage.get_by_role(\"button\", name=\"\u767e\u5ea6\u4e00\u4e0b\").click()\n# ---------------------\ncontext.close()\nbrowser.close()\nwith sync_playwright() as playwright:\nrun(playwright)\n</code></pre> <p>\u8fd9\u6837\u5c31\u81ea\u52a8\u751f\u6210\u4e86\u4e00\u6bb5\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u7b80\u76f4\u4e0d\u8981\u592a\u8f7b\u677e\u3002</p> <p>\u6709\u540c\u5b66\u8bf4\uff0c\u80fd\u4e0d\u80fd\u76f4\u63a5\u751f\u6210\u6d4b\u8bd5\u7528\u4f8b\u7684\u4ee3\u7801\uff0c\u5f53\u7136\u662f\u53ef\u4ee5\u7684\uff0c\u5728\u811a\u672c\u751f\u6210\u5668\u53f3\u4e0a\u89d2 Target \u9009\u62e9 <code>pytest</code>\uff0c\u4e00\u987f\u64cd\u4f5c\u4e0b\u6765\uff0c\u751f\u6210\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>from playwright.sync_api import Page, expect\ndef test_example(page: Page) -&gt; None:\npage.goto(\"https://www.baidu.com/\")\npage.locator(\"#kw\").click()\npage.locator(\"#kw\").fill(\"youqu\")\npage.get_by_role(\"button\", name=\"\u767e\u5ea6\u4e00\u4e0b\").click()\n</code></pre> <p>\u8fd9\u4e2a\u811a\u672c\u662f\u53ef\u4ee5\u76f4\u63a5\u7528 <code>pytest</code> \u6765\u6267\u884c\u7684\uff0c\u4f60\u9700\u8981\u5b89\u88c5 <code>pytest-playwright</code> \u63d2\u4ef6\uff1a</p> <pre><code>pip3 install pytest-playwright\n</code></pre> <p><code>pytest-playwright</code>  \u63d2\u4ef6\u662f\u7531 Playwright \u5b98\u65b9\u7ef4\u62a4\u7684\u3002</p> <p>\u76f8\u4fe1\u6709\u4e0a\u9762 <code>pytest</code> \u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5bf9\u4e8e\u6d4b\u8bd5\u540c\u5b66\u6765\u8bb2\uff0c\u5199\u4e00\u4e9b\u7b80\u5355\u7684\u7528\u4f8b\u662f\u6ca1\u4ec0\u4e48\u95ee\u9898\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u5143\u7d20\u5b9a\u4f4d\u65b9\u6cd5","text":"<p>\u5bf9\u4e8e\u6240\u6709\u7684 UI \u81ea\u52a8\u5316\u6765\u8bb2\uff0c\u65e0\u975e\u5c31\u662f\u5143\u7d20\u5b9a\u4f4d\u548c\u5143\u7d20\u64cd\u4f5c\uff0cPlaywright \u6700\u5e38\u7528\u7684\u5143\u7d20\u7684\u5b9a\u4f4d\u65b9\u6cd5\u5c31\u662f XPath \u548c CSS\uff0c\u5176\u6b21\u5c31\u662f\u5b83\u7279\u6709\u7684\u5b9a\u4f4d\u65b9\u6cd5\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1xpath","title":"1\u3001XPath","text":"<p>XPath \u662f\u4e00\u79cd\u901a\u7528\u3001\u6807\u51c6\u7684\u5143\u7d20\u5b9a\u4f4d\u65b9\u6848\uff0c\u5b83\u7684\u8bed\u6cd5\u4e5f\u662f\u6807\u51c6\u7684\uff0c\u5728\u5f88\u591a\u6846\u67b6\u91cc\u9762\u90fd\u6709\u4f7f\u7528\u5230\uff0c\u57fa\u672c\u80fd\u6ee1\u8db3 90% \u7684\u5143\u7d20\u5b9a\u4f4d\u9700\u6c42\uff1b</p> <p>\u7ecf\u5e38\u6709\u540c\u5b66\u8bf4 XPath \u5b9a\u4f4d\u4e0d\u7a33\u5b9a\uff0c\u9875\u9762\u4e0a\u4e00\u70b9\u70b9\u53d8\u5316\u5c31\u627e\u4e0d\u5230\u5143\u7d20\u4e86\uff0c\u8bf4\u8fd9\u8bdd\u7684\u4e00\u822c\u662f\u559c\u6b22\u4f7f\u7528\u6d4f\u89c8\u5668\u81ea\u5e26\u7684\u590d\u5236 XPath \u7684\u529f\u80fd\uff0c\u56e0\u4e3a\u590d\u5236\u51fa\u6765\u7684 XPath \u8def\u5f84\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u5f53\u7136\u4e0d\u7a33\u5b9a\uff0c\u6211\u4eec\u901a\u8fc7\u89c2\u5bdf\uff0c\u81ea\u5df1\u5199\u76f8\u5bf9\u8def\u5f84\u7684XPath \u8868\u8fbe\u5f0f\uff1b</p> <p>\u7b80\u5355\u4ecb\u7ecd\u4e0b XPath \u8bed\u6cd5\uff1a</p> <p>\uff081\uff09\u8282\u70b9\u9009\u53d6</p> \u8868\u8fbe\u5f0f \u63cf\u8ff0 nodename \u9009\u53d6\u6b64\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9 / \u4ece\u6839\u8282\u70b9\u9009\u53d6 // \u4ece\u5339\u914d\u9009\u62e9\u7684\u5f53\u524d\u8282\u70b9\u9009\u62e9\u6587\u6863\u4e2d\u7684\u8282\u70b9\uff0c\u800c\u4e0d\u8003\u8651\u5b83\u4eec\u7684\u4f4d\u7f6e . \u9009\u53d6\u5f53\u524d\u8282\u70b9 .. \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u7236\u8282\u70b9 @ \u9009\u53d6\u5c5e\u6027 <p>\uff082\uff09\u5c5e\u6027\u9009\u53d6</p> \u8def\u5f84\u8868\u8fbe\u5f0f \u7ed3\u679c /bookstore/book[1] \u9009\u53d6\u5c5e\u4e8e bookstore \u5b50\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a book \u5143\u7d20\u3002 /bookstore/book[last()] \u9009\u53d6\u5c5e\u4e8e bookstore \u5b50\u5143\u7d20\u7684\u6700\u540e\u4e00\u4e2a book \u5143\u7d20\u3002 /bookstore/book[last()-1] \u9009\u53d6\u5c5e\u4e8e bookstore \u5b50\u5143\u7d20\u7684\u5012\u6570\u7b2c\u4e8c\u4e2a book \u5143\u7d20\u3002 /bookstore/book[position()&lt;3] \u9009\u53d6\u6700\u524d\u9762\u7684\u4e24\u4e2a\u5c5e\u4e8e bookstore \u5143\u7d20\u7684\u5b50\u5143\u7d20\u7684 book \u5143\u7d20\u3002 //title[@lang] \u9009\u53d6\u6240\u6709\u62e5\u6709\u540d\u4e3a lang \u7684\u5c5e\u6027\u7684 title \u5143\u7d20\u3002 //title[@lang='eng'] \u9009\u53d6\u6240\u6709 title \u5143\u7d20\uff0c\u4e14\u8fd9\u4e9b\u5143\u7d20\u62e5\u6709\u503c\u4e3a eng \u7684 lang \u5c5e\u6027\u3002 /bookstore/book[price&gt;35.00] \u9009\u53d6 bookstore \u5143\u7d20\u7684\u6240\u6709 book \u5143\u7d20\uff0c\u4e14\u5176\u4e2d\u7684 price \u5143\u7d20\u7684\u503c\u987b\u5927\u4e8e 35.00\u3002 /bookstore/book[price&gt;35.00]/title \u9009\u53d6 bookstore \u5143\u7d20\u4e2d\u7684 book \u5143\u7d20\u7684\u6240\u6709 title \u5143\u7d20\uff0c\u4e14\u5176\u4e2d\u7684 price \u5143\u7d20\u7684\u503c\u987b\u5927\u4e8e 35.00\u3002 <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8c03\u8bd5 XPath\uff1a</p> <p>\u6309 F12 \u6253\u5f00\u8c03\u8bd5\u9875\u9762\u2014&gt;\u9009\u62e9 console\uff0cXPath \u5b9a\u4f4d\u7684\u8bed\u6cd5\u662f \uff1a$x() </p> <p>\u4e3e\u4f8b\uff1a</p> <p></p> <pre><code>$x(\"//input[@type='submit']\")\n</code></pre> <p>\u8bf4\u660e\u901a\u8fc7\u8fd9\u4e2a XPath \u8868\u8fbe\u5f0f\u53ef\u4ee5\u5b9a\u4f4d\u5230\u3010\u767e\u5ea6\u4e00\u4e0b\u3011\u6309\u94ae\uff1b</p> <p>\u5728 Playwright \u91cc\u9762\u662f\u901a\u8fc7 page \u5bf9\u8c61\u63d0\u4f9b\u7684 locator \u65b9\u6cd5\u5b9e\u73b0 CSS \u6216 XPath \u5b9a\u4f4d\u7684\uff1a</p> <pre><code>page.locater(\"//input[@type='submit']\").click()\n</code></pre> <p>Playwright \u4f1a\u81ea\u52a8\u68c0\u6d4b\u8f93\u5165\u7684\u662f CSS \u6216 XPath\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2css","title":"2\u3001CSS","text":"<p>\u4e86\u89e3\u524d\u7aef\u7684\u5e94\u8be5\u90fd\u77e5\u9053 CSS\uff0c\u8fd9\u91cc\u4e0d\u591a\u4ecb\u7ecd\uff1b</p> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8c03\u8bd5 CSS \u5b9a\u4f4d\uff1a</p> <p></p> <pre><code>$(\"#su\")\n</code></pre> <p>\u8bf4\u660e\u901a\u8fc7\u6b64 CSS \u8868\u8fbe\u5f0f\u53ef\u4ee5\u5b9a\u4f4d\u5230\u3010\u767e\u5ea6\u4e00\u4e0b\u3011\u6309\u94ae\uff1b</p> <p>\u5728 Playwright \u91cc\u9762\uff1a</p> <pre><code>page.locater(\"#su\").click()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u7279\u6709\u7684","text":"<p>Playwright \u5185\u7f6e\u51e0\u4e2a\u5b9a\u4f4d\u5668\uff1a</p> <ul> <li>get_by_role \u901a\u8fc7\u89d2\u8272\u5b9a\u4f4d</li> </ul> <p>\u8fd8\u662f\u4e0a\u9762\u7684\u4f8b\u5b50\u3010\u767e\u5ea6\u4e00\u4e0b\u3011\uff1a</p> <p>html \u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>&lt;input type=\"submit\" id=\"su\" value=\"\u767e\u5ea6\u4e00\u4e0b\" class=\"bg s_btn\"&gt;\n</code></pre> <p>\u5b9a\u4f4d\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>page.get_by_role(\"button\", name=\"\u767e\u5ea6\u4e00\u4e0b\")\n</code></pre> <ul> <li>get_by_text \u901a\u8fc7\u6587\u672c\u5b9a\u4f4d</li> </ul> <p>\u8fd8\u662f\u5728\u767e\u5ea6\u9996\u9875\u627e\u4e2a\u6587\u672c html \uff1a</p> <pre><code>&lt;span class=\"hot-refresh-text\"&gt;\u6362\u4e00\u6362&lt;/span&gt;\n</code></pre> <p>\u5b9a\u4f4d\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>page.get_by_text(\"\u6362\u4e00\u6362\")\n</code></pre> <ul> <li>get_by_label \u901a\u8fc7\u6807\u7b7e\u5b9a\u4f4d</li> </ul> <p>html \u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>&lt;label&gt;Password &lt;input type=\"password\" /&gt;&lt;/label&gt;\n</code></pre> <p>\u5b9a\u4f4d\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>page.get_by_label(\"Password\")\n</code></pre> <p>\u8fd8\u6709\u5176\u4ed6\u7684\u5185\u7f6e\u5b9a\u4f4d\u65b9\u6cd5\uff1a</p> <pre><code>get_by_placeholder \u5360\u4f4d\u7b26\u5b9a\u4f4d\nget_by_alt_text \u66ff\u6362\u6587\u672c\u5b9a\u4f4d\nget_by_title \u6807\u9898\u5b9a\u4f4d\nget_by_test_id \u6d4b\u8bd5ID\u5b9a\u4f4d\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u5176\u4ed6","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u622a\u56fe","text":"<p>\u6355\u83b7\u5c4f\u5e55\u622a\u56fe\u5e76\u5c06\u5176\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\uff1a</p> <pre><code>page.screenshot(path=\"screenshot.png\")\n</code></pre> <p>\u5b8c\u6574\u9875\u9762\u622a\u56fe\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53ef\u6eda\u52a8\u9875\u9762\u7684\u622a\u56fe\uff1a</p> <pre><code>page.screenshot(path=\"screenshot.png\", full_page=True)\n</code></pre> <p>\u5355\u4e2a\u5143\u7d20\u8fdb\u884c\u5c4f\u5e55\u622a\u56fe\uff1a</p> <pre><code>page.locator(\".header\").screenshot(path=\"screenshot.png\")\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u5f55\u5c4f","text":"<p>\u6d4b\u8bd5\u8fc7\u7a0b\u5f55\u5c4f\uff0c\u4fdd\u5b58\u7684\u89c6\u9891\u6587\u4ef6\u5c06\u51fa\u73b0\u5728\u6307\u5b9a\u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u751f\u6210\u4e86\u552f\u4e00\u7684\u540d\u79f0\uff0c\u89c6\u9891\u4fdd\u5b58\u5728\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u5728\u6d4b\u8bd5\u7ed3\u675f\u65f6\u5173\u95ed\uff1a</p> <pre><code>context = browser.new_context(record_video_dir=\"videos/\")\ncontext.close()\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u6307\u5b9a\u89c6\u9891\u5927\u5c0f</p> <pre><code>context = browser.new_context(\nrecord_video_dir=\"videos/\",\nrecord_video_size={\"width\": 800, \"height\": 800}\n)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3po","title":"3\u3001PO","text":"<p>PO\uff08Page Object\uff09 \u662f\u4e00\u79cd\u5206\u5c42\u8bbe\u8ba1\u7684\u601d\u60f3\uff0c\u6700\u65e9\u662f Selenium \u63d0\u51fa\u6765\u7684\uff0c\u4f46\u5b83\u672c\u8eab\u548c\u4f7f\u7528\u4ec0\u4e48\u6846\u67b6\u6ca1\u6709\u5173\u7cfb\uff0c\u6211\u4eec\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u8be5\u59cb\u7ec8\u4f7f\u7528 PO \u7684\u8bbe\u8ba1\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u81ea\u52a8\u7b49\u5f85","text":"<p>Playwright \u5728\u5143\u7d20\u5b9a\u4f4d\u7684\u65f6\u5019\u662f\u81ea\u52a8\u7b49\u5f85\u7684\uff0c\u4e0d\u7528\u518d\u50cf\u4f7f\u7528 Selenium \u4e00\u6837\u8bbe\u7f6e\u5404\u79cd\u7c7b\u578b\u7684\u7b49\u5f85\uff08\u9690\u5f0f\u7b49\u5f85\u3001\u663e\u793a\u7b49\u5f85\u3001\u5f3a\u5236\u7b49\u5f85\uff09\uff0c\u8fd9\u624d\u662f\u6846\u67b6\u8be5\u6709\u7684\u6837\u5b50\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"5\u3001\u65ad\u8a00","text":"<p>Playwright \u6709\u81ea\u5df1\u7684\u65ad\u8a00\u8bed\u53e5\uff1a</p> <pre><code>locator = page.locator(\"input[type=number]\")\nexpect(locator).to_have_value(re.compile(r\"[0-9]\"))\n</code></pre> <p>\u4f7f\u7528 expect \u8bed\u53e5\uff0c\u540e\u9762\u8ddf\u65ad\u8a00\u7684\u7c7b\u578b\uff0c\u65ad\u8a00\u7684\u7c7b\u578b\u5c31\u6709\u70b9\u591a\u4e86\uff0c\u5927\u6982\u770b\u4e86\u4e0b\u6709\u597d\u51e0\u5341\u4e2a\uff0c\u5217\u51e0\u4e2a\u5e38\u7528\u7684\uff1a</p> <p>to_have_value</p> <p>to_contain_text</p> <p>to_be_empty</p> <p>\u53cd\u5411\u65ad\u8a00\uff0c\u524d\u9762\u52a0 not\uff0c\u5982\uff1anot_to_contain_text</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/","title":"Pytest \u4ece\u5165\u95e8\u5230\u8d77\u98de","text":"<pre><code># ==================================\n# Author : Mikigo\n# ==================================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Pytest \u662f\u4e00\u4e2a\u6d41\u884c\u7684\u57fa\u4e8e Python \u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\u6846\u67b6\uff0c\u4ee5\u5176\u7075\u6d3b\u6027\u3001\u53ef\u6269\u5c55\u6027\u3001\u6613\u7528\u6027\u4fd8\u83b7\u4e86\u5927\u6279 Python \u7a0b\u5e8f\u5458\u7684\u5fc3\u3002\u7f51\u4e0a\u5173\u4e8e pytest \u7684\u6559\u7a0b\u4e0d\u5c11\uff0c\u4f46\u662f\u90fd\u662f\u96f6\u6563\u7684\u77e5\u8bc6\u70b9\uff0c\u51e0\u4e4e\u6ca1\u6709\u5f88\u5168\u9762\u7684\u6559\u7a0b\uff0c\u5f53\u521d\u5b66\u4e60\u5b83\u7684\u65f6\u5019\u5c31\u82e6\u4e8e\u6ca1\u6709\u5168\u9762\u7684\u6559\u7a0b\u800c\u4e0d\u5f97\u4e0d\u53bb\u7814\u8bfb\u5b83\u7684\u5b98\u65b9\u6587\u6863\uff0c\u770b\u5b8c\u4e00\u904d\u5b98\u65b9\u6587\u6863\u4e4b\u540e\u611f\u89c9\u8fd8\u6709\u4e9b\u6ca1\u5f04\u660e\u767d\uff0c\u5230\u4eac\u4e1c\u4e0a\u4e70\u4e86\u4e00\u672c\u300apytest\u6d4b\u8bd5\u5b9e\u6218(Brian.Okken\u300b\uff0c\u5982\u83b7\u81f3\u5b9d\uff0c\u5e94\u8be5\u8bf4\u662f\u5f53\u65f6\u552f\u4e00\u7684\u4e00\u4e2a\u8bb2\u89e3 Pytest \u7684\u4e66\u7c4d\u4e86\uff0c\u770b\u5b8c\u4e4b\u540e\u6211\u6709\u70b9\u5931\u671b\uff0c\u5199\u5f97\u4e5f\u592a\u7b80\u5355\u4e86\uff0c2\u5929\u5c31\u770b\u5b8c\u4e86\uff0c\u8fd8\u4e0d\u5982\u770b\u5b98\u65b9\u6587\u6863\u5462\uff0c\u5c31\u8fd9\u90fd\u80fd\u51fa\u4e66\uff0c\u6211\u90fd\u80fd\u5199\u4e66\u4e86\uff0c\u540e\u9762\u53c8\u56de\u8fc7\u5934\u6765\u770b Pytest \u5b98\u65b9\u6587\u6863\u3002</p> <p>\u5927\u5bb6\u77e5\u9053\u5b98\u65b9\u6587\u6863\u786e\u5b9e\u662f\u6700\u5168\u7684\uff0c\u80fd\u591f\u8ba9\u4f60\u5168\u65b9\u4f4d\u7684\u638c\u63e1\uff0c\u4f46\u662f\uff0c\u5c31\u662f\u56e0\u4e3a\u592a\u8be6\u7ec6\u4e86\uff0c\u6709\u4e9b\u4e1c\u897f\u5bf9\u4e8e99.9%\u7684\u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u5176\u5b9e\u6ca1\u5fc5\u8981\u638c\u63e1\u3002\u7ecf\u8fc7\u957f\u671f\u6478\u7d22\uff0c\u6211\u5c06\u6211\u4eec\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u3001\u6838\u5fc3\u7684\u5185\u5bb9\u603b\u7ed3\u6210\u8fd9\u7bc7\u6559\u7a0b\uff0c\u5e0c\u671b\u80fd\u4ee5\u4e00\u79cd\u8f7b\u677e\u3001\u7b80\u5355\u3001\u4ee4\u4eba\u6109\u60a6\u7684\u65b9\u5f0f\uff0c\u5c06\u8fd9\u4e9b\u5185\u5bb9\u8bb2\u6e05\u695a\u3002</p> <p>\u4e5f\u5e0c\u671b\u901a\u8fc7\u8bb2\u89e3\u5404\u4e2a\u6a21\u5757\u7684\u77e5\u8bc6\uff0c\u6f5c\u79fb\u9ed8\u5316\u7684\u8ba9\u4f60\u7406\u89e3 Pytest \u7684 Plugin \u8bbe\u8ba1\u54f2\u5b66\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<pre><code>pip3 install pytest\n---&gt; 100%\n</code></pre> <p>\u53ea\u9700\u8981\u8fd9\u6837\u5b89\u88c5\u4e00\u4e0b\u5c31\u884c\u4e86\uff0c\u591f\u7b80\u5355\u6613\u7528\u5427\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_3","title":"\u4e09\u3001\u7528\u4f8b\u7f16\u5199","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1","title":"1\u3001\u51fd\u6570\u5f0f","text":"<pre><code>def test_001():\n...\ndef test_002():\n...\n</code></pre> <p>\u8fd9\u79cd\u662f\u51fd\u6570\u5f0f\u7684\u7528\u4f8b\u5199\u6cd5\uff0c\u5c31\u662f\u76f4\u63a5\u5728 py \u6587\u4ef6\u91cc\u9762\u5b9a\u4e49\u51fd\u6570\uff0c\u51fd\u6570\u91cc\u9762\u5199\u6d4b\u8bd5\u7528\u4f8b\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2","title":"2\u3001\u7c7b\u5f0f","text":"<pre><code>class TestMikigo:\ndef test_001(self):\n...\ndef test_002(self):\n...\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u662f\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\uff0c\u5728\u51fd\u6570\u91cc\u9762\u5199\u6d4b\u8bd5\u7528\u4f8b\u5373\u53ef\u3002</p> <p>\u4e24\u79cd\u5199\u6cd5\u90fd\u662f\u53ef\u4ee5\u7684\uff0c\u5728\u6267\u884c\u7684\u65f6\u5019\u90fd\u80fd\u88ab pytest \u8bc6\u522b\u4e3a\u7528\u4f8b\u3002</p> <p>\u4ece\u5de5\u7a0b\u7684\u89d2\u5ea6\uff0c\u6211\u66f4\u63a8\u8350\u4f7f\u7528\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\uff0c\u56e0\u4e3a\u51fd\u6570\u5f0f\u7684\u5199\u6cd5\u4e0d\u80fd\u4f7f\u7528\u7c7b\u7ea7\u522b\u7684 fixture\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u7c7b\u3002\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u52a0\u7075\u6d3b\u7684 fixture \u7684\u5904\u7406\uff0c\u8ba9\u4f60\u5728\u5e94\u5bf9\u590d\u6742\u6d4b\u8bd5\u573a\u666f\u7684\u65f6\u5019\uff0c\u6e38\u5203\u6709\u4f59\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#fixture","title":"\u56db\u3001fixture","text":"<p>fixture \u7ffb\u8bd1\u8fc7\u6765\u662f \u201c\u5939\u5177\u201d\uff0c\u7b80\u5355\u8bb2\u5c31\u662f\u7528\u4f8b\u6267\u884c\u524d\u540e\u8981\u505a\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u79f0\u4e3a\u524d\u7f6e\uff08setup\uff09\u548c\u540e\u7f6e\uff08teardown\uff09\u64cd\u4f5c\u3002\u7528\u4f8b\u5c31\u50cf\u5939\u5fc3\u997c\u5e72\u4e00\u6837\u88ab\u5939\u5728\u4e2d\u95f4\u3002</p> <p>Pytest \u7075\u6d3b\u6027\u5f88\u91cd\u8981\u7684\u4e00\u65b9\u9762\u5c31\u662f\u4f53\u73b0\u5728\u5b83\u7684 fixture\uff0c\u90a3\u662f\u76f8\u5f53\u7684\u7075\u6d3b\u3002\u4e0d\u4ec5\u652f\u6301\u591a\u4e2a\u7ea7\u522b\uff0c\u5404\u4e2a\u7ea7\u522b\u7684\u5199\u6cd5\u8fd8\u652f\u6301\u591a\u6837\uff0c\u8fd8\u53ef\u4ee5\u5171\u4eab\u3001\u9ed8\u8ba4\u8c03\u7528\u3001\u6307\u5b9a\u8c03\u7528\uff0c\u5f88\u591a\u9a9a\u64cd\u4f5c\uff0c\u73b0\u5728\u4e0d\u77e5\u9053\u6ca1\u5173\u7cfb\uff0c\u770b\u5b8c\u8fd9\u4e00\u7ae0\u5e94\u8be5\u80fd\u6709\u6240\u6536\u83b7\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1_1","title":"1\u3001\u7ea7\u522b","text":"<p>\u603b\u5171\u6709\u56db\u4e2a\u7ea7\u522b\uff1a\u51fd\u6570\u7ea7\u522b\uff08funciton\uff09\u3001\u7c7b\u7ea7\u522b\uff08class\uff09\u3001\u6a21\u5757\u7ea7\u522b\uff08module\uff09\u3001\u4f1a\u8bdd\u7ea7\u522b\uff08session\uff09</p> <p>\u8fd9\u90e8\u5206\u53ea\u9700\u8981\u7406\u89e3\u6982\u5ff5\uff0c\u4e0d\u9700\u8981\u7ea0\u7ed3\u4e0e\u5177\u4f53\u7684\u5199\u6cd5\u3002</p> <ul> <li>\u51fd\u6570\u7ea7\u522b\uff08funciton\uff09</li> </ul> <p>\u51fd\u6570\u5c31\u662f\u7528\u4f8b\uff0c\u51fd\u6570\u7ea7\u522b\u7684fixture\u5c31\u662f\u5728\u6bcf\u4e2a\u7528\u4f8b\u6267\u884c\u524d\u540e\u7684\u64cd\u4f5c\uff0c\u5373\uff1a <code>function_setup</code> <code>test_case</code> <code>function_teardown</code> \u3002</p> <ul> <li>\u7c7b\u7ea7\u522b\uff08class\uff09</li> </ul> <p>\u7c7b\u7ea7\u522b\u5c31\u662f\u5728\u6bcf\u4e2a\u7528\u4f8b\u7c7b\u6267\u884c\u524d\u540e\u8981\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u6ce8\u610f\uff0c\u4e00\u4e2a\u7c7b\u53ea\u6267\u884c\u4e00\u6b21\u54e6\u3002</p> <ul> <li> <p>\u5982\u679c\u4e00\u4e2a\u7c7b\u91cc\u9762\u53ea\u6709\u4e00\u4e2a\u51fd\u6570\uff0c\u7c7b\u7ea7\u522b\u76f8\u5bf9\u4e8e\u51fd\u6570\u7ea7\u522b\uff0c\u5c31\u662f\u5728\u51fd\u6570\u7ea7\u522b\u524d\u540e\u6267\u884c\uff0c\u5373\uff1a<code>class_setup</code> <code>function_setup</code> <code>test_case</code> <code>function_teardown</code> <code>class_teardown</code> \u3002</p> <p>\u4f60\u770b\u5176\u5b9e\u5c31\u662f\u5728\u524d\u9762\u51fd\u6570\u7ea7\u522b\u7684\u57fa\u7840\u4e4b\u4e0a\u5916\u9762\u52a0\u4e86\u4e00\u5c42\uff0c\u5f88\u597d\u7406\u89e3\u662f\u5427\u3002</p> </li> <li> <p>\u5982\u679c\u4e00\u7c7b\u91cc\u9762\u6709\u591a\u4e2a\u51fd\u6570\uff0c\u6267\u884c\u7684\u987a\u5e8f\u662f\uff1a<code>class_setup</code> <code>function_setup</code> <code>test_case_001</code> <code>function_teardown</code> <code>function_setup</code> <code>test_case_001</code> <code>function_teardown</code> <code>class_teardown</code> \u3002</p> <p>\u4f60\u6ce8\u610f\u770b\u533a\u522b\uff0c\u4e2d\u95f4\u6709\u591a\u4e2a\u7528\u4f8b\u51fd\u6570\uff0c\u6bcf\u4e2a\u51fd\u6570\u5916\u90fd\u5939\u4e86\u4e00\u4e2a\u51fd\u6570\u7ea7\u522b\u7684fixture\uff0c\u7136\u540e\u7c7b\u7ea7\u522bfixture\u662f\u653e\u5728\u6700\u5916\u5c42\u7684\u3002</p> </li> <li> <p>\u6a21\u5757\u7ea7\u522b\uff08module\uff09</p> </li> </ul> <p>\u7406\u89e3\u4e86\u524d\u9762\u7c7b\u7ea7\u522b\u7684fixture\u4e4b\u540e\uff0c\u76f8\u4fe1\u4f60\u5df2\u7ecf\u80fd\u63a8\u7406\u51fa\u6765\u4e86\uff0c\u6a21\u5757\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u6210\u4e00\u4e2a py \u6587\u4ef6\uff0c\u5728\u4e00\u4e2a py \u6587\u4ef6\u91cc\u9762\u53ef\u4ee5\u5199\u591a\u4e2a\u7c7b\uff0c\u6bcf\u4e2a\u7c7b\u91cc\u9762\u53ef\u4ee5\u5199\u591a\u4e2a\u51fd\u6570\u3002\u4e00\u5c42\u5939\u4e00\u5c42\u7684\u3002</p> <ul> <li>\u4f1a\u8bdd\u7ea7\u522b\uff08session\uff09</li> </ul> <p>\u8fd9\u4e2a\u76f8\u5bf9\u6765\u8bb2\u6709\u70b9\u62bd\u8c61\uff0c\u5176\u5b9e\u5c31\u662f\u4f60\u6267\u884c\u4e00\u6b21\u7528\u4f8b\u5c31\u662f\u4e00\u6b21\u4f1a\u8bdd\uff0c\u5f53\u7136\u4e00\u6b21\u4f1a\u8bdd\u91cc\u9762\u53ef\u80fd\u53ea\u6709\u4e00\u4e2a\u7528\u4f8b\uff0c\u4e5f\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u7528\u4f8b\u6a21\u5757\u3001\u591a\u4e2a\u7528\u4f8b\u7c7b\u3001\u591a\u4e2a\u7528\u4f8b\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2_1","title":"2\u3001\u4e0d\u540c\u7684\u5199\u6cd5","text":"<p>\u8fd9\u91cc\u9a9a\u64cd\u4f5c\u5c31\u6bd4\u8f83\u591a\u4e86\uff0c\u770b\u51c6\u4e86\u54c8\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#21xunit","title":"2.1\u3001XUnit \u7684\u5199\u6cd5","text":"<p>\u719f\u6089 <code>unittest</code> \u6846\u67b6\u7684\u4eba\u90fd\u77e5\u9053\uff0c<code>unittest</code> \u91cc\u9762 <code>fixture</code> \u7684\u5199\u6cd5\u662f <code>setUp</code> \u548c <code>tearDown</code>\uff0c<code>setUp_class</code> \u548c <code>tearDown_class</code>\uff0c\u53ea\u6709\u8fd9\u4e00\u79cd\u5199\u6cd5\uff0c\u800c\u4e14\u662f\u56fa\u5b9a\u7684\u5199\u6cd5\u54c8\u3002</p> <p><code>Pytest</code> \u662f\u517c\u5bb9 <code>unittest</code> \u7684\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u8fd9\u6837\u5199\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nfrom unittest import TestCase\nclass TestMikigo(TestCase):\ndef setUp(self):\nprint(\"\u6211\u662f\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef tearDown(self):\nprint(\"\u6211\u662f\u540e\u7f6e\", datetime.now())\n</code></pre> <p>\u6ce8\u610f\u662f\u7ee7\u627f\u4e86 <code>unittest.TestCase</code> \u7684\uff0c<code>Pytest</code> \u53ef\u4ee5\u517c\u5bb9\u8fd0\u884c\u7684\uff0c\u57fa\u672c\u64cd\u4f5c\u54c8\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u4e00\u4e9b\u4f60\u6ca1\u89c1\u8fc7\u7684 <code>Xunit</code> \u5199\u6cd5\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nclass TestMikigo:\ndef setup(self):\nprint(\"\u6211\u662f\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef teardown(self):\nprint(\"\u6211\u662f\u540e\u7f6e\", datetime.now())\n</code></pre> <pre><code>\u6211\u662f\u524d\u7f6e 2022-01-24 16:17:59.267900\n\u6211\u662f\u7528\u4f8b 2022-01-24 16:18:00.269282\n\u6211\u662f\u540e\u7f6e 2022-01-24 16:18:01.270688\n</code></pre> <p>\u4f60\u770b\uff0c<code>setup</code> \u548c <code>teardown</code> \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u4f1a\u88ab\u81ea\u52a8\u8bc6\u522b\u7684\u3002</p> <p>\u8fd8\u6709\u8fd9\u79cd\uff0c\u770b\u51c6\u4e86\u54c8\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nclass TestMikigo:\ndef setup_method(self):\nprint(\"\u6211\u662f\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef teardown_method(self):\nprint(\"\u6211\u662f\u540e\u7f6e\", datetime.now())\n</code></pre> <pre><code>\u6211\u662f\u524d\u7f6e 2022-01-24 16:24:57.456212\n\u6211\u662f\u7528\u4f8b 2022-01-24 16:24:58.457273\n\u6211\u662f\u540e\u7f6e 2022-01-24 16:24:59.458097\n</code></pre> <p><code>setup_method</code> \u548c <code>teardown_method</code> \u4e5f\u53ef\u4ee5\u3002</p> <p>\u8fd9\u91cc\u8fd8\u8981\u8bb2\u4e00\u4e0b <code>setup_method</code> \u548c <code>setup_function</code> \u7684\u533a\u522b\uff0c<code>setup_function</code> \u662f\u5728\u57fa\u4e8e\u51fd\u6570\u7684\u7528\u4f8b\u5199\u6cd5\u65f6\u4f7f\u7528\u7684\uff0c<code>setup_method</code> \u662f\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\u4f7f\u7528\u7684\uff0c\u6211\u9762\u8bd5\u522b\u4eba\u7684\u65f6\u5019\u559c\u6b22\u95ee\u8fd9\u4e24\u4e2a\u7684\u533a\u522b\uff0c\u5982\u679c\u77e5\u9053\u8fd9\u4e2a\u7684\uff0c\u57fa\u672c\u5bf9\u672c\u90e8\u5206\u5185\u5bb9\u662f\u4e86\u89e3\u7684\u3002</p> <p>\u4ee5\u4e0a\u53ea\u662f\u7528\u4f8b\u7ea7\u522b\u7684\uff0c\u4e0b\u9762\u8bf4\u4e0b\u7c7b\u7ea7\u522b\u7684\u5199\u6cd5\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nclass TestMikigo:\ndef setup_class(self):\nprint(\"\u6211\u662f\u7c7b\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef setup_method(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef teardown_method(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\nsleep(1)\ndef teardown_class(self):\nprint(\"\u6211\u662f\u7c7b\u540e\u7f6e\", datetime.now())\n</code></pre> <pre><code>\u6211\u662f\u7c7b\u524d\u7f6e 2022-01-24 16:31:59.411548\n\u6211\u662f\u7528\u4f8b\u524d\u7f6e 2022-01-24 16:32:00.411892\n\u6211\u662f\u7528\u4f8b 2022-01-24 16:32:01.413373\n\u6211\u662f\u7528\u4f8b\u540e\u7f6e 2022-01-24 16:32:02.414377\n\u6211\u662f\u7c7b\u540e\u7f6e 2022-01-24 16:32:03.415521\n</code></pre> <p>\u76f4\u63a5\u5199\u6210 <code>setup_class</code> \u5c31\u53ef\u4ee5\u4e86\uff0c\u5728 <code>unitest</code> \u91cc\u9762\u7c7b\u7ea7\u522b\u7684\u662f\u9700\u8981\u52a0\u7c7b\u65b9\u6cd5\u88c5\u9970\u5668 <code>@classmethod</code> \u7684\uff0c<code>pytest</code> \u91cc\u9762\u53ef\u52a0\u53ef\u4e0d\u52a0\uff0c\u770b\u4f60\u559c\u6b22\u3002</p> <p>\u6a21\u5757\u7ea7\u522b\u7684\u5c31\u7528 <code>setup_module</code>\uff0c\u4f1a\u8bdd\u7ea7\u522b\u7684\u5c31\u7528 <code>setup_session</code>\uff0c\u8fd9\u90fd\u597d\u7406\u89e3\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4e3e\u4f8b\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#22fixture","title":"2.2\u3001fixture \u5199\u6cd5","text":"<p>\u524d\u9762 <code>Xunit</code> \u7684\u5199\u6cd5\u5df2\u7ecf\u5f88\u7075\u6d3b\u4e86\uff0c\u4f46\u662f <code>Pytest</code> \u771f\u6b63\u5389\u5bb3\u7684\u662f\u5b83\u81ea\u5df1\u7279\u6709\u7684 fixture \u5199\u6cd5\u3002</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\nclass TestMikigo:\n@pytest.fixture(scope=\"function\")\ndef do_something_before(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\ndef test_001(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\n</code></pre> <p>\u8fd9\u91cc\u6709\u51e0\u70b9\u8981\u6ce8\u610f\uff1a</p> <ul> <li> <p>fixture \u5fc5\u987b\u8981\u52a0<code>@pytest.fixture()</code> \u88c5\u9970\u5668\uff1b</p> </li> <li> <p>scope \u4e3a fixture \u7ea7\u522b\uff1b</p> </li> <li> <p>fixture \u7684\u51fd\u6570\u540d <code>do_something_before</code> \u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u4f46\u662f\u4e0d\u8981\u548c <code>Xunit</code> \u7684\u51fd\u6570\u540d\u4e00\u6837\uff0c\u4e0d\u7136\u5c31\u4e71\u6389\u4e86\u3002</p> </li> <li> <p>yield \u4e4b\u524d\u662f\u524d\u7f6e\uff0cyield \u4e4b\u540e\u662f\u540e\u7f6e\uff0c\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u5229\u7528\u4e86\u751f\u6210\u5668\u7684\u539f\u7406\uff1b</p> </li> <li> <p>\u51fd\u6570\u540d do_something_before \u9700\u8981\u663e\u5f0f\u7684\u4f20\u5165\u7528\u4f8b\u53c2\u6570\uff1a</p> </li> </ul> <pre><code>def test_001(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 <code>@pytest.mark.usefixtures()</code> \uff0c\u5c31\u50cf\u8fd9\u6837\uff1a</p> <pre><code>@pytest.mark.usefixtures(\"do_something_before\")  # \u4e5f\u53ef\u4ee5\u653e\u5230\u7c7b\u540d\u524d\u9762\uff0c\u8868\u793a\u5bf9\u8fd9\u4e2a\u7c7b\u91cc\u9762\u6240\u6709\u7684\u7528\u4f8b\u90fd\u751f\u6548\u3002\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\n</code></pre> <p>\u4e0d\u8fc7\u8fd9\u79cd\u5199\u6cd5\u6211\u4e2a\u4eba\u4e0d\u5efa\u8bae\u54c8\uff0c\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5c5e\u4e8e\u786c\u7f16\u7801\uff0c\u4e0d\u597d\u7ef4\u62a4\u3002</p> <p>\u8fd9\u91cc\u8981\u597d\u597d\u7406\u89e3\u4e00\u4e0b\u54c8\uff0c\u77ed\u77ed\u7684\u51e0\u53e5\u8bdd\uff0c\u5176\u5b9e\u5305\u542b\u4e86\u5f88\u591a\u5185\u5bb9\u54e6\u3002\u8fd9\u79cd\u5199\u6cd5\u6ca1\u6709\u4e00\u4e2a\u4e25\u683c\u7684\u5b9a\u5f0f\uff0c\u66f4\u591a\u662f\u4e00\u79cd\u6a21\u5f0f\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#3","title":"3\u3001\u5171\u4eab","text":"<p>fixture \u5171\u4eab\u662f Pytest \u7684\u4e00\u5927\u7279\u70b9\uff0c\u4e5f\u662f\u5b83\u7075\u6d3b\u6027\u7684\u91cd\u8981\u4f53\u73b0\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#31","title":"3.1\u3001\u7528\u4f8b\u4e4b\u95f4\u5171\u4eab","text":"<p>\u6211\u4eec\u7ecf\u5e38\u9047\u5230\u591a\u4e2a\u7528\u4f8b\u9700\u8981\u7528\u5230\u540c\u4e00\u4e2a fixture \uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\nclass TestMikigo:\n@pytest.fixture(scope=\"function\")\ndef do_something_before(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\ndef test_001(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b001\", datetime.now())\nsleep(1)\ndef test_002(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b002\", datetime.now())\nsleep(1)\n</code></pre> <pre><code>\u6211\u662f\u7528\u4f8b\u524d\u7f6e 2022-01-24 18:36:52.039974\n\u6211\u662f\u7528\u4f8b001 2022-01-24 18:36:53.041396\n\u6211\u662f\u7528\u4f8b\u540e\u7f6e 2022-01-24 18:36:54.042808\n\u6211\u662f\u7528\u4f8b\u524d\u7f6e 2022-01-24 18:36:54.043354\n\u6211\u662f\u7528\u4f8b002 2022-01-24 18:36:55.044742\n\u6211\u662f\u7528\u4f8b\u540e\u7f6e 2022-01-24 18:36:56.046134\n</code></pre> <p>\u4f60\u770b\uff0c\u6211\u4eec\u53ea\u5b9a\u4e49\u4e86\u4e00\u4e2a fixture\uff0c\u7136\u540e\u5c06\u5b83\u7684\u51fd\u6570\u540d do_something_before \u5206\u522b\u90fd\u4f20\u7ed9\u4e86\u4e24\u4e2a\u7528\u4f8b\uff0c\u8fd9\u6837\u5b83\u5c31\u5bf9\u4e24\u4e2a\u7528\u4f8b\u90fd\u751f\u6548\u4e86\u3002</p> <p>\u90a3\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u6211\u5982\u679c\u6709\u5f88\u591a\u7684\u7528\u4f8b\uff0c\u6bcf\u4e2a\u7528\u4f8b\u90fd\u8981\u4f20\u5165\u53c2\u6570\uff0c\u597d\u9ebb\u70e6\u561e\uff0c\u6709\u6ca1\u6709\u66f4\u5999\u7684\u5199\u6cd5\uff1f</p> <p>\u5f53\u7136\u6709\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\nclass TestMikigo:\n@pytest.fixture(scope=\"function\",autouse=True)\ndef do_something_before(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b001\", datetime.now())\nsleep(1)\ndef test_002(self):\nprint(\"\u6211\u662f\u7528\u4f8b002\", datetime.now())\nsleep(1)\n</code></pre> <p><code>@pytest.fixture</code> \u91cc\u9762\u6709\u4e2a\u53c2\u6570 <code>autouse</code> \uff0c\u5c31\u662f\u81ea\u52a8\u4f7f\u7528\uff0c\u9ed8\u8ba4\u662f <code>False</code>\uff0c\u6211\u4eec\u4f20 <code>True</code> \u5c31\u8868\u793a\u5bf9\u5f53\u524d\u4f5c\u7528\u57df\u4e0b\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\u3002\u8fd9\u4e2a \u201c\u4f5c\u7528\u57df\u201d \u8981\u770b\u8fd9\u4e2a fixture \u505a\u5904\u7684\u4f4d\u7f6e\uff0c\u6bd4\u5982\u4f8b\u5b50\u4e2d\uff0cfixture \u662f\u5728\u7c7b\u91cc\u9762\uff0c\u5b83\u5c31\u5bf9\u8fd9\u4e2a\u7c7b\u4e2d\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\uff0c\u5982\u679c\u4f60\u628a\u5b83\u653e\u5230\u6a21\u5757\u91cc\u9762\uff0c\u5b83\u5bf9\u8fd9\u4e2a\u6a21\u5757\u91cc\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\u3002</p> <p><code>autouse</code> \u4e00\u5b9a\u8981\u614e\u7528\uff0c\u5904\u7406\u4e0d\u597d\u7684\u8bdd\u4f1a\u5f15\u8d77\u6267\u884c\u903b\u8f91\u7684\u6df7\u4e71\uff0c\u5c31\u662f\u4f60\u4f1a\u53d1\u73b0\u6709\u4e9b\u7528\u4f8b\u83ab\u540d\u5947\u5999\uff0c\u4e0d\u77e5\u9053\u5728\u6267\u884c\u4ec0\u4e48\uff0c\u53ef\u80fd\u5c31\u662f\u6709\u5176\u4ed6\u6ca1\u6ce8\u610f\u5230\u7684 fixture \u751f\u6548\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#32","title":"3.2\u3001\u7528\u4f8b\u7c7b\u4e4b\u95f4\u5171\u4eab","text":"<p>\u524d\u9762\u7684\u4f8b\u5b50\u90fd\u662f\u5c06 fixture \u653e\u5728\u7c7b\u91cc\u9762\uff0c\u8fd9\u6837\u53ea\u80fd\u5bf9\u8fd9\u4e00\u4e2a\u7c7b\u91cc\u9762\u7684\u7528\u4f8b\u751f\u6548\uff0c\u8981\u5b9e\u73b0\u7528\u4f8b\u7c7b\u4e4b\u95f4\u5171\u4eab\uff0c\u5c31\u4e0d\u80fd\u5199\u5728\u67d0\u4e00\u4e2a\u7c7b\u7684\u91cc\u9762\u4e86\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_before():\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\nclass TestMikigo001:\ndef test_TestMikigo001_001(self):\nprint(\"\u6211\u662f\u7528\u4f8bTestMikigo002001\", datetime.now())\nsleep(1)\nclass TestMikigo002:\ndef test_TestMikigo001_001(self):\nprint(\"\u6211\u662fTestMikigo002\u7528\u4f8b001\", datetime.now())\nsleep(1)\n</code></pre> <p>\u6211\u4eec\u5c06 fixture \u5199\u5728module \u91cc\u9762\uff0c\u8fd9\u6837\u5c31\u5bf9\u6587\u4ef6\u91cc\u9762\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#33","title":"3.3\u3001\u8d85\u7ea7\u5171\u4eab","text":"<p>conftest.py \u76f8\u5f53\u4e8e\u662f Pytest \u7684\u4e00\u4e2a\u672c\u5730\u63d2\u4ef6\u5e93\uff0c\u4f60\u53ef\u4ee5\u5728\u7528\u4f8b\u7684\u76ee\u5f55\u7ed3\u6784\u4e2d\u4efb\u610f\u4f4d\u7f6e\u65b0\u5efa\u4e00\u4e2a conftest.py \u6587\u4ef6\uff0c\u7136\u540e\u5728\u91cc\u9762\u5199\u5165 fixture\uff0c\u8fd9\u4e9b fixture \u53ef\u4ee5\u5bf9\u8fd9\u4e2a conftest.py \u6587\u4ef6\u5bf9\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7528\u4f8b\u751f\u6548\uff0c\u6240\u4ee5\u6211\u79f0\u4e4b\u4e3a\u201c\u8d85\u7ea7\u5171\u4eab\u201d\uff0c\u800c\u4e14\u5404\u4e2a\u76ee\u5f55\u90fd\u53ef\u4ee5\u6709\u81ea\u5df1\u7684 conftest.py\u3002</p> <p>\u201c\u8d85\u7ea7\u5171\u4eab\u201d \u4e0d\u662f\u5b98\u65b9\u672f\u8bed\uff0c\u662f\u6211\u81ea\u521b\u7684\u54c8\u3002</p> <p>\u54b1\u4eec\u6765\u65b0\u5efa\u4e00\u4e2a conftest.py \u6587\u4ef6\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 conftest.py\n\u2514\u2500\u2500 test_case_001.py\n</code></pre> <p>\u5728 conftest.py \u6587\u4ef6\u4e2d\u5199\u4e00\u4e2a fixture\uff1a</p> <pre><code>import pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something():\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>\u7528\u4f8b\uff1a</p> <pre><code>class TestMikigo:\ndef test_case_001(self):\nprint(\"test case 001\")\n</code></pre> <p>\u5728\u6839\u76ee\u5f55\u4f7f\u7528 <code>pytest -s -v</code> \u6267\u884c\u4e00\u4e0b\uff1a</p> <pre><code>\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 16:20:39.605921\ntest case 001\n\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 16:20:40.606656\n</code></pre> <p>\u8fd9\u6837\u5f53\u524d\u76ee\u5f55\u4e0b\u54ea\u6015\u6709\u591a\u4e2a\u7528\u4f8b\u6587\u4ef6\uff0c\u91cc\u9762\u6709\u6210\u5343\u4e0a\u4e07\u6761\u7528\u4f8b\uff0c\u6267\u884c\u65f6\u90fd\u4f1a\u52a0\u8f7d\u8fd9\u6761fixture\uff0c\u4f60\u8bf4\u662f\u4e0d\u662f\u8d85\u7ea7\u5171\u4eab\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#4","title":"4\u3001\u987a\u5e8f","text":"<p>\u524d\u9762\u8bb2\u201c\u8d85\u7ea7\u5171\u4eab\u201d\u63d0\u5230\uff0c\u6211\u4eec\u53ef\u4ee5\u628a fixture \u5199\u5728 conftest.py \u6587\u4ef6\u91cc\u9762\uff0cconftest.py \u6587\u4ef6\u5bf9\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7528\u4f8b\u751f\u6548\uff0c\u800c\u5404\u4e2a\u76ee\u5f55\u90fd\u53ef\u4ee5\u6709\u81ea\u5df1\u7684 conftest.py\uff0c\u7528\u4f8b\u6587\u4ef6\u91cc\u9762\u8fd8\u53ef\u4ee5\u5199 fixture\uff0c\u90a3\u5199\u4e86\u8fd9\u4e48\u591a fixture\uff0c\u5b83\u7684\u6267\u884c\u987a\u5e8f\u662f\u600e\u6837\u7684\uff0c\u600e\u4e48\u53bb\u89e3\u9664\u4e00\u4e9b\u4f5c\u7528\uff0c\u8fd9\u4e2a\u95ee\u9898\u975e\u5e38\u91cd\u8981\uff0c\u7406\u4e0d\u6e05\u695a\u7684\u8bdd\uff0c\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u4f60\u4f1a\u53d1\u73b0\u8fd9\u6761\u7528\u4f8b\u90fd\u5728\u5e72\u561b\uff0c\u5b83\u4e3a\u4ec0\u4e48\u6267\u884c\u8fd9\u4e2a\u3002</p> <p>\u8ddf\u4e0a\u601d\u8def\u54c8\u3002</p> <p>\u9996\u5148\uff0c\u4ece\u5c42\u7ea7\u4e0a\u6765\u8bb2\u4ecd\u7136\u662f\uff1a\u4f1a\u8bdd\u7ea7\u522b\uff08session\uff09\u2014&gt; \u6a21\u5757\u7ea7\u522b\uff08module\uff09\u2014&gt; \u7c7b\u7ea7\u522b\uff08class\uff09\u2014&gt; \u51fd\u6570\u7ea7\u522b\uff08funciton\uff09\u8fd9\u6837\u7684\u6267\u884c\u987a\u5e8f\u3002</p> <p>\u7136\u540e\uff0c\u76f8\u540c\u5c42\u7ea7\u7684\u60c5\u51b5\u4e0b\uff0c\u8981\u770b fixture \u7684\u4f4d\u7f6e\uff0c\u7b80\u5355\u8bb2\u5c31\u662f\uff1a\u5916\u5c42 fixture \u5148\u6267\u884c\u3002</p> <p>\u6211\u4eec\u4ee5 function \u7ea7\u522b\u7684 fixture \u4e3e\u4f8b\uff0c\u6784\u9020\u4e00\u4e2a\u591a\u5c42\u7ea7\u7684 fixture\uff0c\u5efa\u8bae\u4f60\u5728\u672c\u5730\u6309\u7167\u4e0b\u9762\u7684\u63cf\u8ff0\u81ea\u5df1\u5efa\u4e00\u4e2ademo\uff0c\u4e0d\u7136\u53ef\u80fd\u9700\u8981\u4f60\u6709\u6bd4\u8f83\u5f3a\u7684\u7ed3\u6784\u5316\u601d\u7ef4\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 cases_1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cases_1_1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 conftest.py   # cases_1_1 \u76ee\u5f55\u4e0b conftest\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_cases_1_1.py  # \u7528\u4f8b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 conftest.py  # cases_1 \u76ee\u5f55\u4e0b conftest\n\u2514\u2500\u2500 conftest.py  # \u6700\u5916\u5c42 conftest\n</code></pre> <p>\u6700\u5916\u5c42 conftest\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something():\nprint(\"\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>cases_1 \u76ee\u5f55\u4e0b conftest\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_1():\nprint(\"\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>cases_1_1 \u76ee\u5f55\u4e0b conftest\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_1_1():\nprint(\"\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>\u7528\u4f8b\u91cc\u9762\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_out():\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u5916\u9762\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u5916\u9762\u540e\u7f6e\", datetime.now())\nclass TestMikigo:\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_in(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u540e\u7f6e\", datetime.now())\ndef test_cases_1_1(self):\nprint(\"\u6211\u662f\u6d4b\u8bd5\u7528\u4f8b 1_1\")\n</code></pre> <p>\u8fd9\u6837\u6211\u4eec\u5c31\u5728\u4e0d\u540c\u5c42\u7ea7\u5199\u4e86\u4e00\u4e9b function \u7ea7\u522b\u7684 fixture\uff0c\u6267\u884c\u4e00\u4e0b\u5c31\u53ef\u4ee5\u6e05\u695a\u7684\u770b\u5230\u3002</p> <pre><code>\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:38:52.924602\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:38:53.925916\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:38:54.927332\n\u6211\u662f\u7528\u4f8b\u7c7b\u5916\u9762\u524d\u7f6e 2022-02-08 15:38:55.928774\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u524d\u7f6e 2022-02-08 15:38:56.930258\n\u6211\u662f\u6d4b\u8bd5\u7528\u4f8b 1_1\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u540e\u7f6e 2022-02-08 15:38:57.933010\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u5916\u9762\u540e\u7f6e 2022-02-08 15:38:57.933135\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:38:57.933211\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:38:57.933277\n\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:38:57.933338\n</code></pre> <p>\u4ece\u4e0a\u5230\u4e0b\uff0c\u4f60\u4ed4\u7ec6\u770b\u4e4b\u540e\uff0c\u7ed3\u8bba\u547c\u4e4b\u6b32\u51fa\uff1a\u5916\u5c42\u5148\u6267\u884c\u3002</p> <p>\u5916\u5c42 conftest \u5148\u4e8e\u5185\u5c42 conftest\uff0c\u5185\u5c42 conftest \u5148\u4e8e\u7c7b\u5916\u9762\u7684\uff0c\u7c7b\u5916\u9762\u7684\u5148\u4e8e\u7c7b\u91cc\u9762\u7684\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u5728\u5199fixture\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u7279\u522b\u6ce8\u610f\uff0cPytest \u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\u5f88\u7075\u6d3b\u5f88\u65b9\u4fbf\u7684fixture\u7684\u5404\u79cd\u5199\u6cd5\uff0c\u7279\u522b\u662f\u52a0\u4e86 <code>autouse=True</code> \u4e4b\u540e\uff0c\u5982\u679c\u4f60\u641e\u4e0d\u6e05\u695afixture\u54ea\u4e2a\u5148\u6267\u884c\u54ea\u4e2a\u540e\u6267\u884c\uff0c\u90a3\u4f60\u6700\u597d\u5c31\u522b\u7528\u8fd9\u4e9b\u5199\u6cd5\uff0c\u8001\u8001\u5b9e\u5b9e\u7528 Xunit \u7684\u5199\u6cd5\uff0c\u5df2\u7ecf\u80fd\u6ee1\u8db3\u591a\u5927\u90e8\u5206\u9879\u76ee\u9700\u6c42\u4e86\u3002</p> <p>\u6ce8\u610f\uff0c\u4ee5\u4e0a\u6211\u4eec\u5199\u7684\u8fd9\u4e9bfixture\u7684\u51fd\u6570\u540d\u90fd\u662f\u4e0d\u540c\u7684\uff0c\u5982\u679c\u662f\u76f8\u540c\u7684\u51fd\u6570\u540d\u4f1a\u51fa\u73b0\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f</p> <p>\u54b1\u4eec\u628a <code>do_something_out</code> \u6539\u6210 <code>do_something_in</code> \uff0c\u4e24\u4e2a fixture \u51fd\u6570\u540d\u90fd\u662f <code>do_something_in</code>\uff0c\u6211\u4eec\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002</p> <pre><code>\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:56:03.138015\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:56:04.138356\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:56:05.139590\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u524d\u7f6e 2022-02-08 15:56:06.140796\n\u6211\u662f\u6d4b\u8bd5\u7528\u4f8b 1_1\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u540e\u7f6e 2022-02-08 15:56:07.142623\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:56:07.142667\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:56:07.142694\n\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:56:07.142715\n</code></pre> <p>\u4f60\u770b\uff0c\u7c7b\u5916\u9762\u7684 <code>do_something_in</code> \u6ca1\u6709\u6267\u884c\uff0c\u8bf4\u660e\u76f8\u540c\u51fd\u6570\u540d\u7684 fixture\uff0c\u53ea\u4f1a\u6267\u884c\u5185\u5c42\u7684\u3002</p> <p>\u8fd9\u70b9\u77e5\u8bc6\u4e5f\u975e\u5e38\u91cd\u8981\u54c8\uff0c\u56e0\u4e3a\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u4f1a\u9047\u5230\u6709\u4e9b\u7528\u4f8b\u6211\u4e0d\u60f3\u7528\u67d0\u4e9b\u5916\u5c42\u7684 fixture\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u5185\u5c42\u5b9a\u4e49\u4e00\u4e2a\u540c\u540d\u7684 fixture\uff0c\u91cc\u9762\u5199pass\uff0c\u76f8\u5f53\u4e8e\u62b5\u6d88\u6389\u4e86\u5916\u5c42 fixture \u7684\u4f5c\u7528\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_4","title":"\u4e94\u3001\u65ad\u8a00","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1_2","title":"1\u3001\u5e38\u89c4\u65ad\u8a00","text":"<p>Pytest \u672c\u8eab\u5e76\u6ca1\u6709\u63d0\u4f9b\u65ad\u8a00\u7684\u65b9\u6cd5\uff0c\u800c\u662f\u76f4\u63a5\u4f7f\u7528Python\u81ea\u5e26\u7684 assert \u8bed\u53e5\u8fdb\u884c\u65ad\u8a00\u3002</p> <pre><code>def test_case_001():\nassert 1 == 1\n</code></pre> <p>assert \u540e\u9762\u76f4\u63a5\u5199\u8868\u8fbe\u5f0f\u5c31\u597d\u4e86\uff0cso easy!</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2_2","title":"2\u3001\u81ea\u5b9a\u4e49\u65ad\u8a00","text":"<p>\u4f7f\u7528 assert \u65ad\u8a00\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u629b\u7684\u5f02\u5e38\u65e5\u5fd7\u57fa\u672c\u6ca1\u4ec0\u4e48\u53c2\u8003\u610f\u4e49\uff0c\u56e0\u4e3a\u5728\u65ad\u8a00\u5931\u8d25\u7684\u65f6\u5019\uff0c\u53ea\u4f1a\u63d0\u793a\u4f60 assert \u540e\u9762\u7684\u8868\u8fbe\u5f0f\u4e0d\u6210\u7acb\uff0c\u8fd9\u4e0d\u662f\u5e9f\u8bdd\u5417\uff0c\u80af\u5b9a\u4e0d\u6210\u7acb\u624d\u65ad\u8a00\u5931\u8d25\u567b\uff0c\u95ee\u9898\u662f\u6211\u7684\u8868\u8fbe\u5f0f\u53ef\u80fd\u662f\u4e00\u4e9b\u6bd4\u8f83\u590d\u6742\u7684\u5c01\u88c5\uff0c\u8fd9\u91cc\u9762\u5177\u4f53\u4ec0\u4e48\u95ee\u9898\u5c31\u4e0d\u77e5\u9053\u4e86\u3002\u56e0\u6b64\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u65ad\u8a00\u4f1a\u6bd4\u8f83\u597d\u3002</p> <p>\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0c\u65ad\u8a00\u5931\u8d25\u5b9e\u9645\u4e0a\u90fd\u662f\u6355\u83b7\u7684 <code>AssertionError\uff08\u65ad\u8a00\u5f02\u5e38\uff09</code>\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b\uff0c\u7136\u540e\u629b\u4e00\u4e2a <code>AssertionError</code> \u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>class AssertCommon:\n@staticmethod\ndef assert_true(expect):\n\"\"\"\u65ad\u8a00\u4e3a\u771f\"\"\"\nif not expect:\nraise AssertionError(f\"&lt;{expect}&gt;\u4e0d\u4e3a\u771f\")\n</code></pre> <p>\u901a\u8fc7\u7ed9 AssertionError \u4f20\u5165\u81ea\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\uff0c\u7528\u4f8b\u5931\u8d25\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\u660e\u786e\u7684\u5931\u8d25\u4fe1\u606f\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_5","title":"\u516d\u3001\u547d\u4ee4\u884c\u53c2\u6570","text":"<p>\u4f7f\u7528 Pytest \u6267\u884c\u7528\u4f8b\u65f6\uff0c\u6211\u4eec\u7ecf\u5e38\u90fd\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u6765\u6267\u884c\u7684\uff0c\u6709\u540c\u5b66\u8981\u8bf4\u4e86\uff0c\u6211\u4e00\u822c\u662f\u901a\u8fc7\u7f16\u8f91\u5668\u91cc\u9762\u76f4\u63a5\u5c31\u6267\u884c\u4e86\uff1b\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7f16\u5199\u7528\u4f8b\u8c03\u8bd5\u7528\u4f8b\uff0c\u4f7f\u7528\u7f16\u8f91\u5668\u6267\u884c\u7528\u4f8b\u6ca1\u95ee\u9898\uff0c\u4f46\u5728 CI \u96c6\u6210\u73af\u5883\u4e0b\uff0c\u4e00\u822c\u662f\u9700\u8981\u7528\u547d\u4ee4\u884c\u7684\u3002</p> <p>Pytest \u8981\u60f3\u73a9\u5f97\u6e9c\uff0c\u547d\u4ee4\u884c\u53c2\u6570\u5fc5\u987b\u8981\u719f\u6089\uff0cPytest \u652f\u6301\u7684\u53c2\u6570\u5f88\u591a\uff0c\u6709\u81ea\u5e26\u7684\u53c2\u6570\uff0c\u63d2\u4ef6\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u8fd8\u6709\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u4e0b\u9762\u5c31\u4ecb\u7ecd\u5728\u9879\u76ee\u4e2d\u5e38\u7528\u7684\u53c2\u6570\uff1a</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1-s","title":"1\u3001-s","text":"<p>\u6709\u65f6\u5019\u4f60\u53d1\u73b0\u5728\u7528\u4f8b\u91cc\u9762\u4f7f\u7528 print \u8bed\u53e5\uff0c\u4f46\u662f\u6267\u884c\u7684\u65f6\u5019\u5374\u6ca1\u6709\u6253\u5370\uff0c\u90a3\u591a\u534a\u662f\u56e0\u4e3a\u4f60\u6ca1\u6709\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002\u7b49\u4ef7\u4e8e <code>--capture=no</code>\uff0c\u7528\u9014\u5c31\u662f\u6355\u83b7 print \u8f93\u51fa\u3002\u5982\u679c\u4f60\u4e0d\u77e5\u9053 <code>capture</code> \u53c2\u6570\u4e5f\u6ca1\u5173\u7cfb\uff0c\u4e0d\u91cd\u8981\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2-v","title":"2\u3001-v","text":"<p>\u8be6\u7ec6\u5c55\u793a\u7ec8\u7aef\u8f93\u51fa\u3002\u6bd4\u8be6\u7ec6\u66f4\u8be6\u7ec6\u4f7f\u7528 <code>-vv</code> \uff0c\u6211\u4eec\u5f53\u7136\u662f\u5e0c\u671b\u8f93\u51fa\u4fe1\u606f\u8d8a\u8be6\u7ec6\u8d8a\u597d\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#3-k","title":"3\u3001-k","text":"<p>\u6267\u884c\u7528\u4f8b\u7684\u65f6\u5019\u975e\u5e38\u6709\u7528\uff0c\u901a\u8fc7\u5173\u952e\u8bcd\u6765\u5339\u914d\u7528\u4f8b\uff0c\u7528\u4f8b\u7684\u5173\u952e\u8bcd\u6709\u5f88\u591a\uff0c\u6a21\u5757\u540d\u3001\u6587\u4ef6\u540d\u3001\u7c7b\u540d\u3001\u51fd\u6570\u540d\u90fd\u662f\u5173\u952e\u8bcd\uff0c\u6bd4\u5982\uff1a</p> <pre><code>pytest -k \"test_music\"\n</code></pre> <p>\u8868\u793a\u6267\u884c\u6240\u6709\u5305\u542b <code>test_music</code> \u5173\u952e\u8bcd\u7684\u7528\u4f8b\u3002</p> <p>-k \u8fd8\u6709\u4e00\u70b9\u53ef\u80fd\u597d\u591a\u540c\u5b66\u90fd\u4e0d\u77e5\u9053\uff0c\u5b83\u8fd8\u652f\u6301\u903b\u8f91\u8868\u8fbe\u5f0f\uff0c\u6bd4\u5982\uff1a</p> <pre><code>pytest -k \"test_music or test_movie\"\n</code></pre> <pre><code>pytest -k \"not test_music and not test_movie\"\"\n</code></pre> <p>\u903b\u8f91\u8868\u8fbe\u662f\u652f\u6301 <code>and/or/not</code> \u7684\u903b\u8f91\u7ec4\u5408\u3002</p> <p>\u5728\u6279\u91cf\u652f\u6301\u7528\u4f8b\u65f6\uff0c\u6211\u4eec\u901a\u5e38\u662f\u4e0d\u9700\u8981\u6267\u884c\u5168\u91cf\u7528\u4f8b\u7684\uff0c\u5b66\u4f1a\u7cbe\u51c6\u7684\u7ec4\u88c5\u7528\u4f8b\u96c6\u5bf9\u4e8e\u81ea\u52a8\u5316\u6d4b\u8bd5\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#4-m","title":"4\u3001-m","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7ed9\u7528\u4f8b\u6253\u4e0a\u6807\u7b7e\uff08mark\uff09\uff1a</p> <pre><code>import pytest\nclass TestMikigo:\n@pytest.mark.smoke\ndef test_case_001(self):\n...\n</code></pre> <p>\u4f7f\u7528\u88c5\u9970\u5668 <code>@pytest.mark</code> \u70b9\u540e\u9762\u52a0\u6807\u7b7e\u540d\uff0c\u5c31\u53ef\u4ee5\u7ed9\u7528\u4f8b\u6253\u6807\u7b7e\uff0c\u6807\u7b7e\u540d\u968f\u610f\u6307\u5b9a\uff0c\u751a\u81f3\u53ef\u4ee5\u7528\u4e2d\u6587\u3002</p> <p>\u6253\u5b8c\u6807\u7b7e\u4e4b\u540e\uff0c\u6279\u91cf\u6267\u884c\u7528\u4f8b\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7\u6807\u7b7e\u6765\u52a0\u8f7d\u7528\u4f8b\uff0c\u7528\u6cd5\u548c -k \u662f\u4e00\u6837\u7684\u3002</p> <pre><code>pytest -m \"smoke or core\"\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#5-co","title":"5\u3001--co","text":"<p>\u8fd9\u4e2a\u53c2\u6570\u5168\u79f0\u662f <code>--collect-only</code>\uff0c\u8868\u793a\u53ea\u6536\u96c6\u7528\u4f8b\uff0c\u4e0d\u6267\u884c\u3002</p> <p>\u6bcf\u5468\u6211\u9700\u8981\u7ed9\u8001\u677f\u6c47\u62a5\u76ee\u524d\u6240\u6709\u7528\u4f8b\u591a\u5c11\u6761\uff0c\u54b1\u603b\u4e0d\u53ef\u80fd\u5728\u4ee3\u7801\u91cc\u9762\u4e00\u6761\u6761\u53bb\u6570\u5427\uff0c\u6211\u901a\u5e38\u4f1a\u4f7f\u7528\uff1a</p> <pre><code>pytest --co\n</code></pre> <p>\u76f4\u63a5\u5c31\u53ef\u4ee5\u770b\u5230\u52a0\u8f7d\u4e86\u591a\u5c11\u6761\u7528\u4f8b\u3002</p> <p>\u53e6\u5916\uff0c\u6709\u65f6\u5019\u6279\u91cf\u4fee\u6539\u4e86\u4e00\u4e9b\u4ee3\u7801\uff0c\u53ef\u80fd\u5f15\u8d77\u4e00\u4e9b\u9519\u8bef\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6267\u884c <code>pytest --co</code>  \u6765\u5feb\u901f\u68c0\u6d4b\u4e00\u4e0b\u662f\u5426\u5b58\u5728\u9519\u8bef\uff0c\u56e0\u4e3a Pytest \u5728\u52a0\u8f7d\u7528\u4f8b\u7684\u65f6\u5019\u540c\u65f6\u4e5f\u4f1a\u68c0\u6d4b\u4ee3\u7801\u4e2d\u5b58\u5728\u7684\u4e00\u4e9b\u95ee\u9898\u3002\u8fd9\u4e2a\u4e5f\u975e\u5e38\u597d\u7528\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#6maxfail","title":"6\u3001maxfail","text":"<p>\u914d\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\uff0c\u5982\u679c\u4e00\u6b21\u6267\u884c\u51fa\u73b0\u4e86\u5927\u91cf\u7684\u5931\u8d25\uff0c\u591a\u534a\u8fd9\u6b21\u6d4b\u8bd5\u662f\u65e0\u6548\u7684\uff0c\u901a\u8fc7\u914d\u7f6e\u8fd9\u4e2a\u53c2\u6570\uff0c\u6211\u4eec\u4e0d\u7528\u7b49\u5230\u6240\u6709\u7528\u4f8b\u6267\u884c\u5b8c\u624d\u7ed3\u675f\uff0c\u5c3d\u65e9\u7ed3\u675f\u8282\u7ea6\u65f6\u95f4\u3002</p> <pre><code>pytest --maxfail=int_number\n</code></pre> <p>\u8fd9\u91cc\u7684 int_number \u5c31\u662f\u6700\u5927\u7684\u5931\u8d25\u6b21\u6570\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u7ecf\u9a8c\u6765\u6307\u5b9a\u4e00\u4e2a\u6570\u5b57\u3002</p> <p>\u6211\u7684\u65b9\u6848\u662f\u5148\u83b7\u53d6\u5230\u672c\u6b21\u8981\u6267\u884c\u7684\u603b\u7528\u4f8b\u6570 <code>collected_cases_num</code>\uff0c\u7136\u540e\u914d\u7f6e\u4e00\u4e2a\u603b\u6570\u7684\u6bd4\u4f8b\uff0c\u5982 0.5\uff0c\u8868\u793a\u53ea\u8981\u5931\u8d25\u6b21\u6570\u8fbe\u5230\u4e86\u603b\u6570\u7684\u4e00\u534a\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u7ed3\u675f\u6d4b\u8bd5\u3002</p> <pre><code>pytest --maxfail=int(collected_cases_num * 0.5)\n</code></pre> <p>\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\uff0c\u968f\u7740\u9879\u76ee\u4e2d\u7528\u4f8b\u6570\u91cf\u7684\u589e\u52a0\uff0c\u6211\u4e0d\u9700\u8981\u53bb\u4fee\u6539\u8fd9\u4e2a\u6700\u5927\u5931\u8d25\u7684\u6570\u636e\uff0c\u800c\u662f\u901a\u8fc7\u914d\u7f6e\u6574\u4f53\u7684\u5931\u8d25\u6bd4\u4f8b\uff0c\u8fd9\u6837\u505a\u66f4\u52a0\u5408\u7406\uff0c\u4e5f\u66f4\u6613\u4e8e\u7ef4\u62a4\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#7reruns","title":"7\u3001reruns","text":"<p>\u5931\u8d25\u91cd\u8dd1\u6b21\u6570\uff0c\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u7ecf\u5e38\u4f1a\u6709\u4e00\u4e9b\u4e0d\u786e\u5b9a\u6027\uff0c\u7f51\u7edc\u95ee\u9898\u3001\u73af\u5883\u95ee\u9898\u3001\u91cf\u5b50\u529b\u5b66\u3001\u5730\u7403\u5f15\u529b\u7b49\u7b49\u90fd\u6709\u53ef\u80fd\u9020\u6210\u7528\u4f8b\u5931\u8d25\uff0c\u7279\u522b\u662f UI \u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u8fd9\u4e9b\u60c5\u51b5\u7ecf\u5e38\u53d1\u751f\uff0c\u4e3a\u4e86\u5c3d\u91cf\u6392\u9664\u73af\u5883\u95ee\u9898\u9020\u6210\u7684\u7528\u4f8b\u5931\u8d25\uff0c\u91c7\u7528\u5931\u8d25\u540e\u81ea\u52a8\u91cd\u8dd1\u662f\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u65b9\u6848\u3002</p> <pre><code>pytest --reruns=2\n</code></pre> <p>\u8868\u793a\u5931\u8d25\u540e\u91cd\u8dd12\u6b21\uff0c\u5982\u679c\u540e\u9762\u91cd\u8dd1\u7528\u4f8b\u6210\u529f\u4e86\uff0c\u6700\u7ec8\u7684\u7528\u4f8b\u72b6\u6001\u4e3a PASSED\u3002</p> <p>\u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u5b89\u88c5\u4e09\u65b9\u63d2\u4ef6\uff1a</p> <pre><code>sudo pip3 install pytest-rerunfailures\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#8timeout","title":"8\u3001timeout","text":"<p>\u7528\u4f8b\u8d85\u65f6\u5728 CI \u6d41\u7a0b\u4e2d\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u6bcf\u65e5\u6784\u5efa\u90fd\u5e94\u8be5\u662f\u6709\u65f6\u957f\u9650\u5236\u7684\uff0c\u4e00\u8dd1\u5c31\u662f\u4e24\u4e09\u5929\u4e0d\u505c\u5c31\u4e0d\u53eb\u6bcf\u65e5\u6784\u5efa\u4e86\uff0c\u7528\u4f8b\u6267\u884c\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u5f02\u5e38\u60c5\u51b5\uff0c\u5bfc\u81f4\u7528\u4f8b\u5361\u4f4f\u4e0d\u52a8\uff0c\u6216\u8005\u6267\u884c\u901f\u5ea6\u53d8\u6162\uff0c\u6211\u4eec\u4f7f\u7528 <code>--timeout</code> \u53ef\u4ee5\u7ed9\u6bcf\u6761\u7528\u4f8b\u8bbe\u7f6e\u4e00\u4e2a\u6700\u5927\u7684\u65f6\u957f\uff0c\u5982\u679c\u8d85\u65f6\u6ca1\u6709\u6267\u884c\u5b8c\uff0c\u5c31\u662f\u5f3a\u5236\u505c\u6b62\u7528\u4f8b\u3002</p> <pre><code>pytest --timeout=200\n</code></pre> <p>\u8868\u793a\u6bcf\u6761\u7528\u4f8b\u7684\u8d85\u65f6\u65f6\u95f4\u4e3a 200 \u79d2\uff0c\u6ce8\u610f\u5355\u4f4d\u662f\u79d2\u54e6\u3002</p> <p>\u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u5b89\u88c5\u4e09\u65b9\u63d2\u4ef6\uff1a</p> <pre><code>sudo pip3 install pytest-timeout\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#9","title":"9\u3001\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570","text":"<p>\u4ee5\u4e0a\u53c2\u6570\u90fd\u662f Pytest \u81ea\u5e26\u7684\u6216\u8005\u4e09\u65b9\u63d2\u4ef6\u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u5f53\u8fd9\u4e9b\u53c2\u6570\u4e0d\u80fd\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u7684\u65f6\u5019\u6211\u4eec\u5c31\u9700\u8981\u81ea\u5b9a\u4e49\u4e00\u4e9b\u547d\u4ee4\u884c\u53c2\u6570\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u6ce8\u518c\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u524d\u9762\u8bb2\u8d85\u7ea7\u5171\u4eab\u7684\u65f6\u5019\u8bb2\u4e86 conftest.py\uff0c\u4f46\u662f conftest.py \u80fd\u505a\u7684\u4e8b\u60c5\u53ef\u4e0d\u4ec5\u4ec5\u662f\u5199\u70b9 fixture\uff0c\u5b83\u53ef\u662f Pytest \u7684\u672c\u5730\u63d2\u4ef6\uff0c\u5728\u91cc\u9762\u6211\u4eec\u53ef\u4ee5\u5199 hook\uff08\u94a9\u5b50\uff09\u51fd\u6570\uff0c\u8fd9\u91cc\u6211\u4eec\u4ecb\u7ecd\u5176\u4e2d\u4e00\u4e2a hook \u51fd\u6570\uff0c\u5373\u5b9e\u73b0\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684 hook \u51fd\u6570\uff0c\u5176\u4ed6\u7684 hook \u51fd\u6570\u6211\u4eec\u540e\u9762\u4f1a\u4ecb\u7ecd\u5230\u3002</p> <p>\u5b98\u65b9\u8bf4\u6cd5\u662f\uff1a\u6ce8\u518c\u547d\u4ee4\u884c\u9009\u9879\u3002\u5b9e\u9645\u5c31\u662f\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>def pytest_addoption(parser):\nparser.addoption()\n</code></pre> <p><code>parser.addoption()</code> \u91cc\u9762\u53ef\u4ee5\u4f20\u5165\u633a\u591a\u53c2\u6570\u7684\uff0c\u4f46\u662f\u4e0d\u662f\u6240\u6709\u7684\u90fd\u9700\u8981\uff1a</p> <pre><code>1\u3001name\uff1a\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684\u540d\u5b57\uff0c\u53ef\u4ee5\u662f\uff1a\"foo\"\uff0c \"-foo\" \u6216 \"--foo\"\uff1b\n2\u3001action\uff1a\u5728\u547d\u4ee4\u884c\u4e2d\u9047\u5230\u6b64\u53c2\u6570\u65f6\u8981\u91c7\u53d6\u7684\u57fa\u672c\u64cd\u4f5c\u7c7b\u578b\uff1b\n3\u3001nargs\uff1a\u5e94\u8be5\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u91cf\uff1b\n4\u3001const\uff1a\u67d0\u4e9b\u64cd\u4f5c\u548cnargs\u9009\u62e9\u6240\u9700\u7684\u5e38\u91cf\u503c\uff1b\n5\u3001default\uff1a\u5982\u679c\u53c2\u6570\u4e0d\u5728\u547d\u4ee4\u884c\u4e2d\uff0c\u5219\u751f\u6210\u7684\u9ed8\u8ba4\u503c\u3002\n6\u3001type\uff1a\u547d\u4ee4\u884c\u53c2\u6570\u5e94\u8be5\u8f6c\u6362\u4e3a\u7684\u7c7b\u578b\uff1b\n7\u3001choices\uff1a\u53c2\u6570\u5141\u8bb8\u503c\u7684\u5bb9\u5668\uff1b\n8\u3001required\uff1a\u547d\u4ee4\u884c\u9009\u9879\u662f\u5426\u53ef\u4ee5\u7701\u7565\uff08\u4ec5\u53ef\u9009\uff09\uff1b\n9\u3001help\uff1a\u5bf9\u53c2\u6570\u4f5c\u7528\u7684\u7b80\u8981\u8bf4\u660e\uff1b\n10\u3001metavar\uff1a\u7528\u6cd5\u6d88\u606f\u4e2d\u53c2\u6570\u7684\u540d\u79f0\uff1b\n11\u3001dest\uff1a\u8981\u6dfb\u52a0\u5230 parse_args() \u8fd4\u56de\u7684\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u7684\u540d\u79f0\uff1b\n</code></pre> <p>\u5e38\u7528\u7684\u51e0\u4e2a\u53c2\u6570\u5c31\u8fd9\u51e0\u4e2a\uff0c\u4ee5\u4e0b\u662f\u9879\u76ee\u5b9e\u4f8b\uff1a</p> <pre><code>def pytest_addoption(parser):\nparser.addoption(\n\"--logLevel\",\naction=\"store\",\ndefault=\"DEBUG\",\nhelp=\"DEBUG, INFO\uff0cWARNING\uff0cERROR, CRITICAL, \u7ec8\u7aef\u65e5\u5fd7\u8f93\u51fa\u7ea7\u522b\",\n)\n</code></pre> <p>\u7528\u4e8e\u63a7\u5236\u65e5\u5fd7\u8f93\u51fa\u7684\u7ea7\u522b\uff0cCI \u96c6\u6210\u73af\u5883\u4e0b\u6211\u4eec\u4e0d\u9700\u8981\u8f93\u51fa DEBUG \u7ea7\u522b\u7684\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u7528\uff1a</p> <pre><code>pytest --logLevel=INFO\n</code></pre> <p>\u8fd9\u6837\u5728\u6267\u884c\u7528\u4f8b\u7684\u65f6\u5019\uff0c\u53c2\u6570\u5c31\u53ef\u4ee5\u4f20\u9012\u8fdb\u6765\uff0c\u90a3\u4e48\u4f20\u9012\u8fdb\u6765\u4e4b\u540e\uff0c\u6211\u4eec\u5728\u54ea\u91cc\u7528\uff1f</p> <p>\u540c\u6837\u662f\u5728 conftest.py \u91cc\u9762\uff1a</p> <p>\uff081\uff09\u901a\u8fc7 fixture \u91cc\u9762\u7684 request \u5bf9\u8c61\uff1a</p> <pre><code>@pytest.fixture(scope=\"session\")\ndef do_something(request):\nlogLevel = request.config.getoption(\"--logLevel\")\n</code></pre> <p>\u8fd9\u6837\u53ef\u4ee5\u83b7\u53d6\u5230\uff0c<code>request.config.getoption</code> \u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u7ecf\u5e38\u6709\u540c\u5b66\u95ee\u4f60\u548b\u77e5\u9053\u53ef\u4ee5\u8fd9\u4e48\u7528\u5462\uff0c\u5728\u54ea\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u901a\u8fc7\u7ed9 <code>request</code> \u6253\u65ad\u70b9\uff0c\u4f60\u4f1a\u770b\u5230\u8fd9\u4e2a\u5bf9\u8c61\u5185\u6709\u54ea\u4e9b\u65b9\u6cd5\u3002</p> <p>\uff082\uff09\u901a\u8fc7 hook \u51fd\u6570\u91cc\u9762\u7684 seesion \u5bf9\u8c61\uff1a</p> <pre><code>def pytest_sessionstart(session):\nlogLevel = session.config.option.logLevel\n</code></pre> <p>\u8fd9\u91cc\u7684 hook \u51fd\u6570\u4e0d\u4e00\u5b9a\u662f <code>pytest_sessionstart</code>\uff0c\u597d\u591a hook \u51fd\u6570\u90fd\u53ef\u4ee5\u3002</p> <p>\uff083\uff09\u901a\u8fc7 hook \u51fd\u6570\u91cc\u9762\u7684 item \u5bf9\u8c61\uff1a</p> <pre><code>def pytest_runtest_teardown(item):\nlogLevel = item.session.config.option.logLevel\n</code></pre> <p>\uff084\uff09\u5728\u7528\u4f8b\u4e2d\u4f7f\u7528\uff1a</p> <pre><code>def test_xxx(pytestconfig):\nlog_level = pytestconfig.option.logLevel\n</code></pre> <p><code>pytestconfig</code> \u662f <code>pytest</code> \u63d0\u4f9b\u7684\u4e00\u4e2a\u5185\u5bb9 <code>fixture</code> \uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u6240\u6709\u7684\u53c2\u6570\uff1b\u83b7\u53d6\u53c2\u6570\u503c\u7684\u65b9\u6cd5\u9664\u4e86 <code>pytestconfig.option.logLevel</code> \u8fd9\u79cd\u5199\u6cd5\uff0c<code>pytestconfig.getoption(\"logLevel\")</code> \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f ok \u7684\u3002</p> <p>\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570\u90fd\u5728 config \u8fd9\u4e2a\u5bf9\u8c61\u91cc\u9762\uff0c\u4ee5\u4e0a\u4e3e\u4f8b\u7684\u4e0d\u540c\u7684 hook \u51fd\u6570\u9ed8\u8ba4\u7684\u53c2\u6570\u662f\u4e0d\u540c\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_6","title":"\u4e03\u3001\u53c2\u6570\u5316","text":"<p>\u53c2\u6570\u5316\u662f\u81ea\u52a8\u5316\u6d4b\u8bd5\u91cc\u9762\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u63a5\u53e3\u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u90a3\u662f\u80af\u5b9a\u8981\u7528\u5230\u7684\u3002\u6211\u770b\u5230\u5f88\u591a\u7f51\u4e0a\u7684\u6559\u7a0b\u5c06\u53c2\u6570\u5316\u79f0\u4e3a\u9ad8\u7ea7\u6280\u80fd\uff0c\u901a\u8fc7\u8fd9\u70b9\u80fd\u770b\u51fa\u6765\uff0c\u9ad8\u7ea7\u4e5f\u4e0d\u548b\u7684\u54c8\u3002</p> <p>Pytest \u7684\u53c2\u6570\u5316\u4f7f\u7528\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u4f7f\u7528\u88c5\u9970\u5668\uff1a</p> <pre><code>@pytest.mark.parametrize(\"par_1\", [1, 2])\ndef test_case_001(par_1):\n...\n</code></pre> <ul> <li> <p>\u88c5\u9970\u5668\u662f\u56fa\u5b9a\u7528\u6cd5 <code>@pytest.mark.parametrize</code>\uff0c\u8bb0\u4f4f\u5c31\u884c\u4e86\uff0c\u8bb0\u4e0d\u4f4f\u5c31\u8bb0\u4f4f\u4e24\u4e2a\u4e1c\u897f\uff0c\u9996\u5148\u662f\u5728 mark \u91cc\u9762\uff0c\u7136\u540e p \u5f00\u5934\uff0c\u6700\u540e\u7528\u7f16\u8f91\u5668\u8865\u5168\u5c31\u597d\u4e86\u3002</p> </li> <li> <p>\u53c2\u6570\u6709 3 \u4e2a\uff1a</p> </li> <li> <p>\u7b2c 1 \u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u91cc\u9762\u662f\u53c2\u6570\u7684\u53d8\u91cf\u540d\u79f0\uff0c\u591a\u4e2a\u53d8\u91cf\u9700\u8981\u7528\u9017\u53f7\u5206\u9694\uff1b</p> <p>\u8fd9\u4e5f\u662f\u6700\u5e38\u89c1\u7684\u7528\u6cd5\uff0c\u7f51\u4e0a\u6559\u7a0b\u57fa\u672c\u90fd\u662f\u8fd9\u6837\u8bb2\u7684\uff0c\u4f46\u5982\u679c\u4f60\u770b\u8fc7 Pytest \u6e90\u4ee3\u7801\u8fd9\u4e2a\u53c2\u6570\u7c7b\u578b\u662f\u8fd9\u6837\u5b9a\u4e49\u7684\uff1a <code>argnames: Union[str, List[str], Tuple[str, ...]]</code> \u8bf4\u660e\u5217\u8868\u548c\u5143\u7ec4\u4e5f\u53ef\u4ee5\uff0c\u53ea\u8981\u91cc\u9762\u662f\u5b57\u7b26\u4e32\u5c31\u884c\u3002</p> </li> <li> <p>\u7b2c 2 \u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u51c6\u786e\u7684\u8bb2\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u4e00\u822c\u54b1\u4eec\u5c31\u7528\u5217\u8868\u597d\u4e86\uff0c\u5982\u679c\u662f\u591a\u4e2a\u53c2\u6570\u5c31\u662f 2 \u7ef4\u5217\u8868\uff0c\u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u4e2a\u6570\u5bf9\u5e94\u53d8\u91cf\u7684\u4e2a\u6570\u3002</p> <pre><code>@pytest.mark.parametrize(\"par_1, par_2\", [[1, 2], [3, 4]])\ndef test_case_001(par_1\uff0c par_2):\n...\n</code></pre> <p>\u8fd9\u4e2a\u53c2\u6570\u867d\u7136\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u4f46\u4f60\u6700\u597d\u522b\u4f7f\u7528\u968f\u673a\u5de5\u5177\u751f\u6210\uff08\u6bcf\u6b21\u90fd\u662f\u968f\u673a\u6570\uff09\uff0c\u8fd9\u53ef\u80fd\u5f71\u54cd\u91cd\u8dd1\u5931\u8d25\u7528\u4f8b\u7b49\u4e00\u4e9b\u529f\u80fd\uff0c\u4e5f\u6700\u597d\u522b\u4f7f\u7528\u751f\u6210\u5668\u653e\u91cc\u9762\u3002</p> </li> <li> <p>\u7b2c 3 \u4e2a\u53c2\u6570\u662f ids\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u6807\u8bb0 ID \u7684\uff0c\u4e0d\u4f20\u4e5f\u53ef\u4ee5\uff0c\u533a\u522b\u5c31\u662f\u4e0d\u4f20\u7684\u8bdd\u7ec8\u7aef\u8f93\u51fa\u7684\u7528\u4f8b\u6807\u9898\u4f1a\u81ea\u52a8\u52a0\u4e0a\u53c2\u6570\uff0c\u53ef\u80fd\u597d\u591a\u540c\u5b66\u6ca1\u7528\u8fc7\uff0c\u4e0d\u7406\u89e3\u4e5f\u6ca1\u5173\u7cfb\u54c8\uff0c\u672c\u8eab\u7528\u7684\u4e0d\u591a\u3002</p> </li> </ul> <p>\u7528\u4f8b\u7684\u53c2\u6570\u5316\u7528\u6cd5\u5c31\u662f\u8fd9\u4e48\u7b80\u5355\u3002</p> <p>Pytest \u5176\u5b9e\u8fd8\u652f\u6301 fixture \u7684\u53c2\u6570\u5316\uff0c\u8fd9\u4e5f\u662f fixture \u76f8\u5bf9\u4e8e Xunit \u5199\u6cd5\u7684\u5176\u4e2d\u4e00\u70b9\u4f18\u52bf\uff0c\u4f46\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u5f88\u5c11\u7528\uff0c\u6ca1\u6709\u592a\u591a\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8bb2\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#hook","title":"\u516b\u3001Hook\uff08\u94a9\u5b50\uff09\u51fd\u6570","text":"<p>hook \u51fd\u6570\u76f8\u5f53\u4e8e\u662f Pytest \u7684\u4e00\u4e9b\u672c\u5730\u63d2\u4ef6\uff0cPytest \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u7684 hook \u51fd\u6570\uff0c\u7528\u4e8e\u5904\u7406\u4e0d\u540c\u9636\u6bb5\u7684\u81ea\u5b9a\u4e49\u884c\u4e3a\u3002</p> <p>\u6709\u51e0\u4e2a\u6ce8\u610f\u70b9\uff1a</p> <ul> <li>hook \u51fd\u6570\u4e00\u822c\u4e0d\u5efa\u8bae\u5199\u5728\u975e\u6839\u76ee\u5f55\u4e0b\u7684 conftest \u63d2\u4ef6\u6587\u4ef6\u91cc\u9762\uff0c\u6211\u4eec\u4e00\u822c\u662f\u5199\u5728\u6700\u5916\u5c42\u7684\u90a3\u4e2a conftest \u91cc\u9762\u3002</li> <li>hook \u51fd\u6570\u90fd\u662f\u4ee5 <code>pytest_</code> \u5f00\u5934\u7684\u51fd\u6570\u3002</li> <li>\u4e0d\u540c\u7684 hook \u51fd\u6570\u6709\u5b83\u81ea\u5df1\u7684\u529f\u80fd\u548c\u6240\u5c5e\u7684\u9636\u6bb5\u3002</li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1hook","title":"1\u3001hook \u51fd\u6570\u7565\u89c8","text":"<p>Pytest \u5185\u7f6e\u4e86\u8bb8\u591a\u7684 hook \u51fd\u6570\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u4e0b\u9762\u6211\u4eec\u5c31\u6309\u7167\u9636\u6bb5\u5212\u5206\uff0c\u7f57\u5217\u4e00\u4e0b\u6709\u54ea\u4e9b hook \u51fd\u6570\uff0c\u53ef\u4ee5\u5927\u81f4\u611f\u53d7\u4e00\u4e0b\uff1a</p> <p>\u5f15\u5bfc\u94a9\u5b50\uff1a</p> <pre><code>pytest_load_initial_conftests\npytest_cmdline_preparse\npytest_cmdline_parse\npytest_cmdline_main\n</code></pre> <p>\u521d\u59cb\u5316\u94a9\u5b50\uff1a</p> <pre><code>pytest_addoption\npytest_addhooks\npytest_configure\npytest_unconfigure\npytest_sessionstart\npytest_sessionfinish\npytest_plugin_registered\n</code></pre> <p>\u6536\u96c6\u94a9\u5b50\uff1a</p> <pre><code>pytest_collection\npytest_collect_directory\npytest_collect_file\npytest_pycollect_makemodule\npytest_pycollect_makeitem\npytest_generate_tests\npytest_make_parametrize_id\npytest_collection_modifyitems\npytest_collection_finish\n</code></pre> <p>\u6d4b\u8bd5\u8fd0\u884c\uff08runtest\uff09\u94a9\u5b50\uff1a</p> <pre><code>pytest_runtestloop\npytest_runtest_protocol\npytest_runtest_logstart\npytest_runtest_logfinish\npytest_runtest_setup\npytest_runtest_call\npytest_runtest_teardown\npytest_runtest_makereport\npytest_pyfunc_call\n</code></pre> <p>\u62a5\u544a\u94a9\u5b50\uff1a</p> <pre><code>pytest_collectstart\npytest_make_collect_report\npytest_itemcollected\npytest_collectreport\npytest_deselected\npytest_report_header\npytest_report_collectionfinish\npytest_report_teststatus \npytest_terminal_summary\npytest_fixture_setup\npytest_fixture_post_finalizer\npytest_warning_recordedLiteral \npytest_runtest_logreport\npytest_assertrepr_compare\npytest_assertion_pass\n</code></pre> <p>\u8c03\u8bd5\u94a9\u5b50\uff1a</p> <pre><code>pytest_internalerror\npytest_keyboard_interrupt\npytest_exception_interact\npytest_enter_pdb\n</code></pre> <p>\u8fd9\u4e9b\u94a9\u5b50\u51fd\u6570\u90fd\u662f Pytest \u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\uff0c\u4f60\u53ef\u4ee5\u5728 conftest \u63d2\u4ef6\u6587\u4ef6\u91cc\u9762\u53bb\u91cd\u5199\u51fd\u6570\u6765\u5b9e\u73b0\u4f60\u7684\u81ea\u5b9a\u4e49\u529f\u80fd\u3002</p> <p>\u770b\u5230\u8fd9\u4e48\u591a\u51fd\u6570\u5148\u522b\u614c\uff0c\u54b1\u4e0d\u9700\u8981\u638c\u63e1\u6240\u6709\u7684\uff0c\u56e0\u4e3a\u5f88\u591a\u662f\u4e0d\u5e38\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u6211\u5f00\u7bc7\u63d0\u5230\u7684 99% \u7684\u4eba\u90fd\u7528\u4e0d\u5230\u7684\uff0c\u5176\u4e2d\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u4e00\u4e9b\u6bd4\u8f83\u5e38\u7528\u7684 hook \u51fd\u6570\uff0c\u5c06\u4f1a\u5728\u540e\u7eed\u5185\u5bb9\u4ecb\u7ecd\u5230\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2-hook","title":"2\u3001\u5e38\u7528\u7684 hook \u51fd\u6570","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#21pytest_addoption","title":"2.1\u3001pytest_addoption","text":"<p>\u8fd9\u4e2a hook \u51fd\u6570\u5728\u524d\u9762\u5c06\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684\u65f6\u5019\u5df2\u7ecf\u7528\u8fc7\u4e86\uff0c\u5b83\u7684\u7528\u9014\u5c31\u662f\u6ce8\u518c\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u8fd9\u4e9b\u503c\u5728\u6d4b\u8bd5\u8fd0\u884c\u5f00\u59cb\u65f6\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21\u3002</p> <pre><code># conftest.py\ndef pytest_addoption(parser):\nparser.addoption()\n</code></pre> <p>\u524d\u9762\u6709\u4f8b\u5b50\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bb2\u4e86\uff0c\u7528\u6cd5\u5f88\u7b80\u5355\u3002</p> <p>\u5b83\u90fd\u662f\u901a\u8fc7 <code>parser.addoption</code> \u5728\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#22pytest_configure","title":"2.2\u3001pytest_configure","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u4e3b\u8981\u662f\u7528\u6765\u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570\u7684\uff1a</p> <pre><code># conftest.py\ndef pytest_configure(config):\nmy_option = config.getoption(\"--opt\")\n</code></pre> <p>\u662f\u5728\u6267\u884c\u6d4b\u8bd5\u6267\u884c\u8fd0\u884c\uff0c\u7b80\u5355\u54c8\u3002</p> <p><code>pytest_unconfigure</code> \u5219\u662f\u5728\u6267\u884c\u6d4b\u8bd5\u9000\u51fa\u4e4b\u524d\u8fd0\u884c\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#23pytest_sessionstart","title":"2.3\u3001pytest_sessionstart","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u5728 session \u5bf9\u8c61\u521b\u5efa\u4e4b\u540e\uff0c\u6267\u884c\u6536\u96c6\u4e4b\u524d\u8c03\u7528\uff1a</p> <pre><code>def pytest_sessionstart(session):\n\"\"\"\n    :param pytest.Session session: The pytest session object.\n    \"\"\"\n</code></pre> <p>session \u5bf9\u8c61\u91cc\u9762\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u5e38\u7528\u7684\uff1a</p> <ul> <li>startdir\uff1a\u7528\u4f8b\u6839\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84\u3002</li> <li>items\uff1a\u7528\u4f8b\u5bf9\u8c61\u7684\u5217\u8868\u3002</li> <li>config\uff1aconfig\u5bf9\u8c61\u3002</li> </ul> <p>\u4f60\u4e5f\u53ef\u4ee5\u5f80\u91cc\u9762\u52a8\u6001\u6dfb\u52a0\u4e00\u4e9b\u5c5e\u6027\u3002</p> <p>\u548c\u5b83\u5bf9\u5e94\u7684 <code>pytest_sessionfinish</code> \u662f\u5728\u6240\u6709\u6d4b\u8bd5\u7ed3\u675f\uff0c\u9000\u51fa\u4e4b\u524d\u6267\u884c\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#24pytest_collection_modifyitems","title":"2.4\u3001pytest_collection_modifyitems","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u4e3b\u8981\u7528\u6765\u8c03\u6574\u7528\u4f8b\uff1a</p> <pre><code># conftest.py\ndef pytest_collection_modifyitems(session, config, items):\n\"\"\"\n    :param pytest.Session session: The pytest session object.\n    :param _pytest.config.Config config: The pytest config object.\n    :param List[pytest.Item] items: List of item objects.\n    \"\"\"\n</code></pre> <ul> <li> <p>session \u4e3a Pytest \u7684 session \u5bf9\u8c61\u3002</p> </li> <li> <p>config \u4e3a Pytest \u7684 config \u5bf9\u8c61\u3002</p> </li> <li> <p>items \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5176\u4ed6\u6bcf\u4e2a\u5143\u7d20\u5c31\u662f\u4e00\u4e2a\u7528\u4f8b\u5bf9\u8c61\u3002</p> </li> </ul> <p>item \u91cc\u9762\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u5e38\u7528\u7684\uff1a</p> <pre><code>name\uff1a\u7528\u4f8b\u7684\u540d\u79f0\nnodeid\uff1a\u4ece\u7528\u4f8b\u6839\u76ee\u5f55\u5f00\u59cb\u5230\u7528\u4f8b\u6587\u4ef6\u7684\u8def\u5f84\nown_markers\uff1a\u7528\u4f8b\u7684mark\u6807\u7b7e\n</code></pre> <p><code>pytest_collection_finish</code> \u5219\u662f\u5728\u6536\u96c6\u5b8c\u5e76\u4e14\u4fee\u6539\u5b8c\u4e4b\u540e\u8fd0\u884c\uff0c\u5b83\u662f\u5728 <code>pytest_collection_modifyitems</code> \u4e4b\u540e\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#25pytest_runtest_setup","title":"2.5\u3001pytest_runtest_setup","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u662f\u5728\u8c03\u7528 setup \u7684\u65f6\u5019\u8fd0\u884c\uff1a</p> <pre><code>def pytest_runtest_setup(item):\n...\n</code></pre> <p>\u6ce8\u610f\u662f item\uff0c\u4e0d\u662f items\uff0citem \u662f\u7528\u4f8b\u5bf9\u8c61\u3002</p> <p>\u6bd4\u5982\uff0c\u4f60\u53ef\u4ee5\u5728\u6bcf\u6b21\u7528\u4f8b\u6267\u884c\u4e4b\u524d\u8f93\u51fa\u7528\u4f8b\u7684\u6807\u9898\uff1a</p> <pre><code>def pytest_runtest_setup(item):\nlogger.info(item.function.__name__)\n</code></pre> <p><code>pytest_runtest_call</code> \u548c <code>pytest_runtest_teardown</code> \u5206\u522b\u662f\u5728\u7528\u4f8b\u6267\u884c\u8fc7\u7a0b\u4e2d\u548c\u7528\u4f8b teardown \u9636\u6bb5\u8fd0\u884c\uff0c\u7528\u6cd5\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#26pytest_runtest_makereport","title":"2.6\u3001pytest_runtest_makereport","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u662f\u7528\u4e8e\u521b\u5efa\u6d4b\u8bd5\u62a5\u544a\u7684\uff0c\u6bcf\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u7684\u6d4b\u8bd5\u62a5\u544a\u90fd\u5206\u4e3a setup\u3001call \u548c teardown \u4e09\u4e2a\u6d4b\u8bd5\u9636\u6bb5\u3002\u5982\u679c\u4f60\u719f\u6089 allure \u62a5\u544a\u7684\u8bdd\uff0c\u5e94\u8be5\u80fd\u8f7b\u6613 get \u5230\u6211\u8bf4\u7684\u3002</p> <pre><code>def pytest_runtest_makereport(item):\nout = yield\nreport = out.get_result()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_7","title":"\u4e5d\u3001\u6d4b\u8bd5\u62a5\u544a","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1allure","title":"1\u3001allure","text":"<p>Pytest \u6700\u5e38\u7528\u7684\u6d4b\u8bd5\u62a5\u544a\u662f allure\uff0c\u5b83\u662f\u4e00\u4e2a\u4e09\u65b9\u63d2\u4ef6\uff0c\u5b89\u88c5\u5b83\uff1a</p> <pre><code>sudo pip3 install allure-pytest\n</code></pre> <p>\u4f7f\u7528\u4e5f\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u6267\u884c\u65f6\u52a0\u53c2\u6570 <code>--alluredir=xxx</code> \u5373\u53ef\uff1a</p> <pre><code>pytest --alluredir=report\n</code></pre> <p>\u8fd9\u6837\u5c31\u80fd\u5728 report \u76ee\u5f55\u4e0b\u751f\u6210\u62a5\u544a\uff0c\u6253\u5f00\u5b83\u4f60\u4f1a\u53d1\u73b0 report \u76ee\u5f55\u4e0b\u662f\u4e00\u5806\u6587\u672c\u6587\u4ef6\uff0c\u8fd9\u548b\u770b\u5462\uff1f</p> <p>\u8fd8\u6ca1\u5b8c~</p> <p>\u4f60\u8fd8\u9700\u8981\u5b89\u88c5 allure \u7684\u67e5\u770b\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4ece github\u4e0a\u53bb\u4e0b\u8f7d\u6700\u65b0\u7684\u7248\u672c\uff0c\u7136\u540e\u5b89\u88c5\u5b83\u5373\u53ef\uff0c\u6bd4\u5982\u6211\u73b0\u5728\u4e0b\u6765\u5b89\u88c5\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>sudo dpkg -i allure_2.19.0-1_all.deb\n</code></pre> <p>\u67e5\u770b\u62a5\u544a\uff1a</p> <ul> <li>\u5728\u7ebf\u67e5\u770b\uff1a</li> </ul> <pre><code>allure serve report\n</code></pre> <ul> <li>\u751f\u6210\u672c\u5730 html</li> </ul> <pre><code>allure generate report -o allure-report\n</code></pre> <p>\u8fd9\u6837\u5728 <code>allure-report</code> \u76ee\u5f55\u4e0b\u4f1a\u4e00\u5806\u6587\u4ef6\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a <code>index.html</code> \u662f\u62a5\u544a\u7684\u4e3b\u6587\u4ef6\u3002</p> <p>\u4f7f\u7528\u6d4f\u89c8\u5668\u76f4\u63a5\u6253\u5f00\u5b83\uff0c\u4f60\u4f1a\u53d1\u73b0\u6ca1\u6709\u6570\u636e\uff01</p> <p>\u8fd8\u6ca1\u5b8c~~</p> <p>\u4f7f\u7528\u547d\u4ee4\u6253\u5f00\uff1a</p> <pre><code>allure open allure-report\n</code></pre> <p>\u4e0d\u51fa\u610f\u5916\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u6253\u5f00\u62a5\u544a\u3002</p> <p>\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0callure \u53ef\u4e0d\u662f\u4e13\u95e8\u4e3a Pytest \u5f00\u53d1\u7684\uff0c\u7ecf\u8fc7\u5f88\u957f\u65f6\u95f4\u7684\u53d1\u5c55\uff0c\u5b83\u5df2\u7ecf\u8fdb\u5316\u4e3a\u4e00\u4e2a\u62a5\u544a\u6846\u67b6\u4e86\uff0c\u80fd\u652f\u6301\u975e\u5e38\u591a\u7684\u8bed\u8a00\u53ca\u5de5\u5177\u751f\u6210\u6d4b\u8bd5\u62a5\u544a\uff0c\u603b\u4e4b\u8fd9\u73a9\u610f\u513f\u8001\u72e0\u4e86\u3002\u60f3\u6df1\u5165\u7814\u7a76\u7684\u540c\u5b66\u770b\u8fd9\u91cc allure \u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2pytest-html","title":"2\u3001pytest-html","text":"<p>\u4e0a\u53e4\u65f6\u671f Pytest \u7684\u201c\u7cdf\u7ce0\u4e4b\u59bb\u201d\uff0c\u5c3d\u7ba1\u8be5\u9879\u76ee\u662f\u7531 Pytest \u5b98\u65b9\u5728\u7ef4\u62a4\uff0c\u4f46\u662f\u793e\u533a\u70ed\u5ea6\u4e0d\u884c\u4e86\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u989c\u503c\u4e0d\u884c\uff0c\u5f88\u5c11\u6709\u4eba\u7528\uff0c\u4e5f\u4e0d\u60f3\u8fc7\u591a\u7684\u4ecb\u7ecd\u5b83\uff0c\u8d70\u4e2a\u8fc7\u573a\u5427\u3002</p> <p>\u5b89\u88c5\uff1a</p> <pre><code>sudo pip3 install pytest-html\n</code></pre> <p>\u4f7f\u7528\uff1a</p> <pre><code>pytest --html=report.html\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#3xml","title":"3\u3001xml","text":"<p>\u8fd9\u662f\u4e2a Pytest \u81ea\u5e26\u7684\u62a5\u544a\uff0c\u4e0d\u9700\u8981\u5b89\u88c5\u63d2\u4ef6\uff1a</p> <pre><code>pytest --junit-xml=report.xml\n</code></pre> <p>\u6211\u4e2a\u4eba\u8fd8\u662f\u975e\u5e38\u559c\u6b22\u8fd9\u79cd\u62a5\u544a\u5f62\u5f0f\u7684\uff0c\u56e0\u4e3a\u5b83\u4e0d\u9700\u8981\u5b89\u88c5\u5176\u4ed6\u63d2\u4ef6\uff0c\u800c\u4e14\u5904\u7406\u62a5\u544a\u4e2d\u7684\u6570\u636e\u4e5f\u975e\u5e38\u7b80\u5355\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#pytest_1","title":"\u5341\u3001Pytest \u6846\u67b6\u6838\u5fc3","text":"<p>\u6211\u4eec\u901a\u5e38\u57fa\u4e8e Pytest \u6765\u7f16\u5199\u642d\u5efa\u6211\u4eec\u81ea\u5df1\u7684\u6d4b\u8bd5\u6846\u67b6\uff0cPytest \u81ea\u7136\u5c31\u6210\u4e86\u6211\u4eec\u81ea\u5df1\u6d4b\u8bd5\u6846\u67b6\u7684\u6838\u5fc3\uff0c\u90a3\u4e48\u540c\u5b66\u4eec\u6709\u6ca1\u6709\u60f3\u8fc7\uff0cPytest \u7684\u6838\u5fc3\u662f\u4ec0\u4e48\uff1f</p> <p>\u76f8\u4fe1 90% \u7684\u540c\u5b66\u6ca1\u53bb\u8003\u8651\u8fc7\u6216\u8005\u6ca1\u4e86\u89e3\u8fc7~</p> <p>Pluggy \u5c31\u662f Pytest \u7684\u6838\u5fc3\u6846\u67b6\uff0c\u51e0\u4e4e Pytest \u6240\u6709\u7684\u529f\u80fd\u90fd\u662f\u57fa\u4e8e Pluggy \u5b9e\u73b0\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a\u88ab\u6781\u5c11\u4eba\u77e5\u9053\u4e14\u4e25\u91cd\u4f4e\u4f30\u7684\u6846\u67b6\uff0c\u5b83\u5230\u5e95\u662f\u4ec0\u4e48\u73a9\u610f\u513f\uff0c\u54b1\u4eec\u8fd9\u91cc\u7b80\u5355\u804a\u4e00\u804a\u3002</p> <p>Pluggy \u662f\u4ece Pytest \u6846\u67b6\u4e2d\u88ab\u5f00\u53d1\u8005\u62bd\u53d6\u51fa\u6765\u7684\uff0c\u56e0\u4e3a\u5f00\u53d1\u8005\u53d1\u73b0\u4ed6\u4eec\u8bbe\u8ba1\u7684\u8fd9\u79cd\u63d2\u4ef6\u5316\u65b9\u6848\uff0c\u5b8c\u5168\u53ef\u7528\u5728\u5176\u4ed6\u7684\u9879\u76ee\u4e2d\uff0c\u56e0\u6b64\u4ed6\u4eec\u603b\u7ed3\u63d0\u70bc\u51fa\u4e86 Pluggy \u9879\u76ee\uff1b</p> <p>\u4ee4\u4eba\u76f4\u547c\u201c\u539a\u793c\u8c22\u201d\u7684\u662f\u6574\u4e2a Pluggy \u9879\u76ee\u52a0\u8d77\u6765\u4e5f\u5c31 1100 \u6765\u884c\u4ee3\u7801\uff08\u5305\u542b\u6ce8\u91ca \uff09\uff0c\u8fd9\u5c31\u662f Pytest \u7684\u6838\u5fc3\u57fa\u77f3\uff0c\u5c31\u50cf\u662f Linux \u7cfb\u7edf\u4e2d\u7684 Linux \u5185\u6838\u7684\u4f5c\u7528\u3002\u7406\u89e3\u5b83\u4f60\u624d\u80fd\u771f\u6b63\u7406\u89e3 Pytest \u63d2\u4ef6\u5316\u8bbe\u8ba1\u54f2\u5b66\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8bf4\u5b83\u88ab\u4f4e\u4f30\u4e86\uff0cgithub \u4e0a\u624d\u4e0d\u5230 900 \u7684 star\uff0c\u771f\u7684\u662f\u6df1\u85cf\u529f\u4e0e\u540d\uff01</p> <p>\u54b1\u4eec\u5148\u968f\u4fbf\u5199\u4e2a\u51fd\u6570\uff1a</p> <pre><code>class Mikigo:\ndef miki(self, arg1, arg2):\n\"\"\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\"\"\n</code></pre> <p>\u901a\u5e38\uff0c\u7c7b\u91cc\u9762\u7684\u51fd\u6570\u54b1\u4eec\u60f3\u8981\u91cd\u5199\uff0c\u53ea\u9700\u8981\u7ee7\u627f\u8fd9\u4e2a\u7c7b\uff0c\u7136\u540e\u91cd\u5199\u8986\u76d6\u51fd\u6570\u5c31\u597d\u4e86\uff0c\u8fd9\u5c31\u662f\u7c7b\u7684\u591a\u6001\uff0c\u4e0d\u591a\u8bb2\u4e86\uff1b</p> <p>\u90a3\u54b1\u4eec\u4f7f\u7528 Pluggy \u600e\u4e48\u53bb\u8986\u76d6\u7c7b\u91cc\u9762\u7684\u51fd\u6570\u5462\uff1f</p> <pre><code>import pluggy\n# hook \u89c4\u8303\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\nhookspec = pluggy.HookspecMarker(\"mikigo\") \n# hook \u5b9e\u73b0\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\nhookimpl = pluggy.HookimplMarker(\"mikigo\")\nclass Mikigo:\n@hookspec\ndef miki(self, arg1, arg2):\n\"\"\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\"\"\nclass Plugin_1:\n@hookimpl\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_1.miki()\")\nreturn arg1 + arg2\n# \u5b9e\u4f8b\u5316\u4e00\u4e2a\u63d2\u4ef6\u7ba1\u7406\u5668\u5bf9\u8c61    \npm = pluggy.PluginManager(\"mikigo\")\n# \u5c06 Mikigo \u7c7b\u6dfb\u52a0\u8fdb\u53bb\npm.add_hookspecs(Mikigo)\n# \u6ce8\u518c\u63d2\u4ef6\u7c7b\npm.register(Plugin_1())\n# \u901a\u8fc7 hook \u5c5e\u6027\u8bbf\u95ee\u51fd\u6570\nresults = pm.hook.miki(arg1=1, arg2=2)\nprint(results)\n</code></pre> <pre><code>\u6211\u662f Plugin_1.miki()\n[3]\n</code></pre> <p>\u4f60\u770b\uff0c\u539f\u6765\u7684 <code>Mikigo</code> \u7c7b\u91cc\u9762\u7684\u51fd\u6570\u662f\u6ca1\u6709\u6267\u884c\u7684\uff0c\u800c\u662f\u6267\u884c\u4e86 <code>Plugin_1</code> \u7c7b\u91cc\u9762\u7684\u51fd\u6570\uff0c\u5e76\u4e14\u83b7\u53d6\u5230\u4e86\u8fd4\u56de\u503c\u3002</p> <ul> <li> <p><code>PluginManager</code> \u662f\u6574\u4e2a\u63d2\u4ef6\u7cfb\u7edf\u7684\u7ba1\u7406\u5668\uff0c\u4f20\u9012\u4e00\u4e2a\u5de5\u7a0b\u540d\u79f0\u5373\u53ef\u8fdb\u884c\u5b9e\u4f8b\u5316\uff1b</p> </li> <li> <p><code>add_hookspecs</code> \u6dfb\u52a0\u4e00\u4e2a\u94a9\u5b50\u5230\u7ba1\u7406\u5668\u4e2d\uff0c\u53c2\u6570\u662f module \u6216 class \u5bf9\u8c61\uff0c\u5e95\u5c42\u5b9e\u9645\u662f\u901a\u8fc7 <code>dir()</code> \u81ea\u7701\u51fd\u6570\u8fdb\u884c\u904d\u5386\u6dfb\u52a0\u5230\u4e00\u4e2a names \u7684\u5bb9\u5668\u4e2d\u3002</p> </li> <li><code>register</code>  \u6ce8\u518c\u63d2\u4ef6</li> </ul> <p>\u5982\u679c\u54b1\u4eec\u8fd8\u60f3\u589e\u52a0\u4e00\u4e2a\u63d2\u4ef6\u5462?</p> <pre><code>import pluggy\n# hook \u89c4\u8303\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u88c5\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\nhookspec = pluggy.HookspecMarker(\"mikigo\") \n# hook \u5b9e\u73b0\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u88c5\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\nhookimpl = pluggy.HookimplMarker(\"mikigo\")\nclass Mikigo:\n@hookspec\ndef miki(self, arg1, arg2):\n\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\nclass Plugin_1:\n@hookimpl\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_1.miki()\")\nreturn arg1 + arg2\nclass Plugin_2:\n@hookimpl\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_2.miki()\")\nreturn arg1 - arg2\n# \u5b9e\u4f8b\u5316\u4e00\u4e2a\u63d2\u4ef6\u7ba1\u7406\u5668\u5bf9\u8c61    \npm = pluggy.PluginManager(\"mikigo\")\n# \u5c06 Mikigo \u7c7b\u6dfb\u52a0\u8fdb\u53bb\npm.add_hookspecs(Mikigo)\n# \u6ce8\u518c\u63d2\u4ef6\u7c7b\npm.register(Plugin_1())\npm.register(Plugin_2())\n# \u901a\u8fc7 hook \u5c5e\u6027\u8bbf\u95ee\u51fd\u6570\nresults = pm.hook.miki(arg1=1, arg2=2)\nprint(results)\n</code></pre> <pre><code>\u6211\u662f Plugin_2.miki()\n\u6211\u662f Plugin_1.miki()\n[-1, 3]\n</code></pre> <p><code>Plugin_2</code> \u5148\u6267\u884c\uff0c\u7136\u540e <code>Plugin_1</code> \u4e5f\u6267\u884c\u4e86\uff0c\u4e24\u4e2a\u63d2\u4ef6\u7684\u8fd4\u56de\u503c\u4e5f\u90fd\u653e\u5230\u4e00\u4e2a\u5217\u8868\u91cc\u9762\u4e86\uff0c\u662f\u4e0d\u662f\u5f88\u795e\u5947\u3002</p> <p>\u90a3\u5982\u679c\u60f3 <code>Plugin_1</code> \u5148\u6267\u884c\uff0c<code>Plugin_2</code> \u540e\u6267\u884c\u5462\uff1f</p> <pre><code>import pluggy\n# hook \u89c4\u8303\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\nhookspec = pluggy.HookspecMarker(\"mikigo\")\n# hook \u5b9e\u73b0\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\nhookimpl = pluggy.HookimplMarker(\"mikigo\")\nclass Mikigo:\n@hookspec\ndef miki(self, arg1, arg2):\n\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\nclass Plugin_1:\n@hookimpl(tryfirst=True)\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_1.miki()\")\nreturn arg1 + arg2\nclass Plugin_2:\n@hookimpl(trylast=True)\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_2.miki()\")\nreturn arg1 - arg2\n# \u5b9e\u4f8b\u5316\u4e00\u4e2a\u63d2\u4ef6\u7ba1\u7406\u5668\u5bf9\u8c61\npm = pluggy.PluginManager(\"mikigo\")\n# \u5c06 Mikigo \u7c7b\u6dfb\u52a0\u8fdb\u53bb\npm.add_hookspecs(Mikigo)\n# \u6ce8\u518c\u63d2\u4ef6\u7c7b\npm.register(Plugin_1())\npm.register(Plugin_2())\n# \u901a\u8fc7 hook \u5c5e\u6027\u8bbf\u95ee\u51fd\u6570\nresults = pm.hook.miki(arg1=1, arg2=2)\nprint(results)\n</code></pre> <pre><code>\u6211\u662f Plugin_1.miki()\n\u6211\u662f Plugin_2.miki()\n[3, -1]\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7 <code>tryfirst</code> \u548c <code>trylast</code> \u6765\u63a7\u5236\uff0c\u6709\u540c\u5b66\u5e94\u8be5\u6709\u5370\u8c61\uff0c Pytest hook \u91cc\u9762\u4e5f\u662f\u7528 <code>tryfirst</code> \u548c <code>trylast</code> \u63a7\u5236\u5176 hook \u51fd\u6570\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f\u7684\uff0c\u5176\u5e95\u5c42\u5b9e\u73b0\u662f\u4ece\u8fd9\u91cc\u6765\u7684\u3002</p> <p>\u6b63\u662f\u56e0\u4e3a\u53ef\u4ee5\u968f\u610f\u6dfb\u52a0\u63d2\u4ef6\u4ee5\u53ca\u4fee\u6539\u63d2\u4ef6\u7684\u6267\u884c\u987a\u5e8f\uff0c\u624d\u4f7f\u5f97\u5728 Pytest \u4e2d\u6211\u4eec\u80fd\u7075\u6d3b\u7684\u5b9a\u4e49\u4e00\u4e9b hook \u51fd\u6570\u6765\u5b9e\u73b0\u6211\u4eec\u60f3\u8981\u7684\u529f\u80fd\uff0cPytest \u4ee5\u53ca\u5176\u4e09\u65b9\u63d2\u4ef6\uff0c\u90fd\u662f\u57fa\u4e8e\u6b64\u57fa\u672c\u903b\u8f91\u6784\u5efa\u8d77\u6765\u7684\u3002</p> <p>\u8fd9\u91cc\u5c31\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u57fa\u672c\u539f\u7406\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3\u7684\u540c\u5b66\u70b9\u8fd9\u91cc Pluggy\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Selenium\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># ==================================\n# Author : Mikigo\n# ==================================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u4e00\u53e5\u8bdd\u7b80\u4ecb","text":"<p>selenium \u662f\u4e00\u4e2a web \u5e94\u7528\u7a0b\u5e8f\u7684\u6d4b\u8bd5\u5de5\u5177\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<pre><code>pip install selenium\n</code></pre> <p>\u6d4f\u89c8\u5668\u9a71\u52a8\uff0c\u6ce8\u610f\u4e00\u5b9a\u8981\u548c\u4f60\u7684\u6d4f\u89c8\u5668\u7248\u672c\u5339\u914d\uff1b</p> <p>selenium \u9a71\u52a8\uff1ahttps://npm.taobao.org/mirrors/chromedriver/ </p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u5e38\u7528\u63a7\u5236\u65b9\u6cd5","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u542f\u52a8\u6d4f\u89c8\u5668","text":"<pre><code>from selenium import webdriver\ndriver = webdriver.Chrome()\ndriver.get(\"http:www.baidu.com\")\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u6d4f\u89c8\u5668\u63a7\u5236","text":"<pre><code># \u8bbe\u7f6e\u7a97\u53e3\u4e3a\u50cf\u7d20500,500\u5927\u5c0f\ndriver.set_window_size(500, 500)  \n# \u6700\u5927\u5316\u6d4f\u89c8\u5668\ndriver.maximize_window()  \n# \u540e\u9000\ndriver.back()     \n# \u524d\u8fdb\ndriver.forward()  \n# \u5237\u65b0\ndriver.refresh()  \n# \u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff0c\u4f46\u4e0d\u4f1a\u5207\u6362\u7a97\u53e3\ndriver.close()    \n# \u9000\u51fa\u6240\u6709\u7a97\u53e3 \ndriver.quit()      \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#8","title":"8\u79cd\u5143\u7d20\u5b9a\u4f4d\u65b9\u6cd5","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1id","title":"1.id","text":"<pre><code>find_element_by_id()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2name","title":"2.name","text":"<pre><code>find_element_by_name()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3class_name","title":"3.class_name","text":"<pre><code>find_element_by_class_name()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4tag_name","title":"4.tag_name","text":"<pre><code>find_element_by_tag_name()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5link_text","title":"5.link_text","text":"<pre><code>find_element_by_link_text()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#6partial_link_text","title":"6.partial_link_text","text":"<pre><code>find_element_by_partial_link_text()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#7css_selector","title":"7.css_selector","text":"<pre><code>find_element_by_css_selector()\n</code></pre> <ul> <li><code>.class</code> \uff0c\u6bd4\u5982\uff1a<code>.bg</code> \u9009\u62e9\u7c7b\u4e3a <code>bg</code> \u7684\u6240\u6709\u5143\u7d20\uff1b</li> <li><code>#id</code> \uff0c\u6bd4\u5982\uff1a<code>#kw</code> \u9009\u62e9 <code>id</code> \u4e3a <code>kw</code> \u7684\u5143\u7d20\uff1b</li> <li><code>element&gt;element</code>\uff0c\u6bd4\u5982\uff1a<code>span&gt;input</code> \u9009\u62e9 <code>span</code> \u4e0b\u7684\u6240\u6709 <code>input</code> \u5b50\u5143\u7d20\uff08\u4e0d\u542b\u5b59\uff09\uff1b</li> <li><code>element element</code>\uff0c\u6bd4\u5982\uff1a<code>span input</code> \u9009\u62e9 <code>span</code> \u4e0b\u7684\u6240\u6709 <code>input</code> \u5b50\u5143\u7d20\uff08\u542b\u5b59\uff09\uff1b</li> <li><code>element+element</code>\uff0c\u6bd4\u5982\uff1a<code>span+input</code> \u9009\u62e9\u4e0e <code>span</code> \u540c\u7ea7\u7684\uff0c\u4e14\u7d27\u63a5\u7740\u7684 <code>input</code> \u5143\u7d20\uff08\u53ea\u6709\u4e00\u4e2a\uff09\uff1b</li> <li><code>[attribute^=value]</code>\uff0c\u6bd4\u5982\uff1a<code>a[class^=\"bg\"]</code> \u9009\u62e9\u7c7b\u662f\u4ee5 <code>bg</code> \u5f00\u5934\u7684 <code>a</code> \u5143\u7d20\uff08<code>$</code> \u662f\u4ee5\u4ec0\u4e48\u7ed3\u5c3e\uff09\uff1b</li> <li><code>:nth-child</code>\uff0c\u6bd4\u5982\uff1a<code>input:nth-child(2)</code> \u9009\u62e9\u7236\u5143\u7d20\u4e0b\u7b2c 2 \u4e2a\u4f4d\u7f6e\u4e3a <code>input</code> \u7684\u5143\u7d20\uff08\u5148\u627e\u4f4d\u7f6e\uff0c\u518d\u627e\u5143\u7d20\uff09\uff1b</li> <li><code>:nth-of-type</code>\uff0c\u6bd4\u5982\uff1a<code>input:nth-of-type(2)</code> \u9009\u62e9\u7236\u5143\u7d20\u4e0b\u5143\u7d20 <code>input</code> \u7684\u7b2c 2 \u4e2a\uff08\u5148\u627e\u5143\u7d20\uff0c\u518d\u627e\u4f4d\u7f6e\uff09\uff1b</li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#8xpth","title":"8.xpth","text":"<pre><code>find_element_by_xpath()\n</code></pre> <p>\uff081\uff09\u7edd\u5bf9\u5b9a\u4f4d</p> <p>\u4ece /html \u5f00\u59cb\uff0c\u4e00\u5c42\u4e00\u5c42\u7684\u5f80\u4e0b\u627e\u3002</p> <p>\uff082\uff09\u76f8\u5bf9\u5b9a\u4f4d\uff0c\u4ee5 // \u5f00\u5934</p> <ul> <li>\u5143\u7d20\u5c5e\u6027\u5b9a\u4f4d</li> </ul> <pre><code>driver.find_element_by_xpath\uff08\"//input[@id='kw']\"\uff09\uff0c\u5c5e\u6027\u503c\u5fc5\u987b\u52a0\u5f15\u53f7\u3002\n</code></pre> <ul> <li>\u5c42\u7ea7\u5c5e\u6027\u7ed3\u5408 </li> </ul> <pre><code>driver.find_element_by_xpath\uff08\"//form[@id='form']/span/input\"\uff09\n</code></pre> <ul> <li>\u4f7f\u7528\u903b\u8f91\u8fd0\u7b97\u7b26</li> </ul> <pre><code>driver.find_element_by_xpath\uff08\"//input[@name='wd' and @class='s_ipt']\"\uff09\n</code></pre> <ul> <li>\u4f7f\u7528 <code>contains</code></li> </ul> <pre><code>driver.find_element_by_xpath\uff08\"//input[contains(@class,'bg')]\"\uff09\n# \u67e5\u627e\u5185\u5bb9\ndriver.find_element_by_xpath\uff08\"//a[contains(text(),'\u65b0\u95fb')]\"\uff09 \n# \u67e5\u627e\u5185\u5bb9\ndriver.find_element_by_xpath\uff08\"//a[text()='\u65b0\u95fb']\"\uff09  \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u5176\u4ed6\u5e38\u7528","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u5b9a\u4f4d\u4e00\u7ec4\u5143\u7d20","text":"<pre><code>driver.find_elements_by_css_selector(#form&gt;span&gt;input)\n</code></pre> <p>\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5217\u8868\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#by","title":"\u4f7f\u7528By\u7c7b","text":"<pre><code>from selenium.webdriver.common.by import By\nfrom selenium import webdriver\ndriver = webdriver.Chrome()\ndriver.get(\"http:www.baidu.com\")\ndriver.find_element(By.ID,'kw')\n# \u5c06\u5c0f\u5199\u6539\u6210\u5927\u5199\uff0c\u6bd4\u5982 name \u6539\u6210 By.NEME\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\u56db\u3001\u7b80\u5355\u5143\u7d20\u64cd\u4f5c","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1.\u6e05\u9664\u6587\u672c","text":"<pre><code>driver.find_element\uff08By.ID,'kw'\uff09.clear()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2.\u6a21\u62df\u6309\u952e\u8f93\u5165","text":"<pre><code>driver.find_element\uff08By.ID,'kw'\uff09.send_keys(\"\u82f9\u679c\")\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3.\u5355\u51fb\u5143\u7d20","text":"<pre><code>driver.find_element\uff08By.ID,'su'\uff09.click()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4.\u63d0\u4ea4\u8868\u5355","text":"<pre><code>driver.find_element\uff08By.ID,'su'\uff09.submit()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"5.\u83b7\u53d6\u5143\u7d20\u4fe1\u606f","text":"<pre><code># \u83b7\u53d6\u5f53\u524durl\ndriver.current_url\n# \u83b7\u53d6\u5143\u7d20\u7684\u6587\u672c\u5185\u5bb9\ndriver.find_element_by_link_text(\"\u65b0\u95fb\").text  \n# \u83b7\u53d6\u8f93\u5165\u6846\u5143\u7d20\u7684class\u5c5e\u6027\u7684\u5c5e\u6027\u503c\ndriver.find_element_by_id(\"kw\").get_attribute(\"class\") \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#6","title":"6.\u5143\u7d20\u518d\u64cd\u4f5c","text":"<pre><code>driver.find_element\uff08By.ID,'ul'\uff09.find_element(By.PARTIAL_LINK_TEXT,\"\u65b0\u95fb\").click()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\u4e94\u3001\u9f20\u6807\u4e8b\u4ef6","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_1","title":"1.\u5b9e\u4f8b","text":"<pre><code>from selenium.wedriver.common.action_chains import ActionChains\nfrom selenium import webdriver\ndriver = webdriver.Chrome()\ndriver.get(\"http:www.jd.com\")\nlocator = (By.LINK_TEXT,\"\u5bb6\u7528\u7535\u5668\")\nlocat = driver.find_element(*locator) \n# \u5b9e\u4f8b\u5316\naction = ActionChains(driver)    \n# \u4e00\u5b9a\u8981\u63d0\u4ea4\naction = move_to_element(locat).perform()  \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_1","title":"2.\u5e38\u7528\u7684\u9f20\u6807\u4e8b\u4ef6","text":"<pre><code># \u9f20\u6807\u53f3\u952e\u70b9\u51fb\ncontext_click(locat)  \n# \u5de6\u952e\u53cc\u51fb\ndouble_click(locat) \n# \u9f20\u6807\u62d6\u52a8\uff0c\u4ecesource_locat\u62d6\u52a8\u5230target_locat\ndrag_and_drop(source_locat,target_locat)  \n# \u9f20\u6807\u60ac\u505c\nmove_to_element(locat) \n# \u5728\u5143\u7d20\u4e0a\u6309\u4e0b\u5de6\u952e\u4e0d\u653e\nclick_and_hold(local) \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_10","title":"\u516d\u3001\u952e\u76d8\u4e8b\u4ef6","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_2","title":"1.\u5b9e\u4f8b","text":"<pre><code># \u5f15\u5165Keys\u7c7b\nfrom selenium.wedriver.common.keys import Keys \nfrom selenium import webdriver\ndriver = webdriver.Chrome()\ndriver.get(\"http:www.jd.com\")\ndriver.find_element_by_id(\"key\").send_keys(\"\u8499\u725b\")\ndriver.find_element_by_id(\"key\").send_keys(Keys.ENTER)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_2","title":"2.\u5e38\u7528\u7684\u952e\u76d8\u4e8b\u4ef6","text":"<pre><code># \u5220\u9664 \uff08\u4e0e\u952e\u76d8\u5bf9\u5e94\uff09\nsend_keys(Keys.BACK_SPACE) \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#select","title":"\u4e03\u3001Select\u7c7b","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_3","title":"1.\u5b9e\u4f8b","text":"<pre><code>from selenium.wedriver.support.select import Select\n# \u627e\u5230select\u5143\u7d20\nlocat = driver.find_element(By.NAME, 'brand_id')  \n# \u5b9e\u4f8b\u5316\nselect = Select(locat) \n# \u9009\u62e9\u592a\u5e73\u9e1f\nselect.select_by_visible_text(\"\u592a\u5e73\u9e1f\")   \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_11","title":"\u516b\u3001\u5185\u8054\u6846\u67b6","text":"<p>1.\u4e00\u4e2a\u7f51\u9875\u91cc\u9762\u53ef\u80fd\u4f1a\u9047\u5230\u591a\u4e2aframe\uff0c\u4e0d\u540c\u7684frame\u4e4b\u95f4\u9700\u8981\u5207\u6362\u624d\u80fd\u8fdb\u884c\u64cd\u4f5c</p> <p>2.\u9010\u7ea7\u8fdb\u5165</p> <pre><code># \u8fdb\u5165main_frame\u8fd9\u4e00\u5c42\ndriver.switch_to.frame(\"main_frame\")  \n# \u518d\u8fdb\u5165header_frame\u8fd9\u4e00\u5c42\ndriver.switch_to.frame(\"header_frame\")  \n</code></pre> <p>3.\u8df3\u8f6c\u5230\u5144\u5f1f\u7ea7</p> <p>\u5148\u8c03\u5230\u4e0a\u4e00\u7ea7\uff0c\u5728\u8fdb\u5165\u5144\u5f1f\u7ea7</p> <pre><code># \u8df3\u5230\u4e0a\u4e00\u7ea7\ndriver.switch_to.parent_frame(\"\")  \n</code></pre> <p>4.\u8df3\u51fa\u6240\u6709\u7684frame</p> <pre><code>driver.switch_to.default_content()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_12","title":"\u4e5d\u3001\u7a97\u53e3\u5207\u6362","text":"<pre><code># \u8fd4\u56de\u6240\u6709\u7a97\u53e3\u7684\u53e5\u67c4\ndriver.window_handles       \n# \u5207\u6362\u7a97\u53e3\ndriver.switch_to.window(handles[1])    \n# \u83b7\u53d6\u5f53\u524d\u7a97\u53e3\u7684\u53e5\u67c4\ndriver.current_window_handle        \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_13","title":"\u5341\u3001\u5176\u4ed6\u5e38\u89c1\u63a7\u4ef6","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_4","title":"1.\u65e5\u671f\u63a7\u4ef6","text":"<p>\u80fd\u591f\u5199\u7684\u76f4\u63a5\u5199\u65e5\u671f\uff0c\u4e0d\u80fd\u5199\u7684\uff0c\u53bb\u6389readonly\u5c5e\u6027\uff1b</p> <pre><code>js = \"document.getElementById('start_date').removeAttribute('readonly')\"\ndriver.execute_script(js)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_3","title":"2.\u5355\u9009\u6216\u590d\u9009\u6846","text":"<p>\u627e\u5230\u7528click\u5373\u53ef\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_1","title":"3.\u8868\u683c","text":"<pre><code># \u83b7\u53d6tr\ntr_list = ele_tboy.find_elements(By.TAG_NAME\uff0c'tr') \nfor tr in tr_list[1:]:\n# td\u5143\u7d20\u5bf9\u8c61\u5217\u8868\ntmp_td_list = tr.find_elements(By.TAGE_NAME,'td') \n#td\u5c31\u662f\u5143\u7d20\u5bf9\u8c61\nfor td in tmp_td_list:  \n# \u6253\u5370\u8868\u683c\u4e2d\u7684\u6240\u6709\u5185\u5bb9\nprint(td.text)   \n# \u83b7\u53d6\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u7684\u503c\n# tbody\u5143\u7d20\nele_tbody = driver.find_element(By.XPATH,'//*[@id=\"myTable\"]/tbody')  \n# \u83b7\u53d6tr\ntr_list = ele_tbody.find_elements(By.TAG_NAME,'tr') \n# \u83b7\u53d6td\ntd_list = tr_list[2].find_elements(By.TAG_NAME,'td')   \nprint(td_list[2].text)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_14","title":"\u5341\u4e00\u3001\u8b66\u544a\u6846\u5904\u7406","text":"<p>\u5728\u5904\u7406\u8b66\u544a\u5f39\u7a97\u4e4b\u524d\uff0c\u4ecd\u7136\u9700\u8981\u5148\u70b9\u51fb\u89e6\u53d1\u7684\u6309\u94ae</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1alert","title":"1.\u5207\u6362\u5230alert\u9875\u9762","text":"<pre><code>driver.find_element(By.ID,'alert').click()\n# \u83b7\u53d6\u6587\u672c\ndriver.switch_to.alert.text  \n# \u70b9\u51fb\u786e\u5b9a\ndriver.switch_to.alert.accept()   \n# \u8f93\u5165\u5185\u5bb9\ndriver.switch_to.alert.send_keys(\"\u8b66\u544a\")   \n# \u70b9\u51fb\u53d6\u6d88\ndriver.switch_to.alert.dissmiss()      \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2alert","title":"2.\u5f15\u5165Alert\u7c7b","text":"<pre><code>from selenium.webdriver.common.alert import Alert\n...\nalert = Alert(driver)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_15","title":"\u5341\u4e8c\u3001\u622a\u56fe","text":"<ul> <li> <p><code>driver.save_screenshot(\"screnshot.png\")</code>  \u8fd4\u56de\u4e00\u4e2a\u56fe\u7247\u6587\u4ef6\uff1b</p> </li> <li> <p>\u6d4f\u89c8\u5668\u6362\u6210 <code>PhantomJS</code>\uff0c\u53ef\u622a\u6574\u4e2a\u7f51\u9875\uff1b</p> </li> <li> <p>\u622a\u4e0b\u4e00\u9875\uff0c\u53ef\u4ee5\u5148\u5c06\u5149\u6807\u79fb\u52a8\u5230\u4e0b\u4e00\u9875\uff0c\u7136\u540e\u622a\u56fe\u5373\u53ef\uff1b</p> </li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_16","title":"\u5341\u4e09\u3001\u8bbe\u7f6e\u7b49\u5f85","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_5","title":"1.\u5f3a\u5236\u7b49\u5f85","text":"<pre><code>from time import sleep\nsleep(2)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_4","title":"2.\u9690\u5f0f\u7b49\u5f85","text":"<pre><code>driver = webdriver.Chrome()\ndriver.implicitly_wait(30)\n</code></pre> <p>\u4e00\u822c\u5728\u6253\u5f00\u6d4f\u89c8\u5668\u540e\u8fdb\u884c\u58f0\u660e\uff0c\u8868\u793a\uff1a30\u79d2\u5185\u4e00\u65e6\u52a0\u8f7d\u5b8c\u6bd5\uff0c\u5c31\u6267\u884c\u4e0b\u4e00\u6761\u8bed\u53e5\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u629b\u5f02\u5e38\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_2","title":"3.\u663e\u5f0f\u7b49\u5f85","text":"<p>\u9488\u5bf9\u67d0\u4e00\u4e2a\u6b65\u9aa4\uff0c\u9690\u5f0f\u7b49\u5f85\u65f6\u95f4\u4e0d\u591f\u957f\uff0c\u53ef\u4ee5\u4e13\u95e8\u8bbe\u7f6e\u4e00\u4e2a\u663e\u5f0f\u7b49\u5f85\u3002</p> <pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n# \u8bbe\u7f6e\u7b49\u5f85\n# \u6bcf\u4e2a0.5\u79d2\u68c0\u67e5\u4e00\u4e0b\uff0c\u603b\u65f6\u95f4\u4e3a10\u79d2\u4e4b\u5185\u3002\nwait = WebDriverWait(driver, 10,0.5)  \n# \u5b9a\u4f4d\u5143\u7d20\nwait.until(EC.presence_of_element_located((By.ID, \"kw\")))  \n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_17","title":"\u5341\u56db\u3001\u4e0a\u4f20\u6587\u4ef6","text":"<p>1.input\u6807\u7b7e</p> <pre><code># \u7528send_keys\u76f4\u63a5\u7ed9\u6587\u4ef6\u8def\u5f84\ndriver.find_element(By.ID,'kw').send_keys('D\\\\1.jpg') \n</code></pre> <p>2.\u975e <code>input</code> \u6807\u7b7e\uff08\u5f39\u7a97\u5f62\u5f0f\uff09</p> <p>\u7528\u4e09\u65b9\u5de5\u5177 <code>Auto Windows Info</code></p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Selenium%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_18","title":"\u5341\u4e94\u3001\u9a8c\u8bc1\u7801","text":"<p>1.\u53bb\u6389\u9a8c\u8bc1\u7801</p> <p>2.\u8bbe\u7f6e\u4e07\u80fd\u9a8c\u8bc1\u7801</p> <p>3.\u9a8c\u8bc1\u7801\u8bc6\u522b\u6280\u672f</p> <p>4.\u64cd\u4f5c <code>cookie</code></p> <pre><code>driver.add_cookie(cookie_dict)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/rpa/","title":"RPA","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"unittest\u20143\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># ==================================\n# Author : Mikigo\n# ==================================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u7b80\u4ecb","text":"<p><code>unittest</code> \u662f Python \u6807\u51c6\u5e93\u63d0\u4f9b\u7684\u4e00\u4e2a\u6d4b\u8bd5\u6846\u67b6\uff0c\u6709\u70b9\u662f\u7b80\u5355\u65b9\u4fbf\uff0c\u8bed\u8a00\u80fd\u529b\u5f3a\u7684\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u4e8c\u6b21\u5f00\u53d1\uff0c\u4f7f\u5176\u5728\u5355\u5143\u6d4b\u8bd5\u3001\u63a5\u53e3\u6d4b\u8bd5\u9886\u57df\u5e94\u7528\u5e7f\u6cdb\uff1b</p> <p>\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u81ea\u52a8\u5316\u6d4b\u8bd5\u57fa\u7840\u6a21\u5757\u3001\u81ea\u52a8\u5316\u6d4b\u8bd5\u7ba1\u7406\u6a21\u5757\u3001\u81ea\u52a8\u5316\u6d4b\u8bd5\u7edf\u8ba1\u6a21\u5757\u7b49\u7ec4\u6210\u7684\u5de5\u5177\u96c6\u5408\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#unittest","title":"unittest\u5b9e\u4f8b","text":"<pre><code>import unittest\nclass MytestA(unittest.TestCase):\n@classmethod\ndef setUpClass(cls):\nprint(\"--- \u6211\u662fsetUpClass ----\")\ndef setUp(self):\nprint(\"\u6211\u662fsetup\")\ndef test_a(self):\nprint(\"------- A ----------\")\ndef test_b(self):\nprint(\"------- B ---------\")\ndef tearDown(self):\nprint(\"\u6211\u662fteardown\")\n@classmethod\ndef tearDownClass(cls):\nprint(\"-------\u6211\u662ftearDownClass-------\")\nif __name__ == '__main__':\nunittest.main()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u91cd\u8981\u6982\u5ff5","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#test-case","title":"Test Case","text":"<p>\u4e00\u4e2a\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5c31\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5355\u5143\uff0c\u5305\u542b\u4e86 <code>setUp</code>\u3001<code>run</code>\u3001<code>tearDown</code>\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#test-suite","title":"Test Suite","text":"<p>\u6d4b\u8bd5\u96c6\uff0c\u7528\u6765\u7ec4\u88c5\u6d4b\u8bd5\u7528\u4f8b\uff0c\u901a\u8fc7 <code>addTest</code> \u52a0\u8f7d\u7684 <code>TestCase</code> \u7684 <code>Testsuite</code> \u4e2d\uff0c\u8fd4\u56de\u4e00\u4e2a <code>TestSuite</code> \u5b9e\u4f8b\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#test-runner","title":"Test Runner","text":"<p>\u6267\u884c\uff0c<code>TestTestRunner</code> \u7c7b\u63d0\u4f9b\u7684run()\u65b9\u6cd5\u6765\u6267\u884c\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#test-fixture","title":"Test Fixture","text":"<p>\u73af\u5883\u4fee\u590d\uff0c<code>setUp</code> \u548c <code>tearDown</code>\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u6d4b\u8bd5\u7528\u4f8b\u7ec4\u7ec7","text":"<p>\u83b7\u53d6\u4e0d\u540c\u6a21\u5757\u4e0b\u7684\u6240\u6709\u7528\u4f8b\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#testsuite","title":"<code>TestSuite</code>","text":"<p>\u521b\u5efa\u6d4b\u8bd5\u96c6  <code>testSuite</code>\uff1a</p> <pre><code>suite = unittest.TestSuite()  \n</code></pre> <p>\u6dfb\u52a0\u7528\u4f8b\u5230\u6d4b\u8bd5\u96c6\u4e2d\uff1a</p> <pre><code>suite.addTest(test_login.TestCrmLogin(\"test_login\"))   \nsuite.addTest(test_ex.TestEx(\"test_a\"))\n</code></pre> <p>\u6267\u884c\u6d4b\u8bd5\u96c6\uff1a</p> <pre><code>runner = unittest.TextTestRunner()\nrunner.run(suite)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#discover","title":"<code>discover</code> \u65b9\u6cd5","text":"<pre><code>#\u521b\u5efa\u6d4b\u8bd5\u96c6\ndiscover = unittest.defaultTestLoader.discover(\"cases\",pattern=\"*.py\")\n#\u6267\u884c\u6d4b\u8bd5\u96c6\u5e76\u751f\u6210\u6d4b\u8bd5\u62a5\u544a\nwith open(\"xxx.html\",'wd') as f:\n# \u4f7f\u7528\u4e09\u65b9\u5e93HTMLTestRunner\u6267\u884c\nrunner = HTMLTestRunner.HTMLTestRunner(stream=f,title=\"\u6d4b\u8bd5\u767b\u5f55\",description=\"\u63cf\u8ff0\u4fe1\u606f\")\nrunner.run(discover)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u65ad\u8a00","text":"<p>\u6bcf\u4e2a\u7528\u4f8b\u5f53\u4e2d\u90fd\u9700\u8981\u65ad\u8a00</p> <pre><code>import unittest\nclass MyTest(unittest.TestCase):\ndef test_01(self):\n...\nusername_ele = self.driver.find_element(By.NAME.\"admin\")\nself.assertEqual(\"username\",username_ele,\"message\")\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u53c2\u6570\u5316","text":"<p>1.\u5b89\u88c5 <code>ddt</code>\uff08\u6570\u636e\u9a71\u52a8\u6d4b\u8bd5\uff09\uff1a</p> <pre><code>pip install ddt\n</code></pre> <p>2.\u4f7f\u7528\u65b9\u6cd5</p> <p>\u2460 \u5355\u4e2a\u53c2\u6570</p> <pre><code>import ddt\n@ddt.ddt\nclass TestCrmLogin(unittest.TestCase):\n@ddt.data(\"admin\",\"a\")\ndef test_ddt(self,username)\nprint(username)\n</code></pre> <p>\u5907\u6ce8\uff1a@ddt.data(\"admin\",\"a\")\uff0c\u62ec\u53f7\u91cc\u9762\u6709\u51e0\u4e2a\u5143\u7d20\u5c31\u4f1a\u8dd1\u51e0\u904d</p> <p>\u2461 \u591a\u4e2a\u53c2\u6570</p> <pre><code>import ddt\n@ddt.ddt\nclass TestCrmLogin(unittest.TestCase):\n@ddt.data((\"a\",\"admin123\")\uff0c(\"admin\",\"admin\"))\n@ddt.unpack\ndef test_ddt(self,username,password)\nprint(username,password)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/unittest%E2%80%943%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#page-object","title":"Page Object","text":"<ul> <li>Page Object\u662f\u4e00\u79cd\u81ea\u52a8\u5316\u6d4b\u8bd5\u601d\u60f3\uff0c\u5176\u7406\u5ff5\u662f\u5c06\u9875\u9762\u7684\u4ea4\u4e92\u7ec6\u8282\u5c01\u88c5\u8d77\u6765\uff0c\u4f7f\u7528\u4f8b\u66f4\u5173\u6ce8\u4e1a\u52a1\u800c\u975e\u754c\u9762\u7ec6\u8282\uff0c\u4ece\u800c\u63d0\u9ad8\u6d4b\u8bd5\u6848\u4f8b\u7684\u53ef\u8bfb\u6027\uff0c\u63d0\u9ad8\u9879\u76ee\u7684\u53ef\u7ef4\u62a4\u6027\u3002</li> <li>\u89c4\u8303\u9879\u76ee\u6587\u4ef6\u5939\uff1a   \u2460 <code>driver</code> \u9a71\u52a8\u6587\u4ef6\uff0c\u7528\u6237\u5b58\u653e\u6d4f\u89c8\u5668\u9a71\u52a8\u6587\u4ef6\u7b49\uff1b   \u2461 <code>model</code> \u51fd\u6570\u6587\u4ef6\u5939\uff0c\u542f\u52a8\u6d4f\u89c8\u5668\u7b49\uff1b   \u2462 <code>page</code> \u9875\u9762\u6587\u4ef6\u5939\uff0c\u6240\u6709\u7684\u57fa\u7c7b\uff08\u5b9a\u4f4d\u5668\u3001\u627e\u5143\u7d20\uff09\uff1b   \u2463 <code>testcase</code> \u6d4b\u8bd5\u7528\u4f8b\uff0c\u7528\u4f8b\u7684\u57fa\u7c7b\uff1b   \u2464 \u5b58\u653e\u6d4b\u8bd5\u62a5\u544a\uff0c\u622a\u56fe\u7b49\u6d4b\u8bd5\u7ed3\u679c\u6587\u4ef6\uff1b</li> <li>\u4e00\u4e2a\u9875\u9762\u4e00\u4e2a\u7c7b\uff0c\u4e00\u4e2a\u5143\u7d20\u4e00\u4e2a\u65b9\u6cd5\u3002</li> </ul>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/","title":"MMDetection \u5165\u95e8\u57fa\u7840","text":"<pre><code># =============================================\n# Author : Mikigo\n# =============================================\n</code></pre> <p>MMDetection \u662f\u5546\u6c64\u79d1\u6280\u5f00\u6e90\u7684\u4e00\u4e2a\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\uff0c\u56fd\u5185\u76ee\u6807\u68c0\u6d4b\u9886\u57df\u7684\u7fd8\u695a\uff1b</p> <p>\u76f8\u6bd4\u4e8e Facebook \u5f00\u6e90\u7684 Detectron \u6846\u67b6\uff0c\u4f5c\u8005\u58f0\u79f0 MMDetection \u6709\u4e09\u70b9\u4f18\u52bf\uff1aperformance \u7a0d\u9ad8\u3001\u8bad\u7ec3\u901f\u5ea6\u7a0d\u5feb\u3001\u6240\u9700\u663e\u5b58\u7a0d\u5c0f\u3002</p> <p>\u4f4e\u8c03\u54c8\uff0c\u57fa\u64cd\uff0c\u7686\u5750\uff0c\u52ff6\uff0c\u53c8\u88ab\u4ed6\u88c5\u5230\u4e86\uff5e</p> <p>Github\u5730\u5740\uff1ahttps://github.com/open-mmlab/mmdetection</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_1","title":"\u4e00\u3001\u865a\u62df\u73af\u5883\u5b89\u88c5","text":"<pre><code>cd ~\nwget -c https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh\nbash Miniconda3-latest-Linux-x86_64.sh\n</code></pre> <p>\u4e00\u8def\u56de\u8f66</p> <p>\u7b2c\u4e00\u6b21\u63d0\u793a\u8f93\u5165  yes/no \uff1a\u8f93\u5165  <code>yes</code></p> <p>\u7ee7\u7eed\u4e00\u8def\u56de\u8f66</p> <p>\u7b2c\u4e8c\u6b21\u63d0\u793a\uff1a\u8f93\u5165  <code>no</code></p> <pre><code>cd ~/miniconda3/bin\nsudo chmod 777 activate\n</code></pre> <p>\u6fc0\u6d3bconda\u73af\u5883</p> <pre><code>. ./activate\n</code></pre> <p>\u6dfb\u52a0\u516c\u53f8\u5185\u7f51\u6e90</p> <pre><code>conda config --add channels bioconda\nconda config --add channels conda-forge\n</code></pre> <p>\u5982\u679c\u662f\u5916\u7f51\u6dfb\u52a0\u5916\u7f51\u6e90</p> <pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/\n</code></pre> <p>\u5982\u679c\u8981\u5220\u9664\u6e90</p> <pre><code>conda config --remove-key channels\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_2","title":"\u4e8c\u3001\u5b89\u88c5\u4f9d\u8d56","text":""},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#1","title":"1\u3001\u521b\u5efa\u865a\u62df\u73af\u5883","text":"<p><pre><code>conda remove --name mmlab --all # \u79fb\u9664\u6240\u6709\u865a\u62df\u73af\u5883\n</code></pre> <pre><code>conda create -n mmlab python=3.7\n</code></pre></p> <pre><code>conda activate mmlab\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#2-pytorch","title":"2\u3001\u5b89\u88c5 Pytorch","text":"<p>\u5728mmlab\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c</p> <pre><code>pip install torch==1.7.0+cu101 torchvision==0.8.1+cu101 torchaudio==0.7.0 -f https://download.pytorch.org/whl/torch_stable.html -i http://pypi.douban.com/simple --trusted-host pypi.douban.com\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#3-mmcv","title":"3\u3001\u5b89\u88c5 MMCV","text":"<p>\u5728mmlab\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c</p> <pre><code>pip install mmcv-full==1.3.3 -f https://download.openmmlab.com/mmcv/dist/cu101/torch1.7.0/index.html -i http://pypi.douban.com/simple --trusted-host pypi.douban.com\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#4","title":"4\u3001\u5b89\u88c5\u663e\u5361\u9a71\u52a8","text":"<p>\u663e\u5361\u4e3a <code>GTX1660</code>\uff0c\u9a71\u52a8\u7248\u672c\u4e3a 430\uff0c\u9a71\u52a8\u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.nvidia.cn/Download/Find.aspx?lang=cn</p> <pre><code>CTRL+ALT+F2 \u8fdb\u5165tty\n</code></pre> <p>\u7981\u7528 nouveau \u9a71\u52a8</p> <pre><code>sudo vim /etc/modprobe.d/blacklist-nouveau.conf\n</code></pre> <p>\u586b\u5165\uff1a</p> <pre><code>blacklist nouveau options nouveau modeset=0\n</code></pre> <p>\u5237\u65b0\u914d\u7f6e\u6587\u4ef6</p> <pre><code>sudo update-initramfs -u </code></pre> <p>reboot \u91cd\u542f\u540e\u518d\u8fdb\u5165 tty</p> <p>\u5173\u95ed\u56fe\u50cf\u754c\u9762\uff0c\u8f93\u5165\u547d\u4ee4\u5173\u95ed\u56fe\u50cf\u754c\u9762</p> <pre><code>sudo service lightdm stop\n</code></pre> <p>\u5b89\u88c5\u9a71\u52a8</p> <pre><code>sudo chmod a+x NVIDIA-Linux-x86_64-430.run\nsudo ./NVIDIA-Linux-x86_64-430.run\n</code></pre> <p>reboot\u91cd\u542f\uff0cnvidia-smi\u67e5\u770b\u5b89\u88c5\u72b6\u6001\u3002\u6ce8\u610f\u770b\u4e0bcuda\u7248\u672c\uff0c10.1\uff0cdriver\u7248\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_3","title":"\u4e09\u3001\u6570\u636e\u6807\u6ce8","text":"<p>\u6807\u6ce8\u4e4b\u524d\u9700\u8981\u5148\u8f6c\u6362\u56fe\u7247\u5927\u5c0f\uff0c\u5e76\u4e14\u4ee5\u6570\u5b57\u547d\u540d\uff0c\u6bcf\u7ec4\u547d\u540d\u9012\u589e</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#1_1","title":"1\u3001\u8f6c\u6362\u5927\u5c0f\u5e76\u91cd\u547d\u540d","text":"<p>rename_pic.py</p> <pre><code>import os\nimport sys\nimport cv2\nimport time\nimport getpass\nusername = getpass.getuser()\nsource_path = f\"/home/{username}/Desktop/right_menu\" # \u56fe\u7247\u8def\u5f84\nsource_dest = os.path.join('/'.join(source_path.split(\"/\")[:-1]), 'tmp')\nif not os.path.exists(source_dest):\nos.mkdir(source_dest)\nstart_name = sys.argv[1]\nfile_name_list = list()\nfor file in os.listdir(source_path):\nif file.endswith('.png'):\nfile_name_list.append(file)\nstart_name = int(start_name)\nfor file in file_name_list:\nos.rename(os.path.join(source_path,file), os.path.join(source_path, f\"{str(start_name)}.png\"))\nstart_name += 1\ntime.sleep(1)\nfor file in os.listdir(source_path):\nimage = os.path.join(source_path, str(file))\nsrc = cv2.imread(image)\nresult = cv2.resize(src, (960, 540))\nresizeImage = os.path.join(source_dest, str(file))\nprint(resizeImage)\ncv2.imwrite(str(resizeImage), result)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\ntime.sleep(1)\nos.system(f'rm -rf {source_path}/*')\nos.system(f'mv {source_dest}/* {source_path}')\nos.system(f'rm -rf {source_dest}')\nprint(\"\u4e0b\u4e00\u4e2a\u5e8f\u53f7\uff1a\", start_name)\n</code></pre> <p>\u6839\u636e\u7ec8\u7aef\u8f93\u51fa\u7684\u4e0b\u4e00\u4e2a\u5e8f\u53f7\u7684\u63d0\u793a\uff0c\u6267\u884c Python \u6587\u4ef6\u7684\u65f6\u5019\u4f20\u53c2\u3002</p> <pre><code>python rename_pic.py 249\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#2","title":"2\u3001\u5de5\u5177\u6807\u6ce8","text":"<p>\u4f7f\u7528\u5de5\u5177 labelImg \u6807\u6ce8</p> <pre><code>sudo pip3 install PyQt5==5.13\nsudo pip3 install labelImg\n</code></pre> <p>\u7ec8\u7aef\u76f4\u63a5\u8f93\u5165 labelImg\uff0c\u56de\u8f66</p> <p>\u6807\u6ce8\u6a21\u5f0f\u9009\u62e9\uff1a<code>PascalVOC</code></p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#mmdetection_1","title":"\u56db\u3001\u62c9\u53d6 MMDetection \u4ee3\u7801","text":"<pre><code>cd ~/Documents\ngit clone https://github.com/open-mmlab/mmdetection.git\n# \u4e0d\u80fd\u76f4\u63a5\u62c9\u53d6\u4e3b\u5206\u652f\uff0c\u5efa\u8bae\u4f7f\u75282.12\u7248\u672c\uff0c\u4e0d\u540c\u7684\u7248\u672c\u5bf9\u5e94\u7684mmcv\u7248\u672c\u662f\u4e0d\u540c\u7684\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#voc2coco","title":"\u4e94\u3001\u62c9\u53d6 voc2coco \u4ee3\u7801","text":"<pre><code>cd ~/Documents\ngit clone https://github.com/Tony607/voc2coco.git\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#coco","title":"\u516d\u3001\u8f6c\u6362 coco \u6570\u636e\u96c6","text":"<p>\u5c06\u6240\u6709\u7684\u56fe\u7247\u548cxml\u6587\u4ef6\u653e\u5165train2017\uff0c\u4ece\u4e2d\u6311\u9009\u51e0\u7ec4\u653e\u5165val2017\uff08\u6d4b\u8bd5\u96c6\uff09</p> <pre><code>cd mmdetection/data/coco\npython voc2coco.py train2017 annotations/instances_train2017.json\npython voc2coco.py val2017 annotations/instances_val2017.json\n</code></pre> <p>\u751f\u6210json\u6587\u4ef6</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_4","title":"\u4e03\u3001\u4fee\u6539\u914d\u7f6e","text":""},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#1_2","title":"1\u3001\u8bfb\u53d6\u6a21\u578b\u540d\u79f0","text":"<pre><code>import json\nmodule_name = []\nwith open('./instances_train2017.json', \"r+\") as f:\njson_file = f.read()\njson_dict = json.loads(json_file)\nmodule_list = json_dict.get('categories')\nfor module_info in module_list:\nname = module_info.get('name')\nmodule_name.append(name)\nprint(module_name)\nprint(\"module_num:\", len(module_name))\n</code></pre> <pre><code># \u6ce8\u610f\u5bf9\u6bd4instances_train2017.json\u91cc\u9762\u6a21\u578b\u540d\u79f0\u7684\u987a\u5e8f\uff0c\u4e0eCLASSES\u548ccoco_classes\u91cc\u9762\u7684\u987a\u5e8f\u4fdd\u6301\u4e00\u81f4\u3002\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#2-faster_rcnn_r101_2x_cocopy","title":"2\u3001\u4fee\u6539 faster_rcnn_r101_2x_coco.py","text":"<p><code>mmdetection/xianjin/faster_rcnn_r101_2x_coco.py</code></p> <p>\u4fee\u653946\u884c\uff0c<code>num_clasess</code>\u7684\u6307\uff0c\u65b0\u589e1\u4e2a\uff0c\u5c31+1</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#3-cocopy","title":"3\u3001\u4fee\u6539 coco.py","text":"<p><code>mmdetection/mmdet/datasets/coco.py</code></p> <p>CLASSES = ()\uff0c\u5728\u91cc\u9762\u6dfb\u52a0\u6a21\u578b\u540d\u79f0</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#4-class_namespy","title":"4\u3001\u4fee\u6539 class_names.py","text":"<p><code>mmdetection/mmdet/core/evaluation/class_names.py</code></p> <p><code>coco_classes</code> \u91cc\u9762\u6dfb\u52a0\u6a21\u578b\u540d\u79f0</p>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_5","title":"\u516b\u3001\u7f13\u5b58\u6e05\u7406","text":"<p>\u5220\u9664 mmdetection/build \u76ee\u5f55</p> <pre><code>python setup.py install\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_6","title":"\u4e5d\u3001\u8bad\u7ec3\u6a21\u578b","text":""},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_7","title":"\u6307\u5b9a\u81ea\u5df1\u914d\u7f6e\u7684\u8bad\u7ec3\u6a21\u578b","text":"<pre><code>python tools/train.py xianjin/faster_rcnn_r101_fpn_2x_coco.py --gpus 1\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_8","title":"\u67e5\u770b\u8bad\u7ec3\u7ed3\u679c\u7684\u6d4b\u8bd5\u96c6\u7ed3\u679c","text":"<pre><code>python tools/train.py xianjin/faster_rcnn_r101_fpn_2x_coco.py xianjin/epoch_24.pth --show\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_9","title":"\u67e5\u770b\u8bad\u7ec3\u7ed3\u679c\u7684\u51c6\u786e\u5ea6","text":"<pre><code>python tools/analysis_tools/analyze_logs.py plot_curve xianjin/20210530_011907.log.json --keys acc\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/MMDetection%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/#_10","title":"\u5341\u3001\u5feb\u6377\u64cd\u4f5c","text":"<pre><code>python run.py\n</code></pre> <p>run.py \u6574\u5408\u4e86\u4ee5\u4e0a\u6240\u6709\u7684\u64cd\u4f5c\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"OpenCV(Python)\u57fa\u7840\u20149\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================================\n# Author : Mikigo\n# =============================================\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u4e00\u53e5\u8bdd\u7b80\u4ecb","text":"<p><code>OpenCV (Open Source Computer Vision Library)</code> \u662f\u7528 <code>C++</code> \u8bed\u8a00\u7f16\u5199\uff0c\u63d0\u4f9b <code>Python</code>\u3001<code>Java</code> \u7b49\u8bed\u8a00 <code>API</code>\u7684\u4e00\u4e2a\u5f00\u6e90\u8ba1\u7b97\u673a\u89c6\u89c9\u5e93\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>1\u3001<code>Debian</code> \u7cfb\u4f7f\u7528 <code>apt</code> \u5b89\u88c5 <code>OpencCV</code>\uff1a</p> <pre><code>sudo apt install python-opencv\n</code></pre> <p>\u5728 <code>UOS</code> \u7cfb\u7edf\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>sudo apt install python3-opencv\n</code></pre> <p>\u652f\u6301 <code>AMD</code>\u3001<code>ARM</code>\u3001<code>MIPS</code> \u67b6\u6784\u5b89\u88c5\u3002</p> <p>2\u3001\u5b89\u88c5 <code>NumPy</code>\uff1a</p> <p><code>NumPy</code> \u662f Python\u4e2d\u7684\u4e00\u4e2a\u8fd0\u7b97\u901f\u5ea6\u975e\u5e38\u5feb\u7684\u6570\u5b66\u5e93\uff0c\u6570\u7ec4\u73a9\u5230\u8d77\u98de\uff0c\u5982\u679c\u4f60\u73a9\u6570\u636e\u79d1\u5b66\u3001\u673a\u5668\u5b66\u4e60\uff0c\u8fd9\u662f\u5fc5\u5b66\u5e93\u3002\u6240\u6709 <code>OpenCV</code> \u6570\u7ec4\u7ed3\u6784\u90fd\u8f6c\u6362\u4e3a <code>NumPy</code> \u6570\u7ec4\uff0c\u8981\u60f3 <code>OpenCV</code> \u5b66\u5f97\u597d\uff0c\u5fc5\u987b\u719f\u6089\u5b83\uff0c\u5b66\u4e60 <code>OpenCV</code> \u57fa\u7840\u591a\u5c11\u9700\u8981\u4e86\u89e3\u4e00\u70b9\u3002</p> <pre><code>sudo apt -y install python3-numpy\n</code></pre> <p>\u597d\u591a\u540c\u5b66\u5b89\u88c5 <code>Python</code> \u5e93\u90fd\u4e60\u60ef\u4f7f\u7528 <code>pip</code> \u5b89\u88c5\uff0c\u5b9e\u9645\u4e0a <code>OpenCV</code> \u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u76ee\u524d\u53ea\u652f\u6301\u5728 <code>AMD</code>\uff0c\u6240\u4ee5\u8003\u8651\u5230\u517c\u5bb9\u6027\u8fd8\u662f\u5efa\u8bae\u4f7f\u7528 <code>apt</code> \u8fdb\u884c\u5b89\u88c5\uff0c\u5e76\u4e14\u5b98\u65b9\u6587\u6863\u4e5f\u662f\u5efa\u8bae\u4f7f\u7528 <code>apt</code> \u5b89\u88c5\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u5165\u95e8\u57fa\u7840","text":"<p>\u6240\u6709 <code>OpenCV</code> \u7c7b\u548c\u51fd\u6570\u90fd\u653e\u5728 <code>cv</code> \u540d\u79f0\u7a7a\u95f4\u4e2d\uff0c\u5728 <code>py</code> \u6587\u4ef6\u4e2d\u5bfc\u5165\uff1a</p> <pre><code>import cv2 as cv\n</code></pre> <p>\u540e\u7eed\u5185\u5bb9\u9ed8\u8ba4\u90fd\u4f7f\u7528\u4e86\u5bfc\u5165\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u56fe\u50cf","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11","title":"1.1\u3001\u8bfb\u56fe\u50cf","text":"<pre><code>img = cv.imread()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u6587\u4ef6\u8def\u5f84\u3002(str)</li> <li>\u53c2\u65702\uff1a\u8bfb\u53d6\u56fe\u50cf\u7684\u65b9\u5f0f\u3002</li> <li>cv.IMREAD_COLOR \u52a0\u8f7d\u4e00\u4e2a\u5f69\u8272\u56fe\u50cf\uff0c\u5ffd\u7565 alpha \u901a\u9053\u3002\uff08\u9ed8\u8ba4\u503c\uff09</li> <li>cv.IMREAD_GRAYSCALE \u52a0\u8f7d\u56fe\u50cf\u4e3a\u7070\u5ea6\u6a21\u5f0f\u3002</li> <li>cv.IMREAD_UNCHANGED \u52a0\u8f7d\u56fe\u50cf\uff0c\u5305\u62ec alpha \u901a\u9053\u3002</li> <li>\u8fd8\u53ef\u4ee5\u7b80\u5355\u5730\u5206\u522b\u4f20\u9012\u6574\u65701\u30010\u6216 -1\u3002</li> </ul>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12","title":"1.2\u3001\u663e\u793a\u56fe\u50cf","text":"<pre><code>cv.show()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u7a97\u53e3\u540d\u79f0\u3002\uff08str\uff09</li> <li>\u53c2\u65702\uff1a\u56fe\u50cf\u3002\uff08obj\uff09</li> </ul> <p>\u5728\u7a97\u53e3\u4e2d\u663e\u793a\u56fe\u50cf\uff0c\u7a97\u53e3\u81ea\u52a8\u9002\u5408\u56fe\u50cf\u5927\u5c0f\u3002</p> <p>\u9500\u6bc1\u7a97\u53e3</p> <pre><code>cv.destroyAllWindows() # \u9500\u6bc1\u6240\u6709\u7a97\u53e3\ncv.destroyWindow(\"window_name\") # \u9500\u6bc1\u67d0\u4e2a\u7a97\u53e3\uff0c\u53c2\u6570\u4f20\u5165\u7a97\u53e3\u540d\u79f0\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#13","title":"1.3\u3001\u5199\u56fe\u50cf","text":"<pre><code>cv.imwrite()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u6587\u4ef6\u540d\u3002</li> <li>\u53c2\u65702\uff1a\u56fe\u50cf\u3002\uff08obj\uff09</li> </ul>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u89c6\u9891","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21","title":"2.1\u3001\u4ece\u6444\u50cf\u5934\u6355\u83b7\u89c6\u9891","text":"<pre><code>cap = cv.VideoCapture(0)\n</code></pre> <p>\u5b83\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u8bbe\u5907\u7d22\u5f15\u6216\u89c6\u9891\u6587\u4ef6\u7684\u540d\u79f0\u3002\u8bbe\u5907\u7d22\u5f15\u5c31\u662f\u6307\u5b9a\u54ea\u4e2a\u6444\u50cf\u5934\u7684\u6570\u5b57\u3002\u4e00\u822c\u6211\u4eec\u8fde\u63a5\u4e00\u4e2a\u6444\u50cf\u5934\uff0c\u6240\u4ee5\u4f200(\u6216-1)\u3002\u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u4f20\u90121\u6765\u9009\u62e9\u7b2c\u4e8c\u4e2a\u76f8\u673a\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <pre><code>import cv2 as cv\ncap = cv.VideoCapture(0)\n# \u5224\u65ad\u662f\u5426\u6253\u5f00\nif not cap.isOpened(): \nexit()\nwhile True:  \n# \u9010\u5e27\u6355\u83b7\nret, frame = cap.read()  \n# \u5224\u65ad\u662f\u5426\u8bfb\u53d6\u5230\nif not ret:  \nbreak\n# \u8f6c\u7070\u5ea6\ngray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)\n# \u663e\u793a\u56fe\u50cf\ncv.imshow('frame', gray)\n# \u76d1\u63a7\u952e\u76d8\u4fe1\u53f7\nif cv.waitKey(1) == ord('q'):\nbreak\n# \u91ca\u653e\ncap.release()\ncv.destroyAllWindows()\n</code></pre> <p>\u4e00\u5207\u90fd\u770b\u8d77\u6765\u5f88\u548c\u8c10\u54c8\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u5176\u4ed6\u7684\u4e24\u4e2a\u5224\u65ad\uff1a</p> <ul> <li>\u6709\u65f6\u5019\u6444\u50cf\u5934\u53ef\u80fd\u6ca1\u6709\u521d\u59cb\u5316\u6210\u529f\uff0c\u6240\u4ee5\u7528<code>cap.isOpened()</code> \u6765\u5224\u65ad\uff0c\u5e76\u9000\u51fa\u3002</li> <li>\u53ef\u80fd\u6ca1\u6709\u63a5\u6536\u5230\u5e27\uff0c\u505c\u6b62\u5faa\u73af\u3002</li> </ul> <p>\u83b7\u53d6\u89c6\u9891\u7684\u4e00\u4e9b\u5c5e\u6027\uff1a</p> <pre><code>cap.get(id)\n</code></pre> <p><code>id</code> \u662f\u4e00\u4e2a\u4ece0\u523018\u7684\u6570\u5b57\uff0c\u6bcf\u4e2a\u6570\u5b57\u8868\u793a\u89c6\u9891\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u6bcf\u4e2a\u5c5e\u6027\u4ee3\u8868\u4ec0\u4e48\u2192\uff08https://docs.opencv.org/4.1.2/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d\uff09</p> <p><code>cap.set()</code> \u5c5e\u4e8e\u8fdb\u9636\u7528\u6cd5\uff0c\u8fd9\u91cc\u6309\u4e0b\u4e0d\u8868\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22","title":"2.2\u3001\u4ece\u6587\u4ef6\u4e2d\u64ad\u653e\u89c6\u9891","text":"<p>\u539f\u7406\u548c\u4ece\u6444\u50cf\u5934\u4e2d\u6355\u83b7\u662f\u4e00\u6837\u7684\uff0c\u533a\u522b\u5728\u4e8e\uff1a</p> <pre><code>cap = cv.VideoCapture('vtest.avi')\n</code></pre> <p>\u53c2\u6570\u662f\u6587\u4ef6\u540d\u79f0\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#23","title":"2.3\u3001\u4fdd\u5b58\u89c6\u9891","text":"<pre><code>out = VideoWriter()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u6587\u4ef6\u540d</li> <li>\u53c2\u65702\uff1afourcc = cv.VideoWriter_fourcc(*'XVID')</li> <li>FourCC \u662f\u4e00\u4e2a4\u5b57\u8282\u7684\u4ee3\u7801\uff0c\u7528\u4e8e\u6307\u5b9a\u89c6\u9891\u7f16\u89e3\u7801\u5668\u3002</li> <li>DIVX, XVID, MJPG, X264, WMV1, WMV2</li> <li>\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u6709\u5dee\u5f02 https://www.fourcc.org/codecs.php</li> <li>\u53c2\u65703\uff1a\u5e27\u7387</li> <li>\u53c2\u65703\uff1a\u5206\u8fa8\u7387</li> </ul> <pre><code>import cv2 as cv\ncap = cv.VideoCapture(0)\nfourcc = cv.VideoWriter_fourcc(*'XVID')\nout = cv.VideoWriter('output.avi', fourcc, 20.0, (640,  480))\nwhile cap.isOpened():\nret, frame = cap.read()\nif not ret:\nbreak\n# \u65cb\u8f6c\u540e\u5199\u5165\nframe = cv.flip(frame, 0)\nout.write(frame)\ncv.imshow('frame', frame)\nif cv.waitKey(1) == ord('q'):\nbreak\n# \u91ca\u653e\ncap.release()\nout.release()\ncv.destroyAllWindows()\n</code></pre> <p>\u7ed3\u5408\u524d\u9762\u6444\u50cf\u5934\u6355\u83b7\u89c6\u9891\u7684\u4ee3\u7801\uff0c\u770b\u8d77\u6765\u5f88\u7b80\u5355\uff5e</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u7ed8\u56fe","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#31","title":"3.1\u3001\u753b\u7ebf","text":"<pre><code>cv.line()\n</code></pre> <p>\u4e3e\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u9ed1\u8272\u56fe\u50cf\uff0c\u5e76\u4ece\u5de6\u4e0a\u89d2\u5230\u53f3\u4e0b\u89d2\u5728\u4e0a\u9762\u753b\u4e00\u6761\u84dd\u7ebf</p> <pre><code>import numpy as np\nimport cv2 as cv\n# \u5199\u4e00\u4e2a\u9ed1\u8272\u7684\u56fe\u50cf\nimg = np.zeros((512,512,3), np.uint8)\n# \u753b\u4e00\u68395\u50cf\u7d20\u6b3e\u7684\u84dd\u7ebf\ncv.line(img,(0,0),(511,511),(255,0,0),5)\n</code></pre> <p>(255,0,0) \u4ee3\u8868\u84dd\u8272\uff0c\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u662f\u7ebf\u7684\u5bbd\u5ea6\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#32","title":"3.2\u3001\u753b\u5706","text":"<pre><code>cv.circle(img,(447,63), 63, (0,0,255), -1)\n</code></pre> <p>\u53c2\u6570\uff1a\u4e2d\u5fc3\u5750\u6807\u548c\u534a\u5f84</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#33","title":"3.3\u3001\u753b\u77e9\u5f62","text":"<pre><code>cv.rectangle(img,(384,0),(510,128),(0,255,0),3)\n</code></pre> <p>\u53c2\u6570\uff1a\u77e9\u5f62\u7684\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2</p> <p>\u652f\u6301\u5176\u4ed6\u56fe\u5f62\u3002\u3002\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u6838\u5fc3\u529f\u80fd","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_1","title":"1\u3001\u56fe\u50cf\u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11_1","title":"1.1\u3001\u8bbf\u95ee\u548c\u4fee\u6539\u50cf\u7d20\u503c","text":"<pre><code>import numpy as np  # \u5b98\u65b9\u5efa\u8bae\u56fa\u5b9a\u5199\u6cd5\nimport cv2 as cv\nimg = cv.imread('messi5.jpg')\npx = img[100,100]  \n# (100, 100)\u7684\u50cf\u7d20\u503c[157 166 200]\uff08B\u3001G\u548cR\u503c\uff09\nblue = img[100,100,0] \n</code></pre> <p>\u4fee\u6539</p> <pre><code>img[100,100] = [255,255,255]\n</code></pre> <p>\u76f4\u63a5\u8d4b\u503c\u5373\u53ef\u4fee\u6539\uff0c\u4f46\u662f\u76f4\u63a5\u8bbf\u95ee\u975e\u5e38\u7f13\u6162\uff0c\u66f4\u597d\u7684\u50cf\u7d20\u8bbf\u95ee\u548c\u7f16\u8f91\u65b9\u6cd5:</p> <pre><code>img.item(10,10,2)  # \u8bbf\u95eeR\u503c\nimg.itemset((10,10,2),100)  # \u4fee\u6539R\u503c\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12_1","title":"1.2\u3001\u8bbf\u95ee\u56fe\u50cf\u5c5e\u6027","text":"<p>\u56fe\u50cf\u5c5e\u6027\u5305\u62ec\u884c\u6570\u3001\u5217\u6570\u548c\u901a\u9053\u6570\u3001\u56fe\u50cf\u6570\u636e\u7c7b\u578b\u3001\u50cf\u7d20\u6570\u7b49\u3002</p> <pre><code>img.shape\n# (342,548,3)\n</code></pre> <p>\u8fd4\u56de\u4e00\u4e2a\u884c\u3001\u5217\u548c\u901a\u9053\u6570\u7684\u5143\u7ec4\u3002</p> <pre><code>img.size  # \u8bbf\u95ee\u50cf\u7d20\u603b\u6570\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#13_1","title":"1.3\u3001\u7279\u5b9a\u533a\u57df","text":"<p>\u673a\u5668\u5b66\u4e60\u4e2d\u7ecf\u5e38\u9700\u8981\u62a0\u56fe\uff0c\u6bd4\u5982\u4eba\u8138\u8bc6\u522b\u65f6\uff0c\u4e00\u822c\u4f1a\u5148\u9009\u62e9\u4eba\u8138\u533a\u57df\uff0c\u641c\u7d22\u5176\u4e2d\u7684\u773c\u775b\uff0c\u800c\u4e0d\u662f\u641c\u7d22\u6574\u4e2a\u56fe\u50cf\uff0c\u4ee5\u63d0\u4f9b\u7cbe\u786e\u5ea6\u3002</p> <pre><code>ball = img[280:340, 330:390] # \u62a0\u4e00\u4e2a\u533a\u57df\nimg[273:333, 100:160] = ball # \u590d\u5236\u5230\u53e6\u4e00\u4e2a\u533a\u57df\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#14","title":"1.4\u3001\u56fe\u50cf\u4fe1\u9053\u7684\u5206\u88c2\u4e0e\u5408\u5e76","text":"<pre><code>b,g,r = cv.split(img)  # \u5206\u88c2\nimg = cv.merge((b,g,r))  # \u5408\u5e76\n</code></pre> <p>\u6216\u8005</p> <pre><code>b = img[:,:,0]\n</code></pre> <p>\u6bd4\u5982\u5c06\u6240\u6709\u7ea2\u8272\u50cf\u7d20\u8bbe\u7f6e\u4e3a\u96f6</p> <pre><code>img[:,:,2] = 0\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_1","title":"2\u3001\u56fe\u50cf\u7684\u7b97\u672f\u8fd0\u7b97","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21_1","title":"2.1\u3001\u56fe\u7247\u6dfb\u52a0","text":"<pre><code>cv.add()\n</code></pre> <p>\u53ef\u4ee5\u6dfb\u52a0\u4e24\u4e2a\u56fe\u50cf</p> <pre><code>x = np.uint8([250])\ny = np.uint8([10])\ncv.add(x + y)  # 250+10 = 260 =&gt; 255\n</code></pre> <p>OpenCV \u7684\u52a0\u6cd5\u548c Numpy \u7684\u52a0\u6cd5\u662f\u6709\u533a\u522b\u7684\u3002OpenCV \u52a0\u6cd5\u662f\u4e00\u4e2a\u9971\u548c\u64cd\u4f5c\uff0c\u800c Numpy \u52a0\u6cd5\u662f\u4e00\u4e2a\u9664\u4f59\u64cd\u4f5c\u3002</p> <pre><code>x + y  # 250+10 = 260 % 256 = 4\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22_1","title":"2.2\u3001\u56fe\u50cf\u6df7\u5408","text":"<pre><code>cv.addWeighted()\n</code></pre> <p>\u4e5f\u662f\u56fe\u50cf\u6dfb\u52a0\uff0c\u4f46\u4e0d\u540c\u7684\u6743\u91cd\u7ed9\u4e88\u56fe\u50cf\uff0c\u4f7f\u5b83\u7ed9\u4eba\u4e00\u79cd\u6df7\u5408\u6216\u900f\u660e\u7684\u611f\u89c9\u3002</p> <ul> <li>\u53c2\u65701\u30012\uff1a\u56fe\u50cf1\u53ca\u5176\u6743\u91cd\u3002</li> <li>\u53c2\u65703\u30014\uff1a\u56fe\u50cf2\u53ca\u5176\u6743\u91cd\u3002</li> <li>\u53c2\u65705\uff1a\u56fe\u50cf\u6df7\u5408\u7684\u03b1 \u503c\uff0c\u901a\u8fc7\u6539\u53d8 \u03b1 \u4ece0\u21921\uff0c\u4f60\u53ef\u4ee5\u5728\u4e00\u5f20\u56fe\u7247\u5230\u53e6\u4e00\u5f20\u56fe\u7247\u4e4b\u95f4\u8fdb\u884c\u4e00\u4e2a\u5f88\u9b54\u5e7b\u7684\u8f6c\u6362\u3002</li> </ul> <pre><code>img1 = cv.imread('ml.png')\nimg2 = cv.imread('opencv-logo.png')\n# \u7b2c\u4e00\u5e45\u56fe\u50cf\u7684\u6743\u91cd\u4e3a0.7\uff0c\u7b2c\u4e8c\u5e45\u56fe\u50cf\u7684\u6743\u91cd\u4e3a0.3\ndst = cv.addWeighted(img1,0.7,img2,0.3,0)\ncv.imshow('dst',dst)\ncv.waitKey(0)\ncv.destroyAllWindows()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#23_1","title":"2.3\u3001\u6309\u4f4d\u64cd\u4f5c","text":"<p>\u6309\u4f4d AND\u3001 OR\u3001 NOT \u548c XOR \u64cd\u4f5c\u3002</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u56fe\u50cf\u7684\u903b\u8f91\u8fd0\u7b97\uff1a</p> <pre><code>img1 = cv.imread('messi5.jpg')\nimg2 = cv.imread('opencv-logo-white.png')\n# \u628a\u6807\u5fd7\u653e\u5728\u5de6\u4e0a\u89d2\uff0c\u6240\u4ee5\u521b\u5efa\u4e86\u4e00\u4e2aroi\nrows,cols,channels = img2.shape\nroi = img1[0:rows, 0:cols ]\n# \u521b\u5efa\u4e00\u4e2a\u6807\u5fd7\u56fe\u6848\uff0c\u4ee5\u53ca\u5b83\u7684\u53cd\u9762\nimg2gray = cv.cvtColor(img2,cv.COLOR_BGR2GRAY) # \u7070\u5ea6\u5904\u7406\nret, mask = cv.threshold(img2gray, 10, 255, cv.THRESH_BINARY)\nmask_inv = cv.bitwise_not(mask)\n# \u9ed1\u6389 ROI \u4e2d\u7684 logo \u533a\u57df\nimg1_bg = cv.bitwise_and(roi,roi,mask = mask_inv)\n# \u53ea\u53d6\u6807\u5fd7\u56fe\u50cf\u4e2d\u7684\u6807\u5fd7\u533a\u57df\nimg2_fg = cv.bitwise_and(img2,img2,mask = mask)\n# \u5c06 logo \u653e\u5165 ROI \u4e2d\uff0c\u5e76\u4fee\u6539\u4e3b\u56fe\u50cf\ndst = cv.add(img1_bg,img2_fg)\nimg1[0:rows, 0:cols ] = dst\ncv.imshow('res',img1)\ncv.waitKey(0)\ncv.destroyAllWindows()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u56fe\u50cf\u5904\u7406","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_2","title":"1\u3001\u6539\u53d8\u8272\u5f69\u7a7a\u95f4","text":"<p>OpenCV \u76ee\u524d\u6709150\u591a\u79cd\u989c\u8272\u7a7a\u95f4\u8f6c\u6362\u65b9\u6cd5\u3002\u4f46\u5176\u4e2d\u4e24\u4e2a\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\uff1a</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11gray","title":"1.1\u3001Gray","text":"<p><code>cv.COLOR_BGR2GRAY</code></p> <p>\u987e\u540d\u601d\u4e49\uff1aBGR \u2192 Gray </p> <p>\u8fd9\u4e2a\u56fe\u50cf\u8bc6\u522b\u4e2d\u7ecf\u5e38\u4f7f\u7528\uff0c\u53ef\u4ee5\u63d0\u4f9b\u8bc6\u522b\u901f\u5ea6\u548c\u51c6\u786e\u5ea6\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12hsv","title":"1.2\u3001HSV","text":"<p><code>cv.COLOR_BGR2HSV</code></p> <p>\u987e\u540d\u601d\u4e49\uff1aBGR \u2192 HSV</p> <p>HSV \u56fe\u50cf\u53ef\u4ee5\u7528\u5b83\u6765\u63d0\u53d6\u6709\u8272\u7269\u4f53\u5728 HSV \u4e2d\uff0c\u6bd4\u5728 BGR \u989c\u8272\u7a7a\u95f4\u4e2d\u66f4\u5bb9\u6613\u8868\u793a\u989c\u8272\u3002</p> <pre><code>import cv2 as cv\nimport numpy as np\ncap = cv.VideoCapture(0)\nwhile True:\n# \u53d6\u51fa\u89c6\u9891\u7684\u6bcf\u4e00\u5e27\n_, frame = cap.read()\n# \u4ece BGR \u5230 HSV \u989c\u8272\u7a7a\u95f4\u7684\u8f6c\u6362\nhsv = cv.cvtColor(frame, cv.COLOR_BGR2HSV)\n# \u5b9a\u4e49 HSV \u4e2d\u84dd\u8272\u7684\u8303\u56f4\nlower_blue = np.array([110,50,50])\nupper_blue = np.array([130,255,255])\n# \u5f97\u5230\u84dd\u8272\nmask = cv.inRange(hsv, lower_blue, upper_blue)\n# \u6309\u4f4d-and \u8499\u7248\u548c\u539f\u59cb\u56fe\u50cf\nres = cv.bitwise_and(frame,frame, mask= mask)\ncv.imshow('frame',frame)\ncv.imshow('mask',mask)\ncv.imshow('res',res)\nk = cv.waitKey(5) &amp; 0xFF\nif k == 27:\nbreak\ncv.destroyAllWindows()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_2","title":"2\u3001\u51e0\u4f55\u53d8\u6362","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21_2","title":"2.1\u3001\u7f29\u653e","text":"<pre><code>res = cv.resize(InputArray, OutputArray, Size, fx, fy, interpolation)\n</code></pre> \u53c2\u6570 \u89e3\u91ca nputArray src \u8f93\u5165\u56fe\u7247 OutputArray dst \u8f93\u51fa\u56fe\u7247 Size \u8f93\u51fa\u56fe\u7247\u5c3a\u5bf8 fx, fy \u6cbfx\u8f74\uff0cy\u8f74\u7684\u7f29\u653e\u7cfb\u6570 interpolation \u63d2\u5165\u65b9\u5f0f <p><code>interpolation</code> \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u7684\u63d2\u503c\u65b9\u6cd5\u662f  <code>cv.INTER_LINEAR</code>\uff0c\u7528\u4e8e\u6240\u6709\u8c03\u6574\u5927\u5c0f\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>import numpy as np\nimport cv2 as cv\nimg = cv.imread('messi5.jpg')\nres = cv.resize(img,None,fx=2, fy=2, interpolation = cv.INTER_CUBIC)\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22_2","title":"2.2\u3001\u65cb\u8f6c","text":"<pre><code>cv.getRotationMatrix2D()\n</code></pre> <p>\u65cb\u8f6c90\u5ea6\uff1a</p> <pre><code>img = cv.imread('messi5.jpg',0)\nrows,cols = img.shape\n# cols-1 and rows-1 are the coordinate limits.\nM = cv.getRotationMatrix2D(((cols-1)/2.0,(rows-1)/2.0),90,1)\ndst = cv.warpAffine(img,M,(cols,rows))\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_1","title":"3\u3001\u56fe\u50cf\u9608\u503c\u5316","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#31_1","title":"3.1\u3001\u81ea\u9002\u5e94\u9608\u503c\u5206\u5272","text":"<p>\u5982\u679c\u50cf\u7d20\u503c\u5c0f\u4e8e\u9608\u503c\uff0c\u5219\u5c06\u5176\u8bbe\u7f6e\u4e3a0\uff0c\u5426\u5219\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6700\u5927\u503c\u3002</p> <pre><code>ret,thresh1 = cv.threshold(img,127,255,cv.THRESH_BINARY)\n</code></pre> <ul> <li>cv.THRESH_BINARY </li> <li>cv.THRESH_BINARY_INV</li> <li>cv.THRESH_TRUNC</li> <li>cv.THRESH_TOZERO</li> <li>cv.THRESH_TOZERO_INV</li> </ul> <p>\u5982\u679c\u4e00\u4e2a\u56fe\u50cf\u5728\u4e0d\u540c\u7684\u533a\u57df\u6709\u4e0d\u540c\u7684\u7167\u660e\u6761\u4ef6\uff0c\u5168\u5c40\u4f7f\u7528\u4e00\u4e2a\u9608\u503c\u4e00\u822c\u662f\u4e0d\u53ef\u7528\u7684\uff0c\u5bf9\u540c\u4e00\u5e45\u56fe\u50cf\u7684\u4e0d\u540c\u533a\u57df\u91c7\u7528\u4e0d\u540c\u7684\u9608\u503c\uff0c\u5bf9\u4e0d\u540c\u5149\u7167\u6761\u4ef6\u4e0b\u7684\u56fe\u50cf\u53d6\u5f97\u4e86\u8f83\u597d\u7684\u6548\u679c\u3002</p> <ul> <li>cv.ADAPTIVE_THRESH_MEAN_C \u9608\u503c\u662f\u90bb\u8fd1\u533a\u57df\u7684\u5e73\u5747\u503c\u51cf\u53bb\u5e38\u6570 c</li> <li>cv.ADAPTIVE_THRESH_GAUSSIAN_C  \u9608\u503c\u662f\u90bb\u57df\u503c\u51cf\u53bb\u5e38\u6570 c \u7684\u9ad8\u65af\u52a0\u6743\u548c</li> </ul> <pre><code>import cv2 as cv\nimport numpy as np\nfrom matplotlib import pyplot as plt\nimg = cv.imread('sudoku.png',0)\nimg = cv.medianBlur(img,5)\nret,th1 = cv.threshold(img,127,255,cv.THRESH_BINARY)\nth2 = cv.adaptiveThreshold(img,255,cv.ADAPTIVE_THRESH_MEAN_C,cv.THRESH_BINARY,11,2)\nth3 = cv.adaptiveThreshold(img,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY,11,2)\ntitles = ['Original Image', 'Global Thresholding (v = 127)',\n'Adaptive Mean Thresholding', 'Adaptive Gaussian Thresholding']\nimages = [img, th1, th2, th3]\nfor i in xrange(4):\nplt.subplot(2,2,i+1),plt.imshow(images[i],'gray')\nplt.title(titles[i])\nplt.xticks([]),plt.yticks([])\nplt.show()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u6a21\u677f\u5339\u914d","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#41","title":"4.1\u3001\u5355\u76ee\u6807\u5339\u914d","text":"<p>\u6a21\u677f\u5339\u914d\u662f\u4e00\u79cd\u5728\u8f83\u5927\u56fe\u50cf\u4e2d\u641c\u7d22\u548c\u67e5\u627e\u6a21\u677f\u56fe\u50cf\u4f4d\u7f6e\u7684\u65b9\u6cd5\u3002</p> <pre><code>cv.matchTemplate()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u5927\u56fe</li> <li>\u53c2\u65702\uff1a\u5c0f\u56fe</li> <li>\u53c2\u65703\uff1a\u5339\u914d\u65b9\u6cd5</li> <li>cv.TM_CCOEFF</li> <li>cv.TM_CCOEFF_NORMED</li> <li>cv.TM_CCORR</li> <li>cv.TM_CCORR_NORMED</li> <li>cv.TM_SQDIFF</li> <li>cv.TM_SQDIFF_NORMED</li> </ul> <p>\u67e5\u627e\u6700\u5927/\u6700\u5c0f\u503c</p> <pre><code> cv.minMaxLoc()\n</code></pre> <pre><code>res = cv.matchTemplate(source, template, cv.TM_CCOEFF_NORMED)\ncv.minMaxLoc(res)\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#42","title":"4.2\u3001\u591a\u76ee\u6807\u5339\u914d","text":"<p><code>cv.minMaxLoc()</code>\u4e0d\u4f1a\u7ed9\u51fa\u6240\u6709\u4f4d\u7f6e\u3002</p> <p>\u901a\u8fc7\u9608\u503c\u5904\u7406\u591a\u4e2a\u6a21\u677f\u5339\u914d\u3002</p> <pre><code>import cv2 as cv\nimport numpy as np\nfrom matplotlib import pyplot as plt\nimg_rgb = cv.imread('mario.png')\nimg_gray = cv.cvtColor(img_rgb, cv.COLOR_BGR2GRAY)\ntemplate = cv.imread('mario_coin.png',0)\nw, h = template.shape[::-1]\nres = cv.matchTemplate(img_gray,template,cv.TM_CCOEFF_NORMED)\nloc = np.where( res &gt;= 0.8)\nfor pt in zip(*loc[::-1]):\ncv.rectangle(img_rgb, pt, (pt[0] + w, pt[1] + h), (0,0,255), 2)\ncv.imwrite('res.png',img_rgb)\n</code></pre>"}]}